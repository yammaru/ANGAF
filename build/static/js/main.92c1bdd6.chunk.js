(this["webpackJsonpdev-zeros"]=this["webpackJsonpdev-zeros"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d}));var a=n(263),r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4.5;a.a[e]({message:"".concat(e,":"),description:"".concat(t.toString()),duration:n})},c=function(e){r("error",e)},i=function(e){r("success",e)},o=function(e){r("error",e)},s=function(e){r("error",e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4.5;r("error",e,t)},d=function(e){r("warning",e)}},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(2),r=function(e,t,n){return{type:a.O,payload:{method:"POST",url:"".concat(a.Ne,"/login"),data:e,success:function(e){return i(e)},postProcessSuccess:t,postProcessError:n}}},c=function(){return localStorage.clear(),{type:a.Me}},i=function(e){if(e._payload&&"string"==typeof e._payload){var t=JSON.parse(atob(e._payload.split(".")[1])),n={id:t.user.id,profile:t.user.profile,name:t.user.name,token:e._payload,idProfile:t.user.id_profile,isLoggedIn:!0};return localStorage.setItem("USER_INFO",JSON.stringify(n)),{type:a.Nf,payload:n}}return{type:a.Nf,payload:"Error"}}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return b}));n(1);var a=n(261),r=n(586),c=n(55),i=n(175),o=n.n(i),s=n(123),l=n(0),d={searchText:"",searchedColumn:""},u=function e(t){return null===t||void 0===t?void 0:t.map((function(t){if("object"==typeof t)for(var n=0,a=Object.keys(t);n<a.length;n++){var r=a[n];if(t[r]){var c,i=/^[0-9]*$/.test(t[r]);if(i&&!Array.isArray(t[r])&&"string"==typeof t[r])t[r]=parseInt(null===(c=t[r])||void 0===c?void 0:c.toString());i&&!Array.isArray(t[r])&&"boolean"==typeof t[r]&&(t[r]=t[r]?1:0)}}return Array.isArray(t)&&t.length>0&&(t=e(t)),t}))},j={render:function(e){return{children:Object(l.jsx)("h6",{style:{fontSize:"14px"},children:e})}}},b=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,i=t.selectedKeys,o=t.confirm,d=t.clearFilters;return Object(l.jsxs)("div",{style:{padding:8},children:[Object(l.jsx)(a.a,{placeholder:"Buscar",value:i[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return m(i,o,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(l.jsxs)(r.b,{children:[Object(l.jsx)(c.a,{type:"primary",onClick:function(){return m(i,o,e)},icon:Object(l.jsx)(s.a,{}),size:"small",children:"Buscar"}),Object(l.jsx)(c.a,{onClick:function(){return p(d)},size:"small",style:{width:90},children:"Resetear"})]})]})},filterIcon:function(e){return Object(l.jsx)(s.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},render:function(t){return d.searchedColumn===e?Object(l.jsx)(o.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[d.searchText],autoEscape:!0,textToHighlight:t?t.toString():"",constructor:"",hasOwnProperty:"",isPrototypeOf:"",propertyIsEnumerable:"",toLocaleString:"",toString:"",valueOf:""}):t}}},m=function(e,t,n){var a,r;t(),a=e[0],r=n,d.searchText=a,d.searchedColumn=r},p=function(e){var t;e(),t="",d.searchText=t}},199:function(e,t,n){},2:function(e,t,n){"use strict";n.d(t,"O",(function(){return a})),n.d(t,"dd",(function(){return r})),n.d(t,"Ac",(function(){return c})),n.d(t,"Rc",(function(){return i})),n.d(t,"De",(function(){return o})),n.d(t,"xc",(function(){return s})),n.d(t,"r",(function(){return l})),n.d(t,"Gg",(function(){return d})),n.d(t,"xg",(function(){return u})),n.d(t,"We",(function(){return j})),n.d(t,"Dc",(function(){return b})),n.d(t,"G",(function(){return m})),n.d(t,"Eh",(function(){return p})),n.d(t,"Zc",(function(){return f})),n.d(t,"Nf",(function(){return O})),n.d(t,"Me",(function(){return h})),n.d(t,"gg",(function(){return x})),n.d(t,"Of",(function(){return v})),n.d(t,"Jf",(function(){return y})),n.d(t,"Ec",(function(){return g})),n.d(t,"I",(function(){return _})),n.d(t,"be",(function(){return S})),n.d(t,"Hh",(function(){return w})),n.d(t,"X",(function(){return C})),n.d(t,"Ch",(function(){return P})),n.d(t,"Nc",(function(){return I})),n.d(t,"bf",(function(){return E})),n.d(t,"e",(function(){return F})),n.d(t,"zd",(function(){return A})),n.d(t,"og",(function(){return k})),n.d(t,"ee",(function(){return T})),n.d(t,"uh",(function(){return N})),n.d(t,"Ze",(function(){return D})),n.d(t,"c",(function(){return R})),n.d(t,"xd",(function(){return L})),n.d(t,"jg",(function(){return V})),n.d(t,"rh",(function(){return q})),n.d(t,"ce",(function(){return M})),n.d(t,"lf",(function(){return U})),n.d(t,"l",(function(){return z})),n.d(t,"vg",(function(){return G})),n.d(t,"oe",(function(){return B})),n.d(t,"wh",(function(){return Y})),n.d(t,"hf",(function(){return J})),n.d(t,"h",(function(){return H})),n.d(t,"Fd",(function(){return Z})),n.d(t,"rg",(function(){return Q})),n.d(t,"le",(function(){return K})),n.d(t,"vh",(function(){return W})),n.d(t,"wf",(function(){return X})),n.d(t,"v",(function(){return $})),n.d(t,"Pd",(function(){return ee})),n.d(t,"Lg",(function(){return te})),n.d(t,"ye",(function(){return ne})),n.d(t,"zh",(function(){return ae})),n.d(t,"Bf",(function(){return re})),n.d(t,"A",(function(){return ce})),n.d(t,"Td",(function(){return ie})),n.d(t,"ch",(function(){return oe})),n.d(t,"Ah",(function(){return se})),n.d(t,"Df",(function(){return le})),n.d(t,"D",(function(){return de})),n.d(t,"Wd",(function(){return ue})),n.d(t,"mh",(function(){return je})),n.d(t,"Ee",(function(){return be})),n.d(t,"Bh",(function(){return me})),n.d(t,"af",(function(){return pe})),n.d(t,"d",(function(){return fe})),n.d(t,"yd",(function(){return Oe})),n.d(t,"mg",(function(){return he})),n.d(t,"de",(function(){return xe})),n.d(t,"sh",(function(){return ve})),n.d(t,"cf",(function(){return ye})),n.d(t,"f",(function(){return ge})),n.d(t,"Q",(function(){return _e})),n.d(t,"Ad",(function(){return Se})),n.d(t,"qg",(function(){return we})),n.d(t,"ge",(function(){return Ce})),n.d(t,"th",(function(){return Pe})),n.d(t,"if",(function(){return Ie})),n.d(t,"i",(function(){return Ee})),n.d(t,"Gd",(function(){return Fe})),n.d(t,"tg",(function(){return Ae})),n.d(t,"me",(function(){return ke})),n.d(t,"kf",(function(){return Te})),n.d(t,"k",(function(){return Ne})),n.d(t,"Hd",(function(){return De})),n.d(t,"ug",(function(){return Re})),n.d(t,"ne",(function(){return Le})),n.d(t,"rf",(function(){return Ve})),n.d(t,"s",(function(){return qe})),n.d(t,"Md",(function(){return Me})),n.d(t,"Ig",(function(){return Ue})),n.d(t,"dc",(function(){return ze})),n.d(t,"te",(function(){return Ge})),n.d(t,"sf",(function(){return Be})),n.d(t,"t",(function(){return Ye})),n.d(t,"ue",(function(){return Je})),n.d(t,"vf",(function(){return He})),n.d(t,"u",(function(){return Ze})),n.d(t,"Od",(function(){return Qe})),n.d(t,"Jg",(function(){return Ke})),n.d(t,"xe",(function(){return We})),n.d(t,"yh",(function(){return Xe})),n.d(t,"yf",(function(){return $e})),n.d(t,"x",(function(){return et})),n.d(t,"Qd",(function(){return tt})),n.d(t,"Xg",(function(){return nt})),n.d(t,"Ae",(function(){return at})),n.d(t,"Kf",(function(){return rt})),n.d(t,"Lf",(function(){return ct})),n.d(t,"zf",(function(){return it})),n.d(t,"Af",(function(){return ot})),n.d(t,"z",(function(){return st})),n.d(t,"Sd",(function(){return lt})),n.d(t,"ah",(function(){return dt})),n.d(t,"Be",(function(){return ut})),n.d(t,"Ef",(function(){return jt})),n.d(t,"E",(function(){return bt})),n.d(t,"Xd",(function(){return mt})),n.d(t,"nh",(function(){return pt})),n.d(t,"Fe",(function(){return ft})),n.d(t,"Hf",(function(){return Ot})),n.d(t,"F",(function(){return ht})),n.d(t,"Zd",(function(){return xt})),n.d(t,"Dh",(function(){return vt})),n.d(t,"Je",(function(){return yt})),n.d(t,"Ne",(function(){return gt})),n.d(t,"Oe",(function(){return _t})),n.d(t,"Qe",(function(){return St})),n.d(t,"Re",(function(){return wt})),n.d(t,"Pe",(function(){return Ct})),n.d(t,"Lh",(function(){return Pt})),n.d(t,"hg",(function(){return It})),n.d(t,"Cf",(function(){return Et})),n.d(t,"B",(function(){return Ft})),n.d(t,"g",(function(){return At})),n.d(t,"Ud",(function(){return kt})),n.d(t,"eh",(function(){return Tt})),n.d(t,"Ce",(function(){return Nt})),n.d(t,"Fc",(function(){return Dt})),n.d(t,"Xc",(function(){return Rt})),n.d(t,"Fh",(function(){return Lt})),n.d(t,"Ke",(function(){return Vt})),n.d(t,"xf",(function(){return qt})),n.d(t,"w",(function(){return Mt})),n.d(t,"ze",(function(){return Ut})),n.d(t,"mf",(function(){return zt})),n.d(t,"m",(function(){return Gt})),n.d(t,"Jd",(function(){return Bt})),n.d(t,"yg",(function(){return Yt})),n.d(t,"qe",(function(){return Jt})),n.d(t,"H",(function(){return Ht})),n.d(t,"cc",(function(){return Zt})),n.d(t,"ae",(function(){return Qt})),n.d(t,"Gh",(function(){return Kt})),n.d(t,"If",(function(){return Wt})),n.d(t,"Ed",(function(){return Xt})),n.d(t,"Le",(function(){return $t})),n.d(t,"Ug",(function(){return en})),n.d(t,"Vc",(function(){return tn})),n.d(t,"He",(function(){return nn})),n.d(t,"j",(function(){return an})),n.d(t,"jf",(function(){return rn})),n.d(t,"Tg",(function(){return cn})),n.d(t,"tf",(function(){return on})),n.d(t,"Nd",(function(){return sn})),n.d(t,"ve",(function(){return ln})),n.d(t,"Sg",(function(){return dn})),n.d(t,"pf",(function(){return un})),n.d(t,"Ld",(function(){return jn})),n.d(t,"se",(function(){return bn})),n.d(t,"Pg",(function(){return mn})),n.d(t,"ff",(function(){return pn})),n.d(t,"Dd",(function(){return fn})),n.d(t,"je",(function(){return On})),n.d(t,"Ng",(function(){return hn})),n.d(t,"df",(function(){return xn})),n.d(t,"Bd",(function(){return vn})),n.d(t,"he",(function(){return yn})),n.d(t,"Og",(function(){return gn})),n.d(t,"ef",(function(){return _n})),n.d(t,"Cd",(function(){return Sn})),n.d(t,"ie",(function(){return wn})),n.d(t,"Vg",(function(){return Cn})),n.d(t,"Ff",(function(){return Pn})),n.d(t,"Yd",(function(){return In})),n.d(t,"Ge",(function(){return En})),n.d(t,"pc",(function(){return Fn})),n.d(t,"fe",(function(){return An})),n.d(t,"Rg",(function(){return kn})),n.d(t,"oc",(function(){return Tn})),n.d(t,"Id",(function(){return Nn})),n.d(t,"pe",(function(){return Dn})),n.d(t,"Oc",(function(){return Rn})),n.d(t,"nf",(function(){return Ln})),n.d(t,"o",(function(){return Vn})),n.d(t,"Kd",(function(){return qn})),n.d(t,"Bg",(function(){return Mn})),n.d(t,"xh",(function(){return Un})),n.d(t,"re",(function(){return zn})),n.d(t,"td",(function(){return Gn})),n.d(t,"of",(function(){return Bn})),n.d(t,"p",(function(){return Yn})),n.d(t,"Cg",(function(){return Jn})),n.d(t,"Dg",(function(){return Hn})),n.d(t,"ih",(function(){return Zn})),n.d(t,"hh",(function(){return Qn})),n.d(t,"Qc",(function(){return Kn})),n.d(t,"n",(function(){return Wn})),n.d(t,"zg",(function(){return Xn})),n.d(t,"ac",(function(){return $n})),n.d(t,"wc",(function(){return ea})),n.d(t,"Gc",(function(){return ta})),n.d(t,"Gf",(function(){return na})),n.d(t,"Gb",(function(){return aa})),n.d(t,"q",(function(){return ra})),n.d(t,"Fg",(function(){return ca})),n.d(t,"Jc",(function(){return ia})),n.d(t,"uf",(function(){return oa})),n.d(t,"Jh",(function(){return sa})),n.d(t,"we",(function(){return la})),n.d(t,"Wg",(function(){return da})),n.d(t,"gf",(function(){return ua})),n.d(t,"Qg",(function(){return ja})),n.d(t,"zb",(function(){return ba})),n.d(t,"V",(function(){return ma})),n.d(t,"qf",(function(){return pa})),n.d(t,"P",(function(){return fa})),n.d(t,"oh",(function(){return Oa})),n.d(t,"Ab",(function(){return ha})),n.d(t,"qc",(function(){return xa})),n.d(t,"qh",(function(){return va})),n.d(t,"Ie",(function(){return ya})),n.d(t,"ke",(function(){return ga})),n.d(t,"Zf",(function(){return _a})),n.d(t,"Bc",(function(){return Sa})),n.d(t,"ic",(function(){return wa})),n.d(t,"Cc",(function(){return Ca})),n.d(t,"Wf",(function(){return Pa})),n.d(t,"C",(function(){return Ia})),n.d(t,"fc",(function(){return Ea})),n.d(t,"bg",(function(){return Fa})),n.d(t,"Vd",(function(){return Aa})),n.d(t,"kc",(function(){return ka})),n.d(t,"dg",(function(){return Ta})),n.d(t,"kh",(function(){return Na})),n.d(t,"mc",(function(){return Da})),n.d(t,"bb",(function(){return Ra})),n.d(t,"Xf",(function(){return La})),n.d(t,"yc",(function(){return Va})),n.d(t,"gc",(function(){return qa})),n.d(t,"Yf",(function(){return Ma})),n.d(t,"zc",(function(){return Ua})),n.d(t,"hc",(function(){return za})),n.d(t,"Vf",(function(){return Ga})),n.d(t,"y",(function(){return Ba})),n.d(t,"ec",(function(){return Ya})),n.d(t,"ag",(function(){return Ja})),n.d(t,"Rd",(function(){return Ha})),n.d(t,"jc",(function(){return Za})),n.d(t,"cg",(function(){return Qa})),n.d(t,"Yg",(function(){return Ka})),n.d(t,"lc",(function(){return Wa})),n.d(t,"Z",(function(){return Xa})),n.d(t,"ab",(function(){return $a})),n.d(t,"Ic",(function(){return er})),n.d(t,"Sc",(function(){return tr})),n.d(t,"Pc",(function(){return nr})),n.d(t,"Hc",(function(){return ar})),n.d(t,"vc",(function(){return rr})),n.d(t,"Mf",(function(){return cr})),n.d(t,"rc",(function(){return ir})),n.d(t,"Tc",(function(){return or})),n.d(t,"Mc",(function(){return sr})),n.d(t,"Uc",(function(){return lr})),n.d(t,"sc",(function(){return dr})),n.d(t,"Wc",(function(){return ur})),n.d(t,"Lc",(function(){return jr})),n.d(t,"Kc",(function(){return br})),n.d(t,"ub",(function(){return mr})),n.d(t,"dh",(function(){return pr})),n.d(t,"Tb",(function(){return fr})),n.d(t,"Yc",(function(){return Or})),n.d(t,"Cb",(function(){return hr})),n.d(t,"Ih",(function(){return xr})),n.d(t,"Xb",(function(){return vr})),n.d(t,"hb",(function(){return yr})),n.d(t,"ng",(function(){return gr})),n.d(t,"Lb",(function(){return _r})),n.d(t,"ob",(function(){return Sr})),n.d(t,"Pb",(function(){return wr})),n.d(t,"ib",(function(){return Cr})),n.d(t,"pg",(function(){return Pr})),n.d(t,"Mb",(function(){return Ir})),n.d(t,"jb",(function(){return Er})),n.d(t,"sg",(function(){return Fr})),n.d(t,"kb",(function(){return Ar})),n.d(t,"wg",(function(){return kr})),n.d(t,"Nb",(function(){return Tr})),n.d(t,"xb",(function(){return Nr})),n.d(t,"jh",(function(){return Dr})),n.d(t,"Vb",(function(){return Rr})),n.d(t,"fb",(function(){return Lr})),n.d(t,"kg",(function(){return Vr})),n.d(t,"Jb",(function(){return qr})),n.d(t,"rb",(function(){return Mr})),n.d(t,"Mg",(function(){return Ur})),n.d(t,"Rb",(function(){return zr})),n.d(t,"tb",(function(){return Gr})),n.d(t,"bh",(function(){return Br})),n.d(t,"Sb",(function(){return Yr})),n.d(t,"Qf",(function(){return Jr})),n.d(t,"gb",(function(){return Hr})),n.d(t,"lg",(function(){return Zr})),n.d(t,"Kb",(function(){return Qr})),n.d(t,"qb",(function(){return Kr})),n.d(t,"Kg",(function(){return Wr})),n.d(t,"Qb",(function(){return Xr})),n.d(t,"pb",(function(){return $r})),n.d(t,"vb",(function(){return ec})),n.d(t,"fh",(function(){return tc})),n.d(t,"Ub",(function(){return nc})),n.d(t,"sb",(function(){return ac})),n.d(t,"Zg",(function(){return rc})),n.d(t,"mb",(function(){return cc})),n.d(t,"Eg",(function(){return ic})),n.d(t,"Ob",(function(){return oc})),n.d(t,"ud",(function(){return sc})),n.d(t,"Sf",(function(){return lc})),n.d(t,"wb",(function(){return dc})),n.d(t,"gh",(function(){return uc})),n.d(t,"Ye",(function(){return jc})),n.d(t,"Xe",(function(){return bc})),n.d(t,"cd",(function(){return mc})),n.d(t,"md",(function(){return pc})),n.d(t,"ph",(function(){return fc})),n.d(t,"nd",(function(){return Oc})),n.d(t,"vd",(function(){return hc})),n.d(t,"R",(function(){return xc})),n.d(t,"bd",(function(){return vc})),n.d(t,"wd",(function(){return yc})),n.d(t,"Hb",(function(){return gc})),n.d(t,"W",(function(){return _c})),n.d(t,"nc",(function(){return Sc})),n.d(t,"Yb",(function(){return wc})),n.d(t,"yb",(function(){return Cc})),n.d(t,"lh",(function(){return Pc})),n.d(t,"Wb",(function(){return Ic})),n.d(t,"Db",(function(){return Ec})),n.d(t,"fg",(function(){return Fc})),n.d(t,"Eb",(function(){return Ac})),n.d(t,"lb",(function(){return kc})),n.d(t,"Ag",(function(){return Tc})),n.d(t,"Ve",(function(){return Nc})),n.d(t,"ld",(function(){return Dc})),n.d(t,"nb",(function(){return Rc})),n.d(t,"Hg",(function(){return Lc})),n.d(t,"Mh",(function(){return Vc})),n.d(t,"Ue",(function(){return qc})),n.d(t,"Bb",(function(){return Mc})),n.d(t,"Tf",(function(){return Uc})),n.d(t,"bc",(function(){return zc})),n.d(t,"Pf",(function(){return Gc})),n.d(t,"Uf",(function(){return Bc})),n.d(t,"Rf",(function(){return Yc})),n.d(t,"pd",(function(){return Jc})),n.d(t,"Kh",(function(){return Hc})),n.d(t,"L",(function(){return Zc})),n.d(t,"tc",(function(){return Qc})),n.d(t,"N",(function(){return Kc})),n.d(t,"S",(function(){return Wc})),n.d(t,"Y",(function(){return Xc})),n.d(t,"b",(function(){return $c})),n.d(t,"gd",(function(){return ei})),n.d(t,"kd",(function(){return ti})),n.d(t,"K",(function(){return ni})),n.d(t,"fd",(function(){return ai})),n.d(t,"eg",(function(){return ri})),n.d(t,"ed",(function(){return ci})),n.d(t,"uc",(function(){return ii})),n.d(t,"qd",(function(){return oi})),n.d(t,"jd",(function(){return si})),n.d(t,"Fb",(function(){return li})),n.d(t,"sd",(function(){return di})),n.d(t,"Se",(function(){return ui})),n.d(t,"eb",(function(){return ji})),n.d(t,"db",(function(){return bi})),n.d(t,"Zb",(function(){return mi})),n.d(t,"ig",(function(){return pi})),n.d(t,"Te",(function(){return fi})),n.d(t,"a",(function(){return Oi})),n.d(t,"ad",(function(){return hi})),n.d(t,"cb",(function(){return xi})),n.d(t,"hd",(function(){return vi})),n.d(t,"M",(function(){return yi})),n.d(t,"J",(function(){return gi})),n.d(t,"U",(function(){return _i})),n.d(t,"id",(function(){return Si})),n.d(t,"rd",(function(){return wi})),n.d(t,"T",(function(){return Ci})),n.d(t,"od",(function(){return Pi})),n.d(t,"Ib",(function(){return Ii}));var a="API",r="LIST_QUOTES",c="GET_ALL_QUOTES",i="GET_QUOTES_SEPARATED",o="RESET_QUOTE",s="GET_ALL_DIRECT_COLLECTION",l="ADD_DIRECT_COLLECTION",d="UPDATE_DIRECT_COLLECTION",u="UPDATE_CHECK_DIRECT_COLLECTION",j="SEND_DIRECT_COLLECTION",b="GET_ALL_TRUST_COLLECTION",m="ADD_TRUST_COLLECTION",p="UPDATE_TRUST_COLLECTION",f="LAST_PAYMENT_FIDUCIARY",O="SET_USER_INFO",h="RESET_USER_INFO",x="TOGGLE_LOADER",v="SET_USER_PERMISSIONS",y="SET_ALL_USERS",g="GET_AVALIABLE_USERS",_="ADD_USER",S="REMOVE_USER",w="UPDATE_USER",C="CHANGE_PASSWORD",P="UPDATE_STATE_USER",I="GET_SUBMODULES_USER",E="SET_ALL_AFFILIATED_COMPANY",F="ADD_AFFILIATED_COMPANY",A="REMOVE_AFFILIATED_COMPANY",k="UPDATE_AFFILIATED_COMPANY",T="RESET_AFFILIATED_COMPANY",N="UPDATE_STATE_AFFILIATED_COMPANY",D="SET_ALL_ACTIVITY_TYPE",R="ADD_ACTIVITY_TYPE",L="REMOVE_ACTIVITY_TYPE",V="UPDATE_ACTIVITY_TYPE",q="UPDATE_STATE_ACTIVITY_TYPE",M="RESET_ACTIVITY_TYPE",U="SET_ALL_CHANNEL",z="ADD_CHANNEL",G="UPDATE_CHANNEL",B="RESET_CHANNEL",Y="UPDATE_STATE_CHANNEL",J="SET_ALL_ATTENTION_PLACES",H="ADD_ATTENTION_PLACES",Z="REMOVE_ATTENTION_PLACES",Q="UPDATE_ATTENTION_PLACES",K="RESET_ATTENTION_PLACES",W="UPDATE_STATE_ATTENTION_PLACES",X="SET_ALL_OCCUPATION",$="ADD_OCCUPATION",ee="REMOVE_OCCUPATION",te="UPDATE_OCCUPATION",ne="RESET_OCCUPATION",ae="UPDATE_STATE_OCCUPATION",re="SET_ALL_PROFILE",ce="ADD_PROFILE",ie="REMOVE_PROFILE",oe="UPDATE_PROFILE",se="UPDATE_STATE_PROFILE",le="SET_ALL_REGISTER_TYPE",de="ADD_REGISTER_TYPE",ue="REMOVE_REGISTER_TYPE",je="UPDATE_REGISTER_TYPE",be="RESET_REGISTER_TYPE",me="UPDATE_STATE_REGISTER_TYPE",pe="SET_ALL_ADVERTISING_IMAGE",fe="ADD_ADVERTISING_IMAGE",Oe="REMOVE_ADVERTISING_IMAGE",he="UPDATE_ADVERTISING_IMAGE",xe="RESET_ADVERTISING_IMAGE",ve="UPDATE_STATE_ADVERTISING_IMAGE",ye="SET_ALL_ASSESSOR",ge="ADD_ASSESSOR",_e="ASSESOR_REPORT",Se="REMOVE_ASSESSOR",we="UPDATE_ASSESSOR",Ce="RESET_ASSESSOR",Pe="UPDATE_STATE_ADVISER",Ie="SET_ALL_AUDITS_TYPE",Ee="ADD_AUDITS_TYPE",Fe="REMOVE_AUDITS_TYPE",Ae="UPDATE_AUDITS_TYPE",ke="RESET_AUDITS_TYPE",Te="SET_ALL_CAUGHT_ERROR",Ne="ADD_CAUGHT_ERROR",De="REMOVE_CAUGHT_ERROR",Re="UPDATE_CAUGHT_ERROR",Le="RESET_CAUGHT_ERROR",Ve="SET_ALL_GENERAL_ACTIVITY",qe="ADD_GENERAL_ACTIVITY",Me="REMOVE_GENERAL_ACTIVITY",Ue="UPDATE_GENERAL_ACTIVITY",ze="END_GENERAL_ACTIVITY",Ge="RESET_GENERAL_ACTIVITY",Be="SET_ALL_GENERAL_SETTING",Ye="ADD_GENERAL_SETTING",Je="RESET_GENERAL_SETTING",He="SET_ALL_SUBMODULE",Ze="ADD_SUBMODULE",Qe="REMOVE_SUBMODULE",Ke="UPDATE_SUBMODULE",We="RESET_SUBMODULE",Xe="UPDATE_STATE_SUBMODULE",$e="SET_ALL_PERMISSION",et="ADD_PERMISSION",tt="REMOVE_PERMISSION",nt="UPDATE_PERMISSION",at="RESET_PERMISSION",rt="SET_PERMISSION_BY_PROFILE",ct="SET_SAVE_PERMISSIONS_BY_PROFILE",it="SET_ALL_PRICES_RANGE",ot="SET_ALL_PRICES_RANGE_ACTIVATED",st="ADD_PRICES_RANGE",lt="REMOVE_PRICES_RANGE",dt="UPDATE_PRICES_RANGE",ut="RESET_PRICES_RANGE",jt="SET_ALL_RESOURCE",bt="ADD_RESOURCE",mt="REMOVE_RESOURCE",pt="UPDATE_RESOURCE",ft="RESET_RESOURCE",Ot="SET_ALL_SYSTEM_AUDIT",ht="ADD_SYSTEM_AUDIT",xt="REMOVE_SYSTEM_AUDIT",vt="UPDATE_SYSTEM_AUDIT",yt="RESET_SYSTEM_AUDIT",gt="/api",_t="http://qagpiapi.devzeros.com",St=_t+"/storage/Formato_Codigos_Fiduciarios.xls",wt=_t+"/storage/Formato_Abono_Fiducia.xls",Ct=_t+gt+"/try",Pt=".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.pdf,.xls,.xlsx",It="{ 'Authorization':Storage.getToken() }",Et="SET_ALL_PROJECTS",Ft="ADD_PROJECT",At="ADD_ATTACHMENT",kt="REMOVE_PROJECT",Tt="UPDATE_PROJECT",Nt="RESET_PROJECT",Dt="GET_BY_PROJECTS",Rt="GET_UNIT_BY_PROJECT_ID",Lt="UPDATE_UNIT_BY_PROJECT_ID",Vt="RESET_UNIT_BY_PROJECT_ID",qt="SET_ALL_PAYMENT_RELATIONSHIP_SETTING",Mt="ADD_PAYMENT_RELATIONSHIP_SETTING",Ut="RESET_PAYMENT_RELATIONSHIP_SETTING",zt="SET_ALL_CONTROL_POWERS",Gt="ADD_CONTROL_POWER",Bt="REMOVE_CONTROL_POWER",Yt="UPDATE_CONTROL_POWER",Jt="RESET_CONTROL_POWER",Ht="ADD_UNIT_TYPE",Zt="DUPLICATE_UNIT_TYPE",Qt="REMOVE_UNIT_TYPE",Kt="UPDATE_UNIT_TYPE",Wt="SET_ALL_UNIT_TYPE",Xt="REMOVE_ATTACHMENT",$t="RESET_UNIT_TYPE",en="UPDATE_OR_CREATE_SALES_PARAMETERS",tn="GET_SALE_PARAMETER_BY_ID",nn="RESET_SALE_PARAMETER",an="ADD_BUILDER",rn="SET_ALL_BUILDER",cn="UPDATE_OR_CREATE_INCREASE_POLICY",on="SET_ALL_INCREASE_POLICY",sn="REMOVE_INCREASE_POLICY",ln="RESET_INCREASE_POLICY",dn="UPDATE_OR_CREATE_DISCOUNT_POLICY",un="SET_ALL_DISCOUNT_POLICY",jn="REMOVE_DISCOUNT_POLICY",bn="RESET_DISCOUNT_POLICY",mn="UPDATE_OR_CREATE_ASSIGNED_TECHNICIAN",pn="SET_ALL_ASSIGNED_TECHNICIAN",fn="REMOVE_ASSIGNED_TECHNICIAN",On="RESET_ASSIGNED_TECHNICIAN",hn="UPDATE_OR_CREATE_ASSIGNED_COUNTERS",xn="SET_ALL_ASSIGNED_COUNTERS",vn="REMOVE_ASSIGNED_COUNTERS",yn="RESET_ASSIGNED_COUNTERS",gn="UPDATE_OR_CREATE_ASSIGNED_SITE_DIRECTORS",_n="SET_ALL_ASSIGNED_SITE_DIRECTORS",Sn="REMOVE_ASSIGNED_SITE_DIRECTORS",wn="RESET_ASSIGNED_SITE_DIRECTORS",Cn="UPDATE_OR_CREATE_SALE_LEGALIZATION",Pn="SET_ALL_SALE_LEGALIZATION",In="REMOVE_SALE_LEGALIZATION",En="RESET_SALE_LEGALIZATION",Fn="FETCH_ALL_POLICY_TO_COMPLY",An="RESET_ALL_POLICY_TO_COMPLY",kn="UPDATE_OR_CREATE_COMMISSION_PARAMETER",Tn="FETCH_ALL_COMMISSION_PARAMETER",Nn="REMOVE_COMMISSION_PARAMETER",Dn="RESET_COMMISSION_PARAMETER",Rn="GET_OPTION_SELECT",Ln="SET_ALL_CUSTOMER",Vn="ADD_CUSTOMER",qn="REMOVE_CUSTOMER",Mn="UPDATE_CUSTOMER",Un="UPDATE_STATE_CUSTOMER",zn="RESET_CUSTOMER",Gn="REASSIGNMENT_ASESSOR_CUSTOMER",Bn="SET_ALL_CUSTOMER_ACTIVITY",Yn="ADD_CUSTOMER_ACTIVITY",Jn="UPDATE_CUSTOMER_ACTIVITY",Hn="UPDATE_CUSTOMER_INTEREST",Zn="UPDATE_QUOTE_SEPARATION",Qn="UPDATE_QUOTE_LEGALIZATION_SALE",Kn="GET_QUOTATION_BY_ID",Wn="ADD_COUPON",Xn="UPDATE_COUPON",$n="DOWNLOAD_COUPON",ea="GET_ALL_COUPON",ta="GET_CODE_COUPON",na="SET_ALL_SALE_MADE",aa="DATA_SALE_UPDATE",ra="ADD_DEED",ca="UPDATE_DEED",ia="GET_DEED_BY_ID",oa="SET_ALL_LEGALIZE_DOCUMENTS",sa="UPLOAD_LEGALIZE_DOCUMENT",la="RESET_LEGALIZE_DOCUMENTS",da="UPDATE_PERCENTAGE_LEGALIZED_DOCUMENTS",ua="SET_ALL_ASSIGN_RESPONSIBLE",ja="UPDATE_OR_CREATE_ASSIGN_RESPOSIBLE",ba="CREATE_REMAINING_PAYMENT_METHOD",ma="CHANGE_CUSTOMER",pa="SET_ALL_EXCHANGES",fa="APPLY_EXCHANGE",Oa="UPDATE_SALE",ha="CREATE_SALE_WITHDRAWAL",xa="FETCH_SALE_WITHDRAWAL",va="UPDATE_SALE_WITHDRAWAL",ya="RESET_SALE_WITHDRAWAL",ga="RESET_ASSIGN_RESPONSIBLE",_a="START_FETCHING_ALL_REFORM_REQUEST",Sa="GET_ALL_REFORM_REQUEST",wa="ERROR_FETCHING_ALL_REFORM_REQUEST",Ca="GET_ALL_SALES_WHIT_REFORM_REQUEST",Pa="START_ADD_REFORM_REQUEST",Ia="ADD_REFORM_REQUEST",Ea="ERROR_ADD_REFORM_REQUEST",Fa="START_REMOVE_REFORM_REQUEST",Aa="REMOVE_REFORM_REQUEST",ka="ERROR_REMOVE_REFORM_REQUEST",Ta="START_UPDATE_REFORM_REQUEST",Na="UPDATE_REFORM_REQUEST",Da="ERROR_UPDATE_REFORM_REQUEST",Ra="CLEAR_STATE_REFORM_REQUEST",La="START_FETCHING_ALL_POS_SALE",Va="GET_ALL_POS_SALE",qa="ERROR_FETCHING_ALL_POS_SALE",Ma="START_FETCHING_ALL_POS_SALE_BY_SALE_ID",Ua="GET_ALL_POS_SALE_BY_SALE_ID",za="ERROR_FETCHING_ALL_POS_SALE_BY_SALE_ID",Ga="START_ADD_POS_SALE",Ba="ADD_POS_SALE",Ya="ERROR_ADD_POS_SALE",Ja="START_REMOVE_POS_SALE",Ha="REMOVE_POS_SALE",Za="ERROR_REMOVE_POS_SALE",Qa="START_UPDATE_POS_SALE",Ka="UPDATE_POS_SALE",Wa="ERROR_UPDATE_POS_SALE",Xa="CLEAR_ALL_STATE_POS_SALE",$a="CLEAR_STATE_POS_SALE_BY_SALE",er="GET_COMPETING_PROJECTS",tr="GET_REPORT_COMPETING",nr="GET_POTENTIAL_CUSTOMERS",ar="GET_COMISSIONS",rr="GET_ACCOUNT_STATUS",cr="SET_STATES_PROJECTS",ir={formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},or="GET_REQUEST_REFORMS_REPORT",sr="GET_GENERAL_COMMERCIAL_MANAGEMENT_REPORT",lr="GET_SALES_REPORT",dr=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),ur="GET_STATUS_REQUEST_REFORMS",jr="GET_EXCEL_REQUEST_REFORMS_REPORT",br="GET_EXCEL_POTENTIAL_CLIENTS_DATABASE",mr=7,pr=6,fr=5,Or=4,hr=11,xr=12,vr=10,yr=14,gr=15,_r=16,Sr=18,wr=20,Cr=22,Pr=23,Ir=24,Er=26,Fr=27,Ar=30,kr=31,Tr=32,Nr=34,Dr=35,Rr=36,Lr=38,Vr=39,qr=40,Mr=42,Ur=43,zr=44,Gr=46,Br=47,Yr=48,Jr=49,Hr=50,Zr=51,Qr=52,Kr=54,Wr=55,Xr=56,$r=66,ec=70,tc=71,nc=72,ac=74,rc=75,cc=78,ic=79,oc=80,sc=81,lc=82,dc=92,uc=91,jc=3,bc=90,mc=88,pc=87,fc=104,Oc=101,hc=98,xc=99,vc=97,yc=100,gc=96,_c=95,Sc=94,wc=105,Cc=111,Pc=110,Ic=112,Ec=109,Fc=108,Ac=107,kc=118,Tc=119,Nc=122,Dc=121,Rc=128,Lc=129,Vc=131,qc=132,Mc=134,Uc=137,zc=138,Gc=143,Bc=146,Yc=2,Jc=8,Hc=9,Zc=10,Qc=11,Kc=12,Wc=13,Xc=14,$c=16,ei=17,ti=18,ni=19,ai=20,ri=21,ci=22,ii=23,oi=24,si=25,li=27,di=28,ui=30,ji=33,bi=34,mi=34,pi=35,fi=37,Oi=42,hi=43,xi=44,vi=45,yi=48,gi=49,_i=50,Si=51,wi=52,Ci=53,Pi=54,Ii="/"},249:function(e,t,n){},296:function(e,t,n){},307:function(e,t,n){},325:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var a=n(3),r=n(187),c=n.n(r),i=n(2),o=n(121),s=n(10),l=n(15),d=function(t){var n=t.dispatch,a=t.getState;return function(t){return function(r){if(r.type!==i.O)return t(r);var s=i.Oe,d=a().user.token;if(d){c.a.defaults.headers.common.Authorization="Bearer ".concat(d),c.a.defaults.headers.common["X-Forwarded-For"]=localStorage.IP;var j=localStorage.clientLocation;c.a.defaults.headers.common.ClientLocation=e.from(j).toString("base64")}var b=r.payload,m=b.url,p=b.method,f=b.success,O=b.data,h=b.postProcessSuccess,x=b.postProcessError;p?c()({method:p,url:s+m,data:O||null}).then((function(e){if(!u(e.data,m)){var t;if(e.data&&e.data._payload&&Array.isArray(e.data._payload))e.data._payload=Object(l.a)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t._payload);f&&n(f(e.data)),h&&h(e.data)}})).catch((function(e){var t;!function(e,t){if("undefined"!==typeof e.response){if(e.response.hasOwnProperty("data"))"Token has expired"===e.response.data.message&&t(Object(o.b)())}}(e,n),u(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data,m)||(e.response?(e.response&&403===e.response.status&&n(Object(o.b)()),e.response.data.error&&x&&x(e.response.data)):console.warn(e))})):n(f())}}};function u(e,t){if(e&&(400===(null===e||void 0===e?void 0:e.statusCode)||422===(null===e||void 0===e?void 0:e.statusCode))||400===(null===e||void 0===e?void 0:e.code)||422===(null===e||void 0===e?void 0:e.code)){var n,r=null===e||void 0===e?void 0:e.messages,c="  Mensajes de validaci\xf3n:   ";if(r)for(var i=0,o=Object.entries(r);i<o.length;i++){var l=Object(a.a)(o[i],2),d=l[0],u=l[1];c="\n\t\t\t  \n\t\t\t  ".concat(d," - ").concat(u,"  \n\t\t\t"),Object(s.c)(""+c)}if(null===e||void 0===e?void 0:e.message)Object(s.c)(null!==(n=null===e||void 0===e?void 0:e.message)&&void 0!==n?n:"Error",.1);return!0}var j;if(e&&(null===e||void 0===e?void 0:e.error)&&200!==(null===e||void 0===e?void 0:e.code)&&200!==(null===e||void 0===e?void 0:e.statusCode))Object(s.g)(null!==(j=null===e||void 0===e?void 0:e.message)&&void 0!==j?j:"posible error Y/o la consulta no retorno datos en la ruta "+t);else if(e&&"Error"===e.exception){var b;Object(s.c)(null!==(b=null===e||void 0===e?void 0:e.message)&&void 0!==b?b:"Error",.1)}}}).call(this,n(298).Buffer)},350:function(e,t,n){},351:function(e,t,n){},352:function(e,t,n){},354:function(e,t,n){},419:function(e,t,n){},421:function(e,t,n){},423:function(e,t,n){},552:function(e,t,n){},553:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},560:function(e,t,n){},565:function(e,t,n){},584:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(47),i=n.n(c),o=n(38),s=n(9),l=(n(264),n(348),n(349),n(317));window.jQuery=window.$=l;n(350),n(351),n(352);var d=n(56),u=(n(353),n(260)),j=n(7),b=n(4),m=n.n(b),p=n(11),f=n(3),O=(n(354),n(201)),h=n(0),x=function(){return Object(h.jsx)(O.a,{style:{paddingLeft:"46%"},spinning:!0,size:"large"})},v=n.p+"static/media/logo.607c98a6.png",y=n(607),g=n(608),_=n(261),S=n(55),w=n(617),C=n(121),P=n(10),I={labelCol:{span:5,offset:2},wrapperCol:{span:5,offset:2}},E={wrapperCol:{offset:2,span:5}},F=Object(s.b)(null,(function(e){return{dispatchLoginAction:function(t,n,a,r,c){return e(Object(C.a)({email:t,password:n,ip:a},r,c))}}}))((function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(""),u=Object(f.a)(d,2),b=u[0],O=u[1],F=Object(a.useState)("127.0.0.1"),A=Object(f.a)(F,2),k=A[0],T=A[1],N=Object(s.d)(),D=Object(a.useState)(v),R=Object(f.a)(D,1)[0],L=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ipgeolocation.abstractapi.com/v1/?api_key=4c59cd6f8ef64f20b6d264097778308b").then((function(e){return e.json()}));case 2:(t=e.sent)&&(T(null===t||void 0===t?void 0:t.ip_address),localStorage.IP=null===t||void 0===t?void 0:t.ip_address,localStorage.clientLocation=JSON.stringify(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:case"end":return e.stop()}}),e)}))),[]);return Object(h.jsx)("div",{className:"contenedor-1",children:Object(h.jsxs)("div",{className:"divForm",children:[Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)(y.a,{src:R,preview:!1})}),Object(h.jsxs)(g.a,Object(j.a)(Object(j.a)({onSubmitCapture:function(e){r(!0),e.preventDefault(),""!==o||""!==b.length?b.length>=7?N(Object(C.a)({email:o,password:b,ip:k},function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!e.sent.error){e.next=6;break}return r(!1),e.abrupt("return");case 6:Object(P.f)("Bienvenido"),r(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(Object(P.g)("\xa1UPS!,Ha cometido un error verifique contrase\xf1a"),r(!1)):(Object(P.g)("\xa1UPS!, est\xe1n vac\xedos"),r(!1))},validateMessages:{required:"${placeholder} es requerido",types:{email:"${placeholder} no es un correo v\xe1lido",password:"${placeholder} debe ser un n\xfamero"}},className:"form"},I),{},{name:"login",layout:"vertical",children:[Object(h.jsx)(g.a.Item,{rules:[{required:!0}],children:Object(h.jsx)(_.a,{defaultValue:"",placeholder:"Email",name:"email",valuePropName:o,onChange:function(e){return l(e.target.value)}})}),Object(h.jsx)(g.a.Item,{rules:[{required:!0}],children:Object(h.jsx)(_.a.Password,{defaultValue:"",placeholder:"Contrase\xf1a",name:"password",valuePropName:b,autocomplete:"on",onChange:function(e){return O(e.target.value)}})}),Object(h.jsx)(g.a.Item,Object(j.a)(Object(j.a)({},E),{},{children:Object(h.jsx)(S.a,{disabled:n,className:"btnLogin",htmlType:"submit",children:"Ingresar"})})),Object(h.jsx)(g.a.Item,{children:n?Object(h.jsx)(w.a,{bordered:!1,children:Object(h.jsx)(x,{})}):Object(h.jsx)(h.Fragment,{})})]}))]})})})),A=function(){return Object(h.jsx)(F,{})},k=n(601),T=(n(419),n(89)),N=n(60),D=n(611),R=n(2),L=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/advertising-image"),success:function(e){return q(e)}}}},V=function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/advertising-image/").concat(e),success:function(){return z(e)},postProcessSuccess:t,postProcessError:n}}},q=function(e){return{type:R.af,payload:e}},M=function(e){return{type:R.d,payload:e}},U=function(e,t){return{type:R.mg,payload:{id:e,data:t}}},z=function(e){return{type:R.yd,payload:e}},G=function(e){return{type:R.sh,payload:{id:e}}},B=function(){var e,t=Object(s.d)(),n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.advertisingImage}));return Object(a.useEffect)((function(){return t(L())}),[]),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:14,offset:5,children:Object(h.jsx)(D.a,{dotPosition:"bottom",autoplay:!0,children:!Array.isArray(n)&&(null===n||void 0===n||null===(e=n._payload)||void 0===e?void 0:e.filter((function(e){return 0!==e.state})).map((function(e){var t;return Object(h.jsx)(y.a,{width:"100%",height:280,src:null===e||void 0===e||null===(t=e.multimedia)||void 0===t?void 0:t.path,preview:!0})})))})})})},Y=n(130),J=n(600),H=n(329),Z=n(319),Q=n(603),K=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/quotation"),headers:R.hg,success:function(e){return ae(e)}}}},W=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/dashboard/get_quotations_separated"),headers:R.hg,success:function(e){return ae(e)}}}},X=function(e,t){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/salesmade/download-sale/").concat(e),postProcessSuccess:t}}},$=function(e,t){return{type:R.ih,payload:{id:e,data:t}}},ee=function(e){return{type:R.hh,payload:{data:e}}},te=function(e){return{type:R.dd,payload:e}},ne=function(e){return{type:R.Qc,payload:e}},ae=function(e){return{type:R.Ac,payload:e}},re=function(){return{type:R.De,payload:[]}},ce=n(15),ie=function(){var e=Object(s.e)((function(e){return e.quotation._payload})),t=Object(s.d)();function n(e){t(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/dashboard/update_quotations_separated"),data:e,success:function(e){return ae(e)},postProcessSuccess:t,postProcessError:n}}}({id:e},function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:200===n.code&&Object(P.f)("la cotizacion esta disponible"),t(W());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}Object(a.useEffect)((function(){t(W())}),[]);var r=[{title:"#",width:100,dataIndex:"id",key:"id",defaultSortOrder:"asc",fixed:"left",render:function(t,n){var a;return(null===(a=Object(ce.a)(e))||void 0===a?void 0:a.indexOf(n))+1}},Object(j.a)({title:"Cotizaci\xf3n#",width:140,dataIndex:"code",key:"cotizacion"},Object(ce.b)("code")),Object(j.a)({title:"Cliente",dataIndex:"customer_name",key:"cliente",width:150},Object(ce.b)("customer_name")),Object(j.a)({title:"Asesor",dataIndex:"advisor_name",key:"asesor",width:150},Object(ce.b)("advisor_name")),Object(j.a)({title:"Proyecto",dataIndex:"project_name",key:"proyecto",width:150},Object(ce.b)("project_name")),Object(j.a)({title:"Unidad",dataIndex:"unit_label",key:"unidad",width:150},Object(ce.b)("unit_label")),Object(j.a)({title:"Separada Hasta",dataIndex:"separation_date_up_to",key:"separadaHasta",width:150},Object(ce.b)("separation_date_up_to")),Object(j.a)(Object(j.a)({title:"D\xedas Faltantes",dataIndex:"days_remaining",key:"diasFaltantes",align:"center",width:150,fixed:"right"},Object(ce.b)("days_remaining")),{},{render:function(e,t){return(n=t.days_remaining)>=0?Object(h.jsxs)(H.a,{color:"green",children:[" ",n," "]}):Object(h.jsxs)(H.a,{color:"red",children:[" ",n," "]});var n}}),{title:"Estado Unidad",dataIndex:"state_quotation",fixed:"right",key:"estadoUnidad",align:"center",width:150,render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Z.a,{content:Object(h.jsx)(S.a,{onClick:function(){return n(t.id)},children:"Cambiar a disponible"}),trigger:"click",children:Object(h.jsxs)(H.a,{color:"lime",children:[" ",t.state_quotation," "]})})})}}];return Object(h.jsx)(Q.a,{size:"small",columns:r,dataSource:Object(ce.a)(e),scroll:{x:600}})},oe=(n(421),n(28)),se=n.n(oe),le=n(333),de=n(66),ue=n(612),je=n(165),be=function(e){return{type:R.p,payload:e}},me=function(e,t){return{type:R.Cg,payload:{activityId:e,data:t}}},pe=function(e){var t=Object(s.d)(),n=g.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(a.useState)(""),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(se()().format("YYYY-MM-DD")),u=Object(f.a)(d,1)[0],j=Object(a.useState)(""),b=Object(f.a)(j,1)[0],m=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Reportar Actividad"}),p=Object(a.useState)(!1),O=Object(f.a)(p,2),x=O[0],v=O[1],y=_.a.TextArea,w={commentary:o,done:u},C=function(){return v(!1)},I=function(){e.myClick()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:m,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){return v(!0)},icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{title:"Actualizar perfil",centered:!0,visible:x,footer:!1,width:500,onCancel:C,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},form:r,validateMessages:{required:"${label} es requerido"},onFinish:function(){var n,a,r,c;t((n=e.id,a=w,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/activity/").concat(n),data:a,success:function(e,t){return me(e,t)},postProcessSuccess:r,postProcessError:c}})),I(),C(),Object(P.f)("Ha sido agregado con \xe9xito"),I()},children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:16,lg:16,xl:16,children:Object(h.jsx)(g.a.Item,{label:"Comentario",rules:[{required:!0}],children:Object(h.jsx)(y,{value:o,onChange:function(e){return l(e.target.value)},rows:3})})})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"postponedByCustomer",onChange:function(e){return b(e.target.checked)},children:"Aplazada por el cliente"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},fe=function(e){var t=[{title:"#",width:40,dataIndex:"id",key:"id",sorter:function(e,t){return e.id-t.id}},Object(j.a)({title:"Usuario",width:100,dataIndex:"creatorUser",key:"creatorUser"},Object(ce.b)("creatorUser")),{title:"Fecha Programada",dataIndex:"scheduleDate",key:"scheduleDate",width:150,sorter:function(e,t){return e.scheduleDate-t.scheduleDate}},Object(j.a)({title:"Tipo de Actividad",dataIndex:"typeActivity",key:"typeActivity",width:150},Object(ce.b)("typeActivity")),Object(j.a)({title:"Tipo de Gestion",dataIndex:"managementType",key:"managementType",width:150},Object(ce.b)("managementType")),Object(j.a)({title:"Actividad",dataIndex:"activity",key:"activity",width:150},Object(ce.b)("activity")),{title:"Realizada",dataIndex:"activityPerformed",key:"activityPerformed",width:150,render:function(e,t){return n(t.id,t.activityPerformed)}},Object(j.a)(Object(j.a)({title:"Comentario",dataIndex:"commentary",key:"commentary",width:150},Object(ce.b)("commentary")),{},{render:function(e,t){return null!=t.commentary?t.commentary:null}})],n=function(t,n){return Object(h.jsx)(h.Fragment,{children:null==n?Object(h.jsx)(pe,{myClick:e.myOnClick,id:t,activityPerformed:n}):n})};return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},children:Object(h.jsx)(Q.a,{columns:t,dataSource:Object(ce.a)(null===e||void 0===e?void 0:e.data),size:"small",scroll:{x:e.x,y:e.y},bordered:!0})})})},Oe=function(){var e=Object(a.useState)(),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(s.d)();return Object(a.useEffect)((function(){var e,t;c((e=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,r(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/dashboard/activities"),postProcessSuccess:e,postProcessError:t}}))}),[]),Object(h.jsx)(fe,{data:n,y:400})},he=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),xe=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){var t,n;e((t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,c(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){},{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/dashboard/CollectionManagement"),postProcessSuccess:t,postProcessError:n}}))}),[]);var i=[{title:"#",width:100,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)({title:"Asesor",width:100,dataIndex:"adviser",key:"adviser"},Object(ce.b)("adviser")),Object(j.a)({title:"Proyecto",dataIndex:"project",key:"project",width:150},Object(ce.b)("project")),Object(j.a)({title:"Cliente",dataIndex:"customer",key:"customer",width:150},Object(ce.b)("customer")),{title:"Estado",dataIndex:"state",key:"state",width:100,render:function(e,t){return function(e){return parseFloat(e.totalCollection)<48?Object(h.jsx)(H.a,{color:"red",children:" CRITICO "}):parseFloat(e.totalCollection)>48&&parseFloat(e.totalCollection)<80?Object(h.jsx)(H.a,{color:"blue",children:" REGULAR "}):parseFloat(e.totalCollection)>80?Object(h.jsx)(H.a,{color:"green",children:" NORMAL "}):void 0}(t)}},Object(j.a)({title:"% Recaudo Total",dataIndex:"totalCollection",key:"totalCollection",width:120},Object(ce.b)("totalCollection")),Object(j.a)(Object(j.a)({title:"Saldo Pendiente a la Fecha",dataIndex:"balanceOutstandingDate",key:"balanceOutstandingDate",width:170},Object(ce.b)("balanceOutstandingDate")),{},{render:function(e){return he.format(e)}}),Object(j.a)({title:"# Gestiones de Recaudo",dataIndex:"collectionManagement",key:"collectionManagement",width:140},Object(ce.b)("collectionManagement"))];return Object(h.jsx)(Q.a,{columns:i,dataSource:r,y:400})},ve=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){var t,n;e((t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,c(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/dashboard/legalization"),postProcessSuccess:t,postProcessError:n}}))}),[]);var i=[{title:"#",width:100,dataIndex:"id",align:"center",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)({title:"Asesor",width:100,dataIndex:"asesor",align:"center",key:"asesor"},Object(ce.b)("asesor")),Object(j.a)({title:"Proyecto",dataIndex:"proyecto",key:"proyecto",align:"center",width:100},Object(ce.b)("proyecto")),Object(j.a)({title:"Cliente",dataIndex:"cliente",align:"center",key:"clinte",width:140},Object(ce.b)("cliente")),Object(j.a)({title:"# D\xedas sin Legalizar",dataIndex:"diasSinLegalizar",key:"diasSinLegalizar",align:"center",width:100},Object(ce.b)("diasSinLegalizar")),Object(j.a)({title:"% Legalizaci\xf3n",dataIndex:"legalizacion",key:"legalizacion",align:"center",width:120},Object(ce.b)("legalizacion")),Object(j.a)({title:"# Documento Faltante",dataIndex:"documentoFaltante",key:"documentoFaltante",align:"center",width:100},Object(ce.b)("docummentoFaltante"))];return Object(h.jsx)(Q.a,{columns:i,dataSource:r,y:400})},ye=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/general-activity"),success:function(e){return Se(e)}}}},ge=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/general-activity/").concat(e),data:t,success:function(t){return Pe(e,t)},postProcessSuccess:n,postProcessError:a}}},_e=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/general-activity/end-activity/").concat(e),data:t,success:function(t){return Ce(e,t)},postProcessSuccess:n,postProcessError:a}}},Se=function(e){return{type:R.rf,payload:e}},we=function(e){return{type:R.s,payload:e}},Ce=function(e,t){return{type:R.dc,payload:t}},Pe=function(e,t){return{type:R.Ig,payload:t}},Ie=function(e){return{type:R.Md,payload:e}},Ee=function(){var e=Object(s.e)((function(e){return e.generalActivity})),t=Object(s.d)();Object(a.useEffect)((function(){t(ye())}),[]);var n=[{title:"#",width:50,dataIndex:"id",key:"id",defaultSortOrder:"descend",fixed:"left",sorter:function(e,t){return e.id-t.id}},Object(j.a)({title:"Usuario Creador",width:100,dataIndex:"creator",key:"creator"},Object(ce.b)("creator")),Object(j.a)({title:"Programada",dataIndex:"scheduled",key:"scheduled",width:80},Object(ce.b)("scheduled")),Object(j.a)({title:"Usuario",dataIndex:"executing",key:"executing",width:100},Object(ce.b)("executing")),{title:"Dias de Vencimiento",dataIndex:"activity_status",key:"activity_status",width:100,align:"center",fixed:"right",render:function(e,t){return function(e){return e.done?Object(h.jsxs)(H.a,{color:"blue",children:[" ",e.activity_status," "]}):e.is_overdue?Object(h.jsxs)(H.a,{color:"red",children:[" ",e.activity_status," "]}):Object(h.jsxs)(H.a,{color:"green",children:[" ",e.activity_status," "]})}(t)}}];return Object(h.jsx)(Q.a,{size:"small",columns:n,dataSource:e,scroll:{x:400}})},Fe=function(e){return!!localStorage.getItem("USER_PERMISSIONS")&&!!JSON.parse(localStorage.getItem("USER_PERMISSIONS")).find((function(t){return parseInt(t)===parseInt(e)}))},Ae=function(e){if(localStorage.getItem("USER_MODULES")){var t=!1;return JSON.parse(localStorage.getItem("USER_MODULES")).forEach((function(n){n.sub_modules.find((function(t){return parseInt(t.id)===parseInt(e)}))&&(t=!0)})),t}},ke=function(){var e=Object(s.d)();Object(a.useEffect)((function(){e({type:R.O,payload:{method:null,success:function(){return re()}}})}),[e]);var t=Y.a.TabPane;return J.a,Object(h.jsxs)(Y.a,{defaultActiveKey:"1",children:[Fe(R.Ye)?Object(h.jsx)(t,{tab:Object(h.jsx)("span",{children:"Unidades Separadas "}),children:Object(h.jsx)(ie,{})},"1"):null,Fe(R.Sf)?Object(h.jsx)(t,{tab:Object(h.jsx)("span",{children:"Seguimiento Clientes"}),children:Object(h.jsx)(Oe,{})},"2"):null,Fe(R.Pf)?Object(h.jsx)(t,{tab:Object(h.jsx)("span",{children:"Seguimiento de Actividades Generales"}),children:Object(h.jsx)(Ee,{})},"3"):null,Fe(R.Rf)?Object(h.jsx)(t,{tab:Object(h.jsx)("span",{children:"Gesti\xf3n de Recaudos"}),children:Object(h.jsx)(xe,{})},"4"):null,Fe(R.Uf)?Object(h.jsx)(t,{tab:Object(h.jsx)("span",{children:"Estado de Legalizaci\xf3n"}),children:Object(h.jsx)(ve,{})},"5"):null]})},Te=n(610),Ne=n(620),De=n(331),Re=n(263),Le=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/occupation"),success:function(e){return Ve(e)}}}},Ve=function(e){return{type:R.wf,payload:e}},qe=function(e){return{type:R.v,payload:e}},Me=function(e,t){return{type:R.Lg,payload:{id:e,data:t}}},Ue=function(e){return{type:R.zh,payload:{occupationid:e}}},ze=function(e){return{type:R.Pd,payload:e}},Ge=Object(s.b)(null,(function(e){return{dispatchCreateOccupationAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/occupation"),data:e,success:function(e){return qe(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllOccupationAction:function(){return e(Le())}}}))((function(e){var t=e.dispatchCreateOccupationAction,n=e.dispatchFetchAllOccupationAction,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useState)(""),o=Object(f.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(!1),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(a.useState)(!1),x=Object(f.a)(O,2),v=x[0],y=x[1],w=[],C=function(){y(!1)},P={name:s,state:j},I=function(){c.resetFields()},E=function(e){A("success",e),C(),I(),n()},F=function(e){for(var t in e)w.push("".concat(e[t][0]));A("error",w),C(),I()},A=function(e,t){Re.a[e]({message:"".concat(e,":"),description:"".concat(t.toString())})};return Fe(R.rb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){y(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),Object(h.jsx)(ue.a,{title:"Nuevo ocupaci\xf3n",centered:!0,visible:v,footer:!1,onCancel:function(){return y(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(){t(P,(function(e){e.error?F(e.message):E("Ocupaci\xf3n registrada")})),n()},form:c,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre",name:"name",rules:[{required:!0,min:3,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,l(n),""===s){e.next=19;break}if(!(s.length<3)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 8:if(a.test(s)){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener caracteres especiales.")));case 12:if(r.test(s)){e.next=16;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 16:l(s);case 17:e.next=20;break;case 19:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:s,onChange:function(e){return l(e.target.value)}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"state",onChange:function(e){return b(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]}):null})),Be=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/register-type"),headers:R.hg,success:function(e){return He(e)}}}},Ye=function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/register-type"),data:e,success:function(e){return Qe(e)},postProcessSuccess:t,postProcessError:n}}},Je=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/register-type/").concat(e),data:t,success:function(e,t){return Ke(e,t)},postProcessSuccess:n,postProcessError:a}}},He=function(e){return{type:R.Df,payload:e}},Ze=function(e){return{type:R.Bh,payload:{registerTypeId:e}}},Qe=function(e){return{type:R.D,payload:e}},Ke=function(e,t){return{type:R.mh,payload:{registerTypeId:e,data:t}}},We=function(e){return{type:R.Wd,payload:e}},Xe=function(){var e=Object(s.d)(),t=Object(a.useState)(""),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(),j=Object(f.a)(u,2),b=j[0],O=j[1],x=g.a.useForm(),v=Object(f.a)(x,1)[0],y=function(){O(!1),v.resetFields(),v.resetFields()},w={name:r,state:l};return Fe(R.xb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(S.a,{type:"primary",onClick:function(){O(!0)},children:[" ",Object(h.jsx)(De.a,{})," Nuevo "]}),Object(h.jsx)(ue.a,{footer:!1,title:"Nuevo tipo de registro",centered:!0,visible:b,onCancel:y,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(){!function(t){e(Ye(t,(function(t){t.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se registraba"):Object(P.f)("Tipo de registro, registrado"),e(Be()),y()})))}(w),y()},form:v,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,min:3,max:40,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,console.log(n.length),""===n){e.next=23;break}if(!(n.length<3)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 8:if(!(n.length>25)){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("El nombre solo puede contener un m\xe1ximo de 25 caracteres.")));case 12:if(a.test(n)){e.next=16;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 16:if(r.test(n)){e.next=20;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 20:c(n);case 21:e.next=24;break;case 23:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{name:r})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"state",onChange:function(e){return d(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]}):null},$e=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/customer"),success:function(e){return at(e)}}}},et=function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/customer"),data:e,success:function(e){return rt(e)},postProcessSuccess:t,postProcessError:n}}},tt=function(e,t){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/customer/").concat(e),postProcessSuccess:t}}},nt=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/customer/reassignmentAssessor/").concat(e),data:t,success:function(e,t){return ot(e,t)},postProcessSuccess:n,postProcessError:a}}},at=function(e){return{type:R.nf,payload:e}},rt=function(e){return{type:R.o,payload:e}},ct=function(e){return{type:R.xh,payload:{customerId:e}}},it=function(e,t){return{type:R.Bg,payload:{customerId:e,data:t}}},ot=function(e,t){return{type:R.td,payload:{customerId:e,data:t}}},st=function(e){return{type:R.Kd,payload:e}},lt=n(613),dt=n(185),ut=n(609),jt=n(604),bt={ItemFormStyle:{width:"100%"},button:{width:"100%"}},mt=function(){var e,t,n=g.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(s.d)(),i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(!1),j=Object(f.a)(u,2),b=j[0],O=j[1];Object(a.useEffect)((function(){l&&(c(Le()),c(Be()))}),[l,c]);var v=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.occupation})),y=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.registerType})),w=function(){return d(!1)},C=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,r.validateFields();case 3:t=e.sent,console.log(t.dateBirth),n={name:t.name,lastName:t.lastName,gender:t.gender,phone_number:t.phone,address:t.direction||null,birthday:void 0!==t.dateBirth?t.dateBirth.format("YYYY-MM-DD"):null,identification:t.identification||null,email:t.email,identification_type:void 0===t.identificationType||""===t.identificationType?null:t.identificationType,occupation:void 0===t.occupation||""===t.occupation?null:t.occupation,register_type:void 0===t.typeRegister||""===t.typeRegister?null:t.typeRegister,children_number:t.sons||null,has_habeas_data:t.habeasData||!1,state:t.state,assesor_id:JSON.parse(localStorage.getItem("USER_INFO")).id},c(et(n,(function(e){var t=e;if(t.error){for(var n in t.message)"validation.unique"===t.message[n][0]&&Object(P.g)("Los datos del campo ".concat(n," ya se encuentran registrados."));Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se registraba!"),O(!1)}else Object(P.f)("Cliente resgistrado exitosamente"),w(),r.resetFields(),O(!1),c($e())})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Fe(R.mb)?Object(h.jsxs)(S.a,{style:bt.button,type:"primary",onClick:function(){return d(!0)},children:[Object(h.jsx)(De.a,{style:{fontSize:20}})," ","Nuevo Cliente"]}):null,Object(h.jsx)(lt.a,{title:"Nuevo Cliente",width:"800",onClose:w,visible:l,bodyStyle:{paddingBottom:80},children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:C,size:"middle",form:r,initialValues:{state:!0},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"name",label:"Nombres",rules:[{min:3,max:100,message:"Debe tener al menos 3 letras."},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[a-zA-Z\u00C0-\u017F\s]+$/.test(n)){e.next=3;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(_.a,{placeholder:"Nombres"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"lastName",label:"Apellidos",rules:[{required:!0,message:"El campo es requerido."},{min:3,max:100,message:"Debe tener al menos 3 letras."},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^[a-zA-Z\u00C0-\u017F\s]+$/.test(n)){e.next=3;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"Apellidos"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"identificationType",label:"Tipo de identificaci\xf3n",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:bt.ItemFormStyle,children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"Cedula de Ciudadania"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"Cedula de Extranjeria"}),Object(h.jsx)(dt.a.Option,{value:"3",children:"Nit"}),Object(h.jsx)(dt.a.Option,{value:"4",children:"Tarjeta de Identidad"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"identification",label:"N\xfamero de identificaci\xf3n",rules:[{min:7,max:15,message:"Debe tener al menos 7 n\xfameros y no m\xe1s de 15."}],children:Object(h.jsx)(_.a,{placeholder:"Identificacion",style:bt.ItemFormStyle})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"El campo es requerido."},{type:"email",message:"No es un email v\xe1lido."}],children:Object(h.jsx)(_.a,{placeholder:"Email"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"gender",label:"G\xe9nero",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{defaultValue:"",style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:"M",children:"Masculino"}),Object(h.jsx)(dt.a.Option,{value:"F",children:"Femenino"})]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"phone",label:"Tel\xe9fono",rules:[{required:!0,message:"El Tel\xe9fono es requerido."},{type:"number",min:999999,max:999999999999999,message:"Debe tener al menos 7 n\xfameros y no m\xe1s de 15."}],children:Object(h.jsx)(ut.a,{style:{width:"100%"},placeholder:"Tel\xe9fono"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"direction",label:"Direcci\xf3n",rules:[{min:5,message:"Debe tener al menos 5 caracteres."}],children:Object(h.jsx)(_.a,{placeholder:"Direcci\xf3n"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{label:"Ocupaci\xf3n",name:"occupation",style:{width:"73%"},children:Object(h.jsxs)(dt.a,{defaultValue:"",style:bt.ItemFormStyle,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},loading:Array.isArray(v),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(v)&&(null===(e=v._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})}),Object(h.jsx)(g.a.Item,{name:"add",label:"  ",children:Object(h.jsx)(Ge,{})})]})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{label:"Tipo de registro",name:"typeRegister",style:{width:"70%"},children:Object(h.jsxs)(dt.a,{defaultValue:"",style:bt.ItemFormStyle,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},loading:Array.isArray(y),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(y)&&(null===(t=y._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})}),Object(h.jsx)(g.a.Item,{name:"add",label:"  ",children:Object(h.jsx)(Xe,{})})]})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"dateBirth",label:"Fecha de Nacimiento",rules:[{required:!1}],children:Object(h.jsx)(jt.a,{onChange:function(e){var t=0;if(e){var n=new Date,a=new Date(e);t=n.getFullYear()-a.getFullYear();var c=n.getMonth()-a.getMonth();(c<0||0===c&&n.getDate()<a.getDate())&&t--,r.setFieldsValue({age:t})}else r.setFieldsValue({age:0});return t},style:bt.ItemFormStyle,placeholder:"Ingrese la fecha"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"age",label:"Edad",children:Object(h.jsx)(_.a,{style:bt.ItemFormStyle,placeholder:"Edad",disabled:!0})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"sons",label:"Numero de Hijos",rules:[{type:"number"}],children:Object(h.jsx)(ut.a,{style:bt.ItemFormStyle,placeholder:"Cantidad de Hijos"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Activo",name:"state",children:Object(h.jsx)(je.a,{})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:64,xl:6,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Habeas Data",name:"habeasData",children:Object(h.jsx)(je.a,{})})})]}),Object(h.jsxs)("div",{style:{textAlign:"right"},children:[Object(h.jsx)(S.a,{onClick:w,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Registrar Cliente"})]}),b?Object(h.jsx)(x,{}):null]})})]})},pt=function(e){return Object(h.jsx)(a.Fragment,{children:Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240)"},title:e.name,extra:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:0,sm:1,md:1,lg:1,xl:1},e.name+Math.random()),Object(h.jsx)(N.a,{xs:12,sm:12,md:12,lg:12,xl:12,children:Fe(R.mb)?Object(h.jsx)(o.b,{to:"/customer/client",children:Object(h.jsx)(mt,{visible:!1,textButton:"Nuevo Cliente"})}):null},e.name+Math.random()),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Fe(R.wb)?Object(h.jsx)(o.b,{to:"/sales/new-quotes",children:Object(h.jsx)(S.a,{style:{background:"#1890ff",color:"#fff"},icon:Object(h.jsx)(Ne.a,{}),children:"Nueva Cotizaci\xf3n"},e.name+Math.random())}):null},e.name+Math.random())]},e.name+Math.random())]})})},ft=function(){var e=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.generalSetting._payload})),t=Object(s.e)((function(e){return localStorage.getItem("USER_PERMISSIONS")})),n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(Fe(R.Qf))}),[e,t]),Object(h.jsx)(a.Fragment,{children:Object(h.jsxs)(w.a,{children:[Object(h.jsx)(pt,{name:"Dashboard"}),c?Object(h.jsx)(B,{}):Object(h.jsx)(h.Fragment,{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(k.a,{style:{padding:20},children:[" ",Object(h.jsx)(ke,{})," "]})]})})},Ot=function(){return Object(h.jsx)(a.Fragment,{children:Object(h.jsx)(ft,{})})},ht=function(e){return Object(h.jsx)(w.a,{title:e.title,extra:Object(h.jsxs)(h.Fragment,{children:[e.modal,e.drawer]}),style:{minHeight:e.height},children:e.table})},xt=n(322),vt=n(323),yt=function(){function e(){Object(xt.a)(this,e)}return Object(vt.a)(e,[{key:"getToken",value:function(){var e=localStorage.getItem("USER_INFO");return JSON.parse(e).token}},{key:"getIdFromCurrentUser",value:function(){var e=localStorage.getItem("USER_INFO");return JSON.parse(e).id}}]),e}(),gt=new yt,_t=function(){return{type:R.O,payload:{method:"GET",headers:{Authorization:gt.getToken()},url:"".concat(R.Ne,"/profile"),success:function(e){return wt(e)}}}},St=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/profile/").concat(e),data:t,success:function(e,t){return Pt(e,t)},postProcessSuccess:n,postProcessError:a}}},wt=function(e){return{type:R.Bf,payload:e}},Ct=function(e){return{type:R.A,payload:e}},Pt=function(e,t){return{type:R.ch,payload:{id:e,data:t}}},It=function(e){return{type:R.Td,payload:e}},Et=function(e){return{type:R.Ah,payload:{profileId:e}}},Ft=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=function(){o(!1),n.resetFields()},d=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:(a=t.sent).state=void 0!==a.state&&a.state;try{e((r=a,c=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Se ha registrado con \xe9xito"),l(),e(_t());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/profile"),data:r,success:function(e){return Ct(e)},postProcessSuccess:c,postProcessError:i}}))}catch(o){}case 5:case"end":return t.stop()}var r,c,i}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Fe(R.ub)?Object(h.jsx)(S.a,{type:"primary",onClick:function(){o(!0)},children:"Nuevo Perfil"}):null,Object(h.jsx)(ue.a,{title:"Crear perfil",centered:!0,visible:i,footer:!1,onCancel:function(){return o(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:d,form:n,children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{min:5,max:40,required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,""===n){e.next=15;break}if(!(n.length<5)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 5 caracteres.")));case 7:if(a.test(n)){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 11:if(r.test(n)){e.next=13;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 13:e.next=16;break;case 15:return e.abrupt("return",Promise.reject(new Error("No se puede registrar un pefil vac\xedo.")));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"nombre"})}),Object(h.jsx)(g.a.Item,{name:"state",valuePropName:"checked",children:Object(h.jsx)(je.a,{children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},At=n(621),kt=Object(a.createContext)(),Tt=function(e){var t=e.children,n=e.profile;return Object(h.jsx)(kt.Provider,{value:{profile:n},children:t})},Nt=function(e){return{type:R.yf,payload:e}},Dt=function(e){return{type:R.Kf,payload:e}},Rt=function(e){return{type:R.Lf,payload:e}};var Lt=function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)([]),j=Object(f.a)(u,2),b=j[0],v=j[1],y=Object(s.d)(),g=Object(a.useState)(!1),_=Object(f.a)(g,2),C=_[0],P=_[1];if(Object(a.useEffect)((function(){var t,n,a;y((t=e.profileId,n=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error||(c(t._payload),v(t._payload.map((function(e){return e.id}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/permissions/get_by_profile/").concat(t),success:function(e){return Dt(e)},postProcessSuccess:n,postProcessError:a}})),y(function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/permissions"),success:function(e){return Nt(e)},postProcessSuccess:e,postProcessError:t}}}(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error||d(t._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),0===l.length)return Object(h.jsx)(x,{});var I=function(e){var t=!1;return r.forEach((function(n){parseInt(n.id)===parseInt(e)&&(t=!0)})),t};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{children:[Object(h.jsx)(T.a,{gutter:[24,24],children:l.map((function(e){return Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(w.a,{hoverable:!0,type:"inner",title:e.module_name,style:{width:"100%"},children:Object(h.jsx)(T.a,{style:{display:"block"},children:e.permissions?e.permissions.map((function(e){return Object(h.jsx)(N.a,{children:Object(h.jsx)(je.a,{onChange:function(t){!function(e,t){var n=[],a=!1,r=[];if(b.forEach((function(t,n){t!==e?r.push(t):a=!0})),t.target.checked)a||r.push(parseInt(e));else if(!a){for(var c=0;c<r.length;c++)parseInt(e)!=r[c]&&n.push(r[c]);r=n}r=r.sort((function(e,t){return e-t})),v(r)}(e.id,t)},defaultChecked:I(e.id),children:e.name},e.id)})})):null})})})}))}),Object(h.jsx)("br",{}),Object(h.jsx)(T.a,{justify:"end",children:Object(h.jsx)(N.a,{children:C?Object(h.jsx)(O.a,{style:{paddingLeft:"5%"},spinning:!0,size:"large"}):Object(h.jsx)(S.a,{onClick:function(){P(!0);var t={permissions:b};y(function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/permissions/save_permissions_of_profile/").concat(e),data:t,success:function(e){return Rt(e)},postProcessSuccess:n,postProcessError:a}}}(e.profileId,t,function(){var n=Object(p.a)(m.a.mark((function n(a){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a;case 2:r=n.sent,P(!1),r.error||(Re.a.success({message:"Proceso exitoso",description:"Permisos actualizados con \xe9xito"}),JSON.parse(localStorage.getItem("USER_INFO")).idProfile===e.profileId&&(localStorage.removeItem("USER_PERMISSIONS"),localStorage.setItem("USER_PERMISSIONS",JSON.stringify(t.permissions)),y(_t())),e.closed());case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))},children:"Guardar cambios"})})})]})})},Vt=function(e){var t=g.a.useForm(),n=Object(f.a)(t,1)[0],a=function(){e.onClose(!1)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ue.a,{title:"Permisos para el perfil ".concat(e.data.name),visible:!0,onCancel:a,footer:!1,width:"100%",height:"90%",children:Object(h.jsx)(g.a,{name:"nest-messages",layout:"horizontal",style:{height:"100%",width:"100%"},onFinish:function(){n.resetFields()},form:n,children:Object(h.jsx)(Lt,{profileId:e.data.id,closed:a})})})})},qt=function(){var e=Object(a.useContext)(kt).profile,t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Asignar Permisos "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:i,children:Object(h.jsx)(S.a,{size:"small",type:"primary",onClick:function(){c(!0)},icon:Object(h.jsx)(At.a,{})})}),r&&Object(h.jsx)(Vt,{data:e,onClose:c,handleCancel:function(){c(!1)}})]})},Mt=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useContext)(kt).profile,c=Object(a.useState)(r.name),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(r.state),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(a.useState)(r.id),x=Object(f.a)(O,2),v=x[0],y=x[1],w=Object(a.useState)(),C=Object(f.a)(w,2),I=C[0],E=C[1],F=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:(a=t.sent).state=j;try{e(St(v,a,function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Perfil actualizado"),A(),e(_t());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}catch(r){}case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){E(!1),T()},k=function(){E(!0),b(r.state),l(r.name),y(r.id)},T=function(){return n.resetFields()},N=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:N,children:Object(h.jsx)(S.a,{onClick:function(){n.setFieldsValue({name:o}),k()},type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{centered:!0,visible:I,footer:!1,onCancel:A,title:"Actualizar Perfil",children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},form:n,onFinish:F,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,min:5,max:40,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<5)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 5 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 14:l(n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:o})}),Object(h.jsx)(g.a.Item,{name:"state",children:Object(h.jsx)(je.a,{checked:j,onChange:function(e){return b(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},Ut=n(119),zt=n(62),Gt="YYYY/MM/DD",Bt=function(e,t){null!=e&&t(e.format(Gt))},Yt=function(e){var t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&a--,a},Jt=function(e){var t=Date.parse(e),n=new Date(t);return n=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()},Ht=n(622),Zt=function(e){var t=Jt(e.created_at),n=Jt(e.updated_at),a=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[" Creado: ",t," ",Object(h.jsx)("br",{}),"  Modificado: ",n," "]});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(S.a,{size:"small",type:"primary",icon:Object(h.jsx)(Ht.a,{size:"small"})})})})},Qt=Zt,Kt=n(30),Wt=n(602),Xt=n(335),$t=n(330),en=Object(s.b)(null,(function(e){return{dispatchDeleteProfileAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/profile/").concat(e),success:function(){return It(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllProfileAction:function(){return e(_t())}}}))((function(e){var t=e.dispatchDeleteProfileAction,n=e.dispatchFetchAllProfileAction,r=Object(a.useContext)(kt).profile,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0],o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbf Desea eliminar el perfil ".concat(r.name," ? "),onConfirm:function(){t(i,(function(e){Object(P.f)("Perfil eliminado con exito"),e(n())}),(function(){return Object(P.c)("O\xa1UPS!, Ha ocurrido un error")}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),tn=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.profile._payload}));Object(a.useEffect)((function(){e(_t())}),[e]);var n=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Fe(R.dh)?e((a=n,r=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Perfil actualizado"),e(_t());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/profile/state/").concat(a),success:function(e){return Et(e)},postProcessSuccess:r,postProcessError:c}})):Object(P.g)("no posee el permiso para cambiar este estado");case 1:case"end":return t.stop()}var a,r,c}),t)})));return function(e){return t.apply(this,arguments)}}(),r=function(e){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return t[n]},c=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)(Object(j.a)({title:"Nombre",width:40,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{},{sorter:function(e,t){return e.name.localeCompare(t.name)}}),{title:"Activo",width:30,dataIndex:"state",key:"state",render:function(e,t){return a=t.state,r=t.id,a?Object(h.jsx)(S.a,{size:"small",onClick:function(){return n(r)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return n(r)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var a,r}},{title:"Acciones",key:"actions",width:20,fixed:"right",render:function(e,t){return function(e){return Object(h.jsxs)(Tt,{profile:r(e),children:[Fe(R.dh)?Object(h.jsx)(Mt,{}):null,"  ",1!==e.id&&Fe(R.Tb)?Object(h.jsx)(en,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at}),"  ",Fe(R.Yc)?Object(h.jsx)(qt,{}):null]})}(t)}}];return Ae(R.pd)?Object(h.jsx)(ht,{title:"Perfiles",table:Object(h.jsx)(Q.a,{columns:c,dataSource:t,y:300,size:"small",bordered:!0}),modal:Object(h.jsx)(Ft,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},nn=function(){return Object(h.jsx)(tn,{})},an=n(81),rn=n(606),cn=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/user"),success:function(e){return dn(e)}}}},on=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/user/fetch_users_activated"),success:function(e){return un(e)}}}},sn=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/user/").concat(e),data:t,success:function(e,t){return jn(e,t)},postProcessSuccess:n,postProcessError:a}}},ln=function(e){return{type:R.I,payload:e}},dn=function(e){return{type:R.Jf,payload:e}},un=function(e){return{type:R.Ec,payload:e}},jn=function(e,t){return{type:R.Hh,payload:{id:e,data:t}}},bn=function(e){return{type:R.X,payload:{data:e}}},mn=function(e){return{type:R.be,payload:e}},pn=function(e){return{type:R.Ch,payload:{userId:e}}},fn=function(e){if(e._payload){var t=e._payload;return localStorage.setItem("USER_MODULES",JSON.stringify(t)),{type:R.Nc,payload:t}}return{type:R.Nc,payload:[]}},On=function(e){if(e._payload){var t=e._payload;return localStorage.setItem("USER_PERMISSIONS",JSON.stringify(t)),{type:R.Of,payload:t}}return{type:R.Of,payload:[]}},hn=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/affiliated-company"),success:function(e){return vn(e)}}}},xn=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/affiliated-company/").concat(e),data:t,success:function(e,t){return gn(e,t)},postProcessSuccess:n,postProcessError:a}}},vn=function(e){return{type:R.bf,payload:e}},yn=function(e){return{type:R.e,payload:e}},gn=function(e,t){return{type:R.og,payload:{id:e,data:t}}},_n=function(e){return{type:R.zd,payload:e}},Sn=function(e){return{type:R.uh,payload:{id:e}}},wn={required:"${label} es requerido",types:{email:"${label} debe ser un correo v\xe1lido",number:"${label} no puede contener letras."},number:{range:"${label} debe estar entre ${min} y ${max}"}};var Cn=function(){var e=Object(s.d)();Object(a.useEffect)((function(){return e(hn())}),[e]);var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1];Object(a.useEffect)((function(){return e(_t())}),[e]);var u=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.profile})),j=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),b=g.a.useForm(),O=Object(f.a)(b,1)[0],x=Object(a.useState)(!1),v=Object(f.a)(x,2),y=v[0],w=v[1],C=function(){w(!1),I()},I=function(){O.resetFields()};function E(e){return e.toString().split("").length}function F(e){if(null!=e){if(E(e)<7)return Promise.reject(new Error("El tel\xe9fono debe tener al menos 7 d\xedgitos"));if(E(e)>=11)return/^(?!\s)/.test(e)?Promise.reject(new Error("El tel\xe9fono debe tener max\xedmo 11 d\xedgitos")):Promise.reject(new Error("Tel\xe9fono no v\xe1lido"))}return Promise.resolve()}var A=Object(h.jsxs)("div",{children:[l?Object(h.jsx)(an.a,{}):Object(h.jsx)(De.a,{}),Object(h.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),k=function(){var t=Object(p.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.validateFields();case 2:if(n=t.sent,(a=new FormData).append("email",n.email),a.append("password",n.password),a.append("state",void 0===n.state?0:n.state?1:0),a.append("affiliated_company",n.affiliated_company),a.append("profile",n.profile),a.append("phone_number",n.phone_number),a.append("name",n.name),void 0!==n.image)for(r=0;r<n.image.length;r++)a.append("image",n.image[r].originFileObj,n.image[r].name);e((c=a,i=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.error?Object(P.c)(n.message):(Object(P.f)("Usuario editado correctamente"),e(cn()),I(),C());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/user"),data:c,success:function(e){return ln(e)},postProcessSuccess:i,postProcessError:o}}));case 13:case"end":return t.stop()}var c,i,o}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Fe(R.Cb)?Object(h.jsxs)(S.a,{type:"primary",onClick:function(){w(!0)},children:[Object(h.jsx)(De.a,{})," Nuevo usuario"]}):null,Object(h.jsx)(ue.a,{title:"Nuevo usuario",visible:y,width:900,footer:null,onCancel:C,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",onFinish:k,validateMessages:wn,initialValues:{state:!0},form:O,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{name:"image",label:"Foto usuario",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:Object(h.jsx)(rn.a,{action:R.Oe+"/api/try",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,accept:"image/*",maxCount:1,name:"image",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}(e.file.originFileObj,(function(e){d(!1),c(e)})):d(!0)},children:r?Object(h.jsx)("img",{src:r,alt:"avatar",style:{width:"100%"}}):A})})}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:18,lg:18,xl:18,children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{trigger:"onBlur",required:!0,min:3,max:100,pattern:/^[a-zA-Z\xc0-\xff\u00f1\u00d1]+(\s*[a-zA-Z\xc0-\xff\u00f1\u00d1]*)*[a-zA-Z\xc0-\xff\u00f1\u00d1]+$/g,message:"Texto invalido"}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su nombre"})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su email"})})})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{min:7,max:11,required:!0}],hasFeedback:!0,children:Object(h.jsx)(_.a.Password,{placeholder:"Contrase\xf1a"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Por favor confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return function(e,t){return t&&e("password")!==t?Promise.reject(new Error("Las dos Contrase\xf1as Deben ser Iguales")):Promise.resolve()}(t,n)}}}],children:Object(h.jsx)(_.a.Password,{placeholder:"Repita contrase\xf1a"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"profile",label:"Perfil",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Por favor elegir el perfil",optionFilterProp:"children",defaultValue:"-",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccione..."}),!Array.isArray(u)&&u._payload&&u._payload.filter((function(e){return 2!==e.id&&1===e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"affiliated_company",label:"Compa\xf1\xeda asociada",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Por favor elegir la compa\xf1\xeda asociada",optionFilterProp:"children",defaultValue:"-",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccione..."}),!Array.isArray(j)&&j._payload.filter((function(e){return!1!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"phone_number",label:"Tel\xe9fono",rules:[{type:"number",validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(ut.a,{style:{width:"100%"},placeholder:"Por favor ingresar su tel\xe9fono"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"state",label:"Estado",valuePropName:"checked",children:Object(h.jsx)(je.a,{children:"Activo"})})})]}),Object(h.jsx)(T.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)("div",{style:{textAlign:"right",float:"left"},children:[Object(h.jsx)(S.a,{onClick:C,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Registrar usuario"})]})})]})})]})},Pn=Object(a.createContext)(),In=function(e){var t=e.children,n=e.users;return Object(h.jsx)(Pn.Provider,{value:{users:n},children:t})},En=function(){var e=Object(s.d)(),t=Object(a.useContext)(Pn).users,n=Object(a.useState)(t.id),r=Object(f.a)(n,1)[0],c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar este usuario ".concat(t.name,"?"),onConfirm:function(){e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/user/").concat(e),success:function(){return mn(e)},postProcessSuccess:t,postProcessError:n}}}(r,(function(){Object(P.f)("Usuario eliminado exitosamente"),e(cn())}),(function(e){return Object(P.c)("Error: ".concat(e))})))},onCancel:function(){Object(P.g)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})},Fn={required:"${label} es requerido",types:{email:"${label} debe ser un correo v\xe1lido",number:"${label} no puede contener letras."},number:{range:"${label} debe estar entre ${min} y ${max}"}},An=Object(s.b)((function(e){return{loading:e.loading,profiles:e.profile,afiliatedCompany:e.afiliatedCompany}}))((function(e){var t=e.profiles,n=e.afiliatedCompany,r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=g.a.useForm(),d=Object(f.a)(l,1)[0],u=Object(s.d)(),j=Object(a.useContext)(Pn).users,b=Object(a.useState)(j.id),O=Object(f.a)(b,1)[0],x=Object(a.useState)(j.name),v=Object(f.a)(x,2),y=v[0],w=v[1],C=Object(a.useState)(j.password),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)(j.email),k=Object(f.a)(A,2),D=k[0],L=k[1],V=Object(a.useState)(null===j||void 0===j?void 0:j.profile_id),q=Object(f.a)(V,2),M=q[0],U=q[1],z=Object(a.useState)(j.affiliated_company_id),G=Object(f.a)(z,2),B=G[0],Y=G[1],J=Object(a.useState)(j.state),H=Object(f.a)(J,2),Z=H[0],Q=H[1],K=Object(a.useState)(null===j.phone_number?"":j.phone_number),W=Object(f.a)(K,2),X=W[0],$=W[1],ee=Object(a.useState)(j.path),te=Object(f.a)(ee,2),ne=te[0],ae=te[1],re=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),ce=Object(a.useState)([{url:j.path}]),ie=Object(f.a)(ce,2),oe=ie[0],se=ie[1],be=function(){o(!1)},me=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 4:n=e.sent;case 5:(a=new Image).src=n,window.open(n).document.write(a.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.validateFields();case 2:(t=e.sent).image=ne,t.phone_number=null===t||void 0===t?void 0:t.phone_number.toString(),t.state=1===Z||!0===Z?1:0,delete t.confirm;try{u(sn(O,t,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.error?Object(P.c)(t.message):(Object(P.f)("Usuario editado correctamente"),u(cn()),d.resetFields(),ae(""),be());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}catch(n){console.error(n)}case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=[];for(var Oe in t)if("_payload"===Oe)for(var he=t[Oe],xe=0;xe<he.length;xe++)fe.push(he[xe]);for(var ve=[],ye=0;ye<fe.length;ye++)ve.push(fe[ye]);var ge=[];for(var _e in n)if("_payload"===_e)for(var Se=n[_e],we=0;we<Se.length;we++)ge.push(Se[we]);for(var Ce=[],Pe=0;Pe<ge.length;Pe++)Ce.push(ge[Pe]);function Ie(e){return e.toString().split("").length}function Ee(e){if(null!=e){if(Ie(e)<7)return Promise.reject(new Error("El tel\xe9fono debe tener al menos 7 digitos"));if(Ie(e)>=11)return/^(?!\s)/.test(e)?Promise.reject(new Error("El tel\xe9fono debe tener max\xedmo 11 digitos")):Promise.reject(new Error("Tel\xe9fono no v\xe1lido"))}return Promise.resolve()}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:re,children:Object(h.jsx)(S.a,{size:"small",style:{backgroundColor:"#ffa247",border:"#ffa247"},icon:Object(h.jsx)(le.a,{}),type:"primary",onClick:function(){o(!0),w(j.name),F(j.password),L(j.email),U(j.profile_id),Q(j.state),$(j.phone_number),Y(j.affiliated_company_id),ae(j.path),d.setFieldsValue({name:y,password:E,email:D,profile:parseInt(M),affiliated_company:parseInt(B),phone_number:X,state:Z,image:ne})}})}),Object(h.jsx)(ue.a,{title:"Editar usuario",visible:i,width:900,footer:null,onCancel:be,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",onFinish:pe,form:d,validateMessages:Fn,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{name:"image",label:"Foto usuario",children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",fileList:oe,onChange:function(e){var t=e.fileList;se(t),0!==t.length&&void 0!==oe[0]&&void 0!==oe[0].thumbUrl&&""!==oe[0].thumbUrl&&ae(oe[0].thumbUrl)},onPreview:me,accept:"image/*",children:oe.length<1?"+ Upload":""})})}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:18,lg:18,xl:18,children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,min:3,max:100,pattern:/^[a-zA-Z\xc0-\xff\u00f1\u00d1]+(\s*[a-zA-Z\xc0-\xff\u00f1\u00d1]*)*[a-zA-Z\xc0-\xff\u00f1\u00d1]+$/g,message:"Texto invalido"}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su nombre",onChange:function(e){return L(e.target.value)}})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email",message:"El email debe ser un correo v\xe1lido"}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su correo",value:D,onChange:function(e){return L(e.target.value)}})})})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"password",label:"Contrase\xf1a",hasFeedback:!0,rules:[{min:7,max:11}],children:Object(h.jsx)(_.a.Password,{placeholder:"Contrase\xf1a",value:E,onChange:function(e){return F(e.target.value)}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{message:"Por favor confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return function(e,t){return t&&e("password")!==t?Promise.reject(new Error("Las dos Contrase\xf1as Deben ser Iguales")):Promise.resolve()}(t,n)}}}],children:Object(h.jsx)(_.a.Password,{placeholder:"Repita contrase\xf1a"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"profile",label:"Perfil",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{value:"Admin",showSearch:!0,style:{width:"100%"},placeholder:"Selecciona un perfil",optionFilterProp:"children",filterOption:function(e,t){var n,a;return(null===t||void 0===t||null===(n=t.children)||void 0===n||null===(a=n.toLowerCase())||void 0===a?void 0:a.indexOf(null===e||void 0===e?void 0:e.toLowerCase()))>=0},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccione..."}),null===ve||void 0===ve?void 0:ve.filter((function(e){return 2!==e.id&&0!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"affiliated_company",label:"Compa\xf1\xeda asociada",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Por Favor Elegir La Compa\xf1\xeda Asociada",optionFilterProp:"children",onChange:Y,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccione..."}),Ce.filter((function(e){return!1!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"phone_number",label:"Tel\xe9fono:",rules:[{type:"number",validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(ut.a,{placeholder:"Por favor ingresar su tel\xe9fono",style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Estado",name:"state",children:Object(h.jsx)(je.a,{checked:Z,onChange:function(e){return Q(e.target.checked)},children:"Activo"})})})]}),Object(h.jsx)(T.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)("div",{style:{textAlign:"right",float:"left"},children:[Object(h.jsx)(S.a,{onClick:be,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Actualizar usuario"})]})})]})})]})})),kn=Object(s.b)((function(e){return{users:e.users}}),(function(e){return{dispatchUpdateStateUserAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/user/state/").concat(e),success:function(e){return pn(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllUsersAction:function(){return e(cn())}}}))((function(e){var t=e.users,n=e.dispatchFetchAllUsersAction,r=e.dispatchUpdateStateUserAction;Object(a.useEffect)((function(){return n()}),[n]);var c=[];for(var i in t)if("_payload"===i)for(var o=t[i],s=0;s<o.length;s++)c.push(o[s]);var l=function(e){for(var t=0;t<c.length;t++)if(c[t].id===e.id)return c[t]},d=function(e){var t=Date.parse(e),n=new Date(t);return n=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()},u=function(e){Fe(R.Ih)?r(e,(function(e){e.error?Object(P.a)(e.message):Object(P.f)("Asesor Actualizado"),n()})):Object(P.g)("no tiene permisos para editar el estado")},b=[{title:"#",width:20,dataIndex:"id",key:"id"},Object(j.a)(Object(j.a)({title:"Nombre",width:50,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),Object(j.a)(Object(j.a)({title:"Email",width:50,dataIndex:"email",key:"email"},Object(ce.b)("email")),ce.c),Object(j.a)(Object(j.a)({title:"Perfil",width:40,dataIndex:"profile",key:"profile"},Object(ce.b)("profile")),ce.c),Object(j.a)(Object(j.a)({title:"Empresas asociadas",dataIndex:"affiliated_company",width:60,key:"affiliated_company"},Object(ce.b)("affiliated_company")),ce.c),{title:"Activo",dataIndex:"state",key:"state",width:30,render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",onClick:function(){return u(a)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return u(a)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",key:"actions",width:40,fixed:"right",render:function(e,t){return function(e){var t=d(e.created_at),n=d(e.updated_at),a=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[e.name,Object(h.jsx)("hr",{})," Creado: ",t," ",Object(h.jsx)("br",{}),"Modificado: ",n]});return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(In,{users:l(e),children:[Fe(R.Ih)?Object(h.jsx)(An,{}):null,"  ",Fe(R.Xb)?Object(h.jsx)(En,{}):null,"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(S.a,{size:"small",type:"primary",children:Object(h.jsx)(Ht.a,{})})})]})})}(t)}}];return Object(h.jsx)(Q.a,{columns:b,dataSource:Object(ce.a)(c),scroll:{x:1e3,y:300},size:"small",bordered:!0,loading:!1})})),Tn=function(){return Ae(R.Kh)?Object(h.jsxs)(w.a,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Usuarios",extra:[Object(h.jsx)(Cn,{})]}),Object(h.jsx)(kn,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Nn=function(){return Object(h.jsx)(Tn,{})},Dn=Object(a.createContext)(),Rn=function(e){var t=e.children,n=e.adviser;return Object(h.jsx)(Dn.Provider,{value:{adviser:n},children:t})},Ln=function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/assessor"),success:function(e){return Vn(e)},postProcessSuccess:e,postProcessError:t}}},Vn=function(e){return{type:R.cf,payload:e}},qn=function(e){return{type:R.f,payload:e}},Mn=function(e){return{type:R.Q,payload:e}},Un=function(e,t){return{type:R.qg,payload:{id:e,data:t}}},zn=function(e){return{type:R.Ad,payload:e}},Gn=function(e){return{type:R.th,payload:{adviserId:e}}},Bn=Object(s.b)(null,(function(e){return{dispatchDeleteAdviserAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/assessor/").concat(e),success:function(){return zn(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllAdviserAction:function(){return e(Ln())}}}))((function(e){var t=e.dispatchDeleteAdviserAction,n=e.dispatchFetchAllAdviserAction,r=Object(a.useContext)(Dn).adviser,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0];var o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el asesor ".concat(r.name,"?"),onConfirm:function(){t(i,(function(e){Object(P.f)("Asesor eliminado con \xe9xito"),e(n())}),(function(e){return Object(P.c)("Error: ".concat(e))}))},onCancel:function(){Object(P.g)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),Yn={required:"${label} es requerido",types:{email:"${label} no es un Correo v\xe1lido",number:"${label} Debe ser n\xfamero"}},Jn=Object(s.b)((function(e){return{loading:e.loading,assessor:e.assessor,afiliatedCompanies:e.afiliatedCompany}}),(function(e){return{dispatchUpdatedAdviserAction:function(t,n,a,r){return e(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/assessor/").concat(e),data:t,success:function(e,t){return Un(e,t)},postProcessSuccess:n,postProcessError:a}}}(t,n,a,r))},dispatchFetchAllAssessorAction:function(){return e(Ln())}}}))((function(e){var t=e.afiliatedCompanies,n=e.dispatchUpdatedAdviserAction,r=e.dispatchFetchAllAssessorAction,c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(a.useContext)(Dn).adviser,l=Date.parse(o.birthday),d=new Date(l),u=d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate(),j=Object(a.useState)([{url:o.path}]),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)(o.id),y=Object(f.a)(v,1)[0],w=Object(a.useState)(o.identification),C=Object(f.a)(w,2),P=C[0],I=C[1],E=Object(a.useState)(o.name),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(a.useState)(o.email),L=Object(f.a)(D,2),V=L[0],q=L[1],M=Object(a.useState)(o.password),U=Object(f.a)(M,2),z=U[0],G=U[1],B=Object(a.useState)(o.phone_number),Y=Object(f.a)(B,2),J=Y[0],H=Y[1],Z=Object(a.useState)(o.address),Q=Object(f.a)(Z,2),K=Q[0],W=Q[1],X=Object(a.useState)(o.area),$=Object(f.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(o.affiliated_company),ae=Object(f.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(a.useState)(u),oe=Object(f.a)(ie,2),ue=oe[0],be=oe[1],me=Object(a.useState)(o.state),pe=Object(f.a)(me,2),fe=pe[0],Oe=pe[1],he=Object(a.useState)(o.path),xe=Object(f.a)(he,2),ve=xe[0],ye=xe[1],ge=Object(a.useState)(!1),_e=Object(f.a)(ge,2),Se=_e[0],we=_e[1],Ce=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar"}),Pe=[],Ie=[],Ee=[],Fe="YYYY/MM/DD",Ae=Object(s.d)(),ke={identification:P,name:A,email:V,password:z,phone_number:J,address:K,area:ee,affiliated_company:re,birthday:ue,state:fe,image:ve};for(var Te in t)if("_payload"===Te)for(var Ne=t[Te],De=0;De<Ne.length;De++)Ie.push(Ne[De]);for(var Le=0;Le<Ie.length;Le++)Ee.push(Ie[Le]);var Ve=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 4:n=e.sent;case 5:(a=new Image).src=n,window.open(n).document.write(a.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(e){var t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&a--,a},Me=function(){i.resetFields(),ye("")},Ue=function(){Me(),we(!1)},ze=function(){we(!0),k(o.name),G(o.password),q(o.email),H(o.phone_number),W(o.address.toString()),te(o.area.toString()),ce(o.affiliated_company_id),be(u),Oe(o.state),ye(o.path)},Ge=function(e){i.setFieldsValue({age:e})},Be=function(e){Je("success",e),Ue(),Me()},Ye=function(e){for(var t in e)Pe.push("".concat(e[t][0]));Je("error",Pe),Ue(),Me()},Je=function(e,t){Re.a[e]({message:"".concat(e,":"),description:"".concat(t.toString())})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:Ce,children:Object(h.jsx)(S.a,{type:"primary",size:"small",style:{background:"#ffa247",borderColor:"#ffa247"},onClick:function(){ze(),i.setFieldsValue({identification:P,name:A,password:z,email:V,phone_number:J,address:K,state:fe,affiliated_company:re,area:ee,birthday:ue})},icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(lt.a,{title:"Editar asesor",width:"auto",onClose:Ue,visible:Se,bodyStyle:{paddingBottom:80},children:Object(h.jsxs)(g.a,{layout:"vertical",autoComplete:"off",size:"middle",onFinish:function(){n(y,ke,(function(e){e.error?Ye(e.message):(Ae(Ln()),Be("Asesor actualizado"))})),r()},form:i,onClose:Ue,validateMessages:Yn,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{name:"image",label:"Foto Asesor",children:Object(h.jsx)(rn.a,{name:"avatar",action:R.Pe,listType:"picture-card",fileList:O,onChange:function(e){var t=e.fileList;x(t),0!==t.length?void 0!==O[0]&&void 0!==O[0].thumbUrl&&""!==O[0].thumbUrl&&ye(O[0].thumbUrl):ye(null)},onPreview:Ve,accept:"image/*",maxCount:1,children:O.length<1?"+ Upload":""})})}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:18,lg:18,xl:18,children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"identification",label:"Identificaci\xf3n",rules:[{required:!0,message:"Identificaci\xf3n es requerida"},function(){return{validator:function(e,t){return isNaN(t||""===t)?Promise.reject(new Error("La identificaci\xf3n debe ser numerica")):Promise.resolve()}}}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su identificaci\xf3n",value:P,onChange:function(e){return I(e.target.value)},disabled:!0})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,min:3,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<3)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 14:k(n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su nombre",value:A,onChange:function(e){return k(e.target.value)}})})})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su email",value:V,onChange:function(e){return q(e.target.value)}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"password",label:"Password",hasFeedback:!0,rules:[{min:7,max:11,required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===n||void 0===n?void 0:n.length)<7)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("La contrase\xf1a debe tener al menos 7 d\xedgitos.")));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a.Password,{placeholder:"Contrase\xf1a",value:z,onChange:function(e){return G(e.target.value)}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{message:"Por favor confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("Las dos contrase\xf1as deben ser iguales")):Promise.resolve()}}}],children:Object(h.jsx)(_.a.Password,{placeholder:"Repita contrase\xf1a"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"phone_number",label:"Tel\xe9fono",rules:[function(){return{validator:function(e,t){return isNaN(t||""===t)?Promise.reject(new Error("Tel\xe9fono Debe Ser Numerico")):Promise.resolve()}}}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su Tel\xe9fono",value:J,onChange:function(e){return H(e.target.value)}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"address",label:"Direcci\xf3n",children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar la direccion",value:K,onChange:function(e){return W(e.target.value)}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"area",label:"Surcusal/Zona",children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar la surcusal",value:ee,onChange:function(e){return te(e.target.value)}})})}),Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"affiliated_company",label:"Compa\xf1\xeda asociada",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Por favor elegir la compa\xf1\xeda asociada",optionFilterProp:"children",onChange:ce,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Ee.filter((function(e){return!1!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha de nacimiento",rules:[{required:!1},function(){return{validator:function(e,t){return t._d<se()()?Promise.resolve():Promise.reject(new Error("Fecha mayor a la actual"))}}}],children:Object(h.jsx)(jt.a,{style:{width:"100%"},defaultValue:se()(u,Fe),format:Fe,onChange:function(e){var t;null!=(t=e)&&(be(t.format(Fe)),Ge(qe(t)))},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"age",label:" ",children:Object(h.jsx)(_.a,{style:{width:"100%"},defaultValue:qe(d),placeholder:"Edad",disabled:!0})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"state",checked:fe,onChange:function(e){return Oe(e.target.checked)},children:"Activo"})})}),Object(h.jsxs)("div",{style:{textAlign:"right"},children:[Object(h.jsx)(S.a,{onClick:Ue,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Actualizar asesor"})]})]})]})})]})})),Hn={required:"${label} es requerido",number:"El ${label} no puede ser menor a 0",types:{number:"No es un n\xfamero v\xe1lido!"}},Zn=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),c=Object(a.useState)([]),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(!1),u=Object(f.a)(d,2),b=u[0],O=u[1];Object(a.useEffect)((function(){e(hn()),e(_t())}),[e]);var x=function(){return O(!1)},v=function(){var t=Object(p.a)(m.a.mark((function t(){var a,r,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:c=t.sent,delete(i=Object(j.a)(Object(j.a)({},c),{},{birthday:c.birthday.format("YYYY-MM-DD"),image:null===(a=c.image)||void 0===a||null===(r=a.fileList[0])||void 0===r?void 0:r.thumbUrl})).age,e((o=i,s=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):(Object(P.f)("Se ha registrado con \xe9xito"),n.resetFields(),l([]),x(),e(Ln()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.c)(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/assessor"),data:o,success:function(e){return qn(e)},postProcessSuccess:s,postProcessError:d}}));case 6:case"end":return t.stop()}var o,s,d}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){e(!0)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 4:n=e.sent;case 5:(a=new Image).src=n,window.open(n).document.write(a.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Fe(R.hb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(S.a,{type:"primary",onClick:function(){return O(!0)},children:[Object(h.jsx)(De.a,{})," Nuevo Asesor"]}),Object(h.jsx)(lt.a,{title:"Nuevo Asesor",width:"55vw",onClose:x,visible:b,bodyStyle:{paddingBottom:80},children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:n,onFinish:v,validateMessages:Hn,name:"formAdviser",children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{name:"image",label:"Foto Asesor",children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",className:"avatar-uploader",fileList:o,onChange:function(e){var t=e.fileList;l(t),0!==t.length&&void 0!==o[0]&&o[0].thumbUrl},onPreview:w,onRemove:y,maxCount:1,children:o.length<1?"+ Upload":""})})}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:18,lg:18,xl:18,children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"identification",label:"Identificaci\xf3n",rules:[{min:7,max:11,required:!0},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error(" ")));case 4:if(a=/^[0-9\s]+$/,r=/^(?!\s)/,""===n){e.next=19;break}if(!(n.length<6)){e.next=9;break}return e.abrupt("return",Promise.reject(new Error("La identificaci\xf3n debe tener al menos 7 d\xedgitos.")));case 9:if(!(n.length>=11)){e.next=13;break}if(r.test(n)){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("Identificaci\xf3n no v\xe1lida.")));case 12:return e.abrupt("return",Promise.reject(new Error("La identificaci\xf3n debe tener m\xe1x\xedmo 11 d\xedgitos.")));case 13:if(a.test(n)){e.next=15;break}return e.abrupt("return",Promise.reject(new Error("La identificaci\xf3n no puede contener letras.")));case 15:if(r.test(n)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("Identificiaci\xf3n no v\xe1lida.")));case 17:e.next=20;break;case 19:return e.abrupt("return",Promise.reject(new Error("Identificiaci\xf3n vac\xeda.")));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su identificaci\xf3n"})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,min:5,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Nombre es requerido")));case 4:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,""===n){e.next=15;break}if(!(n.length<3)){e.next=9;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 9:if(a.test(n)){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 11:if(r.test(n)){e.next=13;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 13:e.next=16;break;case 15:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su nombre"})})})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email",message:"El email debe ser un correo v\xe1lido"}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar su email",defaultValue:" "})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"password",label:"Contrase\xf1a",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("La contrase\xf1a es requerida.")));case 4:if(""===n){e.next=9;break}if(!(n.length<7)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("La contrase\xf1a debe tener al menos 7 d\xedgitos.")));case 7:e.next=10;break;case 9:return e.abrupt("return",Promise.reject(new Error("La contrase\xf1a est\xe1 vac\xeda.")));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],hasFeedback:!0,children:Object(h.jsx)(_.a.Password,{placeholder:"Contrase\xf1a"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"confirm",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Por favor confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("Las dos contrase\xf1as deben ser iguales")):Promise.resolve()}}}],children:Object(h.jsx)(_.a.Password,{placeholder:"Repita contrase\xf1a"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"phone_number",label:"Tel\xe9fono",rules:[{min:7,max:11,required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("El tel\xe9fono es requerido.")));case 4:if(a=/^[0-9\s]+$/,r=/^(?!\s)/,""===n){e.next=19;break}if(!(n.length<7)){e.next=9;break}return e.abrupt("return",Promise.reject(new Error("El tel\xe9fono debe tener al menos 7 d\xedgitos.")));case 9:if(!(n.length>=11)){e.next=13;break}if(r.test(n)){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("Tel\xe9fono no v\xe1lido.")));case 12:return e.abrupt("return",Promise.reject(new Error("El tel\xe9fono debe tener m\xe1ximo 11 d\xedgitos.")));case 13:if(a.test(n)){e.next=15;break}return e.abrupt("return",Promise.reject(new Error("El tel\xe9fono no puede contener letras.")));case 15:if(r.test(n)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("Tel\xe9fono no v\xe1lido")));case 17:e.next=20;break;case 19:return e.abrupt("return",Promise.reject(new Error("Tel\xe9fono vac\xedo.")));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{style:{width:"100%"},placeholder:"Por favor ingresar su tel\xe9fono"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"address",label:"Direcci\xf3n",rules:[{min:5,max:100,required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("La direcci\xf3n es requerida.")));case 4:if(""===n){e.next=9;break}if(!(n.length<5)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("La direcci\xf3n debe tener al menos 5 d\xedgitos.")));case 7:e.next=10;break;case 9:return e.abrupt("return",Promise.reject(new Error("vac\xedo, La direcci\xf3n es requerida.")));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar la direcci\xf3n"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"area",label:"Surcusal/Zona",rules:[{min:5,max:100,required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("La sucursal es requerida.")));case 4:if(""===n){e.next=9;break}if(!(n.length<5)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("La sucursal debe tener al menos 5 d\xedgitos.")));case 7:e.next=10;break;case 9:return e.abrupt("return",Promise.reject(new Error("vac\xedo, La sucursal es requerida.")));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"Por favor ingresar una surcusal"})})}),Object(h.jsx)(N.a,{span:24,xs:24,sm:12,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"affiliated_company",label:"Compa\xf1\xeda asociada",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Por favor elegir la compa\xf1\xeda asociada",optionFilterProp:"children",defaultValue:"",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(r)&&r._payload.filter((function(e){return!1!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"birthday",label:"Fecha de nacimiento",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{onChange:function(e){var t=e.diff(se()(),"years");n.setFieldsValue({age:-1*t})},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"age",label:"Edad",rules:[{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(parseInt(n)<18)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("Debe ser mayor de edad.")));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{style:{width:"100%"},placeholder:"Edad",disabled:!0})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",name:"state",children:Object(h.jsx)(je.a,{children:"Activo"})})})}),Object(h.jsxs)(T.a,{gutter:16,style:{marginLeft:"70%"},children:[Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{onClick:x,style:{marginRight:8},children:"Cancel"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Registrar asesor"})})]})]})})]}):null},Qn=Object(s.b)((function(e){return{loading:e.loading,assessor:e.assessor}}),(function(e){return{dispatchFetchAllAssessorAction:function(){return e(Ln())},dispatchUpdateStateAdviserAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/assessor/state/").concat(e),success:function(e){return Gn(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))}}}))((function(e){var t=e.assessor,n=e.dispatchFetchAllAssessorAction,r=e.dispatchUpdateStateAdviserAction,c=Object(a.useState)(!0),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(s.d)();Object(a.useEffect)((function(){return d(Ln(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent)?!0===n.error&&Object(P.c)("\xa1UPS! ha ocurrido un error"+n.message):Object(P.g)("No hay Datos en la tabla"),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[d]);var u=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor._payload}));Object(a.useEffect)((function(){return n()}),[n]);var b=[];for(var O in t)if("_payload"===O)for(var v=t[O],y=0;y<v.length;y++)b.push(v[y]);var g=function(e){return b.find((function(t){return t.id===e.id}))},_=function(e){Fe(R.ng)?r(e,(function(e){e.error?Object(P.a)(e.message):Object(P.f)("Asesor actualizado"),n()})):Object(P.g)("no tiene permisos para editar el estado")},w=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Nombre",width:80,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),Object(j.a)(Object(j.a)({title:"Identificaci\xf3n",width:70,dataIndex:"identification",key:"identification"},Object(ce.b)("identification")),ce.c),Object(j.a)(Object(j.a)({title:"Correo",dataIndex:"email",width:70,key:"email"},Object(ce.b)("email")),ce.c),Object(j.a)(Object(j.a)({title:"Tel\xe9fono",dataIndex:"phone_number",width:50,key:"phone_number"},Object(ce.b)("phone")),ce.c),Object(j.a)(Object(j.a)({title:"Empresas asociadas",dataIndex:"affiliated_company",width:70,key:"affiliated_company"},Object(ce.b)("affiliated_company")),ce.c),{title:"Activo",dataIndex:"state",key:"state",width:30,render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",onClick:function(){return _(a)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return _(a)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",dataIndex:"actions",width:50,fixed:"right",render:function(e,t){return function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Rn,{adviser:g(e),children:[Fe(R.ng)?Object(h.jsx)(Jn,{}):null,"  ",Fe(R.Lb)?Object(h.jsx)(Bn,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})})}(t)}}];return Ae(R.L)?Object(h.jsx)(ht,{title:"Asesores",table:[Object(h.jsx)(h.Fragment,{children:o?Object(h.jsx)(x,{}):Object(h.jsx)(Q.a,{columns:w,dataSource:Object(ce.a)(u),scroll:{x:1e3,y:300},size:"small",bordered:!0})})],drawer:Object(h.jsx)(Zn,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Kn=function(){return Object(h.jsx)(Qn,{})},Wn=Object(a.createContext)(),Xn=function(e){var t=e.children,n=e.context;return Object(h.jsx)(Wn.Provider,{value:{context:n},children:t})},$n=function(e){var t=e.onClose,n=g.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(a.useContext)(Wn).context,i=c.generalActivity?c.onFinishEndActivity:c,o=function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return n=e.sent,e.next=5,i(c.id,n);case 5:t(),r.resetFields();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.validateFields();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{validateMessages:{required:"${label} es requerido"},form:r,onFinish:o,layout:"vertical",style:{height:"100%",width:"100%"},children:[Object(h.jsx)(T.a,{gutter:48,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{label:"Comentario",name:"commentary",rules:[{required:!0}],children:Object(h.jsx)(_.a.TextArea,{})})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})]})})},ea=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1];return Fe(R.ob)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",style:{background:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){return r(!0)},icon:Object(h.jsx)(le.a,{})}),Object(h.jsx)(ue.a,{footer:!1,title:"Finalizar actividad general",visible:n,onCancel:function(){return r(!1)},children:Object(h.jsx)($n,{onClose:function(){return r(!1)}})})]}):Object(h.jsx)(h.Fragment,{})},ta=function(e){var t=e.id,n=Object(s.d)(),a=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar esta acitivdad? ",onConfirm:function(){var e,a,r;n((e=t,a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):Object(P.f)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/general-activity/").concat(e),success:function(e){return Ie(e)},postProcessSuccess:a,postProcessError:r}}))},onCancel:function(){Object(P.g)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})},na={rules:[{type:"object",required:!0,message:"\xa1Por favor selecciona!"}]},aa=function(e){var t,n=e.textAction,r=e.onClose,c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(a.useContext)(Wn).context,l=o.generalActivity?o.onFinishUpdate:o,d=Object(s.e)((function(e){return e.users}));Object(a.useEffect)((function(){null==o.generalActivity&&void 0===o.generalActivity||u()}),[o]);var u=function(){i.setFieldsValue({scheduled:se()(o.generalActivity.scheduled),activity:o.generalActivity.activity,user_id:o.generalActivity.executing_user_id})},b=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:if(t=e.sent,!O()){e.next=10;break}return e.next=6,l(t);case 6:r(),i.resetFields(),e.next=13;break;case 10:return e.next=12,l(o.generalActivity.id,t);case 12:r();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){return!o.generalActivity},x=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validateFields();case 2:return t=e.sent,e.abrupt("return",Object(j.a)(Object(j.a)({},t),{},{scheduled:t.scheduled.format(Gt)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{validateMessages:{required:"${label} es requerido"},form:i,onFinish:b,layout:"vertical",style:{height:"100%",width:"100%"},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"user_id",label:"Usuario",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},placeholder:"Selecciona un usuario",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(d)&&(null===(t=d._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,Object(j.a)(Object(j.a)({name:"scheduled",label:"Fecha de expiraci\xf3n"},na),{},{rules:[{required:!0,message:"La fecha es requerida"}],children:Object(h.jsx)(jt.a,{format:Gt})}))})]}),Object(h.jsx)(T.a,{gutter:48,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{label:"Actividad",name:"activity",rules:[{required:!0}],children:Object(h.jsx)(_.a.TextArea,{})})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:n})})})]})})},ra=function(e){var t=e.title,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1];return Fe(R.ob)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",style:{background:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){return i(!0)},icon:Object(h.jsx)(le.a,{})}),Object(h.jsx)(ue.a,{footer:!1,title:t,visible:c,onCancel:function(){return i(!1)},children:Object(h.jsx)(aa,{onClose:function(){return i(!1)},textAction:"Actualizar"})})]}):Object(h.jsx)(h.Fragment,{})},ca=function(e){var t=e.title,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1];return Fe(R.ob)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(S.a,{type:"primary",onClick:function(){return i(!0)},children:[" Nuevo ",Object(h.jsx)(De.a,{})," "]}),Object(h.jsx)(ue.a,{footer:!1,title:t,visible:c,onCancel:function(){return i(!1)},children:Object(h.jsx)(aa,{onClose:function(){return i(!1)},textAction:"Registrar",data:null})})]}):Object(h.jsx)(h.Fragment,{})},ia=function(){var e=[{title:"#",width:50,dataIndex:"id",key:"id",fixed:"left",render:function(e,t){return o.indexOf(t)+1}},Object(j.a)(Object(j.a)({title:"Usuario Creador",width:100,dataIndex:"creator",key:"creator"},Object(ce.b)("creator")),ce.c),Object(j.a)(Object(j.a)({title:"Actividad",width:150,dataIndex:"activity",key:"activity"},Object(ce.b)("activity")),ce.c),Object(j.a)(Object(j.a)({title:"Programada",dataIndex:"scheduled",key:"scheduled",width:80},Object(ce.b)("scheduled")),ce.c),Object(j.a)(Object(j.a)({title:"Comentario",dataIndex:"commentary",key:"commentary",width:150},Object(ce.b)("commentary")),ce.c),Object(j.a)(Object(j.a)({title:"Usuario",dataIndex:"executing",key:"executing",width:100},Object(ce.b)("executing")),ce.c),{title:"D\xedas de vencimiento",dataIndex:"activity_status",key:"activity_status",width:100,align:"center",fixed:"right",render:function(e,t){return function(e){return e.done?Object(h.jsxs)(H.a,{color:"blue",children:[" ",e.activity_status," "]}):e.is_overdue?Object(h.jsxs)(H.a,{color:"red",children:[" ",e.activity_status," "]}):Object(h.jsxs)(H.a,{color:"green",children:[" ",e.activity_status," "]})}(t)}},{title:"Realizada",dataIndex:"executing",key:"executing",align:"center",fixed:"right",width:60,render:function(e,t){return l(t)}},{title:"Acciones",key:"actions",width:70,align:"center",fixed:"right",render:function(e,t){return O(t)}}],t=Object(s.d)(),n=Object(a.useState)([]),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(s.e)((function(e){return e.generalActivity}));Object(a.useEffect)((function(){t(ye()),t(on())}),[t]),Object(a.useEffect)((function(){i(o)}),[o]);var l=function(e){return y(e)?Object(h.jsx)("span",{children:"12/08/2020"}):Object(h.jsx)(Xn,{context:u(e.id),children:Object(h.jsx)(ea,{})})},u=function(e){return{generalActivity:_(e),id:e,onFinishEndActivity:b}},b=function(){var e=Object(p.a)(m.a.mark((function e(n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(_e(n,a,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,Object(P.f)(n.message),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,Object(P.c)(n.message),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Xn,{context:g(e.id),children:["  ",x(e.id),"  ",v(e),"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.id,updated_at:e.updated_at})]})})},x=function(e){return Fe(R.Pb)?Object(h.jsx)(ta,{id:e}):Object(h.jsx)(h.Fragment,{})},v=function(e){return Fe(R.ob)&&!y(e)?Object(h.jsx)(ra,{title:"Actualizar actividad general"}):Object(h.jsx)(h.Fragment,{})};function y(e){return 1===e.done}var g=function(e){var t=_(e);return{onFinishUpdate:S,generalActivity:t}},_=function(e){return null===c||void 0===c?void 0:c.find((function(t){return t.id===e}))},S=function(){var e=Object(p.a)(m.a.mark((function e(n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(ge(n,a,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,Object(P.f)(n.message),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,Object(P.c)(n.message),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t((a=n,r=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/general-activity"),data:a,success:function(e){return we(e)},postProcessSuccess:r,postProcessError:c}}));case 1:case"end":return e.stop()}var a,r,c}),e)})));return function(t){return e.apply(this,arguments)}}();return Ae(R.tc)?Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Actividades generales",extra:Fe(R.ob)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Xn,{context:w,children:Object(h.jsx)(ca,{title:"Registrar actividad general"})})}):Object(h.jsx)(h.Fragment,{})}),Object(h.jsx)(Q.a,{size:"small",columns:e,dataSource:c,x:1500,y:500})]})}):Object(h.jsx)(d.Redirect,{to:R.Ib})},oa=function(){return Object(h.jsx)(a.Fragment,{children:Object(h.jsx)(ia,{})})},sa=Object(a.createContext)(),la=function(e){var t=e.children,n=e.afiliatedCompany;return Object(h.jsx)(sa.Provider,{value:{afiliatedCompany:n},children:t})},da=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useContext)(sa).afiliatedCompany,c=Object(a.useState)(null==r.name?"":r.name),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(!0),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(a.useState)(r.id),x=Object(f.a)(O,2),v=x[0],y=x[1],w=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),C=Object(a.useState)(),I=Object(f.a)(C,2),E=I[0],F=I[1],A=function(){F(!1),k()},k=function(){return n.resetFields()},T=function(){b(r.state),l(r.name),y(r.id)},N=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:(a=t.sent).state=j;try{e(xn(v,a,function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Empresa afiliada actualizada"),A(),e(hn());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}catch(r){}case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:w,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){F(!0),T(),n.setFieldsValue({name:o})},icon:Object(h.jsx)(le.a,{size:"small"})})}),Object(h.jsx)(ue.a,{title:"Editar empresa afiliada",centered:!0,visible:E,footer:!1,onCancel:A,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",onFinish:N,style:{height:"100%",width:"100%"},form:n,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<3)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 14:l(n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:o})}),Object(h.jsx)(g.a.Item,{name:"state",children:Object(h.jsx)(je.a,{checked:j,onChange:function(e){return b(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},ua=Object(s.b)(null,(function(e){return{dispatchDeleteAfiliatedCompanyAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/affiliated-company/").concat(e),success:function(){return _n(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllAfiliatedCompanyAction:function(){return e(hn())}}}))((function(e){var t=e.dispatchDeleteAfiliatedCompanyAction,n=e.dispatchFetchAllAfiliatedCompanyAction,r=Object(a.useContext)(sa).afiliatedCompany,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0];var o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar la empresa ".concat(r.name,"? "),onConfirm:function(){t(i,(function(e){Object(P.f)("Empresa afiliada eliminada con \xe9xito"),e(n())}),(function(e){return Object(P.c)("Error: ".concat(e))}))},onCancel:function(){Object(P.c)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),ja=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(s.d)(),i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=function(){r(!1),o.resetFields()},d=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:(t=e.sent).state=void 0!==t.state&&t.state;try{c((n=t,a=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Se ha registrado con \xe9xito"),l(),c(hn());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/affiliated-company"),data:n,success:function(e){return yn(e)},postProcessSuccess:a,postProcessError:r}}))}catch(i){}case 5:case"end":return e.stop()}var n,a,r}),e)})));return function(){return e.apply(this,arguments)}}();return Fe(R.ib)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){r(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),Object(h.jsx)(ue.a,{title:"Nueva empresa asociada",centered:!0,visible:n,footer:!1,onCancel:function(){return r(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:d,form:o,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,""===n){e.next=15;break}if(!(n.length<3)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 7:if(a.test(n)){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 11:if(r.test(n)){e.next=13;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 13:e.next=16;break;case 15:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{placeholder:"nombre"})}),Object(h.jsx)(g.a.Item,{name:"state",valuePropName:"checked",children:Object(h.jsx)(je.a,{children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Registrar"})})]})})]}):null},ba=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany._payload}));Object(a.useEffect)((function(){e(hn())}),[e]);var n=function(e){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return t[n]},r=function(t){Fe(R.pg)?e(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/affiliated-company/state/").concat(e),success:function(e){return Sn(e)},postProcessSuccess:t,postProcessError:n}}}(t,function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Compa\xf1\xeda asociada actualizada"),e(hn());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):Object(P.g)("no posee el permiso para cambiar este estado")},c=[{title:"#",width:40,dataIndex:"id",key:"id",render:function(e,n){return t.indexOf(n)+1}},Object(j.a)(Object(j.a)(Object(j.a)({title:"Nombre",width:100,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{},{sorter:!0}),{title:"Activo",width:40,dataIndex:"state",key:"state",align:"center",render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{onClick:function(){return r(a)},icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}),size:"small",type:"text"}):Object(h.jsx)(S.a,{onClick:function(){return r(a)},size:"small",type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",key:"actions",fixed:"right",width:30,render:function(e,t){return function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(la,{afiliatedCompany:n(e),children:[Fe(R.pg)?Object(h.jsx)(da,{size:"small",footer:!1,title:"Actualizar perfil"}):null,"  ",Fe(R.Mb)?Object(h.jsx)(ua,{size:"small",title:"Empresa afiliada"}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})})}(t)}}];return Ae(R.N)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ht,{title:"Empresas afiliadas",table:Object(h.jsx)(Q.a,{columns:c,dataSource:t,y:300}),modal:Object(h.jsx)(ja,{})})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},ma=function(){return Object(h.jsx)(ba,{})},pa=Object(a.createContext)(),fa=function(e){var t=e.children,n=e.attentionPlaces;return Object(h.jsx)(pa.Provider,{value:{attentionPlaces:n},children:t})},Oa=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/customer-service-place"),success:function(e){return ha(e)}}}},ha=function(e){return{type:R.hf,payload:e}},xa=function(e){return{type:R.h,payload:e}},va=function(e,t){return{type:R.rg,payload:{id:e,data:t}}},ya=function(e){return{type:R.Fd,payload:e}},ga=function(e){return{type:R.vh,payload:{atentionPlacesId:e}}},_a=Object(s.b)(null,(function(e){return{dispatchDeleteAttentionPlacesAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/customer-service-place/").concat(e),success:function(){return ya(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllAttentionPlacesAction:function(){return e(Oa())}}}))((function(e){var t=e.dispatchDeleteAttentionPlacesAction,n=e.dispatchFetchAllAttentionPlacesAction,r=Object(a.useContext)(pa).attentionPlaces,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0],o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el lugar de atenci\xf3n ".concat(r.name,"? "),onConfirm:function(){t(i,(function(e){Object(P.f)("Lugar de atenci\xf3n eliminado con \xe9xito"),e(n())}),(function(e){return e.error("Error: ".concat(e))}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),Sa=Object(s.b)(null,(function(e){return{dispatchUpdateAttentionPlacesAction:function(t,n,a,r){return e(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/customer-service-place/").concat(e),data:t,success:function(e,t){return va(e,t)},postProcessSuccess:n,postProcessError:a}}}(t,n,a,r))},dispatchFetchAllattentionPlacesAction:function(){return e(Oa())}}}))((function(e){var t=e.dispatchUpdateAttentionPlacesAction,n=e.dispatchFetchAllattentionPlacesAction,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useContext)(pa).attentionPlaces,o=Object(a.useState)(i.name),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(i.state),j=Object(f.a)(u,2),b=j[0],O=j[1],x=Object(a.useState)(i.id),v=Object(f.a)(x,2),y=v[0],w=v[1],C=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),P=[],I={name:l,state:b},E=Object(a.useState)(),F=Object(f.a)(E,2),A=F[0],k=F[1],T=function(){k(!1),c.resetFields()},N=function(){O(i.state),d(i.name),w(i.id)},D=function(){return c.resetFields()},R=function(e){V("success",e),T(),D(),n()},L=function(e){for(var t in e)P.push("".concat(e[t][0]));V("error",P),T(),D()},V=function(e,t){Re.a[e]({message:"".concat(e,":"),description:"".concat(t.toString())})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:C,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){c.setFieldsValue({name:l}),k(!0),N()},icon:Object(h.jsx)(le.a,{size:"small"})})}),Object(h.jsx)(ue.a,{title:"Editar lugar de atenci\xf3n",centered:!0,visible:A,footer:!1,onCancel:T,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",onFinish:function(){t(y,I,(function(e){e.error?L(e.message):R("Lugar de atencion registrado")})),n()},style:{height:"100%",width:"100%"},form:c,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<3)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 14:d(n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:l,onChange:function(e){return d(e.target.value)}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"state",checked:b,onChange:function(e){return O(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})})),wa=function(){var e=Object(s.d)(),t=Object(a.useState)(""),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(!1),j=Object(f.a)(u,2),b=j[0],O=j[1],x=g.a.useForm(),v=Object(f.a)(x,1)[0],y={name:r,state:l},w=[],C=function(){return v.resetFields()},P=function(){return O(!1)},I=function(e){F("success",e),P(),C()},E=function(e){for(var t in e)w.push("".concat(e[t][0]));F("error",w),P(),C()},F=function(e,t){Re.a[e]({message:"".concat(e,":"),description:"".concat(t.toString())})};return Fe(R.jb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){return O(!0)},style:{backgroundColor:"#1890ff",borderColor:"#1890ff",color:"#ffffff"},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),Object(h.jsx)(ue.a,{footer:!1,title:"Agregar luegares de atenci\xf3n",visible:b,onCancel:function(){return O(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(){var t,n,a;e((t=y,n=function(t){t.error?E(t.message):I("Lugar de atencion registrado"),e(Oa())},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/customer-service-place"),data:t,success:function(e){return xa(e)},postProcessSuccess:n,postProcessError:a}}))},form:v,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,min:3,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,i=/^(?!\s)/,c(n),""===r){e.next=19;break}if(!(r.length<3)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 8:if(a.test(r)){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 12:if(i.test(r)){e.next=16;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 16:c(r);case 17:e.next=20;break;case 19:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo")));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:r,onChange:function(e){return c(e.target.value)}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"state",onChange:function(e){return d(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]}):null},Ca=Object(s.b)((function(e){return{attentionPlaces:e.attentionPlaces}}),(function(e){return{dispatchFetchAllAttentionPlacesAction:function(){return e(Oa())},dispatchUpdateStateAttentionPlacesAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/customer-service-place/state/").concat(e),success:function(e){return ga(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))}}}))((function(e){var t=e.attentionPlaces,n=e.dispatchFetchAllAttentionPlacesAction,r=e.dispatchUpdateStateAttentionPlacesAction;Object(a.useEffect)((function(){return n()}),[n]);var c=[];for(var i in t)if("_payload"===i)for(var o=t[i],s=0;s<o.length;s++)c.push(o[s]);var l=function(e){Fe(R.sg)?r(e,(function(e){e.error?Object(P.a)(e.message):Object(P.f)("Estado lugar de atenci\xf3n actualizado"),n()})):Object(P.g)("no posee el permiso para cambiar este estado")},d=[{title:"#",dataIndex:"id",key:"id",render:function(e,t){return c.indexOf(t)+1}},Object(j.a)(Object(j.a)({title:"Lugares de atenci\xf3n",dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{title:"Activo",dataIndex:"state",render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",onClick:function(){return l(a)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return l(a)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",dataIndex:"actions",width:120,fixed:"right",render:function(e,t){return b(t)}}],u=function(e){for(var t=0;t<c.length;t++)if(c[t].id===e.id)return c[t]},b=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(fa,{attentionPlaces:u(e),children:[Fe(R.sg)?Object(h.jsx)(Sa,{}):null,"  ",Fe(R.Mb)?Object(h.jsx)(_a,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})})};return Ae(R.S)?Object(h.jsx)(ht,{title:"Lugares de atenci\xf3n",table:Object(h.jsx)(Q.a,{columns:d,dataSource:c,y:300}),modal:Object(h.jsx)(wa,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Pa=function(){return Object(h.jsx)(Ca,{})},Ia=Object(a.createContext)(),Ea=function(e){var t=e.children,n=e.channel;return Object(h.jsx)(Ia.Provider,{value:{channel:n},children:t})},Fa=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/channel"),success:function(e){return Na(e)}}}},Aa=function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/channel"),data:e,success:function(e){return Da(e)},postProcessSuccess:t,postProcessError:n}}},ka=function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/channel/state/").concat(e),success:function(e){return Ta(e)},postProcessSuccess:t,postProcessError:n}}},Ta=function(e){return{type:R.wh,payload:{channelId:e}}},Na=function(e){return{type:R.lf,payload:e}},Da=function(e){return{type:R.l,payload:e}},Ra=function(e,t){return{type:R.vg,payload:{channelId:e,data:t}}},La=function(e){return{type:"REMOVE_CHANNEL",payload:e}},Va=Object(s.b)(null,(function(e){return{dispatchDeleteChannelAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/channel/").concat(e),success:function(){return La(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllChannelAction:function(){return e(Fa())}}}))((function(e){var t=e.dispatchDeleteChannelAction,n=e.dispatchFetchAllChannelAction,r=Object(a.useContext)(Ia).channel,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0];var o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el medio ".concat(r.name,"?"),onConfirm:function(){t(i,(function(e){Object(P.f)("Medio eliminado con \xe9xito"),e(n())}),(function(e){return e.error("Error: ".concat(e))}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),qa=function(){var e=g.a.useForm(),t=Object(f.a)(e,1)[0],n=Object(a.useState)(),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(s.d)(),l=Object(a.useContext)(Ia).channel,d=Object(a.useState)(l.id),u=Object(f.a)(d,1)[0],j=Object(a.useState)(l.name),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)(l.state),y=Object(f.a)(v,2),w=y[0],C=y[1],I=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),E={name:O,state:w},F=function(){i(!1),t.resetFields()},A=function(){i(!0),C(l.state),x(l.name)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:I,children:Object(h.jsx)(S.a,{onClick:function(){t.setFieldsValue({name:O,state:w}),A()},type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{title:"Editar \xbfC\xf3mo se enter\xf3?",centered:!0,visible:c,footer:!1,onCancel:F,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(){var e,n,a,r;o((e=u,n=E,a=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:e.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):(Object(P.f)("Se ha registrado con \xe9xito"),t.resetFields(),F(),o(Fa()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.c)(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/channel/").concat(e),data:n,success:function(e,t){return Ra(e,t)},postProcessSuccess:a,postProcessError:r}}))},form:t,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<3)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 14:x(n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:O,onChange:function(e){return x(e.target.value)}})}),Object(h.jsx)(g.a.Item,{name:"state",children:Object(h.jsx)(je.a,{checked:w,onChange:function(e){return C(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},Ma=Object(s.b)(null,(function(e){return{dispatchCreateChannelAction:function(t,n,a){return e(Aa(t,n,a))},dispatchFetchAllChannelAction:function(){return e(Fa())}}}))((function(e){e.dispatchCreateChannelAction,e.dispatchFetchAllChannelAction;var t=Object(a.useState)(""),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(!1),j=Object(f.a)(u,2),b=j[0],O=j[1],x=g.a.useForm(),v=Object(f.a)(x,1)[0],y=Object(s.d)(),w=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.validateFields();case 2:(t=e.sent).state=l,y(Aa(t,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):(Object(P.f)("Se ha registrado con \xe9xito"),v.resetFields(),O(!1),y(Fa()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.c)(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Fe(R.kb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){O(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),Object(h.jsx)(ue.a,{title:"Nuevo \xbfC\xf3mo se enter\xf3?",centered:!0,visible:b,footer:!1,onCancel:function(){return O(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:w,validateMessages:{required:"${label} es requerido"},form:v,children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,min:3,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/^[a-zA-Z\u00C0-\u017F\s]+$/,a=/^(?!\s)/,""===r){e.next=15;break}if(!(r.length<3)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 7:if(n.test(r)){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener caracteres especiales.")));case 11:if(a.test(r)){e.next=13;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 13:e.next=16;break;case 15:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:r,onChange:function(e){return c(e.target.value)}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{name:"state",onChange:function(e){return d(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]}):null})),Ua=Object(s.b)((function(e){return{loading:e.loading,channel:e.channel}}),(function(e){return{dispatchFetchAllChannelAction:function(){return e(Fa())},dispatchUpdateStateChannelAction:function(t,n,a){return e(ka(t,n,a))}}}))((function(){var e=Object(s.d)();Object(a.useEffect)((function(){e(Fa())}),[e]);var t=Object(s.e)((function(e){var t;return null===e||void 0===e||null===(t=e.channel)||void 0===t?void 0:t._payload})),n=function(t){Fe(R.wg)?e(ka(t,Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(P.f)("Actualizaci\xf3n exitosa"),e(Fa());case 2:case"end":return t.stop()}}),t)}))))):Object(P.g)("no posee el permiso para cambiar este estado")},r=[{title:"#",dataIndex:"id",key:"id",width:100,render:function(e,n){return t.indexOf(n)+1}},Object(j.a)(Object(j.a)({title:"Nombre",dataIndex:"name",key:"name",width:200},Object(ce.b)("name")),ce.c),{title:"Activo",dataIndex:"state",key:"state",width:150,render:function(e,t){return a=t.state,r=t.id,a?Object(h.jsx)(S.a,{onClick:function(){return n(r)},size:"small",type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{onClick:function(){return n(r)},size:"small",type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var a,r}},{title:"Acciones",key:"actions",width:100,fixed:"right",render:function(e,t){return i(t)}}],c=function(e){return t.find((function(t){return t.id===e.id}))},i=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Ea,{channel:c(e),children:[Fe(R.wg)?Object(h.jsx)(qa,{}):null,"  ",Fe(R.Nb)?Object(h.jsx)(Va,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})})};return Ae(R.Y)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ht,{height:100,title:"\xbfC\xf3mo se enter\xf3?",table:Object(h.jsx)(Q.a,{columns:r,dataSource:t,y:300}),modal:Object(h.jsx)(Ma,{})})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),za=function(){return Object(h.jsx)(Ua,{})},Ga=Object(a.createContext)(),Ba=function(e){var t=e.children,n=e.registerType;return Object(h.jsx)(Ga.Provider,{value:{registerType:n},children:t})},Ya=function(){var e=g.a.useForm(),t=Object(f.a)(e,1)[0],n=Object(s.d)(),r=Object(a.useContext)(Ga).registerType,c=Object(a.useState)(r.name),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(r.state),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(a.useState)(r.id),x=Object(f.a)(O,2),v=x[0],y=x[1],w=Object(a.useState)(!1),C=Object(f.a)(w,2),I=C[0],E=C[1],F=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar"}),A=function(){E(!1),t.resetFields()},k=function(){b(r.state),l(r.name),y(r.id)},T=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validateFields();case 2:a=e.sent,n(Je(v,a,function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:e.sent.error?Object(P.c)(a.message):(Object(P.f)(a.message),n(Be()),t.resetFields(),A());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:F,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){E(!0),k(),t.setFieldsValue({name:o,state:j})},icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{title:"Editar tipo de registro",centered:!0,visible:I,footer:!1,onCancel:A,width:500,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",onFinish:T,form:t,style:{height:"100%",width:"100%"},validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<3)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=14;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 14:l(n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:o,onChange:function(e){return l(e.target.value)}})}),Object(h.jsx)(g.a.Item,{label:"",name:"state",children:Object(h.jsx)(je.a,{checked:j,onChange:function(e){return b(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},Ja=function(){var e=Object(a.useContext)(Ga).registerType,t=Object(a.useState)(e.id),n=Object(f.a)(t,1)[0],r=Object(s.d)(),c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(Wt.a,{title:"\xbf Desea eliminar el tipo de registro ".concat(e.name," ? "),onConfirm:function(){var e,t,a;r((e=n,t=function(){Object(P.f)("Tipo registro eliminado con \xe9xito"),r(Be())},{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/register-type/").concat(e),success:function(){return We(e)},postProcessSuccess:t,postProcessError:a}}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})},Ha=function(){var e=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.registerType}),s.c),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(s.d)();Object(a.useEffect)((function(){u()}),[e]);var o=function(){i(Be())},l=function(e){var t,n,a;Fe(R.jh)?i((t=e,n=function(e){e.error?Object(P.c)(e.message):(Object(P.f)(e.message),o())},{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/register-type/state/").concat(t),success:function(e){return Ze(e)},postProcessSuccess:n,postProcessError:a}})):Object(P.g)("no posee el permiso para cambiar este estado")};Object(a.useEffect)((function(){o()}),[]);var d=function(e){var t=Date.parse(e),n=new Date(t);return n=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()},u=function(){var t=[];for(var n in e)if("_payload"===n){var a=e[n];if(null!==a)for(var r=0;r<a.length;r++)t.push(a[r])}c(t)},j=function(e){for(var t=0;t<r.length;t++)if(r[t].id===e.id)return r[t]},b=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},{title:"Nombre",width:50,dataIndex:"name",key:"name"},{title:"Activo",width:50,dataIndex:"state",key:"state",render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",onClick:function(){return l(a)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return l(a)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",key:"actions",width:20,fixed:"right",render:function(e,t){return function(e){var t=d(e.created_at),n=d(e.updated_at),a=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[" ",e.name,Object(h.jsx)("hr",{})," Creado: ",t," ",Object(h.jsx)("br",{}),"  Modificado: ",n," "]});return Object(h.jsxs)(Ba,{registerType:j(e),children:[Fe(R.jh)?Object(h.jsx)(Ya,{}):null,"  ",Fe(R.Vb)?Object(h.jsx)(Ja,{}):null,"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(S.a,{size:"small",type:"primary",icon:Object(h.jsx)(Ht.a,{})})})]})}(t)}}];return Object(h.jsx)(ht,{height:100,title:"Tipo de Registro",table:Object(h.jsx)(Q.a,{y:300,columns:b,dataSource:r}),modal:Object(h.jsx)(Xe,{CreateRegisterTypeAction:function(e){i(Ye(e,(function(e){e.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se registraba"):(Object(P.f)(e.message),o())})))}})})},Za=function(){return Object(h.jsx)(Ha,{})},Qa=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/activity-type"),success:function(e){return Ka(e)}}}},Ka=function(e){return{type:R.Ze,payload:e}},Wa=function(e){return{type:R.c,payload:e}},Xa=function(e,t){return{type:R.jg,payload:{activityTypeId:e,data:t}}},$a=function(e){return{type:R.rh,payload:{id:e}}},er=function(e){return{type:R.xd,payload:e}},tr=function(){var e=g.a.useForm(),t=Object(f.a)(e,1)[0],n=Object(s.d)(),r=Object(a.useState)(),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(),d=Object(f.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){j({}),t.setFieldsValue({name:"",state:!1})}),[]),Object(a.useEffect)((function(){t.submit()}),[u]);var b=function(){t.resetFields()},O=function(){b(),o(!1)},x=function(e){var t,a,r;n((t=e,a=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?(Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba"),O(),b(),n(Qa())):(Object(P.f)("Tipo de actividad registrado"),O(),b());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/activity-type"),data:t,success:function(e){return Wa(e)},postProcessSuccess:a,postProcessError:r}})),n(Qa())};return Fe(R.fb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){o(!0)},icon:Object(h.jsx)(De.a,{}),children:" Nuevo"}),Object(h.jsx)(ue.a,{title:"Nuevo Tipo de actividad",centered:!0,visible:i,footer:!1,onCancel:O,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(e){return x(e)},form:t,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,min:5,max:40,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^(?!\s)/,!(n.length<5)){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 5 caracteres.")));case 5:if(a.test(n)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{})}),Object(h.jsx)(g.a.Item,{name:"state",valuePropName:"checked",children:Object(h.jsx)(je.a,{children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]}):null},nr=function(e){var t=e.activityType,n=Object(s.d)(),r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(),j=Object(f.a)(u,2),b=j[0],O=j[1];Object(a.useEffect)((function(){1!==t.id&&2!==t.id||d(!0),c.setFieldsValue({name:t.name,state:t.state})}),[]);var x=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar"}),v=function(){O(!1)},y=function(e){var a,r,c,i;n((a=t.id,r=e,c=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?(Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se actualizaba"),v()):(Object(P.f)("Tipo de actividad actualizado"),v(),n(Qa()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/activity-type/").concat(a),data:r,success:function(e,t){return Xa(e,t)},postProcessSuccess:c,postProcessError:i}}))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:x,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",disabled:l,onClick:function(){O(!0)},icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{title:"Actualizar tipo de actividad",centered:!0,visible:b,footer:!1,onCancel:v,width:500,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},form:c,onFinish:function(e){y(e)},validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^(?!\s)/,!(n.length<5)){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 5 caracteres.")));case 5:if(a.test(n)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{})}),Object(h.jsx)(g.a.Item,{name:"state",valuePropName:"checked",children:Object(h.jsx)(je.a,{children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},disabled:!!c.getFieldsError().filter((function(e){return e.errors.length})).length,children:"Guardar"})})]})})]})},ar=n(328),rr=function(e){var t=e.activityType,n=Object(s.d)(),r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(t.id),d=Object(f.a)(l,1)[0];Object(a.useEffect)((function(){1!==t.id&&2!==t.id||o(!0)}),[]);var u=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:u,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el tipo de actividad ".concat(t.name,"? "),onConfirm:function(){var e,t,a;n((e=d,t=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error,ar.b.success("Tipo de actividad eliminada con +\xe9xito"),n(Qa());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,ar.b.error("Error: ".concat(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/activity-type/").concat(e),success:function(){return er(e)},postProcessSuccess:t,postProcessError:a}}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0,disabled:i})})})})},cr=Object(s.b)((function(e){return{loading:e.loading,activityType:e.activityType}}))((function(){var e=Object(s.d)();Object(a.useEffect)((function(){e(Qa())}),[e]);var t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.activityType})),n=function(t){var n,a,r;Fe(R.kg)?e((n=t,a=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(Qa()),Object(P.f)("Registro Actualizado");case 2:case"end":return t.stop()}}),t)}))),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/activity-type/state/").concat(n),success:function(e){return $a(e)},postProcessSuccess:a,postProcessError:r}})):Object(P.g)("no posee el permiso para cambiar este estado")},r=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Nombre",width:100,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{title:"Activo",width:50,dataIndex:"state",key:"state",render:function(e,t){return t.state?Object(h.jsx)(S.a,{onClick:function(){return n(t.id)},size:"small",type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{onClick:function(){return n(t.id)},size:"small",type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})})}},{title:"Acciones",key:"actions",width:30,fixed:"right",render:function(e,t){return c(t)}}],c=function(e){return Object(h.jsxs)(h.Fragment,{children:[Fe(R.kg)?Object(h.jsx)(nr,{activityType:e}):null,"  ",Fe(R.Jb)?Object(h.jsx)(rr,{activityType:e}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})};return Ae(R.b)?Object(h.jsx)(ht,{height:100,title:"Tipo de actividad",table:Object(h.jsx)(Q.a,{y:300,columns:r,dataSource:t.hasOwnProperty("_payload")?t._payload:[]}),modal:Object(h.jsx)(tr,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),ir=function(){return Object(h.jsx)(cr,{})},or=Object(a.createContext)(),sr=function(e){var t=e.children,n=e.Occupation;return Object(h.jsx)(or.Provider,{value:{Occupation:n},children:t})},lr=Object(s.b)(null,(function(e){return{dispatchUpdateOccupationAction:function(t,n,a,r){return e(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/occupation/").concat(e),data:t,success:function(e,t){return Me(e,t)},postProcessSuccess:n,postProcessError:a}}}(t,n,a,r))},dispatchFetchAllOccupationAction:function(){return e(Le())}}}))((function(e){var t=e.dispatchUpdateOccupationAction,n=e.dispatchFetchAllOccupationAction,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useContext)(or).Occupation,o=Object(a.useState)(i.id),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(i.name),j=Object(f.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)(i.state),O=Object(f.a)(p,2),x=O[0],v=O[1],y=Object(a.useState)(!1),w=Object(f.a)(y,2),C=w[0],P=w[1],I=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar"}),E=[],F={name:b,state:x},A=function(){P(!1)},k=function(){return c.resetFields()},T=function(){P(!0),m(i.name),v(i.state),d(i.id)},N=function(e){R("success",e),A(),k(),n()},D=function(e){for(var t in e)E.push("".concat(e[t][0]));R("error",E),A(),k()},R=function(e,t){Re.a[e]({message:"".concat(e,":"),description:"".concat(t.toString())})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:I,children:Object(h.jsx)(S.a,{onClick:function(){c.setFieldsValue({name:b}),T()},type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{title:"Actualizar ocupaci\xf3n",centered:!0,visible:C,footer:!1,onCancel:A,children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){t(l,F,(function(e){e.error?D(e.message):N("Ocupaci\xf3n actualizada")})),n()},style:{height:"100%",width:"100%"},form:c,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"name",rules:[{required:!0}],children:Object(h.jsx)(_.a,{value:b,onChange:function(e){return m(e.target.value)}})}),Object(h.jsx)(g.a.Item,{label:"Estado",name:"state",children:Object(h.jsx)(je.a,{checked:x,onChange:function(e){return v(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})})),dr=Object(s.b)(null,(function(e){return{dispatchDeleteOccupationAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/occupation/").concat(e),success:function(){return ze(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllOccupationAction:function(){return e(Le())}}}))((function(e){var t=e.dispatchDeleteOccupationAction,n=e.dispatchFetchAllOccupationAction,r=Object(a.useContext)(or).Occupation,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0];var o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar la ocupaci\xf3n ".concat(r.name,"? "),onConfirm:function(){t(i,(function(e){Object(P.f)("Ocupaci\xf3n eliminada con \xe9xito"),e(n())}),(function(e){return e.error("Error: ".concat(e))}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),ur=Object(s.b)((function(e){return{loading:e.loading,occupation:e.occupation}}),(function(e){return{dispatchFetchAllOccupationAction:function(){return e(Le())}}}))((function(e){var t=e.occupation,n=e.dispatchFetchAllOccupationAction;Object(a.useEffect)((function(){return n()}),[n]);var r=Object(s.d)(),c=[];for(var i in t)if("_payload"===i){var o=t[i];if(null!==o)for(var l=0;l<o.length;l++)c.push(o[l])}var d=function(e){for(var t=0;t<c.length;t++)if(c[t].id===e.id)return c[t]},u=function(e){var t,a,c;Fe(R.Mg)?r((t=e,a=function(e){e.error?Object(P.a)(e.message):Object(P.f)("Ocupaci\xf3n actualizado"),n()},{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/occupation/state/").concat(t),success:function(e){return Ue(e)},postProcessSuccess:a,postProcessError:c}})):Object(P.g)("no posee el permiso para cambiar este estado")},b=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Nombre",width:90,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{title:"Activo",width:90,dataIndex:"state",key:"state",render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",onClick:function(){return u(a)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return u(a)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",key:"actions",width:30,fixed:"right",render:function(e,t){return m(t)}}],m=function(e){return Object(h.jsxs)(sr,{Occupation:d(e),children:[Fe(R.Mg)?Object(h.jsx)(lr,{}):null,"  ",Fe(R.Rb)?Object(h.jsx)(dr,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})};return Ae(R.gd)?Object(h.jsx)(ht,{height:100,title:"Ocupaci\xf3n",table:Object(h.jsx)(Q.a,{y:300,columns:b,dataSource:c}),modal:Object(h.jsx)(Ge,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),jr=function(){return Object(h.jsx)(ur,{})},br=function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/price-range"),success:function(e){return mr(e)},postProcessSuccess:e,postProcessError:t}}},mr=function(e){return{type:R.zf,payload:e}},pr=function(e){return{type:R.Af,payload:e}},fr=function(e){return{type:R.z,payload:e}},Or=function(e,t){return{type:R.ah,payload:{pricesRangeId:e,data:t}}},hr=function(e){return{type:R.Sd,payload:e}},xr=function(){var e=Object(s.d)(),t=Object(a.useState)(""),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(0),b=Object(f.a)(u,2),O=b[0],x=b[1],v=Object(a.useState)(!1),y=Object(f.a)(v,2),w=y[0],C=y[1],I=Object(a.useState)(!1),E=Object(f.a)(I,2),F=E[0],A=E[1],k=g.a.useForm(),T=Object(f.a)(k,1)[0],N={name:r,lower_limit:l,upper_limit:O,state:w},D=function(){A(!1),T.resetFields()};return Fe(R.tb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){A(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),Object(h.jsx)(ue.a,{footer:!1,title:"Nuevo rango de precio",visible:F,onCancel:D,children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(){var t,n,a;e((t=N,n=function(t){t.error?Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba"):Object(P.f)("Rango de precio registrado"),e(br()),T.resetFields(),D()},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/price-range"),data:t,success:function(e){return fr(e)},postProcessSuccess:n,postProcessError:a}}))},form:T,validateMessages:{required:"${label} es requerido",types:{number:"${label} no puede contener letras."},number:{range:"${label} debe estar entre ${min} y ${max}"}},children:[Object(h.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0,min:3,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^(?!\s)/,c(n),""===r){e.next=14;break}if(!(r.length<3)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 7:if(a.test(r)){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 11:c(r);case 12:e.next=15;break;case 14:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:r,onChange:function(e){return c(e.target.value)}})}),Object(h.jsx)(g.a.Item,{label:"L\xedmite inferior",name:"lower_limit",rules:[{type:"number",min:0,max:999999999999,required:!0},{validator:function(e,t){return/^(?!\s)/.test(t)?Promise.resolve():Promise.reject(new Error("Rango de precio no v\xe1lido"))}}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"},min:0,placeholder:0,parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},value:l,onChange:function(e){return d(e)}}))}),Object(h.jsx)(g.a.Item,{label:"L\xedmite superior",name:"upper_limit",rules:[{type:"number",min:0,max:999999999999},{required:!0},function(){return{validator:function(e,t){if(l<t){var n=/^(?!\s)/;return n.test(t)?/^[0-9\s]+$/.test(t)?n.test(t)?(x(t),Promise.resolve()):Promise.reject(new Error("L\xedmite inferior no v\xe1lida.")):Promise.reject(new Error("El l\xedmite inferior no puede estar vac\xedo.")):Promise.reject(new Error("L\xedmite inferior no v\xe1lido."))}return Promise.reject(new Error("L\xedmite superior menor que l\xedmite inferior"))}}}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"},min:1,placeholder:0,parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},value:O,onChange:function(e){return x(e)}}))}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(je.a,{value:w,onChange:function(e){return C(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]}):null},vr=Object(a.createContext)(),yr=function(e){var t=e.children,n=e.pricesRange;return Object(h.jsx)(vr.Provider,{value:{pricesRange:n},children:t})},gr=Object(s.b)(null,(function(e){return{dispatchDeletePricesRangeAction:function(t,n,a){return e(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/price-range/").concat(e),success:function(){return hr(e)},postProcessSuccess:t,postProcessError:n}}}(t,n,a))},dispatchFetchAllPricesRangeAction:function(){return e(br())}}}))((function(e){var t=e.dispatchDeletePricesRangeAction,n=e.dispatchFetchAllPricesRangeAction,r=Object(a.useContext)(vr).pricesRange,c=Object(a.useState)(r.id),i=Object(f.a)(c,1)[0],o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el rango de precios ".concat(r.name,"? "),onConfirm:function(){t(i,(function(e){Object(P.f)("Rango de precios eliminado con \xe9xito"),e(n())}),(function(e){return e.error("Error: ".concat(e))}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),_r=Object(s.b)(null,(function(e){return{dispatchUpdatedPriceRangeAction:function(t,n,a,r){return e(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/price-range/").concat(e),data:t,success:function(e,t){return Or(e,t)},postProcessSuccess:n,postProcessError:a}}}(t,n,a,r))},dispatchFetchAllPriceRangeAction:function(){return e(br())}}}))((function(e){var t=e.dispatchUpdatedPriceRangeAction,n=e.dispatchFetchAllPriceRangeAction,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useContext)(vr).pricesRange,o=Object(a.useState)(i.id),s=Object(f.a)(o,1)[0],l=Object(a.useState)(i.name),d=Object(f.a)(l,2),u=d[0],b=d[1],m=Object(a.useState)(i.upper_limit),p=Object(f.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)(i.lower_limit),y=Object(f.a)(v,2),w=y[0],C=y[1],P=Object(a.useState)(i.state),I=Object(f.a)(P,2),E=I[0],F=I[1],A=Object(a.useState)(!1),k=Object(f.a)(A,2),T=k[0],N=k[1],D=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar "}),L=[],V={name:u,upper_limit:O,lower_limit:w,state:E},q=function(){N(!0),F(i.state),b(i.name),x(i.upper_limit),C(i.lower_limit)},M=function(){c.resetFields()},U=function(){N(!1)},z=function(e){B("success",e),U(),M(),n()},G=function(e){for(var t in e)L.push("".concat(e[t][0]));B("error",L),U(),M()},B=function(e,t){Re.a[e]({message:"".concat(e,":"),description:"".concat(t.toString())})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:D,children:Object(h.jsx)(S.a,{size:"small",type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},onClick:function(){c.setFieldsValue({name:u,upper_limit:parseFloat(O),lower_limit:parseFloat(w),state:E}),q()},icon:Object(h.jsx)(le.a,{})})}),Object(h.jsx)(ue.a,{title:"Editar rango de precio",centered:!0,visible:T,footer:!1,onCancel:function(){return N(!1)},onClose:U,children:Object(h.jsxs)(g.a,{layout:"vertical",style:{height:"100%",width:"100%"},onFinish:function(){t(s,V,(function(e){e.error?G(e.message):z("Rango de precio actualizado")})),n()},form:c,validateMessages:{required:"${label} es requerido",types:{number:"${label} deber ser num\xe9rico"}},children:[Object(h.jsx)(g.a.Item,{name:"name",label:"Nombre",rules:[{required:!0}],children:Object(h.jsx)(_.a,{value:u,onChange:function(e){return b(e.target.value)}})}),Object(h.jsx)(g.a.Item,{name:"upper_limit",label:"L\xedmite superior",rules:[{type:"number",min:0},{required:!0}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{defaultValue:O,parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},value:O,onChange:function(e){return x(e)},style:{width:"100%"}}))}),Object(h.jsx)(g.a.Item,{name:"lower_limit",label:"L\xedmite infeior",rules:[{type:"number",min:0},{required:!0}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{defaultValue:w,parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},value:w,onChange:function(e){return C(e)},style:{width:"100%"}}))}),Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(je.a,{name:"state",checked:E,onChange:function(e){return F(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})})),Sr=Object(s.b)((function(e){return{loading:e.loading,pricesRange:e.pricesRange}}),(function(e){return{dispatchFetchAllPricesRangeAction:function(){return e(br())}}}))((function(e){var t=e.pricesRange,n=e.dispatchFetchAllPricesRangeAction,r=Object(s.d)();Object(a.useEffect)((function(){return n()}),[n]);var c=[];for(var i in t)if("_payload"===i){var o=t[i];if(null!==o)for(var l=0;l<o.length;l++)c.push(o[l])}var d=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),u=function(e){var t,n;Fe(R.bh)?r((t=e,n=function(e){e.error?Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se actualizaba el esatdo"):(Object(P.f)("Estado del rango de precio actualizado"),r(br()))},{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/price-range/state/").concat(t),postProcessSuccess:n}})):Object(P.g)("no posee el permiso para cambiar este estado")},b=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Nombre",width:90,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{title:"L\xedmite superior",width:90,dataIndex:"upper_limit",key:"upper_limit",render:function(e,t){return function(e){return Object(h.jsx)(h.Fragment,{children:null===e.upper_limit?"":d.format(parseInt(e.upper_limit))})}(t)}},{title:"L\xedmite inferior",key:"lower_limit",width:70,dataIndex:"lower_limit",render:function(e,t){return function(e){return Object(h.jsx)(h.Fragment,{children:null===e.lower_limit?"":d.format(parseInt(e.lower_limit))})}(t)}},{title:"Estado",key:"state",width:70,dataIndex:"state",render:function(e,t){return e?Object(h.jsx)(S.a,{onClick:function(){return u(t.id)},size:"small",type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{onClick:function(){return u(t.id)},size:"small",type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})})}},{title:"Acciones",key:"actions",width:70,fixed:"right",render:function(e,t){return p(t)}}],m=function(e){for(var t=0;t<c.length;t++)if(c[t].id===e.id)return c[t]},p=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(yr,{pricesRange:m(e),children:[Fe(R.bh)?Object(h.jsx)(_r,{}):null,"  ",Fe(R.Sb)?Object(h.jsx)(gr,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})})};return Ae(R.kd)?Object(h.jsx)(ht,{title:"Rango de precios",table:Object(h.jsx)(Q.a,{columns:b,dataSource:c}),modal:Object(h.jsx)(xr,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),wr=function(){return Object(h.jsx)(Sr,{})},Cr=Object(a.createContext)(),Pr=function(e){var t=e.children,n=e.advertisingImage;return Object(h.jsx)(Cr.Provider,{value:{advertisingImage:n},children:t})},Ir=_.a.TextArea,Er=function(){var e=Object(s.d)(),t=Object(a.useContext)(Cr).advertisingImage,n=Object(a.useState)(t.description),r=Object(f.a)(n,1)[0],c=Object(a.useState)(t.state),i=Object(f.a)(c,2),o=i[0],l=i[1],d=g.a.useForm(),u=Object(f.a)(d,1)[0],b=Object(a.useState)(!1),O=Object(f.a)(b,2),x=O[0],v=O[1],y=Object(a.useState)(t.multimedia.path),_=Object(f.a)(y,1)[0],w=Object(a.useState)([{uid:"-1",name:"image.png",status:"done",url:_}]),C=Object(f.a)(w,2),I=C[0],E=C[1],F=function(){u.resetFields()},A=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar"}),k=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},T=function(){var n=Object(p.a)(m.a.mark((function n(){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.validateFields();case 3:if(void 0===(a=n.sent).image){n.next=16;break}return n.t0=j.a,n.t1=Object(j.a)({},a),n.t2={},n.t3=o,n.next=11,k(a.image.fileList[0].originFileObj);case 11:n.t4=n.sent,n.t5={state:n.t3,image:n.t4},a=(0,n.t0)(n.t1,n.t2,n.t5),n.next=17;break;case 16:a=Object(j.a)(Object(j.a)({},a),{},{state:o,image:null});case 17:e((r=t.id,c=a,i=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Se ha actualizado con \xe9xito"),v(!1),F(),e(L());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/advertising-image/").concat(r),data:c,success:function(e,t){return U(e,t)},postProcessSuccess:i,postProcessError:s}})),n.next=23;break;case 20:n.prev=20,n.t6=n.catch(0),console.error(n.t6);case 23:case"end":return n.stop()}var r,c,i,s}),n,null,[[0,20]])})));return function(){return n.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:A,children:Object(h.jsx)(S.a,{size:"small",style:{backgroundColor:"#ffa247",border:"#ffa247"},icon:Object(h.jsx)(le.a,{}),type:"primary",onClick:function(){v(!0),u.setFieldsValue({description:r})}})}),Object(h.jsx)(ue.a,{title:"Actualizar im\xe1genes publicitarias",visible:x,footer:!1,onCancel:function(){v(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",onFinish:T,style:{height:"100%",width:"100%"},form:u,children:[Object(h.jsx)(g.a.Item,{name:"image",label:"Imagen publicitaria",children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",fileList:I,maxCount:1,onChange:function(e){var t=e.fileList;E(t)},accept:"image/*",children:"+ Subir"})}),Object(h.jsx)(g.a.Item,{name:"description",label:"Descripci\xf3n:",children:Object(h.jsx)(Ir,{rows:6})}),Object(h.jsx)(g.a.Item,{name:"state",children:Object(h.jsx)(je.a,{checked:o,onChange:function(e){return l(e.target.checked)},children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",tmlType:"submit",style:{position:"absolute",right:1,top:10},children:"Actualizar"})})]})})]})},Fr=Object(s.b)(null,(function(e){return{dispatchDeleteAdvertisingImageAction:function(t,n,a){return e(V(t,n,a))},dispatchFetchAllAdvertisingImageAction:function(){return e(L())}}}))((function(e){e.dispatchDeleteAdvertisingImageAction,e.dispatchFetchAllAdvertisingImageAction;var t=Object(a.useContext)(Cr).advertisingImage,n=Object(a.useState)(t.id),r=Object(f.a)(n,1)[0],c=Object(s.d)();var i=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"}),o=function(){Object(P.f)("Imagen eliminada con \xe9xito"),c(L())};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:i,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar la imagen?",onConfirm:function(){c(V(r,o,(function(e){return Object(P.c)("Error: ".concat(e))})))},onCancel:function(){Object(P.g)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})})),Ar=_.a.TextArea,kr=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=function(){n.resetFields()},d=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},u=function(){var t=Object(p.a)(m.a.mark((function t(){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:return void 0===(a=t.sent).state&&(a.state=!1),t.prev=4,t.t0=j.a,t.t1=Object(j.a)({},a),t.t2={},t.next=10,d(a.image.fileList[0].originFileObj);case 10:t.t3=t.sent,t.t4={image:t.t3},r=(0,t.t0)(t.t1,t.t2,t.t4),e((c=r,i=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Se ha registrado con \xe9xito"),o(!1),l(),e(L());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/advertising-image"),data:c,success:function(e){return M(e)},postProcessSuccess:i,postProcessError:s}})),t.next=18;break;case 16:t.prev=16,t.t5=t.catch(4);case 18:case"end":return t.stop()}var c,i,s}),t,null,[[4,16]])})));return function(){return t.apply(this,arguments)}}();return Fe(R.gb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(S.a,{type:"primary",onClick:function(){o(!0)},children:[Object(h.jsx)(De.a,{})," Nueva Imagen"]}),Object(h.jsx)(ue.a,{title:"Registrar im\xe1genes publicitarias",visible:i,footer:!1,onCancel:function(){o(!1)},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},form:n,onFinish:u,children:[Object(h.jsx)(g.a.Item,{name:"image",label:"Im\xe1gen publicitaria",children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",maxCount:1,accept:"image/*",children:"+ subir"})}),Object(h.jsx)(g.a.Item,{name:"description",label:"Descripci\xf3n:",children:Object(h.jsx)(Ar,{rows:6})}),Object(h.jsx)(g.a.Item,{name:"state",label:"Estado",valuePropName:"checked",children:Object(h.jsx)(je.a,{children:"Activo "})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",tmlType:"submit",style:{position:"absolute",right:1,top:10},children:"Guardar"})})]})})]}):null},Tr=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.advertisingImage._payload}));Object(a.useEffect)((function(){e(L())}),[e]);var n=[{title:"#",width:20,dataIndex:"id",key:"id"},{title:"Imagen",width:90,dataIndex:"multimedia",key:"multimedia",render:function(e){return Object(h.jsxs)("a",{href:e.path,target:"_blank",rel:"noreferrer",children:[" ",e.name," "]})}},{title:"Descripci\xf3n",width:90,dataIndex:"description",key:"description"},{title:"Activo",width:40,dataIndex:"state",key:"state",render:function(e,t){return i(t.state,t.id)}},{title:"Acciones",key:"actions",fixed:"right",width:40,render:function(e,t){return o(t)}}],r=function(e){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return t[n]},c=function(t){Fe(R.lg)?e(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/advertising-image/state/").concat(e),success:function(e){return G(e)},postProcessSuccess:t,postProcessError:n}}}(t,function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)("Imagen publicitaria actualizada"),e(L());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):Object(P.g)("no posee el permiso para cambiar este estado")},i=function(e,t){return e?Object(h.jsx)(S.a,{onClick:function(){return c(t)},icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}),size:"small",type:"text"}):Object(h.jsx)(S.a,{onClick:function(){return c(t)},size:"small",type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})})},o=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Pr,{advertisingImage:r(e),children:[Fe(R.lg)?Object(h.jsx)(Er,{}):null,"  ",Fe(R.Kb)?Object(h.jsx)(Fr,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:"Imagen "+e.id,updated_at:e.updated_at})]})})};return Ae(R.K)?Object(h.jsx)(ht,{height:100,title:"Im\xe1genes publicitarias",table:Object(h.jsx)(Q.a,{y:300,columns:n,dataSource:t}),modal:Object(h.jsx)(kr,{})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Nr=function(){return Object(h.jsx)(Tr,{})},Dr=n(97),Rr=n(623),Lr=n(586),Vr=function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/module"),success:function(e){return Mr(e)},postProcessSuccess:e,postProcessError:t}}},qr=function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/module"),data:e,success:function(e){return Ur(e)},postProcessSuccess:t,postProcessError:n}}},Mr=function(e){return{type:R.vf,payload:e}},Ur=function(e){return{type:R.u,payload:e}},zr=function(e,t){return{type:R.Jg,payload:{id:e,data:t}}},Gr=function(e){return{type:R.Od,payload:{id:e}}},Br=function(e){return{type:R.yh,payload:{moduleId:e}}},Yr=function(){var e=Object(s.d)(),t=Object(a.useState)(""),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=g.a.useForm(),b=Object(f.a)(u,1)[0],O=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.resource})),x=function(){d(!1)},v=function(){var t=Object(p.a)(m.a.mark((function t(){var n,a,r,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.validateFields();case 2:if(n=t.sent,a=[],n.actions){r=Object(Dr.a)(n.actions);try{for(i=function(){var e=c.value;e&&-1===a.findIndex((function(t){return t.toLowerCase()===e.action.toLowerCase()}))&&a.push(e.action)},r.s();!(c=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}n.actions=a,e(qr(n,function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:t.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):(Object(P.f)("Se ha registrado con \xe9xito"),b.resetFields(),x(),e(Vr()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.c)(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Fe(R.qb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){d(!0)},children:"Nuevo"}),Object(h.jsxs)(ue.a,{footer:!1,title:"Nuevo m\xf3dulo",visible:l,onCancel:x,children:[Object(h.jsx)(g.a.Item,{label:Object(h.jsx)("label",{style:{color:"red"},children:"Los campos en blanco y/o repetidos seran borrado al momento de guardar"})}),Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},onFinish:v,form:b,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre",name:"name",rules:[{required:!0,min:3,max:100,validator:function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/^[a-zA-Z\u00C0-\u017F\s]+$/,a=/^(?!\s)/,""===r){e.next=15;break}if(!(r.length<3)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 7:if(n.test(r)){e.next=11;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 11:if(a.test(r)){e.next=13;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 13:e.next=16;break;case 15:return e.abrupt("return",Promise.reject(new Error("Nombre vac\xedo.")));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:r,onChange:function(e){return c(e.target.value)}})}),Object(h.jsx)(g.a.Item,{label:"Recurso",name:"resource_id",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Selecciona un recurso",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(O)&&O._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.List,{name:"actions",children:function(e,t){var n=t.add,a=t.remove;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{onClick:function(){n()},block:!0,icon:Object(h.jsx)(De.a,{}),children:"Agregar Accion"})}),e.map((function(e){return Object(h.jsxs)(Lr.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(h.jsx)(g.a.Item,Object(j.a)(Object(j.a)({label:""},e),{},{name:[e.name,"action"],fieldKey:e.fieldKey,id:e.fieldKey,children:Object(h.jsx)(_.a,{style:{width:"450px"},placeholder:"Aqui la Accion"})})),Object(h.jsx)(Rr.a,{onClick:function(){a(e.name)}})]},e.key)}))]})}}),Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Estado",name:"state",children:Object(h.jsx)(je.a,{children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})]})]}):null},Jr=Object(a.createContext)(),Hr=function(e){var t=e.children,n=e.module;return Object(h.jsx)(Jr.Provider,{value:{module:n},children:t})},Zr=function(){var e=Object(a.useContext)(Jr).module,t=Object(a.useState)(e.id),n=Object(f.a)(t,1)[0],r=Object(s.d)(),c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el lugar de atenci\xf3n ".concat(e.name,"? "),onConfirm:function(){r(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/module/").concat(e),success:function(){return Gr(e)},postProcessSuccess:t,postProcessError:n}}}(n,(function(){Object(P.f)("M\xf3dulo eliminado con \xe9xito"),r(Vr())}),(function(e){return e.error("Error: ".concat(e))})))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})},Qr=n(220),Kr=function(){var e,t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.resource})),n=Object(a.useContext)(Jr).module,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useState)(),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Editar "}),b=Object(s.d)(),O=function(){d(!1),c.resetFields()},x=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.validateFields();case 2:if((t=e.sent).resource_id=t.resourceId,a=[],t.actions){r=Object(Dr.a)(t.actions);try{for(o=function(){var e=i.value;e&&-1===a.findIndex((function(t){return t.toLowerCase()===e.action.toLowerCase()}))&&a.push(e.action)},r.s();!(i=r.n()).done;)o()}catch(j){r.e(j)}finally{r.f()}}t.actions=a,b((s=n.id,l=t,d=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):(Object(P.f)("Se ha registrado con \xe9xito"),c.resetFields(),O(),b(Vr()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(P.c)(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/module/").concat(s),data:l,success:function(e,t){return zr(e,t)},postProcessSuccess:d,postProcessError:u}}));case 8:case"end":return e.stop()}var s,l,d,u}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:u,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",onClick:function(){d(!0),c.setFieldsValue({name:n.name,resourceId:n.resourceId,id:n.id,actions:n.actions,state:null===n||void 0===n?void 0:n.state})},icon:Object(h.jsx)(le.a,{})})}),Object(h.jsxs)(ue.a,{title:"Actualizar m\xf3dulo",centeredv:!0,visible:l,footer:!1,onCancel:O,children:[Object(h.jsx)(g.a.Item,{label:Object(h.jsx)("label",{style:{color:"red"},children:"Los campos en blanco y/o repetidos seran borrado al momento de guardar"})}),Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",style:{height:"100%",width:"100%"},form:c,onFinish:x,validateMessages:{required:"${label} es requerido"},children:[Object(h.jsx)(g.a.Item,{label:"Nombre: ",name:"name",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=/^[a-zA-Z\u00C0-\u017F\s]+$/,r=/^(?!\s)/,!(n.length<3)){e.next=6;break}return e.abrupt("return",Promise.reject(new Error("El nombre debe tener al menos 3 caracteres.")));case 6:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("El nombre no puede contener n\xfameros.")));case 10:if(r.test(n)){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("Nombre no v\xe1lido")));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{value:n.name})}),Object(h.jsx)(g.a.Item,{label:"Recurso",name:"resourceId",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,placeholder:"Selecciona un recurso",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(t)&&(null===(e=t._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)})))]})}),Object(h.jsx)(g.a.List,{name:"actions",children:function(e,t,n){var a=t.add,r=t.remove;return Object(Qr.a)(n),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{onClick:function(){a()},block:!0,icon:Object(h.jsx)(De.a,{}),children:"Agregar Accion"})}),e.map((function(e){return Object(h.jsxs)(Lr.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(h.jsx)(g.a.Item,Object(j.a)(Object(j.a)({label:""},e),{},{name:[e.name,"action"],fieldKey:e.fieldKey,id:e.fieldKey,children:Object(h.jsx)(_.a,{style:{width:"450px"},placeholder:"Aqui la Accion"})})),Object(h.jsx)(Rr.a,{onClick:function(){r(e.name)}})]},e.key)}))]})}}),Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Estado",name:"state",children:Object(h.jsx)(je.a,{children:"Activo"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})]})]})},Wr=function(e){return{type:R.Ef,payload:e}},Xr=function(){var e=Object(s.d)();Object(a.useEffect)((function(){e(Vr()),e({type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/resource"),success:function(e){return Wr(e)}}})}),[e]);var t=Object(s.e)((function(e){var t;return null===e||void 0===e||null===(t=e.md)||void 0===t?void 0:t._payload})),n=function(e){return t.find((function(t){return t.id===e.id}))},r=function(t){var n,a,r;Fe(R.Kg)?e((n=t,a=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(P.f)("Estado Actualizado"),e(Vr());case 2:case"end":return t.stop()}}),t)}))),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/module/state/").concat(n),success:function(e){return Br(e)},postProcessSuccess:a,postProcessError:r}})):Object(P.g)("no posee el permiso para cambiar este estado")},c=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Nombre",width:90,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),Object(j.a)(Object(j.a)({title:"Recurso",width:90,dataIndex:"resourceName",key:"resourceName"},Object(ce.b)("resourceName")),ce.c),{title:"Activo",dataIndex:"state",key:"state",width:30,render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",onClick:function(){return r(a)},type:"text",icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",onClick:function(){return r(a)},type:"text",icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",dataIndex:"actions",fixed:"right",width:70,render:function(e,t){return i(t)}}],i=function(e){return Object(h.jsxs)(Hr,{module:n(e),children:[Fe(R.Kg)?Object(h.jsx)(Kr,{}):null,"  ",Fe(R.Qb)?Object(h.jsx)(Zr,{}):null,"  ",Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})};if(!Ae(R.fd))return Object(h.jsx)(Kt.Redirect,{to:R.Ib});var o=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(qr(n,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):Object(P.f)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"M\xf3dulos",extra:Fe(R.ob)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Hr,{context:o,children:Object(h.jsx)(Yr,{title:"Registrar Modulo"})})}):Object(h.jsx)(h.Fragment,{})}),Object(h.jsx)(Q.a,{size:"small",columns:c,dataSource:t,x:1500,y:500})]})})},$r=function(){return Object(h.jsx)(Xr,{})},ec=n(175),tc=n.n(ec),nc=n(162),ac=function(e){var t,n=g.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Ver"}),i=Object(a.useState)(e.record.type_id),o=Object(f.a)(i,1)[0],s=Object(a.useState)(e.record.user),l=Object(f.a)(s,1)[0],d=Object(a.useState)(e.record.class_id),u=Object(f.a)(d,1)[0],j=Object(a.useState)(e.record.ip),b=Object(f.a)(j,1)[0],m=Object(a.useState)(e.record.created_at),p=Object(f.a)(m,1)[0],O=Object(a.useState)(JSON.stringify(e.record.final_state)),x=Object(f.a)(O,1)[0],v=Object(a.useState)(!1),y=Object(f.a)(v,2),w=y[0],C=y[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(S.a,{onClick:function(){C(!0),r.setFieldsValue({type:o,user:l,ip:b,class_name:u,creation_date:p,final_state:x})},type:"primary",size:"small",icon:Object(h.jsx)(nc.a,{})})}),Object(h.jsx)(lt.a,{title:"Ver Auditor\xeda del Sistema",width:"auto",onClose:function(){C(!1)},visible:w,bodyStyle:{paddingBottom:80},footer:null,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:r,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(g.a.Item,{name:"type",label:"Tipo",children:Object(h.jsx)(_.a,{value:o,disabled:!0})})}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(g.a.Item,{name:"class_name",label:"Clase",children:Object(h.jsx)(_.a,{disabled:!0,value:u})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{name:"user",label:"Usuario",children:Object(h.jsx)(_.a,{value:l,disabled:!0})})})}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(g.a.Item,{name:"creation_date",label:"Fecha",children:Object(h.jsx)(_.a,{disabled:!0,value:p})})}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(g.a.Item,{name:"ip",label:"Ip",children:Object(h.jsx)(_.a,{disabled:!0,value:b})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{name:"final_state",label:"Estado final",children:Object(h.jsx)(_.a.TextArea,{disabled:!0,rows:4,value:null===(t=x[0])||void 0===t?void 0:t.email})})})})]})})]})},rc=function(e){return{type:R.Hf,payload:e}},cc=Object(s.b)((function(e){return{loading:e.loading,systemAudit:e.systemAudit}}),(function(e){return{dispatchFetchAllSystemAuditAction:function(){return e({type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/system-audit"),headers:R.hg,success:function(e){return rc(e)}}})}}}))((function(e){var t=e.systemAudit,n=e.dispatchFetchAllSystemAuditAction;Object(a.useEffect)((function(){return n()}),[n]);var r=[];if(null!=t._payload)for(var c in t)if("_payload"===c)for(var i=t[c],o=0;o<i.length;o++)r.push(i[o]);var s=function(e){for(var t=0;t<r.length;t++)if(r[t].id===e.id)return r[t]},l=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Clase",width:90,dataIndex:"class_id",key:"class_id"},Object(ce.b)("class_id")),ce.c),Object(j.a)(Object(j.a)({title:"Tipo",width:90,dataIndex:"type_id",key:"type_id"},Object(ce.b)("type_id")),ce.c),Object(j.a)(Object(j.a)({title:"IP",width:90,dataIndex:"ip",key:"ip"},Object(ce.b)("ip")),ce.c),Object(j.a)(Object(j.a)({title:"Usuario",width:90,dataIndex:"user",key:"user"},Object(ce.b)("user")),ce.c),Object(j.a)(Object(j.a)({title:"Fecha",width:90,dataIndex:"created_at",key:"created_at"},Object(ce.b)("created_at")),ce.c),{title:"Acciones",dataIndex:"actions",width:70,fixed:"right",render:function(e,t){return d(t)}}],d=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ac,{record:s(e)})})};return Ae(R.eg)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ht,{title:"Auditor\xedas del Sistema",table:Object(h.jsx)(Q.a,{columns:l,dataSource:t._payload})})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),ic=function(){return Object(h.jsx)(cc,{})},oc=n(614),sc=function(e){var t,n,r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],s=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Ver"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:s,children:Object(h.jsx)(S.a,{onClick:function(){o(!0)},type:"primary",size:"small",icon:Object(h.jsx)(nc.a,{})})}),Object(h.jsxs)(lt.a,{title:"Ver auditor\xeda del sistema",width:"900",onClose:function(){o(!1)},visible:i,bodyStyle:{paddingBottom:80},footer:null,children:[Object(h.jsxs)(oc.b,{title:"Petici\xf3n",children:[Object(h.jsx)(oc.b.Item,{label:"Fecha",children:e.record.created_at}),Object(h.jsx)(oc.b.Item,{label:"Tipo petici\xf3n",children:null===e||void 0===e||null===(t=e.record)||void 0===t?void 0:t.petition_type}),Object(h.jsx)(oc.b.Item,{label:"URL",children:e.record.url}),Object(h.jsx)(oc.b.Item,{label:"IP",children:e.record.ip}),Object(h.jsx)(oc.b.Item,{label:"Datos",children:e.record.response})]}),Object(h.jsx)(J.a,{}),Object(h.jsx)(oc.b,{title:"Respuesta",children:Object(h.jsx)(oc.b.Item,{label:"Mensaje",children:e.record.message})}),Object(h.jsx)(J.a,{}),Object(h.jsx)(oc.b,{title:"Token usuario auntenticado",children:Object(h.jsxs)(oc.b.Item,{label:"Token",children:[null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.request_token," "]})})]})]})},lc=function(e){return{type:R.kf,payload:e}},dc=Object(s.b)((function(e){return{loading:e.loading,caughtErrorAction:e.caughtErrorAction}}),(function(e){return{dispatchFetchAllErrorAction:function(){return e({type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/caught-error"),headers:R.hg,success:function(e){return lc(e)}}})}}}))((function(e){var t=e.caughtErrorAction,n=e.dispatchFetchAllErrorAction;Object(a.useEffect)((function(){return n()}),[n]);var r=[];for(var c in t)if("_payload"===c)for(var i=t[c],o=0;o<i.length;o++)r.push(i[o]);var s=function(e){for(var t=0;t<r.length;t++)if(r[t].id===e.id)return r[t]},l=[{title:"#",width:20,dataIndex:"id",key:"id",defaultSortOrder:"descend",sorter:function(e,t){return e.id-t.id}},Object(j.a)(Object(j.a)({title:"Fecha",width:90,dataIndex:"created_at",key:"created_at"},Object(ce.b)("created_at")),ce.c),Object(j.a)(Object(j.a)({title:"C\xf3digo",width:90,dataIndex:"error_code",key:"error_code"},Object(ce.b)("error_code")),ce.c),Object(j.a)(Object(j.a)({title:"IP",width:90,dataIndex:"ip",key:"ip"},Object(ce.b)("ip")),ce.c),Object(j.a)(Object(j.a)({title:"Mensaje",width:90,dataIndex:"message",key:"message"},Object(ce.b)("message")),ce.c),Object(j.a)(Object(j.a)({title:"Url",width:90,dataIndex:"url",key:"url"},Object(ce.b)("url")),ce.c),{title:"Acciones",dataIndex:"actions",fixed:"right",width:70,render:function(e,t){return d(t)}}],d=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(sc,{record:s(e)})})};return Ae(R.ed)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ht,{title:"Errores",table:Object(h.jsx)(Q.a,{columns:l,dataSource:t._payload})})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),uc=function(){return Object(h.jsx)(dc,{})},jc=(n(423),function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),bc=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t||null===(n=t.type)||void 0===n||null===(a=n.toLowerCase())||void 0===a?void 0:a.includes("image"))&&["png","jpg","jpeg","tif","tiff"].includes(null===t||void 0===t||null===(r=t.url)||void 0===r?void 0:r.toLowerCase())){e.next=13;break}if(c=t.url){e.next=6;break}return e.next=5,jc(t);case 5:c=e.sent;case 6:(i=document.createElement("a")).target="_blank",i.href=c,i.download=t.name,i.click(),e.next=22;break;case 13:if(o=t.url){e.next=18;break}return e.next=17,jc(t);case 17:o=e.sent;case 18:(s=new Image).src=o,window.open(o).document.write(s.outerHTML);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mc=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/general-setting/")+JSON.parse(localStorage.USER_INFO).id,success:function(e){return pc(e)}}}},pc=function(e){return{type:R.sf,payload:e}},fc=function(e){return{type:R.t,payload:e}},Oc=function(){var e=Object(s.d)();Object(a.useEffect)((function(){e(mc()),e(_t())}),[e]);var t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.profile._payload})),n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.generalSetting._payload})),r=Object(a.useState)(null===n||void 0===n?void 0:n.accountant_profile_id),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(null===n||void 0===n?void 0:n.construction_manager_profile_id),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(0),O=Object(f.a)(b,2),x=O[0],v=O[1],y=Object(a.useState)(0),C=Object(f.a)(y,2),I=C[0],E=C[1],F=Object(a.useState)(0),A=Object(f.a)(F,2),k=A[0],D=A[1],L=Object(a.useState)(0),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(a.useState)(0),z=Object(f.a)(U,2),G=z[0],B=z[1],Y=Object(a.useState)(0),J=Object(f.a)(Y,2),H=J[0],Z=J[1],Q=g.a.useForm(),K=Object(f.a)(Q,1)[0],W=Object(a.useState)(0),X=Object(f.a)(W,2),$=X[0],ee=X[1],te=Object(a.useState)(0),ne=Object(f.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)([{uid:"-1",name:"image.png",status:"done",url:ae||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAACqCAIAAADEC6Z3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzgwMTE3NDA3MjA2ODExODIyQUUzM0Y0M0ZERTlGMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozOUQ3MjQ2RTFFMzkxMUU3OENGREREQkE0QjczQjA5QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozOUQ3MjQ2RDFFMzkxMUU3OENGREREQkE0QjczQjA5QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDQ4MDExNzQwNzIwNjgxMTgyMkFFMzNGNDNGREU5RjEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDM4MDExNzQwNzIwNjgxMTgyMkFFMzNGNDNGREU5RjEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5tAsPTAAAaqElEQVR42uxdeXBVRbrPcm8SEopNTARJIiAQliwiyL4JRFERgYwyozWL4zIz1vCGYpY/3rOAYqZevamxmMcrx4LnUDiCorKIOCABRWQTIWDCFrZoCFsiArEgy71Z3u+mmc6Xvif3nqXPJfF9v0qlzjm3b5+vu7/ft3T3OTe6sbExisFgREXFcBcwGEwGBoPJwGAwGRgMJgODwWRgMJgMDAaTgcFgMjAYTAYGg8nAYDAZGAwmA4PBZGAwmAwMBpOBwWAyMBhMBgaDycBgMBkYDCYDg8FkYDCYDAwGk4HBYDIwGEwGBoPJwGAwGRgMJgODwWRgMJgMDAaTgcH4nsPDXcBoDbnbq/feaBDHozvGbJiQkOSN1lX5059Vb7zaIE9vPJFk5ltrz/rLbja+XOKnF1dmxnXyRuemeZgMjEgArFh+wj8vK05LbdBpyoSwuOlvxN0VDkj89IgP/9OP+pYMiXNCCQ6TGGYBXayo0vCjZ9DsBSf95suXVDY8sK26NSZIlPoaZx2qXVBQy56BEQm8esK36P54h5VsOVcHxTXPhOl7amj59LjoRQO88vTI9YZXyurkqTi2J2Q0/8Ahw0zO0BwvjU3I6h5ru074lkmfVgeTwTBngA+ZubOGyrB+aHxwIIQ65x2soXGXYTEOkxia8fppv5Ovrz7jN+8W4EMkE+AQiiZ1MFTx5MTo1eM7zOjWrMx/OWVHSCYDwxpWlNfnn6uz7RbChv6tpRZIjvt0DqWufxgUR9P9vZfqmQwMVzC6o1O7K1IOwwoNUXilQfoQFA4b9iB4o3UWVzIZGO7ghd4eanfXnrXMh6Ir9TTTpRUagmrznF6mspRRXZv1ufRmI5OB4Qr6d46Zn9qsvghgEMbYTjYQ34/vEYYMvRJjhKVHtjCxh6lsuAtZE7zms0wGnlplmMVLA+OkaUcA885Z/7MZZtfgEMEj2TCM71sD4iKrM0LX/Y6mRtkzMMwiOTF6aUbzBP/cYgtrcAuPNWcLz6bEOpmcDYEzN5tnV3snxTAZGC7iqb5eBC3ydPUZU5lDPpkhBX4zKM4N2RC20aWG1KRoJgPDRSR5W6z+vlziR1ocVkfp7NPiPt7QM6S2saXlhO80XnRjuI28vl46gxl2DW5LS7fw9L1el9wCXZQA5WxssGUyMCzjt/2bFRppcYjlLUVHV2bGIfFwQyRk83Rh2x7lmAwMy8hN8yAJNkyOg92C1FEkG9PSXJm9BBuRzctTZPn2KMdkYNjBc/2aTS+iIMMNGhVVjeJJAwEkGxqfDaJ3ef5w87btGd1izE/4MhkYGpDVPRZxuTydd9QXvAZH55qQZiDZcCNVeGZvDXU+S4Yl2K6NycCwCRqXQx2VyRxlTx5NMzQy4YV9LTZ4bxqT4CQnYTIwbAJqh4RYniJRpmtwfyxsDl2QYOS6kC2ACXRhYe/YBIeTtkwGhn0gIZZrcHAOMi4qutJi8wVNMHRh7j71aR7nq9pMBoZ9BK/BCedAFx/mp3q0b74AEyjZ7D3XxmRgaIayBgfnoLiFlwbGtQsmMBkYGrBwcLO6v36+jrqFxX28elfZ3GMCk4GhAaN7xMo1OGQOUlmRTujdfKEwAem73rycycDQAMONqEgnNLqFBQW1ChO0L1wwGRga0KdzDF2Di9K9+WJJkY8+MuoGE5gMDG1AREQfdVgyJE7X5gswga7fucQEJgNDGxARgQDieH6qR1c0rzAB/sclJkTxM9AMjQABbmjNaIOZoOvNx0wGRnuCwgTEYKlJ0R3fv2ny6yi/Y2IHSxk8h0mMtoiiK/XKu/dKfS02hIcFyn92ydqb/5gMjLaIU5UNkb8pk4HBuAV+JT2DwZ6BwWAyMBhMBgaDycBgMBkYDCYDg8FkYDCYDAwGk4HB0ANXdq0eOHgQ/z/duauqqopev7N79+HD78fB8GHD7NX83XffnTx1Cgebt2xVPsrJye7Z4667UlJSU1PNV/i315Z9c+UKDtLSUn8056n4+Hh7gi1a/Cd5PO/fft2pUyccHDl6dP2GjRo7dtTIEblTpxh+VFHxzWvLlsvTxMTE382f53AQa2pqPtmxk15ELw0ZPKhL5y79+t1LS9LhmDVzRuaQITbuiCa88eYqqTMDBvSf8+QPnAh2O8lw+vSZgsOHT5481VoBqJ3oNfx/cNKE7KwsoTRmAMU6WHDo3Lmy1gp8+WUh/sTxI9MeysrMtKTZqPmj/G0zpj/WTq3al4WF9BQqheGwpxmKciu9JIcAnSyMGrr6wIECYVMA8D89Lc38yEqsXbeeWs9HHn7IoWBWEbtw4ULnIwFOv7t23e49e7/99luTX/nq69LP93+RlJR4d8+eoUuWlZWtfmtNwaHDlZXfmaXlmbMQxkzlBw4WyAG4fLnczFcMsfOzXdR+Cx5WVFScKD6pUeNTe/Xq27dP8PXa2toPNv3T72+x5znW48kY0N9S/ajnzdVvweiY7OTjx0/AF3fr1q1Lly5Hjh6TH9XU1lq9NRS9sOiIPIWt7N+vn0PBOnfuHGnPEIKvYYEvni35auaMx1uz4rt271YcotXKYWDMWyl8xaGrpUhJToGVClFAcfcIDPr26R2iPGQzvH7q9GklIhWuctKE8ebbDoV7a807iu9V5KceQLj6Pfs+n5Oaih6D8DIowK2H5mSbj1dxawTVNJx+YPhwLYJFlAz527bv+3y/chEB68QJ4xISEpTYEaEOhl/JJdCDrcUnGzd9KCMfJTpMT0tPTr6T9lfRkSPXrl1XhEHlV7+9+szTPzSvE+9/sOnF539uw8sHAxJSIQ1TIEoGMMGefz92/ATtfNm9yK/MVwjnRhXOMPRHbXDU2z/ZIUuOGTVSRjU0QkaZn/3kx+ZvTVVi3Lgx1Dg6FCxCYVIwE8DpJx6fPv2xRxFspCQnB1nKZFwfM3rUHXd0Kz1XJtw6Bi9v1sxgz4DKDx4soFdge57Mmz12zGhUkpSU1ILTHg8uIoRAiFJfX3/+/AUaPZ89W5KVlYkyocMkAUh18dKl+3KynYdJZiwiYkV5CvtqI0hDjPrR1nx5OnXKg4gTxPH165XDhw8zWcmGjR/I0x/NeWrgwAzDkog90DmIJ3GXnJxsacLRZHFRnCKmxSgH64ChRXhv3Xo6ypMnTdIoWCQ8A6IjhQmQwGQCCmYjIoRDgOEHeYLNcHDlJrMiDEnu1CkDMwaseXet1HI4TfhZ84YK1gXh2bixY9tF6nzy1EnqNpHOyqgVDYe9NBOu0Pwb4xg2UMRYBA+Hkkl/tHUbRjmsXdj8UYsY+8GJE7ULZhI21xnAZiVPgLJamopBH6H8gpf/Pbh5wZXDM1pqIYYfoQ58DtVvMeFrEoheTp8+0y7I8Pn+A/IYASQ6dgBJXg8FxZmGoMnroIwMe5Lg1ohwqE/+4sCBsDOQNLhC3qwElloEc5cMO3Z+pvgE23Q0Gt0vWpiKSRNszFvD28x5Mo9eQa6CsCTEVxDjKckDaNnGmYA0jIZ5A/oHaDB40ECaRodutYjWaCUJCfG25cFIUSrCpoTuw23bP6bZjhLbaBTMLTIgjKN5LdrwcO5UXQKh72iABAW1Ha7APyB8p4YKSXaI8lOnTKZ8QPlVq98Oq0m3FzR1hkkSASeCE+oVQ7da6JxGkZT1AcVuKsEwnQJ6+KGpSkwV4c63QwZlfSe4DU5QWFRET6nbtYGRIx5QnEOIwjA8ebNnUTXCUCGxabNMCKzHkxhDRhEYjuysTDrtaKnay+XlTqQCIeHMqWtC3mLIQDoc8Cdh/b9DwVwhAw3joDp0cURvBIzK7S3s04FRnIPhwEggYEVC34L5XxZaSjYimzqfon1Fs6+BGQMopUO3Gr1ETQASNjh/J4Ih2qE+dtOHmw3n32gIpOTNLgmmmQyQhrYBFkijWwiu3Hmdve+5h55+XVoaujxUihq2CIyBbVDLOnLEcCVEpOoYdiE8NbUXPX3jzVVO5g+UTBpsVAyKEgzDYLW2IKNXMM1kKD1XGkLVHMKNytPSWkwsXrh4KexXkKUo31q7bn1bSx6gEy1T5wFKAbEnUjrz0PLTnFu40LfWvLPm3feQoGvJpJXZCzqdCts/Yfy4iAmmkwzXrl2np1a3f4RGTU2N9sphpaiNLCs7b+Zbs2c+0caTh+PFxZTwwZY1KzPT/OQBdFfhf1TT+v36DRsXLf7Trt27bdhjGvnQaVZlOjV0zumGYNrIcPXaNSXI1jjAV1WmddJSbbc7utFRMZlstOXkAWEGndAbMniQoRXIIevoR48dt8R/ik927IQ9hvKhB8xHjNANGnDKaVY6nQpFD5sWahdMGxmqq6upg9M7xrRyMZxaqu3QoYOiSWa+ZZg8tJGVOJo6K06Agq5SnTtXFlpdwP8Xn/95sBlWeuC1ZcsRpYTOyGkmTZXk8/1foAPpdOqj06aZMUzaBdNEhqpmfU3STQaX0CEhwd4XkTzktNyk1EZW4uhsaYitUOAz1UVlTtxQ7X72kx8/Mu2h0GYOUcqKlf9AiGImRkUURFOXgsOHzeTNbgumhwwUN82FHLcd1S1TEUt4OHeqshK3bsP7t7c5MH7UuNJZ1GDQWaawafStzHvYsN/Nnzdr5oyckLsVEaJs3PShpUwavSezhdB5cwQE00AGG/G3beiawFGiL0vbs2Hb8mbPolfENr7bSAa63QhEDb0Pj84yYbxOnT5tfjpIbB6D8tG1Ght5lOEagu21Wo2COSZD16424m97lZt/tC1MXv7tVSd5Dly58ijJbdzGBwNBU2c6f9qa8DTapts3zCtf7tQpQvmU7VtRJnZ8CRkUrTWTN0dAMKdk6Nq1xcNW5eUVGkdaqbyyslKL9tCgonv3O2xUAgfdRpIHZYZU7MwLDTrXhCjF9qwLlO9Xv3xRmVQw6W2UWG7Y/UM19okTwSgsP8+gPHl4ufyyrockgfS0dO2VK48L3mv0DLHJ5OHC+QuSVyJ5cPJCDeepM7Dkv//H+kzUSScT4mLfJH1A7/r1620hM3QumGXPoMxw0a1EzoFBajkTp6Hyr77+mp7elXKXvXoMk4cIr8QpqbM9OO9VZcK0uromqm3AoWAxNnSCBgwwkHoXxul+JOeVI0aie2CU3Ww2uApX4DxRsw0t79pw3qvQAWXLUBuBQ8HsPPY5KCOD5nC7du0x83SfSeRkZ1P1ReVOMi3lSauJE8Y5FE+sxFFfvHnLViW6cy91pvuFw75KIzi+kl4FabTz/PX7B489hUDyLnsWB9A5XU8Mw/rSl46gctuPIyNTpFoLt9DaSq3V2PTM2RKaiqwlz7O7mjore56thv7yYVp0L7J/J28AobPVyrTH7YUTwWwuuk2dMpmeQudseF6Mh2GMoTwqZbvyN95cpbgFXe4reBtfBIaZbi4y3JkXGsq8k7Khw6qPorYgMo4xAoLZJAOcgzLVuH7DRkvRM8z2qtVvw1atefc95SNYLGVe30bly/7379SOQns0PqUdvI3PbaBFdJgNd+aFlVnZU00Nx99eW4aBMDkxT6d3ESPo3aypWLRICmZ/O4ayT0F4YchtZhobkc9ry5YLgwqXnb9tu1IgeF7fZOXoNVE5ZQLkhC3XO07B2/hchbKtyF68R58NEC9jvdW3H23FWGAg/r5iZdiNbhgC+u4Sh8/lhonrIiuY/fcmIeR45ukfwrrTIAFy40/kdvDLSlRq+P7kqFYe4pkx/THEf3Tju6jc0hv1BBMsvVHPUvJw4eKlEC9adil1hpmwF++JFwVIM3G8uBiUpk8XYChXrPzHqJEjRo54wLDHlPeKa1lIbg2RF8zR6yUhFvRs3Yb3lYUtobVmXsCKsZnzZF5ru2vmPPmD4Het0vcthwU6BT7BDSYIzJzxOIyW2zmD8ipVJ+81ys7KlPZCvIw1JSWZTocAKIC/4NkqZUDd8LcUkRfM6btWxd5ae+8eRqvCvhUY1vee9PRNH262oXC2X01uSb3yZs+iP4zgBpRXqTpZKhmYMYA6T/Ey1l/98sXgN4UKi3a7rIxQrQgLpuf3GdChCIoKi4pMvjEbNLj/vvtMDir8Bjol7O8zKDSw+vsMtiG28dl+D7mZ1JmOvfLgv1WIFwVIy3LgQIGwF7lTpwRWePbv/9LEG/giYGUkIimYRyOPYcXxJ161ffTY8WDFFXNE9tQUISD+xC/3GCYe4pd7NL5Q3pItMBRJC+irVKHH2VlZDiuc/tgjiL9lLC5fxgpWI0/DX2s/vIThC36zemTMTWQEi25sbIxiMBj8A4cMBpOBwWAyMBhMBgaDycBgMBkYDCZDm8LcfTUd37+5oKDt/ujJ2rN+SIi/sCWLrtSj2ODNVTigV/BXUdXYWhnncKPOtkiGksqGJUU+0aH4yz9XJ0do76X69s4EDN6K8kArXimrk+rSfvH66cAPtJb6Gj++WO+kjBv3bfdkABOydlS/XNL80/YdvdHi+k+P+PZ/0+7JkNU99tmUWBzMT/UkJ0a39+Y818+L/+lx0ZN7xjop48Z9ncNzezv3r8d9+D+6Y8yq0QlUVy5XfX/WxZeOSlj6fWkLuH3jiSTnZdy4b7v3DB9fa8D/F3qrVvNiVQMnG4z/Xwk0okD87+RV44eym7xjihFp2AyTkN0u/6pu740GEcktGuCdluZJIjqNZPGzS3WI++WVlZlx43vc8gD4tE9+88bDWYdqow4ZTLYgl5DpBCJvkYnuHZsAp6kkqaN3B14XVZKbqHgYyAkZZnSLWT0+8BMNN/2NW87VKZLn9fXSr4hJlfJHA8/7v3PWP7f4lgBFkzr06RwT3DTEePBsSiUUc/fVQPLFfbzzsuKkSOgNfAWSryutQ25tKAwtmX+ubt5Rn7Ad4oqQZPWZ5i5amuF9qq83qaVlCT0QhlncxtK61uoM0dWhh8Nhz9/wNxre12rrNJMBrXphX83Gqw3UukOa9JP+HRM7CCH2XqrP3a++zCwg8RFf/oiE0T1ik7zNyq0Aiksrl+idFDOjWyM+OnilXiHDwX9Nt6FflP7dcCGgZ5OTYw2lEpKjjKAKRXlV48uFtVSSlFaahtHd21TJ8lEJSV6zYwDXJ3RdEebI9YZF98crJZcU+egcg/gWhnzSp9WCHrdYV+xfc75+w4RmMcIOhPIRKDerpVUSdSoZnVU47/kblY1mqg3dOv1kAL8hKJj99gPxUikxrmiY6C+YFiHi/FTP77PixMCAQn8u8sEE4iNhYkVaKYzB+qHxuWmeENZUYEWxD7d+paTu2Yw4WhhXbpGhop6SATcVfTqxR6Dyhcd8iqkTNgxlIL/Col8cqKXeQNo80TRUImWAcfpjYS2kHXbCT6UNDaHc0saL1kHz0EUP9fTQgURJOB/pD4W+Ljjpn1xRf3dc9KYxCUJCcR3MxACJOk0OBJUKNVCRhLahzldP+BSKWoLznjf0YFZbpz9ngMIFJOjjoeYZ7ZEUB62FgUf3SROFA5zioixgA0KnYVTQEVRBcQU9An5CI9Ed8qM9TcsUuC46BSYTThZKLKVCEzBC0oFQXPA1whwqvflfx30KEwCYgP8cFo+7QGstrSRAv6keoE7RP1svthAGNUMS2duwGnCqaDIa+5ecOCkhrqMTaFtsDASsEhUJnAQ3ohwvkjjveQNr4oKa2UygS1tJcAMRZ5MxfqmfgY0UF1GAarN5oINgI3FwiCxDihgps0tMXtN0/h6yTrfnm1u8lT0V7Ot7JcYIkZTr+JZSWDbtqaD0ADWLuyNOM9kWNEQJ9mQ4d+ZmC2Fg/hVJxifHSpWi19EJsi32BkLxzyIYkyGobTI47PmIqZnlMOmxuz2wSTAV13yNOFa6T6ppdncDmsmLKGbVhQnM6RW7t7gB5kQaMES0+I/0vZM3IBUIIEVa25STDOtuZ5lGDJVh01L+6dbvFYlZtW98Zulk+HW9AwG9hGuCI/rOH6H5veCeD4ZLamaZDFC1lf5A9gNKBDLgQ7WI7EfcGavkK4appPn8sjU0abYfpEc4hNpAfUS0CBtwPKZJABDg900fId7FEGIgFfMp5h9wIGc2vt9wPhB3N5Gh0udUEjd6Xq+a2ZlahVXGH1If5A/gQyAXLPErya5LgGYLQ1V4pQH0+7Spc0XYgC5A0AznID4qrgwYj+d6eahv/etxn+EUlnnAHudP6cBT8pagpecjAPuLbuDD0lEJ5Y8mggZi0kPusRN5veG0rHOJhX6LLPPjpmxexrUiaBY7mkT4BJclzdL0PYEZKmgzkkIkrzeeSMIfUkZLMQxM2k1/e1oQdD4QwoqnJtk0t8573tXW6SGDdElwCCJ/P1/VMPRfMQnMc3BheXFod/vbrYR+IxwSWRRuLfOtaU3Zwuvn60T4BB8iw8fVZ/zwJygMuw4aZ1kXICdk09oadA2E3DLdM9Gmqjjvefdap5kMiu1EviKI8eppgxhTXEQBk2nNdSOKQ79FpLSxNOAcZt7tocxE5fKjvKZcQnz0VdMUzeRktXfM54WgnNh/ati0tgZ7AxFsU9c19SSMuo01LF09r6t1+smwoKA2d3s1fdIAyYOY5xLhyuLseDGxhZKyc3GAU1HsD4PCpxZd46KF+RfT2wjA5DSZnMeEB6AxkoDghvhozJ3NA5DTNUbETnK+HAdLinx0DTgsfjPo1pzd3H01dNoO4qFPBm+ualNPLNgYiBdIu0RJsVXkt/29tsXQ0vNaWqc5gcbNrvkaEYEEL4MjHBThCuiYPyIBBdCPoisp8JEZRzk7PZAKw8bLLUywykhRxDG0XHxKYySBADeO3NrDM4YYs8CCXbEfktM9UWJlV2x6MWmQRPmmmbRq5VNI2KaeWLA6EOjMO7zRWTuqg0c2eP3BPLT0vPPW6fcMsMrQSKQ+ImAQmJ/qURZT4VJLchPF4iXtU1w06W3REtwlPe6Wbi3N8P5HdnO+JbWcxkgymBEO9FkSI0k9lmKjZsiDKBY3EuXNT2eVPxpompRNiIfel1xtO7A0EPcmBfbI0MLBI2tPa7X0vMPWmQG/XpLBcCGBZjCYDAwGk4HBYDIwGEwGBoPJwGAwGRgMJgODwWRgMJgMDAaTgcFgMBkYDCYDg8FkYDCYDAwGk4HBYDIwGEwGBoPJwGAwGRgMJgODwWRgMJgMDAaTgcFgMjAYTAYGg8nAYDAZGAwmA4Nxm/F/AgwAdogfJnXrNHIAAAAASUVORK5CYII="}]),ie=Object(f.a)(ce,2),oe=ie[0],se=ie[1];Object(a.useEffect)((function(){de(),le(),ue(),be()}),[t,n]);var le=function(){var e,t,a=(null===n||void 0===n?void 0:n.icon_color)&&""!==(null===n||void 0===n?void 0:n.icon_color)?null===n||void 0===n?void 0:n.icon_color:null!==(e=localStorage.getItem("colorIcon"))&&void 0!==e?e:"#ffffffa6",r=(null===n||void 0===n?void 0:n.menu_bar_color)&&""!==(null===n||void 0===n?void 0:n.menu_bar_color)?null===n||void 0===n?void 0:n.menu_bar_color:null!==(t=localStorage.getItem("colorMenu"))&&void 0!==t?t:"#001529";o("".concat(a)),j("".concat(r)),localStorage.setItem("colorIcon",a),localStorage.setItem("colorMenu",r)},de=function(){n&&(v(null===n||void 0===n?void 0:n.super_admin_profile_id),E(null===n||void 0===n?void 0:n.technician_profile_id),D(null===n||void 0===n?void 0:n.accountant_profile_id),M(null===n||void 0===n?void 0:n.construction_manager_profile_id),B(null===n||void 0===n?void 0:n.commercial_director_profile_id),Z(null===n||void 0===n?void 0:n.assessor_profile_id),ee(null===n||void 0===n?void 0:n.logo_login),re(null===n||void 0===n?void 0:n.logo_app))},ue=function(){se([{uid:"-1",name:"image.png",status:"done",url:null===n||void 0===n?void 0:n.logo_app}])},je={icon_color:i,menu_bar_color:u,super_admin_profile_id:x,technician_profile_id:I,accountant_profile_id:k,construction_manager_profile_id:q,commercial_director_profile_id:G,assessor_profile_id:H,app_logo:ae,login_logo:$,user_creator_id:JSON.parse(localStorage.USER_INFO).id},be=function(){var e,n,a,r,c,i;K.setFieldsValue({administratorProfile:null===t||void 0===t||null===(e=t.find((function(e){return e.id==x})))||void 0===e?void 0:e.name,technicalProfile:null===t||void 0===t||null===(n=t.find((function(e){return e.id==I})))||void 0===n?void 0:n.name,counterProfile:null===t||void 0===t||null===(a=t.find((function(e){return e.id==k})))||void 0===a?void 0:a.name,constructionDirectorProfile:null===t||void 0===t||null===(r=t.find((function(e){return e.id==q})))||void 0===r?void 0:r.name,commercialDirectorProfile:null===t||void 0===t||null===(c=t.find((function(e){return e.id==G})))||void 0===c?void 0:c.name,adviserProfile:null===t||void 0===t||null===(i=t.find((function(e){return e.id==H})))||void 0===i?void 0:i.name,logoLogin:$,logoApp:ae})},me=function(){K.resetFields()},pe=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 4:n=e.sent;case 5:(a=new Image).src=n,window.open(n).document.write(a.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!Fe(R.pb))return null;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{children:Object(h.jsxs)(g.a,{onFinish:function(){var t,n,a;e((t=je,n=function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):(Object(P.f)("Se ha actualizado la configuraci\xf3n"),me(),e(mc()),e(_t()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/general-setting"),data:t,success:function(){return fc(t)},postProcessSuccess:n,postProcessError:a}}))},form:K,layout:"vertical",style:{height:700,marginBottom:100},validateMessages:{required:"${label} es requerido"},size:"middle",children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"administratorProfile",label:"Perfil del super administrador",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:200},placeholder:"Selecciona un perfil",optionFilterProp:"children",onChange:v,value:x,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"technicalProfile",label:"Perfil del t\xe9cnico",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:200},placeholder:"Selecciona un perfil",optionFilterProp:"children",onChange:E,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"counterProfile",label:"Perfil del contador",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:200},placeholder:"Selecciona un perfil",optionFilterProp:"children",onChange:D,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"constructionDirectorProfile",label:"Perfil del director de obra",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:200},placeholder:"Selecciona un perfil",optionFilterProp:"children",onChange:M,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"commercialDirectorProfile",label:"Perfil del director comercial",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:200},placeholder:"Selecciona un perfil",optionFilterProp:"children",onChange:B,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"adviserProfile",label:"Perfil del asesor",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:200},placeholder:"Selecciona un perfil",optionFilterProp:"children",onChange:Z,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)("h4",{style:{marginBottom:20},children:"Im\xe1genes"})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{style:{paddingTop:"60px",paddingLeft:"50px"},name:["projectApp","logo"],className:"imagenes",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},label:"Logotipo App (Medidas Recomendadas: 129x43)",children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",fileList:oe,onChange:function(e){var t=e.fileList;se(t),t.length>0&&t[0].originFileObj&&function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}(t[0].originFileObj,(function(e){re(e)}))},onPreview:pe,value:ae,width:"1500",accept:"image/*",maxCount:1,name:"image",children:oe.length<1?"+ Upload":""})})})}),Object(h.jsx)(T.a,{style:{marginTop:"20px"},children:Object(h.jsx)("h2",{children:"Colores"})}),Object(h.jsxs)(T.a,{gutter:16,style:{marginTop:"10px"},children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{valuePropName:u,name:"colorMenu",label:"Color barra de men\xfa",children:Object(h.jsx)(_.a,{defaultValue:u,type:"color",required:"",value:u,onChange:function(e){return j(e.target.value)},name:"colorMenu",id:"color_menu"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{valuePropName:i,name:"colorIcon",label:"Color \xedcono",children:Object(h.jsx)(_.a,{defaultValue:i,type:"color",required:"",value:i,onChange:function(e){return o(e.target.value)},name:"colorIcon",id:"color_icon"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})]})]})})})},hc=function(){return Ae(R.uc)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ht,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Configuraciones generales",extra:[Object(h.jsx)(S.a,{type:"primary",danger:!0,icon:Object(h.jsx)(Xt.a,{}),children:"Borrar cach\xe9"})]}),Object(h.jsx)(Oc,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},xc=function(){return Object(h.jsx)(hc,{})},vc=n(227),yc=n(624),gc=new yt,_c=function(e,t){return{type:R.O,payload:{method:"GET",headers:{"access-token":gc.getToken()},url:"".concat(R.Ne,"/project"),success:function(e){return Ec(e)},postProcessSuccess:e,postProcessError:t}}},Sc=function(e,t){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/project/").concat(e),postProcessSuccess:t,success:function(e){return Fc(e)}}}},wc=function(e){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/project/fill/combo"),postProcessSuccess:e,success:function(e){return Ic(e)}}}},Cc=function(){return{type:R.Ce,payload:[]}},Pc=function(e){return{type:R.Ic,payload:e}},Ic=function(e){return{type:R.Oc,payload:e}},Ec=function(e){return{type:R.Cf,payload:e}},Fc=function(e){return{type:R.Fc,payload:e}},Ac=function(){var e=Object(s.d)(),t=Object(a.useState)(!0),n=Object(f.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){e(_c())}),[]);var i={background:"#f2dede",borderColor:"#f2dede"},l=function(e){return 1!==e?i:null},d=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project._payload})),u=Object(a.useState)([]),b=Object(f.a)(u,2),O=b[0],v=b[1];Object(a.useEffect)((function(){c(!1)}),[d]);var y=function(t){e(function(e,t){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/project/state/").concat(e),postProcessSuccess:t,success:function(e){return Ec(e)}}}}(t,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS! ha ocurrido un error mientras se actualizaba"):(Object(P.f)("Actualizado exitosamente"),v(n._payload));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};Object(a.useEffect)((function(){v(d)}),[d]);var g=function(e){var t=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),n=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Activar/Desactivar"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Zt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at}),"  ",Fe(R.fh)?Object(h.jsx)(o.b,{to:"/projects/edit-project/".concat(e.id),children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",icon:Object(h.jsx)(le.a,{})})})}):null,"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:n,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){y(e.id)},icon:Object(h.jsx)(yc.a,{style:{color:"#df534f",display:"inline-block",verticalAlign:"middle"}})})})]})},_=[{title:"id",width:15,dataIndex:"id",fixed:"left",key:"id",render:function(e,t){return{props:{style:l(null===t||void 0===t?void 0:t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}},Object(j.a)(Object(j.a)({title:"Nombre Proyecto",width:70,dataIndex:"name",key:"name"},Object(ce.b)("name")),{},{render:function(e,t){return{props:{style:l(null===t||void 0===t?void 0:t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),Object(j.a)(Object(j.a)({title:"Forma de Venta",width:70,dataIndex:"sale_type",key:"sale_type"},Object(ce.b)("sale_type")),{},{render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),Object(j.a)(Object(j.a)({title:"Estado",dataIndex:"project_state",key:"project_state",width:50},Object(ce.b)("project_state")),{},{render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),Object(j.a)(Object(j.a)({title:"Tipo de Proyecto",dataIndex:"project_type",key:"project_type",width:50},Object(ce.b)("project_type")),{},{render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),Object(j.a)(Object(j.a)({title:"Total Unidades",dataIndex:"total_units",key:"total_units",width:35},Object(ce.b)("total_units")),{},{render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),{title:"Fecha de Inicio de Venta",dataIndex:"sale_start_date",key:"sale_start_date",width:60,render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:Jt(e)})}}},{title:"Fecha estimada de inicio de Construcci\xf3n",dataIndex:"start_build_date",key:"start_build_date",width:60,render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:Jt(e)})}}},{title:"Fecha estimada de Entrega",dataIndex:"estimated_delivery_date",key:"estimated_delivery_date",width:60,render:function(e,t){return{props:{style:l(t.is_active)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:Jt(e)})}}},{title:"Acciones",key:"acciones",fixed:"right",width:40,render:function(e,t){return{props:{style:l(t.is_active)},children:g(t)}}}];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(vc.a.Group,{children:[Object(h.jsx)(vc.a,{disabled:!0,value:"Todos",children:"Todos"}),Object(h.jsx)(vc.a,{disabled:!0,value:"Activos",children:"Activos"}),Object(h.jsx)(vc.a,{disabled:!0,value:"Inactivos",children:"Inactivos"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(Q.a,{loading:r&&Object(h.jsx)(x,{}),columns:_,dataSource:Object(ce.a)(O),scroll:{x:1800,y:300},size:"small",bordered:!0})]})},kc=function(){return Ae(R.qd)?Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Proyectos",extra:[Fe(R.vb)?Object(h.jsx)(S.a,{type:"primary",children:Object(h.jsx)(o.b,{to:"/projects/new-project",children:"Nuevo Proyecto"})}):null]}),Object(h.jsx)(Ac,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Tc=function(){return Object(h.jsx)(kc,{})},Nc=n(58),Dc=n(625),Rc=function(e){var t=e.height,n=e.width,r=e.center,c=e.tileLayer,i=e.zoom,o=e.apiKey;return Object(a.useEffect)((function(){window.L.mapquest.key=o,window.L.mapquest.map("map",{center:r,layers:window.L.mapquest.tileLayer(c),zoom:i})}),[]),Object(h.jsx)("div",{id:"map",className:"container",style:{zIndex:1,background:"#D7E8E4",width:n||400,height:t||280},children:Object(h.jsx)("p",{children:"Loading.."})})},Lc={Find_Location:"FIND_LOCATION",Maker_Location:"MARKER_COUNTRY",Find_Location_by_latlng:"FIND_LOCATION_BY_LATLNG"},Vc=[],qc=function(e,t,n){window.L.mapquest.Map.getMap("map").setView(new window.L.LatLng(e,t),n)},Mc=function(){Vc.forEach((function(e){window.L.mapquest.Map.getMap("map").removeLayer(e)})),Vc=[]},Uc=function(e,t){return window.L.mapquest.textMarker(new window.L.LatLng(e,t),{text:"",subtext:"",position:"right",type:"marker",icon:{primaryColor:"#333333",secondaryColor:"#333333",size:"sm"}}).addTo(window.L.mapquest.Map.getMap("map"))},zc=function(e,t,n,a){switch(n){case Lc.Find_Location:!function(e,t){Mc(),window.L.mapquest.geocoding().geocode(e,(function(e,n){n.results.forEach((function(e,n){e.locations.forEach((function(e){var a=e.latLng;0===n&&qc(a.lat,a.lng,t)}))}))}))}(e,a);break;case Lc.Find_Location_by_latlng:!function(e,t){Mc(),qc(t.lat,t.lng,e)}(a,t);break;case Lc.Maker_Location:!function(e,t){Mc(),window.L.mapquest.geocoding().geocode(e,(function(e,n){n.results.forEach((function(e,n){e.locations.forEach((function(e){var a=e.geocodeQuality,r=e.latLng;0===n&&"CITY"===a&&(qc(r.lat,r.lng,t),Vc.push(Uc(r.lat,r.lng)))}))}))}))}(e,a)}},Gc=[{id:0,departamento:"Amazonas",latLng:{lat:-1.3930536,lng:-71.4518427},ciudades:[{id:1,name:"Leticia"},{id:2,name:"Puerto Nari\xf1o"}]},{id:1,departamento:"Antioquia",latLng:{lat:6.8128463,lng:-75.5066697},ciudades:[{id:3,name:"Abejorral"},{id:4,name:"Abriaqu\xed"},{id:5,name:"Alejandr\xeda"},{id:6,name:"Amag\xe1"},{id:7,name:"Amalfi"},{id:8,name:"Andes"},{id:9,name:"Angel\xf3polis"},{id:10,name:"Angostura"},{id:11,name:"Anor\xed"},{id:12,name:"Anz\xe1"},{id:13,name:"Apartad\xf3"},{id:14,name:"Arboletes"},{id:15,name:"Argelia"},{id:16,name:"Armenia"},{id:17,name:"Barbosa"},{id:18,name:"Bello"},{id:19,name:"Belmira"},{id:20,name:"Betania"},{id:21,name:"Betulia"},{id:22,name:"Brice\xf1o"},{id:23,name:"Buritic\xe1"},{id:24,name:"C\xe1ceres"},{id:25,name:"Caicedo"},{id:26,name:"Caldas"},{id:27,name:"Campamento"},{id:28,name:"Ca\xf1asgordas"},{id:29,name:"Caracol\xed"},{id:30,name:"Caramanta"},{id:31,name:"Carepa"},{id:32,name:"Carolina del Pr\xedncipe"},{id:33,name:"Caucasia"},{id:34,name:"Chigorod\xf3"},{id:35,name:"Cisneros"},{id:36,name:"Ciudad Bol\xedvar"},{id:37,name:"Cocorn\xe1"},{id:38,name:"Concepci\xf3n"},{id:39,name:"Concordia"},{id:40,name:"Copacabana"},{id:41,name:"Dabeiba"},{id:42,name:"Donmat\xedas"},{id:43,name:"Eb\xe9jico"},{id:44,name:"El Bagre"},{id:45,name:"El Carmen de Viboral"},{id:46,name:"El Pe\xf1ol"},{id:47,name:"El Retiro"},{id:48,name:"El Santuario"},{id:49,name:"Entrerr\xedos"},{id:50,name:"Envigado"},{id:51,name:"Fredonia"},{id:52,name:"Frontino"},{id:53,name:"Giraldo"},{id:54,name:"Girardota"},{id:55,name:"G\xf3mez Plata"},{id:56,name:"Granada"},{id:57,name:"Guadalupe"},{id:58,name:"Guarne"},{id:59,name:"Guatap\xe9"},{id:60,name:"Heliconia"},{id:61,name:"Hispania"},{id:62,name:"Itag\xfc\xed"},{id:63,name:"Ituango"},{id:64,name:"Jard\xedn"},{id:65,name:"Jeric\xf3"},{id:66,name:"La Ceja"},{id:67,name:"La Estrella"},{id:68,name:"La Pintada"},{id:69,name:"La Uni\xf3n"},{id:70,name:"Liborina"},{id:71,name:"Maceo"},{id:72,name:"Marinilla"},{id:73,name:"Medell\xedn"},{id:74,name:"Montebello"},{id:75,name:"Murind\xf3"},{id:76,name:"Mutat\xe1"},{id:77,name:"Nari\xf1o"},{id:78,name:"Nech\xed"},{id:79,name:"Necocl\xed"},{id:80,name:"Olaya"},{id:81,name:"Peque"},{id:82,name:"Pueblorrico"},{id:83,name:"Puerto Berr\xedo"},{id:84,name:"Puerto Nare"},{id:85,name:"Puerto Triunfo"},{id:86,name:"Remedios"},{id:87,name:"Rionegro"},{id:88,name:"Sabanalarga"},{id:89,name:"Sabaneta"},{id:90,name:"Salgar"},{id:91,name:"San Andr\xe9s de Cuerquia"},{id:92,name:"San Carlos"},{id:93,name:"San Francisco"},{id:94,name:"San Jer\xf3nimo"},{id:95,name:"San Jos\xe9 de la Monta\xf1a"},{id:96,name:"San Juan de Urab\xe1"},{id:97,name:"San Luis"},{id:98,name:"San Pedro de Urab\xe1"},{id:99,name:"San Pedro de los Milagros"},{id:100,name:"San Rafael"},{id:101,name:"San Roque"},{id:102,name:"San Vicente"},{id:103,name:"Santa B\xe1rbara"},{id:104,name:"Santa Fe de Antioquia"},{id:105,name:"Santa Rosa de Osos"},{id:106,name:"Santo Domingo"},{id:107,name:"Segovia"},{id:108,name:"Sons\xf3n"},{id:109,name:"Sopetr\xe1n"},{id:110,name:"T\xe1mesis"},{id:111,name:"Taraz\xe1"},{id:112,name:"Tarso"},{id:113,name:"Titirib\xed"},{id:114,name:"Toledo"},{id:115,name:"Turbo"},{id:116,name:"Uramita"},{id:117,name:"Urrao"},{id:118,name:"Valdivia"},{id:119,name:"Valpara\xedso"},{id:120,name:"Vegach\xed"},{id:121,name:"Venecia"},{id:122,name:"Vig\xeda del Fuerte"},{id:123,name:"Yal\xed"},{id:124,name:"Yarumal"},{id:125,name:"Yolomb\xf3"},{id:126,name:"Yond\xf3"},{id:127,name:"Zaragoza"}]},{id:2,departamento:"Arauca",latLng:{lat:6.6750273,lng:-71.0555577},ciudades:[{id:128,name:"Arauca"},{id:129,name:"Arauquita"},{id:130,name:"Cravo Norte"},{id:131,name:"Fortul"},{id:132,name:"Puerto Rond\xf3n"},{id:133,name:"Saravena"},{id:134,name:"Tame"}]},{id:3,departamento:"Atl\xe1ntico",latLng:{lat:10.694522350154978,lng:-74.98866807177068},ciudades:[{id:135,name:"Baranoa"},{id:136,name:"Barranquilla"},{id:137,name:"Campo de la Cruz"},{id:138,name:"Candelaria"},{id:139,name:"Galapa"},{id:140,name:"Juan de Acosta"},{id:141,name:"Luruaco"},{id:142,name:"Malambo"},{id:143,name:"Manat\xed"},{id:144,name:"Palmar de Varela"},{id:145,name:"Pioj\xf3"},{id:146,name:"Polonuevo"},{id:147,name:"Ponedera"},{id:148,name:"Puerto Colombia"},{id:149,name:"Repel\xf3n"},{id:150,name:"Sabanagrande"},{id:151,name:"Sabanalarga"},{id:152,name:"Santa Luc\xeda"},{id:153,name:"Santo Tom\xe1s"},{id:154,name:"Soledad"},{id:155,name:"Su\xe1n"},{id:156,name:"Tubar\xe1"},{id:157,name:"Usiacur\xed"}]},{id:4,departamento:"Bol\xedvar",latLng:{lat:8.927236344038224,lng:-74.46590690017628},ciudades:[{id:158,name:"Ach\xed"},{id:159,name:"Altos del Rosario"},{id:160,name:"Arenal"},{id:161,name:"Arjona"},{id:162,name:"Arroyohondo"},{id:163,name:"Barranco de Loba"},{id:164,name:"Brazuelo de Papayal"},{id:165,name:"Calamar"},{id:166,name:"Cantagallo"},{id:167,name:"Cartagena de Indias"},{id:168,name:"Cicuco"},{id:169,name:"Clemencia"},{id:170,name:"C\xf3rdoba"},{id:171,name:"El Carmen de Bol\xedvar"},{id:172,name:"El Guamo"},{id:173,name:"El Pe\xf1\xf3n"},{id:174,name:"Hatillo de Loba"},{id:175,name:"Magangu\xe9"},{id:176,name:"Mahates"},{id:177,name:"Margarita"},{id:178,name:"Mar\xeda la Baja"},{id:179,name:"Momp\xf3s"},{id:180,name:"Montecristo"},{id:181,name:"Morales"},{id:182,name:"Noros\xed"},{id:183,name:"Pinillos"},{id:184,name:"Regidor"},{id:185,name:"R\xedo Viejo"},{id:186,name:"San Crist\xf3bal"},{id:187,name:"San Estanislao"},{id:188,name:"San Fernando"},{id:189,name:"San Jacinto del Cauca"},{id:190,name:"San Jacinto"},{id:191,name:"San Juan Nepomuceno"},{id:192,name:"San Mart\xedn de Loba"},{id:193,name:"San Pablo"},{id:194,name:"Santa Catalina"},{id:195,name:"Santa Rosa"},{id:196,name:"Santa Rosa del Sur"},{id:197,name:"Simit\xed"},{id:198,name:"Soplaviento"},{id:199,name:"Talaigua Nuevo"},{id:200,name:"Tiquisio"},{id:201,name:"Turbaco"},{id:202,name:"Turban\xe1"},{id:203,name:"Villanueva"},{id:204,name:"Zambrano"}]},{id:5,departamento:"Boyac\xe1",latLng:{lat:5.586472237513483,lng:-73.12633458665942},ciudades:[{id:205,name:"Almeida"},{id:206,name:"Aquitania"},{id:207,name:"Arcabuco"},{id:208,name:"Bel\xe9n"},{id:209,name:"Berbeo"},{id:210,name:"Bet\xe9itiva"},{id:211,name:"Boavita"},{id:212,name:"Boyac\xe1"},{id:213,name:"Brice\xf1o"},{id:214,name:"Buenavista"},{id:215,name:"Busbanz\xe1"},{id:216,name:"Caldas"},{id:217,name:"Campohermoso"},{id:218,name:"Cerinza"},{id:219,name:"Chinavita"},{id:220,name:"Chiquinquir\xe1"},{id:221,name:"Ch\xedquiza"},{id:222,name:"Chiscas"},{id:223,name:"Chita"},{id:224,name:"Chitaraque"},{id:225,name:"Chivat\xe1"},{id:226,name:"Chivor"},{id:227,name:"Ci\xe9nega"},{id:228,name:"C\xf3mbita"},{id:229,name:"Coper"},{id:230,name:"Corrales"},{id:231,name:"Covarach\xeda"},{id:232,name:"Cubar\xe1"},{id:233,name:"Cucaita"},{id:234,name:"Cu\xedtiva"},{id:235,name:"Duitama"},{id:236,name:"El Cocuy"},{id:237,name:"El Espino"},{id:238,name:"Firavitoba"},{id:239,name:"Floresta"},{id:240,name:"Gachantiv\xe1"},{id:241,name:"G\xe1meza"},{id:242,name:"Garagoa"},{id:243,name:"Guacamayas"},{id:244,name:"Guateque"},{id:245,name:"Guayat\xe1"},{id:246,name:"G\xfcic\xe1n"},{id:247,name:"Iza"},{id:248,name:"Jenesano"},{id:249,name:"Jeric\xf3"},{id:250,name:"La Capilla"},{id:251,name:"La Uvita"},{id:252,name:"La Victoria"},{id:253,name:"Labranzagrande"},{id:254,name:"Macanal"},{id:255,name:"Marip\xed"},{id:256,name:"Miraflores"},{id:257,name:"Mongua"},{id:258,name:"Mongu\xed"},{id:259,name:"Moniquir\xe1"},{id:260,name:"Motavita"},{id:261,name:"Muzo"},{id:262,name:"Nobsa"},{id:263,name:"Nuevo Col\xf3n"},{id:264,name:"Oicat\xe1"},{id:265,name:"Otanche"},{id:266,name:"Pachavita"},{id:267,name:"P\xe1ez"},{id:268,name:"Paipa"},{id:269,name:"Pajarito"},{id:270,name:"Panqueba"},{id:271,name:"Pauna"},{id:272,name:"Paya"},{id:273,name:"Paz del R\xedo"},{id:274,name:"Pesca"},{id:275,name:"Pisba"},{id:276,name:"Puerto Boyac\xe1"},{id:277,name:"Qu\xedpama"},{id:278,name:"Ramiriqu\xed"},{id:279,name:"R\xe1quira"},{id:280,name:"Rond\xf3n"},{id:281,name:"Saboy\xe1"},{id:282,name:"S\xe1chica"},{id:283,name:"Samac\xe1"},{id:284,name:"San Eduardo"},{id:285,name:"San Jos\xe9 de Pare"},{id:286,name:"San Luis de Gaceno"},{id:287,name:"San Mateo"},{id:288,name:"San Miguel de Sema"},{id:289,name:"San Pablo de Borbur"},{id:290,name:"Santa Mar\xeda"},{id:291,name:"Santa Rosa de Viterbo"},{id:292,name:"Santa Sof\xeda"},{id:293,name:"Santana"},{id:294,name:"Sativanorte"},{id:295,name:"Sativasur"},{id:296,name:"Siachoque"},{id:297,name:"Soat\xe1"},{id:298,name:"Socha"},{id:299,name:"Socot\xe1"},{id:300,name:"Sogamoso"},{id:301,name:"Somondoco"},{id:302,name:"Sora"},{id:303,name:"Sorac\xe1"},{id:304,name:"Sotaquir\xe1"},{id:305,name:"Susac\xf3n"},{id:306,name:"Sutamarch\xe1n"},{id:307,name:"Sutatenza"},{id:308,name:"Tasco"},{id:309,name:"Tenza"},{id:310,name:"Tiban\xe1"},{id:311,name:"Tibasosa"},{id:312,name:"Tinjac\xe1"},{id:313,name:"Tipacoque"},{id:314,name:"Toca"},{id:315,name:"Tog\xfc\xed"},{id:316,name:"T\xf3paga"},{id:317,name:"Tota"},{id:318,name:"Tunja"},{id:319,name:"Tunungu\xe1"},{id:320,name:"Turmequ\xe9"},{id:321,name:"Tuta"},{id:322,name:"Tutaz\xe1"},{id:323,name:"\xdambita"},{id:324,name:"Ventaquemada"},{id:325,name:"Villa de Leyva"},{id:326,name:"Viracach\xe1"},{id:327,name:"Zetaquira"}]},{id:6,departamento:"Caldas",latLng:{lat:5.292347740220994,lng:-75.42245418898628},ciudades:[{id:328,name:"Aguadas"},{id:329,name:"Anserma"},{id:330,name:"Aranzazu"},{id:331,name:"Belalc\xe1zar"},{id:332,name:"Chinchin\xe1"},{id:333,name:"Filadelfia"},{id:334,name:"La Dorada"},{id:335,name:"La Merced"},{id:336,name:"Manizales"},{id:337,name:"Manzanares"},{id:338,name:"Marmato"},{id:339,name:"Marquetalia"},{id:340,name:"Marulanda"},{id:341,name:"Neira"},{id:342,name:"Norcasia"},{id:343,name:"P\xe1cora"},{id:344,name:"Palestina"},{id:345,name:"Pensilvania"},{id:346,name:"Riosucio"},{id:347,name:"Risaralda"},{id:348,name:"Salamina"},{id:349,name:"Saman\xe1"},{id:350,name:"San Jos\xe9"},{id:351,name:"Sup\xeda"},{id:352,name:"Victoria"},{id:353,name:"Villamar\xeda"},{id:354,name:"Viterbo"}]},{id:7,departamento:"Caquet\xe1",latLng:{lat:.7882432672145442,lng:-74.25734595567268},ciudades:[{id:355,name:"Albania"},{id:356,name:"Bel\xe9n de los Andaqu\xedes"},{id:357,name:"Cartagena del Chair\xe1"},{id:358,name:"Curillo"},{id:359,name:"El Doncello"},{id:360,name:"El Paujil"},{id:361,name:"Florencia"},{id:362,name:"La Monta\xf1ita"},{id:363,name:"Mil\xe1n"},{id:364,name:"Morelia"},{id:365,name:"Puerto Rico"},{id:366,name:"San Jos\xe9 del Fragua"},{id:367,name:"San Vicente del Cagu\xe1n"},{id:368,name:"Solano"},{id:369,name:"Solita"},{id:370,name:"Valpara\xedso"}]},{id:8,departamento:"Casanare",latLng:{lat:5.401373143031863,lng:-71.72557954199162},ciudades:[{id:371,name:"Aguazul"},{id:372,name:"Ch\xe1meza"},{id:373,name:"Hato Corozal"},{id:374,name:"La Salina"},{id:375,name:"Man\xed"},{id:376,name:"Monterrey"},{id:377,name:"Nunch\xeda"},{id:378,name:"Orocu\xe9"},{id:379,name:"Paz de Ariporo"},{id:380,name:"Pore"},{id:381,name:"Recetor"},{id:382,name:"Sabanalarga"},{id:383,name:"S\xe1cama"},{id:384,name:"San Luis de Palenque"},{id:385,name:"T\xe1mara"},{id:386,name:"Tauramena"},{id:387,name:"Trinidad"},{id:388,name:"Villanueva"},{id:389,name:"Yopal"}]},{id:9,departamento:"Cauca",latLng:{lat:2.4902393802353515,lng:-76.9848930927926},ciudades:[{id:390,name:"Almaguer"},{id:391,name:"Argelia"},{id:392,name:"Balboa"},{id:393,name:"Bol\xedvar"},{id:394,name:"Buenos Aires"},{id:395,name:"Cajib\xedo"},{id:396,name:"Caldono"},{id:397,name:"Caloto"},{id:398,name:"Corinto"},{id:399,name:"El Tambo"},{id:400,name:"Florencia"},{id:401,name:"Guachen\xe9"},{id:402,name:"Guap\xed"},{id:403,name:"Inz\xe1"},{id:404,name:"Jambal\xf3"},{id:405,name:"La Sierra"},{id:406,name:"La Vega"},{id:407,name:"L\xf3pez de Micay"},{id:408,name:"Mercaderes"},{id:409,name:"Miranda"},{id:410,name:"Morales"},{id:411,name:"Padilla"},{id:412,name:"P\xe1ez"},{id:413,name:"Pat\xeda"},{id:414,name:"Piamonte"},{id:415,name:"Piendam\xf3"},{id:416,name:"Popay\xe1n"},{id:417,name:"Puerto Tejada"},{id:418,name:"Purac\xe9"},{id:419,name:"Rosas"},{id:420,name:"San Sebasti\xe1n"},{id:421,name:"Santa Rosa"},{id:422,name:"Santander de Quilichao"},{id:423,name:"Silvia"},{id:424,name:"Sotar\xe1"},{id:425,name:"Su\xe1rez"},{id:426,name:"Sucre"},{id:427,name:"Timb\xedo"},{id:428,name:"Timbiqu\xed"},{id:429,name:"Torib\xedo"},{id:430,name:"Totor\xf3"},{id:431,name:"Villa Rica"}]},{id:10,departamento:"Cesar",latLng:{lat:9.465155337314666,lng:-73.55250742303305},ciudades:[{id:432,name:"Aguachica"},{id:433,name:"Agust\xedn Codazzi"},{id:434,name:"Astrea"},{id:435,name:"Becerril"},{id:436,name:"Bosconia"},{id:437,name:"Chimichagua"},{id:438,name:"Chiriguan\xe1"},{id:439,name:"Curuman\xed"},{id:440,name:"El Copey"},{id:441,name:"El Paso"},{id:442,name:"Gamarra"},{id:443,name:"Gonz\xe1lez"},{id:444,name:"La Gloria (Cesar)"},{id:445,name:"La Jagua de Ibirico"},{id:446,name:"La Paz"},{id:447,name:"Manaure Balc\xf3n del Cesar"},{id:448,name:"Pailitas"},{id:449,name:"Pelaya"},{id:450,name:"Pueblo Bello"},{id:451,name:"R\xedo de Oro"},{id:452,name:"San Alberto"},{id:453,name:"San Diego"},{id:454,name:"San Mart\xedn"},{id:455,name:"Tamalameque"},{id:456,name:"Valledupar"}]},{id:11,departamento:"Choc\xf3",latLng:{lat:5.912915479044867,lng:-77.04436030839743},ciudades:[{id:457,name:"Acand\xed"},{id:458,name:"Alto Baud\xf3"},{id:459,name:"Bagad\xf3"},{id:460,name:"Bah\xeda Solano"},{id:461,name:"Bajo Baud\xf3"},{id:462,name:"Bojay\xe1"},{id:463,name:"Cant\xf3n de San Pablo"},{id:464,name:"C\xe9rtegui"},{id:465,name:"Condoto"},{id:466,name:"El Atrato"},{id:467,name:"El Carmen de Atrato"},{id:468,name:"El Carmen del Dari\xe9n"},{id:469,name:"Istmina"},{id:470,name:"Jurad\xf3"},{id:471,name:"Litoral de San Juan"},{id:472,name:"Llor\xf3"},{id:473,name:"Medio Atrato"},{id:474,name:"Medio Baud\xf3"},{id:475,name:"Medio San Juan"},{id:476,name:"N\xf3vita"},{id:477,name:"Nuqu\xed"},{id:478,name:"Quibd\xf3"},{id:479,name:"R\xedo Ir\xf3"},{id:480,name:"R\xedo Quito"},{id:481,name:"Riosucio"},{id:482,name:"San Jos\xe9 del Palmar"},{id:483,name:"Sip\xed"},{id:484,name:"Tad\xf3"},{id:485,name:"Uni\xf3n Panamericana"},{id:486,name:"Ungu\xeda"}]},{id:12,departamento:"Cundinamarca",latLng:{lat:5.082590662894236,lng:-74.21880349765107},ciudades:[{id:487,name:"Agua de Dios"},{id:488,name:"Alb\xe1n"},{id:489,name:"Anapoima"},{id:490,name:"Anolaima"},{id:491,name:"Apulo"},{id:492,name:"Arbel\xe1ez"},{id:493,name:"Beltr\xe1n"},{id:494,name:"Bituima"},{id:495,name:"Bogot\xe1"},{id:496,name:"Bojac\xe1"},{id:497,name:"Cabrera"},{id:498,name:"Cachipay"},{id:499,name:"Cajic\xe1"},{id:500,name:"Caparrap\xed"},{id:501,name:"C\xe1queza"},{id:502,name:"Carmen de Carupa"},{id:503,name:"Chaguan\xed"},{id:504,name:"Ch\xeda"},{id:505,name:"Chipaque"},{id:506,name:"Choach\xed"},{id:507,name:"Chocont\xe1"},{id:508,name:"Cogua"},{id:509,name:"Cota"},{id:510,name:"Cucunub\xe1"},{id:511,name:"El Colegio"},{id:512,name:"El Pe\xf1\xf3n"},{id:513,name:"El Rosal"},{id:514,name:"Facatativ\xe1"},{id:515,name:"F\xf3meque"},{id:516,name:"Fosca"},{id:517,name:"Funza"},{id:518,name:"F\xfaquene"},{id:519,name:"Fusagasug\xe1"},{id:520,name:"Gachal\xe1"},{id:521,name:"Gachancip\xe1"},{id:522,name:"Gachet\xe1"},{id:523,name:"Gama"},{id:524,name:"Girardot"},{id:525,name:"Granada"},{id:526,name:"Guachet\xe1"},{id:527,name:"Guaduas"},{id:528,name:"Guasca"},{id:529,name:"Guataqu\xed"},{id:530,name:"Guatavita"},{id:531,name:"Guayabal de S\xedquima"},{id:532,name:"Guayabetal"},{id:533,name:"Guti\xe9rrez"},{id:534,name:"Jerusal\xe9n"},{id:535,name:"Jun\xedn"},{id:536,name:"La Calera"},{id:537,name:"La Mesa"},{id:538,name:"La Palma"},{id:539,name:"La Pe\xf1a"},{id:540,name:"La Vega"},{id:541,name:"Lenguazaque"},{id:542,name:"Machet\xe1"},{id:543,name:"Madrid"},{id:544,name:"Manta"},{id:545,name:"Medina"},{id:546,name:"Mosquera"},{id:547,name:"Nari\xf1o"},{id:548,name:"Nemoc\xf3n"},{id:549,name:"Nilo"},{id:550,name:"Nimaima"},{id:551,name:"Nocaima"},{id:552,name:"Pacho"},{id:553,name:"Paime"},{id:554,name:"Pandi"},{id:555,name:"Paratebueno"},{id:556,name:"Pasca"},{id:557,name:"Puerto Salgar"},{id:558,name:"Pul\xed"},{id:559,name:"Quebradanegra"},{id:560,name:"Quetame"},{id:561,name:"Quipile"},{id:562,name:"Ricaurte"},{id:563,name:"San Antonio del Tequendama"},{id:564,name:"San Bernardo"},{id:565,name:"San Cayetano"},{id:566,name:"San Francisco"},{id:567,name:"San Juan de Rioseco"},{id:568,name:"Sasaima"},{id:569,name:"Sesquil\xe9"},{id:570,name:"Sibat\xe9"},{id:571,name:"Silvania"},{id:572,name:"Simijaca"},{id:573,name:"Soacha"},{id:574,name:"Sop\xf3"},{id:575,name:"Subachoque"},{id:576,name:"Suesca"},{id:577,name:"Supat\xe1"},{id:578,name:"Susa"},{id:579,name:"Sutatausa"},{id:580,name:"Tabio"},{id:581,name:"Tausa"},{id:582,name:"Tena"},{id:583,name:"Tenjo"},{id:584,name:"Tibacuy"},{id:585,name:"Tibirita"},{id:586,name:"Tocaima"},{id:587,name:"Tocancip\xe1"},{id:588,name:"Topaip\xed"},{id:589,name:"Ubal\xe1"},{id:590,name:"Ubaque"},{id:591,name:"Ubat\xe9"},{id:592,name:"Une"},{id:593,name:"\xdatica"},{id:594,name:"Venecia"},{id:595,name:"Vergara"},{id:596,name:"Vian\xed"},{id:597,name:"Villag\xf3mez"},{id:598,name:"Villapinz\xf3n"},{id:599,name:"Villeta"},{id:600,name:"Viot\xe1"},{id:601,name:"Yacop\xed"},{id:602,name:"Zipac\xf3n"},{id:603,name:"Zipaquir\xe1"}]},{id:13,departamento:"C\xf3rdoba",latLng:{lat:8.424477441495673,lng:-75.8016144989384},ciudades:[{id:604,name:"Ayapel"},{id:605,name:"Buenavista"},{id:606,name:"Canalete"},{id:607,name:"Ceret\xe9"},{id:608,name:"Chim\xe1"},{id:609,name:"Chin\xfa"},{id:610,name:"Ci\xe9naga de Oro"},{id:611,name:"Cotorra"},{id:612,name:"La Apartada"},{id:613,name:"Lorica"},{id:614,name:"Los C\xf3rdobas"},{id:615,name:"Momil"},{id:616,name:"Montel\xedbano"},{id:617,name:"Monter\xeda"},{id:618,name:"Mo\xf1itos"},{id:619,name:"Planeta Rica"},{id:620,name:"Pueblo Nuevo"},{id:621,name:"Puerto Escondido"},{id:622,name:"Puerto Libertador"},{id:623,name:"Pur\xedsima"},{id:624,name:"Sahag\xfan"},{id:625,name:"San Andr\xe9s de Sotavento"},{id:626,name:"San Antero"},{id:627,name:"San Bernardo del Viento"},{id:628,name:"San Carlos"},{id:629,name:"San Jos\xe9 de Ur\xe9"},{id:630,name:"San Pelayo"},{id:631,name:"Tierralta"},{id:632,name:"Tuch\xedn"},{id:633,name:"Valencia"}]},{id:14,departamento:"Guain\xeda",latLng:{lat:2.7621975483363204,lng:-68.92891782893497},ciudades:[{id:634,name:"In\xedrida"}]},{id:15,departamento:"Guaviare",latLng:{lat:2.0215141257502225,lng:-72.21697323372946},ciudades:[{id:635,name:"Calamar"},{id:636,name:"El Retorno"},{id:637,name:"Miraflores"},{id:638,name:"San Jos\xe9 del Guaviare"}]},{id:16,departamento:"Huila",latLng:{lat:2.6498698404690084,lng:-75.4800095311748},ciudades:[{id:639,name:"Acevedo"},{id:640,name:"Agrado"},{id:641,name:"Aipe"},{id:642,name:"Algeciras"},{id:643,name:"Altamira"},{id:644,name:"Baraya"},{id:645,name:"Campoalegre"},{id:646,name:"Colombia"},{id:647,name:"El Pital"},{id:648,name:"El\xedas"},{id:649,name:"Garz\xf3n"},{id:650,name:"Gigante"},{id:651,name:"Guadalupe"},{id:652,name:"Hobo"},{id:653,name:"\xcdquira"},{id:654,name:"Isnos"},{id:655,name:"La Argentina"},{id:656,name:"La Plata"},{id:657,name:"N\xe1taga"},{id:658,name:"Neiva"},{id:659,name:"Oporapa"},{id:660,name:"Paicol"},{id:661,name:"Palermo"},{id:662,name:"Palestina"},{id:663,name:"Pitalito"},{id:664,name:"Rivera"},{id:665,name:"Saladoblanco"},{id:666,name:"San Agust\xedn"},{id:667,name:"Santa Mar\xeda"},{id:668,name:"Suaza"},{id:669,name:"Tarqui"},{id:670,name:"Tello"},{id:671,name:"Teruel"},{id:672,name:"Tesalia"},{id:673,name:"Timan\xe1"},{id:674,name:"Villavieja"},{id:675,name:"Yaguar\xe1"}]},{id:17,departamento:"La Guajira",latLng:{lat:11.404260895323004,lng:-72.64251029927193},ciudades:[{id:676,name:"Albania"},{id:677,name:"Barrancas"},{id:678,name:"Dibulla"},{id:679,name:"Distracci\xf3n"},{id:680,name:"El Molino"},{id:681,name:"Fonseca"},{id:682,name:"Hatonuevo"},{id:683,name:"La Jagua del Pilar"},{id:684,name:"Maicao"},{id:685,name:"Manaure"},{id:686,name:"Riohacha"},{id:687,name:"San Juan del Cesar"},{id:688,name:"Uribia"},{id:689,name:"Urumita"},{id:690,name:"Villanueva"}]},{id:18,departamento:"Magdalena",latLng:{lat:10.301788215357474,lng:-74.49876987515535},ciudades:[{id:691,name:"Algarrobo"},{id:692,name:"Aracataca"},{id:693,name:"Ariguan\xed"},{id:694,name:"Cerro de San Antonio"},{id:695,name:"Chibolo"},{id:696,name:"Chibolo"},{id:697,name:"Ci\xe9naga"},{id:698,name:"Concordia"},{id:699,name:"El Banco"},{id:700,name:"El Pi\xf1\xf3n"},{id:701,name:"El Ret\xe9n"},{id:702,name:"Fundaci\xf3n"},{id:703,name:"Guamal"},{id:704,name:"Nueva Granada"},{id:705,name:"Pedraza"},{id:706,name:"Piji\xf1o del Carmen"},{id:707,name:"Pivijay"},{id:708,name:"Plato"},{id:709,name:"Pueblo Viejo"},{id:710,name:"Remolino"},{id:711,name:"Sabanas de San \xc1ngel"},{id:712,name:"Salamina"},{id:713,name:"San Sebasti\xe1n de Buenavista"},{id:714,name:"San Zen\xf3n"},{id:715,name:"Santa Ana"},{id:716,name:"Santa B\xe1rbara de Pinto"},{id:717,name:"Santa Marta"},{id:718,name:"Sitionuevo"},{id:719,name:"Tenerife"},{id:720,name:"Zapay\xe1n"},{id:721,name:"Zona Bananera"}]},{id:19,departamento:"Meta",latLng:{lat:3.4804120555395337,lng:-73.36963163993414},ciudades:[{id:722,name:"Acac\xedas"},{id:723,name:"Barranca de Up\xeda"},{id:724,name:"Cabuyaro"},{id:725,name:"Castilla la Nueva"},{id:726,name:"Cubarral"},{id:727,name:"Cumaral"},{id:728,name:"El Calvario"},{id:729,name:"El Castillo"},{id:730,name:"El Dorado"},{id:731,name:"Fuente de Oro"},{id:732,name:"Granada"},{id:733,name:"Guamal"},{id:734,name:"La Macarena"},{id:735,name:"La Uribe"},{id:736,name:"Lejan\xedas"},{id:737,name:"Mapirip\xe1n"},{id:738,name:"Mesetas"},{id:739,name:"Puerto Concordia"},{id:740,name:"Puerto Gait\xe1n"},{id:741,name:"Puerto Lleras"},{id:742,name:"Puerto L\xf3pez"},{id:743,name:"Puerto Rico"},{id:744,name:"Restrepo"},{id:745,name:"San Carlos de Guaroa"},{id:746,name:"San Juan de Arama"},{id:747,name:"San Juanito"},{id:748,name:"San Mart\xedn"},{id:749,name:"Villavicencio"},{id:750,name:"Vista Hermosa"}]},{id:20,departamento:"Nari\xf1o",latLng:{lat:1.6690169542763247,lng:-77.9615831747133},ciudades:[{id:751,name:"Aldana"},{id:752,name:"Ancuy\xe1"},{id:753,name:"Arboleda"},{id:754,name:"Barbacoas"},{id:755,name:"Bel\xe9n"},{id:756,name:"Buesaco"},{id:757,name:"Chachag\xfc\xed"},{id:758,name:"Col\xf3n"},{id:759,name:"Consac\xe1"},{id:760,name:"Contadero"},{id:761,name:"C\xf3rdoba"},{id:762,name:"Cuaspud"},{id:763,name:"Cumbal"},{id:764,name:"Cumbitara"},{id:765,name:"El Charco"},{id:766,name:"El Pe\xf1ol"},{id:767,name:"El Rosario"},{id:768,name:"El Tabl\xf3n"},{id:769,name:"El Tambo"},{id:770,name:"Francisco Pizarro"},{id:771,name:"Funes"},{id:772,name:"Guachucal"},{id:773,name:"Guaitarilla"},{id:774,name:"Gualmat\xe1n"},{id:775,name:"Iles"},{id:776,name:"Imu\xe9s"},{id:777,name:"Ipiales"},{id:778,name:"La Cruz"},{id:779,name:"La Florida"},{id:780,name:"La Llanada"},{id:781,name:"La Tola"},{id:782,name:"La Uni\xf3n"},{id:783,name:"Leiva"},{id:784,name:"Linares"},{id:785,name:"Los Andes"},{id:786,name:"Mag\xfc\xed Pay\xe1n"},{id:787,name:"Mallama"},{id:788,name:"Mosquera"},{id:789,name:"Nari\xf1o"},{id:790,name:"Olaya Herrera"},{id:791,name:"Ospina"},{id:792,name:"Pasto"},{id:793,name:"Policarpa"},{id:794,name:"Potos\xed"},{id:795,name:"Providencia"},{id:796,name:"Puerres"},{id:797,name:"Pupiales"},{id:798,name:"Ricaurte"},{id:799,name:"Roberto Pay\xe1n"},{id:800,name:"Samaniego"},{id:801,name:"San Bernardo"},{id:802,name:"San Jos\xe9 de Alb\xe1n"},{id:803,name:"San Lorenzo"},{id:804,name:"San Pablo"},{id:805,name:"San Pedro de Cartago"},{id:806,name:"Sandon\xe1"},{id:807,name:"Santa B\xe1rbara"},{id:808,name:"Santacruz"},{id:809,name:"Sapuyes"},{id:810,name:"Taminango"},{id:811,name:"Tangua"},{id:812,name:"Tumaco"},{id:813,name:"T\xfaquerres"},{id:814,name:"Yacuanquer"}]},{id:21,departamento:"Norte de Santander",latLng:{lat:8.232516324230472,lng:-72.95544354888},ciudades:[{id:815,name:"\xc1brego"},{id:816,name:"Arboledas"},{id:817,name:"Bochalema"},{id:818,name:"Bucarasica"},{id:819,name:"C\xe1chira"},{id:820,name:"C\xe1cota"},{id:821,name:"Chin\xe1cota"},{id:822,name:"Chitag\xe1"},{id:823,name:"Convenci\xf3n"},{id:824,name:"C\xfacuta"},{id:825,name:"Cucutilla"},{id:826,name:"Duran\xeda"},{id:827,name:"El Carmen"},{id:828,name:"El Tarra"},{id:829,name:"El Zulia"},{id:830,name:"Gramalote"},{id:831,name:"Hacar\xed"},{id:832,name:"Herr\xe1n"},{id:833,name:"La Esperanza"},{id:834,name:"La Playa de Bel\xe9n"},{id:835,name:"Labateca"},{id:836,name:"Los Patios"},{id:837,name:"Lourdes"},{id:838,name:"Mutiscua"},{id:839,name:"Oca\xf1a"},{id:840,name:"Pamplona"},{id:841,name:"Pamplonita"},{id:842,name:"Puerto Santander"},{id:843,name:"Ragonvalia"},{id:844,name:"Salazar de Las Palmas"},{id:845,name:"San Calixto"},{id:846,name:"San Cayetano"},{id:847,name:"Santiago"},{id:848,name:"Santo Domingo de Silos"},{id:849,name:"Sardinata"},{id:850,name:"Teorama"},{id:851,name:"Tib\xfa"},{id:852,name:"Toledo"},{id:853,name:"Villa Caro"},{id:854,name:"Villa del Rosario"}]},{id:22,departamento:"Putumayo",latLng:{lat:.7073761078907378,lng:-76.1044723733083},ciudades:[{id:855,name:"Col\xf3n"},{id:856,name:"Mocoa"},{id:857,name:"Orito"},{id:858,name:"Puerto As\xeds"},{id:859,name:"Puerto Caicedo"},{id:860,name:"Puerto Guzm\xe1n"},{id:861,name:"Puerto Legu\xedzamo"},{id:862,name:"San Francisco"},{id:863,name:"San Miguel"},{id:864,name:"Santiago"},{id:865,name:"Sibundoy"},{id:866,name:"Valle del Guamuez"},{id:867,name:"Villagarz\xf3n"}]},{id:23,departamento:"Quind\xedo",latLng:{lat:4.481166553479216,lng:-75.69879375046133},ciudades:[{id:868,name:"Armenia"},{id:869,name:"Buenavista"},{id:870,name:"Calarc\xe1"},{id:871,name:"Circasia"},{id:872,name:"C\xf3rdoba"},{id:873,name:"Filandia"},{id:874,name:"G\xe9nova"},{id:875,name:"La Tebaida"},{id:876,name:"Montenegro"},{id:877,name:"Pijao"},{id:878,name:"Quimbaya"},{id:879,name:"Salento"}]},{id:24,departamento:"Risaralda",latLng:{lat:5.271805487309095,lng:-75.9968727880377},ciudades:[{id:880,name:"Ap\xeda"},{id:881,name:"Balboa"},{id:882,name:"Bel\xe9n de Umbr\xeda"},{id:883,name:"Dosquebradas"},{id:884,name:"Gu\xe1tica"},{id:885,name:"La Celia"},{id:886,name:"La Virginia"},{id:887,name:"Marsella"},{id:888,name:"Mistrat\xf3"},{id:889,name:"Pereira"},{id:890,name:"Pueblo Rico"},{id:891,name:"Quinch\xeda"},{id:892,name:"Santa Rosa de Cabal"},{id:893,name:"Santuario"}]},{id:25,departamento:"San Andr\xe9s y Providencia",latLng:{lat:12.545746985313164,lng:-81.72131846875553},ciudades:[{id:894,name:"Providencia y Santa Catalina Islas"},{id:895,name:"San Andr\xe9s"}]},{id:26,departamento:"Santander",latLng:{lat:6.784761230548315,lng:-73.54769112142452},ciudades:[{id:896,name:"Aguada"},{id:897,name:"Albania"},{id:898,name:"Aratoca"},{id:899,name:"Barbosa"},{id:900,name:"Barichara"},{id:901,name:"Barrancabermeja"},{id:902,name:"Betulia"},{id:903,name:"Bol\xedvar"},{id:904,name:"Bucaramanga"},{id:905,name:"Cabrera"},{id:906,name:"California"},{id:907,name:"Capitanejo"},{id:908,name:"Carcas\xed"},{id:909,name:"Cepit\xe1"},{id:910,name:"Cerrito"},{id:911,name:"Charal\xe1"},{id:912,name:"Charta"},{id:913,name:"Chima"},{id:914,name:"Chipat\xe1"},{id:915,name:"Cimitarra"},{id:916,name:"Concepci\xf3n"},{id:917,name:"Confines"},{id:918,name:"Contrataci\xf3n"},{id:919,name:"Coromoro"},{id:920,name:"Curit\xed"},{id:921,name:"El Carmen de Chucur\xed"},{id:922,name:"El Guacamayo"},{id:923,name:"El Pe\xf1\xf3n"},{id:924,name:"El Play\xf3n"},{id:925,name:"El Socorro"},{id:926,name:"Encino"},{id:927,name:"Enciso"},{id:928,name:"Flori\xe1n"},{id:929,name:"Floridablanca"},{id:930,name:"Gal\xe1n"},{id:931,name:"G\xe1mbita"},{id:932,name:"Gir\xf3n"},{id:933,name:"Guaca"},{id:934,name:"Guadalupe"},{id:935,name:"Guapot\xe1"},{id:936,name:"Guavat\xe1"},{id:937,name:"G\xfcepsa"},{id:938,name:"Hato"},{id:939,name:"Jes\xfas Mar\xeda"},{id:940,name:"Jord\xe1n"},{id:941,name:"La Belleza"},{id:942,name:"La Paz"},{id:943,name:"Land\xe1zuri"},{id:944,name:"Lebrija"},{id:945,name:"Los Santos"},{id:946,name:"Macaravita"},{id:947,name:"M\xe1laga"},{id:948,name:"Matanza"},{id:949,name:"Mogotes"},{id:950,name:"Molagavita"},{id:951,name:"Ocamonte"},{id:952,name:"Oiba"},{id:953,name:"Onzaga"},{id:954,name:"Palmar"},{id:955,name:"Palmas del Socorro"},{id:956,name:"P\xe1ramo"},{id:957,name:"Piedecuesta"},{id:958,name:"Pinchote"},{id:959,name:"Puente Nacional"},{id:960,name:"Puerto Parra"},{id:961,name:"Puerto Wilches"},{id:962,name:"Rionegro"},{id:963,name:"Sabana de Torres"},{id:964,name:"San Andr\xe9s"},{id:965,name:"San Benito"},{id:966,name:"San Gil"},{id:967,name:"San Joaqu\xedn"},{id:968,name:"San Jos\xe9 de Miranda"},{id:969,name:"San Miguel"},{id:970,name:"San Vicente de Chucur\xed"},{id:971,name:"Santa B\xe1rbara"},{id:972,name:"Santa Helena del Op\xf3n"},{id:973,name:"Simacota"},{id:974,name:"Suaita"},{id:975,name:"Sucre"},{id:976,name:"Surat\xe1"},{id:977,name:"Tona"},{id:978,name:"Valle de San Jos\xe9"},{id:979,name:"V\xe9lez"},{id:980,name:"Vetas"},{id:981,name:"Villanueva"},{id:982,name:"Zapatoca"}]},{id:27,departamento:"Sucre",latLng:{lat:9.215556897019034,lng:-75.15485281520182},ciudades:[{id:983,name:"Buenavista"},{id:984,name:"Caimito"},{id:985,name:"Chal\xe1n"},{id:986,name:"Colos\xf3"},{id:987,name:"Corozal"},{id:988,name:"Cove\xf1as"},{id:989,name:"El Roble"},{id:990,name:"Galeras"},{id:991,name:"Guaranda"},{id:992,name:"La Uni\xf3n"},{id:993,name:"Los Palmitos"},{id:994,name:"Majagual"},{id:995,name:"Morroa"},{id:996,name:"Ovejas"},{id:997,name:"Sampu\xe9s"},{id:998,name:"San Antonio de Palmito"},{id:999,name:"San Benito Abad"},{id:1e3,name:"San Juan de Betulia"},{id:1001,name:"San Marcos"},{id:1002,name:"San Onofre"},{id:1003,name:"San Pedro"},{id:1004,name:"Sinc\xe9"},{id:1005,name:"Sincelejo"},{id:1006,name:"Sucre"},{id:1007,name:"Tol\xfa"},{id:1008,name:"Tol\xfa Viejo"}]},{id:28,departamento:"Tolima",latLng:{lat:4.093341859420217,lng:-75.30903210050569},ciudades:[{id:1009,name:"Alpujarra"},{id:1010,name:"Alvarado"},{id:1011,name:"Ambalema"},{id:1012,name:"Anzo\xe1tegui"},{id:1013,name:"Armero"},{id:1014,name:"Ataco"},{id:1015,name:"Cajamarca"},{id:1016,name:"Carmen de Apical\xe1"},{id:1017,name:"Casabianca"},{id:1018,name:"Chaparral"},{id:1019,name:"Coello"},{id:1020,name:"Coyaima"},{id:1021,name:"Cunday"},{id:1022,name:"Dolores"},{id:1023,name:"El Espinal"},{id:1024,name:"Fal\xe1n"},{id:1025,name:"Flandes"},{id:1026,name:"Fresno"},{id:1027,name:"Guamo"},{id:1028,name:"Herveo"},{id:1029,name:"Honda"},{id:1030,name:"Ibagu\xe9"},{id:1031,name:"Icononzo"},{id:1032,name:"L\xe9rida"},{id:1033,name:"L\xedbano"},{id:1034,name:"Mariquita"},{id:1035,name:"Melgar"},{id:1036,name:"Murillo"},{id:1037,name:"Natagaima"},{id:1038,name:"Ortega"},{id:1039,name:"Palocabildo"},{id:1040,name:"Piedras"},{id:1041,name:"Planadas"},{id:1042,name:"Prado"},{id:1043,name:"Purificaci\xf3n"},{id:1044,name:"Rioblanco"},{id:1045,name:"Roncesvalles"},{id:1046,name:"Rovira"},{id:1047,name:"Salda\xf1a"},{id:1048,name:"San Antonio"},{id:1049,name:"San Luis"},{id:1050,name:"Santa Isabel"},{id:1051,name:"Su\xe1rez"},{id:1052,name:"Valle de San Juan"},{id:1053,name:"Venadillo"},{id:1054,name:"Villahermosa"},{id:1055,name:"Villarrica"}]},{id:29,departamento:"Valle del Cauca",latLng:{lat:3.807459155775956,lng:-76.49813881433803},ciudades:[{id:1056,name:"Alcal\xe1"},{id:1057,name:"Andaluc\xeda"},{id:1058,name:"Ansermanuevo"},{id:1059,name:"Argelia"},{id:1060,name:"Bol\xedvar"},{id:1061,name:"Buenaventura"},{id:1062,name:"Buga"},{id:1063,name:"Bugalagrande"},{id:1064,name:"Caicedonia"},{id:1065,name:"Cali"},{id:1066,name:"Calima"},{id:1067,name:"Candelaria"},{id:1068,name:"Cartago"},{id:1069,name:"Dagua"},{id:1070,name:"El \xc1guila"},{id:1071,name:"El Cairo"},{id:1072,name:"El Cerrito"},{id:1073,name:"El Dovio"},{id:1074,name:"Florida"},{id:1075,name:"Ginebra"},{id:1076,name:"Guacar\xed"},{id:1077,name:"Jamund\xed"},{id:1078,name:"La Cumbre"},{id:1079,name:"La Uni\xf3n"},{id:1080,name:"La Victoria"},{id:1081,name:"Obando"},{id:1082,name:"Palmira"},{id:1083,name:"Pradera"},{id:1084,name:"Restrepo"},{id:1085,name:"Riofr\xedo"},{id:1086,name:"Roldanillo"},{id:1087,name:"San Pedro"},{id:1088,name:"Sevilla"},{id:1089,name:"Toro"},{id:1090,name:"Trujillo"},{id:1091,name:"Tulu\xe1"},{id:1092,name:"Ulloa"},{id:1093,name:"Versalles"},{id:1094,name:"Vijes"},{id:1095,name:"Yotoco"},{id:1096,name:"Yumbo"},{id:1097,name:"Zarzal"}]},{id:30,departamento:"Vaup\xe9s",latLng:{lat:.8749275809859319,lng:-70.69269224670484},ciudades:[{id:1098,name:"Carur\xfa"},{id:1099,name:"Mit\xfa"},{id:1100,name:"Taraira"}]},{id:31,departamento:"Vichada",latLng:{lat:4.8220468531752605,lng:-69.67331509257474},ciudades:[{id:1101,name:"Cumaribo"},{id:1102,name:"La Primavera"},{id:1103,name:"Puerto Carre\xf1o"},{id:1104,name:"Santa Rosal\xeda"}]}],Bc=function(){for(var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useState)([]),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)([]),u=Object(f.a)(l,1)[0],j=Object(a.useState)([]),b=Object(f.a)(j,1)[0],O=Object(a.useState)([]),v=Object(f.a)(O,1)[0],y=Object(a.useState)([]),C=Object(f.a)(y,2),I=C[0],E=C[1],F=Object(a.useState)([]),A=Object(f.a)(F,2),k=A[0],D=A[1],L=Object(a.useState)(2),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(a.useState)(""),z=Object(f.a)(U,2),G=z[0],B=z[1],Y=Object(a.useState)(null),H=Object(f.a)(Y,2),Z=H[0],Q=H[1],K=Object(a.useState)("3.998749"),W=Object(f.a)(K,1)[0],X=Object(a.useState)("-75.2545871"),$=Object(f.a)(X,1)[0],ee=Object(a.useState)(!1),te=Object(f.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)("-"),ce=Object(f.a)(re,2),ie=(ce[0],ce[1]),oe=[],se=["Colombia"],le=Object(a.useState)(),de=Object(f.a)(le,2),ue=de[0],be=de[1],me=0;me<Gc.length;me++)oe.push(Gc[me].departamento);Object(a.useEffect)((function(){e(wc((function(e){var t=[];e.error||(e._payload.project_classification.forEach((function(e){v.push({name:e.name,id:e.id})})),e._payload.project_state.forEach((function(e){b.push({name:e.name,id:e.id})})),e._payload.project_types.forEach((function(e){u.push({name:e.name,id:e.id})})),e._payload.sales_types.forEach((function(e){t.push({name:e.name,id:e.id})})),E(t))})))}),[]),Object(a.useEffect)((function(){"2"===q&&pe("quantity"),1===G&&pe("fiduciaryCode")}),[q,G]);var pe=function(e){n.setFieldsValue(Object(Nc.a)({},e,null))},fe=function(e){switch(e){case 3:return"Finalizado";case 2:return"En construcci\xf3n";case 1:return"En planos";default:return""}},Oe=function(){var t=Object(p.a)(m.a.mark((function t(){var a,r,c,i,o,s,l,d,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ae(!0),t.next=3,n.validateFields();case 3:if(i=t.sent,(o=new FormData).append("name",i.projectName),o.append("sale_type",i.saleForm),o.append("fiduciary_code",i.fiduciaryCode),o.append("state",i.state?1:0),o.append("project_state","Finalizado"===i.stateProject?3:"En construcci\xf3n"===i.stateProject?2:1),o.append("location",ue||0),o.append("area",i.zone||null),o.append("description",i.descriptionProject||null),o.append("description_point",i.descriptionPoint||null),o.append("project_type",i.projectType),o.append("classification",i.classification),o.append("total_units",i.totalUnits||null),o.append("floors_number",null!==(a=i.numberFloors)&&void 0!==a?a:0),o.append("simple_parking_number",null!==(r=null===i||void 0===i?void 0:i.simpleParkingLots)&&void 0!==r?r:0),o.append("double_parking_number",null!==(c=null===i||void 0===i?void 0:i.doubleLineaParkingLot)&&void 0!==c?c:0),o.append("visitor_parking_number",i.quantity?i.quantity:0),o.append("sale_start_date",i.startDateSale.format("YYYY-MM-DD")),o.append("start_build_date",i.estimatedDateStartConstruction.format("YYYY-MM-DD")),o.append("estimated_delivery_date",i.estimatedDeliveryDate.format("YYYY-MM-DD")),o.append("maximum_reforms_date",i.dateMaximumReforms.format("YYYY-MM-DD")),"undefined"!==typeof i.uploadImages)for(s=0;s<i.uploadImages.length;s++)o.append("images[]",i.uploadImages[s].originFileObj,i.uploadImages[s].name);if("undefined"!==typeof i.promoterImages)for(l=0;l<i.promoterImages.length;l++)o.append("promoters[]",i.promoterImages[l].originFileObj,i.promoterImages[l].name);if("undefined"!==typeof i.uploadDocuments)for(d=0;d<i.uploadDocuments.length;d++)o.append("documents[]",i.uploadDocuments[d].originFileObj,i.uploadDocuments[d].name);if("undefined"!==typeof i.logo)for(u=0;u<i.logo.length;u++)o.append("logo",i.logo[u].originFileObj,i.logo[u].name);e((j=o,b=function(e){e.error?(Object(P.c)("\xa1UPS! Ha ocurrido un error"),ae(!1)):(Object(P.f)("Se registro con \xe9xito el nuevo proyecto!!!"),Q(e._payload),ae(!1))},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/project"),data:j,postProcessSuccess:b,success:function(e){return Fc(e)}}}));case 30:case"end":return t.stop()}var j,b}),t)})));return function(){return t.apply(this,arguments)}}(),he=function(e){return Array.isArray(e)?e:e&&e.fileList};return Object(h.jsx)(h.Fragment,{children:Z?Object(h.jsx)(d.Redirect,{to:"/projects/edit-project/".concat(Z)}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"site-page-header-ghost-wrapper",children:[Object(h.jsx)(Te.a,{className:"site-page-header",onBack:function(){return window.history.back()},title:"Nuevo Proyecto",style:{marginLeft:"-25px"}}),Object(h.jsxs)(w.a,{style:{borderColor:"black"},children:[Object(h.jsx)(g.a,{layout:"vertical",form:n,onFinish:Oe,initialValues:{state:!0},name:"formNewProject",style:{marginLeft:"27px",marginRight:"27px"},children:Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{xs:5,sm:24,md:24,lg:24,xl:24,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Informaci\xf3n General"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:8,lg:8,xl:6,children:Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,offset:1,children:Object(h.jsx)(g.a.Item,{style:{paddingTop:"60px",paddingLeft:"50px"},name:"logo",valuePropName:"fileList",getValueFromEvent:he,children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",accept:"image/*",maxCount:1,name:"logo",onChange:function(e){var t=e.fileList;o(t)},children:i.length>0?null:"+ Subir"})})})})}),Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:8,children:[Object(h.jsx)(g.a.Item,{label:"Nombre del proyecto",name:"projectName",rules:[{min:3,message:"El nombre del proyecto debe tener al menos 3 caracteres."},{required:!0,message:"El nombre del proyecto es requerido."}],children:Object(h.jsx)(_.a,{placeholder:"Nombre del proyecto"})}),Object(h.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"descriptionProject",children:Object(h.jsx)(_.a.TextArea,{placeholder:"Descripci\xf3n",rows:5})})]}),Object(h.jsxs)(N.a,{xs:5,sm:24,md:9,lg:9,xl:9,children:[Object(h.jsx)(g.a.Item,{label:"Forma de venta",name:"saleForm",rules:[{required:!0,message:"La forma de venta es requerida."}],children:Object(h.jsxs)(dt.a,{loading:0===I.length,onChange:B,defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===I||void 0===I?void 0:I.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.Item,{label:"C\xf3digo fiduciario",name:"fiduciaryCode",rules:[{type:"number",min:99,max:999999999999999,message:"Debe tener al menos 3 n\xfameros y no m\xe1s de 15."}],children:Object(h.jsx)(ut.a,{min:0,placeholder:"C\xf3digo fiduciario",disabled:function(){switch(G){case 1:case"":return!0;default:return!1}}(),style:{width:"100%"}})}),Object(h.jsx)(g.a.Item,{label:"Estado del proyecto",name:"stateProject",children:Object(h.jsx)(_.a,{disabled:!0})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Pa\xeds",name:"country",children:Object(h.jsxs)(dt.a,{defaultValue:"-",style:{width:"100%"},onChange:function(e){"-"===e&&(n.setFieldsValue({department:"-"}),n.setFieldsValue({city:"-"})),n.setFieldsValue({country:e}),zc(se[e],null,Lc.Find_Location,4.5),ie(e)},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),se.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:t,children:e},t)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Departamento",name:"department",children:Object(h.jsxs)(dt.a,{defaultValue:"-",onChange:function(e){if("-"!==e){var t=Gc.find((function(t){return t.departamento===oe[e]}));n.setFieldsValue({department:e}),zc(null,t.latLng,Lc.Find_Location_by_latlng,7),D(t.ciudades)}},style:{width:"100%"},disabled:void 0===n.getFieldValue("country")||"-"===n.getFieldValue("country"),children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),oe.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:t,children:e},t)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Ciudad",name:"city",rules:[{required:!0,message:"La ciudad es obligatoria."}],children:Object(h.jsxs)(dt.a,{defaultValue:"-",onChange:function(e){if("-"!==e){var t=k[e],a=t.name+" - "+oe[n.getFieldValue("department")]+" - "+se[n.getFieldValue("country")];be(t.id),n.setFieldsValue({city:e}),zc(a,null,Lc.Maker_Location,14)}},disabled:""===n.getFieldValue("department")||void 0===n.getFieldValue("department")||"-"===n.getFieldValue("department"),style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),k.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:t,children:e.name},t)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"zone",label:"Zona",children:Object(h.jsx)(_.a,{placeholder:"Zona"})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:5,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"descriptionPoint",label:"Descripci\xf3n de punto",children:Object(h.jsx)(_.a.TextArea,{placeholder:"Descripci\xf3n de punto",rows:3})})})})]}),Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(Rc,{height:"43.5vh",width:"76vh",center:[W,$],tileLayer:"map",zoom:4.7,apiKey:"muDSpMXsg0x5Pjt4cyhAkuk0O4wjV8hR"})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(T.a,{gutter:22,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:5,lg:5,xl:8,children:Object(h.jsx)(g.a.Item,{name:"projectType",label:"Tipos de proyectos",rules:[{required:!0,message:"El tipo de proyecto es requerido."}],children:Object(h.jsxs)(dt.a,{loading:0===u.length,defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),u.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:10,lg:10,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Clasificaci\xf3n",name:"classification",rules:[{required:!0,message:"La clasificaci\xf3n es requerida."}],children:Object(h.jsxs)(dt.a,{loading:0===v.length,defaultValue:"-",children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),v.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(h.jsx)(T.a,{gutter:16}),Object(h.jsx)(N.a,{xs:5,sm:24,md:3,lg:3,xl:7,children:Object(h.jsx)(g.a.Item,{label:"Total de unidades",name:"totalUnits",children:Object(h.jsx)(ut.a,{placeholder:"Total de unidades",min:0,style:{width:"100% "}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:3,lg:3,xl:8,children:Object(h.jsx)(g.a.Item,{valuePropName:0,label:"N\xfamero de pisos",name:"numberFloors",children:Object(h.jsx)(ut.a,{defaultValue:0,placeholder:"N\xfamero de pisos",min:0,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:4,lg:4,xl:8,children:Object(h.jsx)(g.a.Item,{valuePropName:0,label:"Parqueaderos sencillos",name:"simpleParkingLots",children:Object(h.jsx)(ut.a,{type:"number",defaultValue:0,placeholder:"Parqueaderos sencillos",min:0,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:5,lg:5,xl:7,children:Object(h.jsx)(g.a.Item,{label:"Parqueaderos doble lineal",name:"doubleLineaParkingLot",children:Object(h.jsx)(ut.a,{type:"number",defaultValue:0,placeholder:"Parqueaderos doble lineal",min:0,style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:6,lg:6,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Parqueadero de visitantes",name:"parkingLotVisitors",children:Object(h.jsxs)(dt.a,{defaultValue:"2",onChange:M,children:[Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:4,lg:4,xl:7,children:Object(h.jsx)(g.a.Item,{label:"Cantidad",name:"quantity",rules:[{type:"number",min:0,max:999,message:"Cantidad maxima de parqueaderos excedida."}],children:Object(h.jsx)(ut.a,{defaultValue:0,disabled:"1"!==q,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:2,lg:2,xl:4,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",name:"state",label:"Estado",children:Object(h.jsx)(je.a,{checked:!0,children:"Activo"})})})]}),Object(h.jsx)(J.a,{orientation:"left",children:"L\xednea de tiempo del proyecto"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:5,lg:5,xl:11,children:Object(h.jsx)(g.a.Item,{name:"startDateSale",label:"Fecha de inicio de la venta",rules:[{required:!0,message:"Fecha requerida."}],children:Object(h.jsx)(jt.a,{placeholder:"Fecha de inicio de la venta",onChange:function(e){null!==e&&0!==b.length&&n.setFieldsValue({stateProject:fe(b[0].id)})},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:7,lg:7,xl:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha estimada de inicio de construcci\xf3n",name:"estimatedDateStartConstruction",rules:[{required:!0,message:"Fecha Requerida"}],children:Object(h.jsx)(jt.a,{placeholder:"Fecha estimada de inicio de construcci\xf3n",onChange:function(e){if(null!==e){var t=(new Date).toJSON().slice(0,10).replace(/-/g,"/");n.getFieldsValue("startDateSale")>t&&0!==b.length&&n.setFieldsValue({stateProject:fe(b[1].id)})}},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:6,lg:6,xl:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha estimada de entrega",name:"estimatedDeliveryDate",rules:[{required:!0,message:"Fecha Requerida"}],children:Object(h.jsx)(jt.a,{placeholder:"Fecha estimada de entrega",onChange:function(e){if(null!==e){var t=(new Date).toJSON().slice(0,10).replace(/-/g,"/");n.getFieldsValue("estimatedDateStartConstruction")>t&&0!==b.length&&n.setFieldsValue({stateProject:fe(b[2].id)})}},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:6,lg:6,xl:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha m\xe1xima para reformas",name:"dateMaximumReforms",rules:[{required:!0,message:"Fecha Requerida"}],children:Object(h.jsx)(jt.a,{placeholder:"Fecha m\xe1xima para reformas",style:{width:"100%"}})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:20,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Documentos"}),Object(h.jsx)(g.a.Item,{valuePropName:"fileList",name:"uploadDocuments",getValueFromEvent:he,children:Object(h.jsx)(rn.a,{action:R.Pe,accept:R.Lh,multiple:!0,name:"uploadDocuments",maxCount:100,children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Dc.a,{}),children:"Subir documentos"})})})]})}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:8,lg:8,xl:12,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Im\xe1genes"}),Object(h.jsx)(g.a.Item,{name:"uploadImages",valuePropName:"fileList",getValueFromEvent:he,children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",accept:"image/*",multiple:!0,name:"uploadImages",maxCount:100,children:"+ Subir"})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:8,lg:8,xl:12,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Im\xe1genes de promotores"}),Object(h.jsx)(g.a.Item,{valuePropName:"fileList",name:"promoterImages",getValueFromEvent:he,children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",accept:"image/*",multiple:!0,name:"promoterImages",maxCount:100,children:"+ subir"})})]})]}),Object(h.jsx)(J.a,{}),Object(h.jsx)(g.a.Item,{wrapperCol:{span:12,offset:21},children:Object(h.jsx)(S.a,{size:"long",type:"primary",htmlType:"submit",children:"Guardar"})})]})})}),ne&&Object(h.jsx)(x,{})]})]})})})},Yc=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/competingProject"),success:function(e){return Qc(e)}}}},Jc=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/competingProject/").concat(e),data:t,success:function(e,t){return Kc(e,t)},postProcessSuccess:n,postProcessError:a}}},Hc=function(e){return{type:R.m,payload:e}},Zc=function(e){return{type:R.Sc,payload:e}},Qc=function(e){return{type:R.mf,payload:e}},Kc=function(e,t){return{type:R.yg,payload:{id:e,data:t}}},Wc=function(e){return{type:R.Jd,payload:e}},Xc=function(e){var t=Object(s.d)();var n=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:n,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el control de competencia? ",onConfirm:function(){var n,a,r;t((n=e.id,a=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:e.sent.error?Object(P.c)("\xa1UPS, Ha ocurrido un error"):Object(P.f)("Control de competencias eliminado"),t(Yc());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/competingProject/").concat(n),success:function(){return Wc(n)},postProcessSuccess:a,postProcessError:r}}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})})})},$c=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(f.a)(c,2),l=i[0],d=i[1],u=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.controlPower}));Object(a.useEffect)((function(){0===u.length?r(!0):r(!1)}),[u]),Object(a.useEffect)((function(){u.hasOwnProperty("_payload")&&d(u._payload)}),[u]);var b=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),m=[Object(j.a)(Object(j.a)({title:"Nombre",width:40,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),Object(j.a)(Object(j.a)({title:"Constructora",width:50,dataIndex:"construction_companies_name",key:"construction_companies_name"},Object(ce.b)("construction_companies_name")),ce.c),{title:"Tipo de Proyecto",dataIndex:"project_types_name",key:"project_types_name",width:50},Object(j.a)(Object(j.a)({title:"Comercializadora",dataIndex:"marketer_companies_name",key:"marketer_companies_name",width:40},Object(ce.b)("marketer_companies_name")),ce.c),{title:"Estado",dataIndex:"project_states_name",key:"project_states_name",width:40},{title:"Acciones",key:"acciones",fixed:"right",width:25,render:function(e,t){return function(e){return Object(h.jsxs)(h.Fragment,{children:[Fe(R.Zg)?Object(h.jsx)(o.b,{to:"/projects/edit-control-competences/".concat(e.id),children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:b,children:Object(h.jsx)(S.a,{type:"primary",size:"small",style:{backgroundColor:"#ffa247",border:"#ffa247"},icon:Object(h.jsx)(le.a,{})})})}):null,"  ",Fe(R.Ub)?Object(h.jsx)(Xc,{id:e.id}):null,"  ",Object(h.jsx)(Qt,{created_at:e.created_at,name:e.name,updated_at:e.updated_at})]})}(t)}}];return Object(h.jsx)(Q.a,{bordered:!0,loading:n&&Object(h.jsx)(x,{}),columns:m,dataSource:Object(ce.a)(l),scroll:{x:1e3}})},ei=function(){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/constructionCompany"),success:function(e){return ni(e)}}}},ti=function(e){return{type:R.j,payload:e}},ni=function(e){return{type:R.jf,payload:e}},ai=function(){var e=Object(s.d)();return Object(a.useEffect)((function(){e(Yc())}),[]),Object(a.useEffect)((function(){e(br())}),[]),Object(a.useEffect)((function(){e(ei())}),[]),Ae(R.jd)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Control de Competencia",extra:[Fe(R.sb)?Object(h.jsx)(S.a,{type:"primary",children:Object(h.jsx)(o.b,{to:"/projects/new-control-competences",children:"Nuevo Control de Competencia"})}):null]}),Object(h.jsx)($c,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},ri=function(){return Object(h.jsx)(ai,{})},ci=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(s.d)(),u=g.a.useForm(),j=Object(f.a)(u,1)[0],b={name:o},O=function(){return r(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){return r(!0)},icon:Object(h.jsx)(De.a,{})}),Object(h.jsx)(ue.a,{title:"Nueva Constructora",centered:!0,visible:n,footer:!1,onCancel:O,width:700,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:j,validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} de\tbe ser un n\xfamero"}},onFinish:function(){var e,t,n;d((e=b,t=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error||(j.resetFields(),O(),Object(P.f)("Ha sido agregado con \xe9xito"),d(ei()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/constructionCompany"),data:e,success:function(e){return ti(e)},postProcessSuccess:t,postProcessError:n}}))},children:[Object(h.jsx)(g.a.Item,{label:"Nombre",name:"name",rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsx)(_.a,{value:o,onChange:function(e){return l(e.target.value)}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},ii=function(e,t){var n;return n=12*(t.getFullYear()-e.getFullYear()),n-=e.getMonth(),(n+=t.getMonth())<=0?0:n},oi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,a="",r="",c=new Date,i="";return a=new Date(t),r=new Date(e),c<a&&(i=n.find((function(e){return 1===e.id})).name),c>r&&(i=n.find((function(e){return 3===e.id})).name),c>=a&&c<=r&&(i=n.find((function(e){return 2===e.id})).name),i},si=Object(h.jsx)(g.a.Item,{name:"prefix",noStyle:!0,children:Object(h.jsxs)(dt.a,{style:{width:70},children:[Object(h.jsx)(dt.a.Option,{value:"86",children:"+57"}),Object(h.jsx)(dt.a.Option,{value:"87",children:"+87"})]})}),li=function(e){var t,n,r=e.itemStyle,c=e.calculatePercentageUnitsSold,i=e.controlCompetencesDatabase,o=e.projectStates,l=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.pricesRange})),d=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.builder})),u=Object(a.useState)([]),b=Object(f.a)(u,2),O=b[0],x=b[1],v=Object(a.useState)(""),y=Object(f.a)(v,2),S=y[0],w=y[1],C=Object(a.useState)(0),P=Object(f.a)(C,2),I=P[0],E=P[1],F=Object(a.useState)(0),A=Object(f.a)(F,2),k=A[0],D=A[1],L=Object(a.useState)(0),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(a.useState)(0),z=Object(f.a)(U,2),G=z[0],B=z[1],Y=Object(a.useState)(),H=Object(f.a)(Y,2),Z=H[0],Q=H[1],K=Object(a.useState)(),W=Object(f.a)(K,2),X=W[0],$=W[1],ee=Object(a.useState)(),te=Object(f.a)(ee,2),ne=te[0],ae=te[1],re=Object(s.d)();function ce(e){return e.toString().split("").length}function ie(e){if(null!=e){if(ce(e)<7)return Promise.reject(new Error("El tel\xe9fono debe tener al menos 7 d\xedgitos"));if(ce(e)>=15)return/^(?!\s)/.test(e)?Promise.reject(new Error("El tel\xe9fono debe tener max\xedmo 15 d\xedgitos")):Promise.reject(new Error("Tel\xe9fono no v\xe1lido"))}return Promise.resolve()}Object(a.useEffect)((function(){re(wc((function(e){var t=[];e._payload.project_types.forEach((function(e){t.push({name:e.name,id:e.id})})),x(t)})))}),[]),Object(a.useEffect)((function(){if(i&&(null===i||void 0===i?void 0:i._payload)&&o){var e,t,n,a,r=null===i||void 0===i?void 0:i._payload;$(se()(null===r||void 0===r?void 0:r.release_date)),M(parseFloat(null!==(e=null===r||void 0===r?void 0:r.total_units)&&void 0!==e?e:0)),D(parseFloat(null!==(t=null===r||void 0===r?void 0:r.sold_units)&&void 0!==t?t:0)),E((null!==(n=null===r||void 0===r?void 0:r.sold_units)&&void 0!==n?n:0)/(null!==(a=null===r||void 0===r?void 0:r.total_units)&&void 0!==a?a:0)*100),w(o.find((function(e){return e.id===parseInt(null===r||void 0===r?void 0:r.project_state_id)})).name),Q(se()(null===r||void 0===r?void 0:r.delivery_date)),ae(se()(null===r||void 0===r?void 0:r.building_date)),oe(se()(null===r||void 0===r?void 0:r.release_date),null===r||void 0===r?void 0:r.sold_units),le(se()(null===r||void 0===r?void 0:r.delivery_date),se()(null===r||void 0===r?void 0:r.building_date))}}),[i,o]);var oe=function(e,t){var n,a=new Date;if("undefined"!=typeof e&&"undefined"!=typeof t){var r,c=new Date(e._d);if(0==ii(c,a))n=parseFloat(t),B(n);else n=null!==(r=parseFloat(t)/ii(c,a))&&void 0!==r?r:0,B(n)}return n},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="",a="",r=new Date;n=new Date(t),a=new Date(e),o&&(r<n&&w(o.find((function(e){return 1==e.id})).name),r>a&&w(o.find((function(e){return 3==e.id})).name),r>=n&&r<=a&&w(o.find((function(e){return 2==e.id})).name))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(J.a,{orientation:"left",children:"Datos del proyecto"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{label:"Nombre",name:"name",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(_.a,{placeholder:"Nombre"})}),Object(h.jsx)(g.a.Item,{label:"Comercializadora",name:"marketer",style:r,children:Object(h.jsx)(_.a,{placeholder:"Comercializadora"})}),Object(h.jsx)(g.a.Item,{label:"Tipo de proyecto",name:"projectType",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:r,children:Object(h.jsxs)(dt.a,{defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),O.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.Item,{valuePropName:X,name:"releaseDate",label:"Fecha de lanzamiento",children:Object(h.jsx)(jt.a,{value:X,onChange:function(e){oe(e,k),$(e)},style:r,placeholder:"Fecha de lanzamiento"})}),Object(h.jsx)(g.a.Item,{valuePropName:Z,name:"deliveryDate",label:"Fecha de entrega",children:Object(h.jsx)(jt.a,{value:Z,style:r,placeholder:"Fecha de Entrega",onChange:function(e){le(e,ne),Q(e)}})}),Object(h.jsx)(g.a.Item,{valuePropName:q,name:"totalUnits",label:"Total unidades",children:Object(h.jsx)(ut.a,{value:q,style:r,placeholder:"Total unidades",onChange:function(e){E(k/e*100),M(e)}})}),Object(h.jsx)(g.a.Item,{valuePropName:I.toFixed(2),name:"percentageUnitsSold",label:"Unidades vendidas (%)",children:Object(h.jsx)(_.a,{value:I.toFixed(2),disabled:!0,style:r,placeholder:parseFloat(c()).toFixed(2)})}),Object(h.jsx)(g.a.Item,{name:"launchPriceM2",label:"Precio lanzamiento del m2",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({style:r},R.rc),{},{placeholder:"Precio lanzamiento del m2"}))}),Object(h.jsx)(g.a.Item,{label:"Nombre de la fuente",name:"sourceName",children:Object(h.jsx)(_.a,{placeholder:"Nombre de la fuente",style:r})}),Object(h.jsx)(g.a.Item,{name:"observations",label:"Observaciones",children:Object(h.jsx)(_.a.TextArea,{placeholder:"Observaciones",Rows:5})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{label:"Constructor",name:"builder",style:{width:"90%"},rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},defaultValue:"",loading:Array.isArray(d),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),!Array.isArray(d)&&d._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})}))]})}),Object(h.jsx)(g.a.Item,{style:{marginLeft:3},label:" ",children:Object(h.jsx)(ci,{})})]}),Object(h.jsx)(g.a.Item,{label:"Direcci\xf3n",name:"address",children:Object(h.jsx)(_.a,{placeholder:"Direcci\xf3n",style:r})}),Object(h.jsx)(g.a.Item,{label:"Rango de precios",name:"priceRange",style:r,children:Object(h.jsxs)(dt.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},loading:Array.isArray(l),defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),!Array.isArray(l)&&l._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})}))]})}),Object(h.jsx)(g.a.Item,{valuePropName:ne,name:"buildingDate",label:"Fecha de construcci\xf3n",children:Object(h.jsx)(jt.a,{value:ne,style:r,placeholder:"Fecha de construcci\xf3n",onChange:function(e){le(Z,e),ae(e)}})}),Object(h.jsx)(g.a.Item,{valuePropName:S,label:"Estado del proyecto",name:"projectStatus",children:Object(h.jsx)(_.a,{placeholder:"Estado del proyecto",defaultValue:S,disabled:!0,value:S,style:r})}),Object(h.jsx)(g.a.Item,{name:"unitsSoldToDate",label:"Unidades vendidas a la fecha",valuePropName:k,children:Object(h.jsx)(ut.a,{value:k,placeholder:"Unidades vendidas a la fecha",onChange:function(e){D(e),E(e/q*100),oe(X,e)},style:r})}),Object(h.jsx)(g.a.Item,{valuePropName:null!==(t=null===G||void 0===G?void 0:G.toFixed(2))&&void 0!==t?t:0,name:"salesSpeedMonth",label:"Velocidad de ventas mes",children:Object(h.jsx)(_.a,{value:null!==(n=null===G||void 0===G?void 0:G.toFixed(2))&&void 0!==n?n:0,disabled:!0,style:r,placeholder:"Velocidad de ventas mes"})}),Object(h.jsx)(g.a.Item,{label:"Precio actual del m2",name:"currentPriceOfM2",children:Object(h.jsx)(ut.a,Object(j.a)({style:r,placeholder:"Precio actual del m2"},R.rc))}),Object(h.jsx)(g.a.Item,{name:"sourcePhone",label:"Tel\xe9fono de la fuente",rules:[{required:!0,message:"El Tel\xe9fono es requerido."},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ie(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(_.a,{addonBefore:si,style:{width:"100%"},placeholder:"Tel\xe9fono de la fuente"})}),Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Activo",name:"state",children:Object(h.jsx)(je.a,{})})]})]})]})},di=function(e){var t=e.itemStyle;return Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(J.a,{orientation:"left",children:"Descripci\xf3n del proyecto"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:[Object(h.jsx)(g.a.Item,{name:"numberTowers",label:"N\xfamero de torres",children:Object(h.jsx)(ut.a,{style:t,placeholder:"N\xfamero de torres"})}),Object(h.jsx)(g.a.Item,{label:"Planta el\xe9ctrica",name:"powerPlant",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:t,children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})}),Object(h.jsx)(g.a.Item,{label:"Cuarto \xfatil",name:"usefulRoom",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:t,children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:[Object(h.jsx)(g.a.Item,{name:"numberFloors",label:"N\xfamero de pisos",children:Object(h.jsx)(ut.a,{value:"0",defaultValue:"0",style:t,placeholder:"N\xfamero de pisos"})}),Object(h.jsx)(g.a.Item,{label:"Shut basura",name:"trashShut",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:t,children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})}),Object(h.jsx)(g.a.Item,{label:"Piscina",name:"pool",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:t,children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:[Object(h.jsx)(g.a.Item,{label:"\xc1rea de gimnasio",name:"gymArea",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:t,children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})}),Object(h.jsx)(g.a.Item,{label:"Parque infantil",name:"playground",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:t,children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})}),Object(h.jsx)(g.a.Item,{label:"Sal\xf3n social",name:"socialRoom",style:t,children:Object(h.jsxs)(dt.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})]})]})]})},ui=function(e){var t=e.itemStyle;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(J.a,{orientation:"left",children:"Especificaciones por \xe1rea"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{name:"numberBedrooms",label:"N\xfamero de habitaciones",children:Object(h.jsx)(ut.a,{placeholder:"N\xfamero de habitaciones",style:t})}),Object(h.jsx)(g.a.Item,{name:"numberBalconies",label:"N\xfamero de balcones",children:Object(h.jsx)(ut.a,{placeholder:"N\xfamero de balcones",style:t})}),Object(h.jsx)(g.a.Item,{label:"Cocina integral",name:"integralKitchen",children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{name:"numberBathrooms",label:"N\xfamero de ba\xf1os",children:Object(h.jsx)(ut.a,{style:t,placeholder:"N\xfamero de ba\xf1os"})}),Object(h.jsx)(g.a.Item,{label:"Alcoba de servicio",name:"serviceBedroom",children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})}),Object(h.jsx)(g.a.Item,{label:"Estudio",name:"study",children:Object(h.jsxs)(dt.a,{defaultValue:"2",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})]})]})]})},ji=function(){var e=g.a.useForm(),t=Object(f.a)(e,1)[0],n="YYYY/MM/DD",r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(s.d)();Object(a.useEffect)((function(){l(ei()),l(br())}),[]);var u=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validateFields();case 2:a=e.sent,r=new yt,c={name:a.name,address:a.address||null,release_date:"undefined"===typeof a.releaseDate?null:a.releaseDate.format(n),building_date:"undefined"===typeof a.buildingDate?null:a.buildingDate.format(n),delivery_date:"undefined"===typeof a.deliveryDate?null:a.deliveryDate.format(n),total_units:a.totalUnits||null,sold_units:a.unitsSoldToDate||null,current_meter_price:a.currentPriceOfM2||null,release_meter_price:a.launchPriceM2||null,information_source_name:a.sourceName||null,information_source_phone:a.sourcePhone||null,observations:a.observations||null,towers_number:a.numberTowers||null,floors_number:a.numberFloors||null,has_power_plant:a.powerPlant||null,has_shut_garbage:a.trashShut||null,has_useful_room:a.usefulRoom||null,has_pool:a.pool||null,has_gym_area:a.gymArea||null,has_social_room:a.socialRoom||null,has_playground:a.playground||null,rooms_number:a.numberBedrooms||null,bathrooms_number:a.numberBathrooms||null,balconies_number:a.numberBalconies||null,has_service_bedroom:a.serviceBedroom||null,has_integral_kitchen:a.integralKitchen||null,has_study:a.study||null,state:a.state||null,construction_companies_id:a.builder||null,project_state_id:a.state||null,project_type_id:a.projectType||null,marketer_company:a.marketer||null,price_range_id:a.priceRange||null,creator_user_id:r.getIdFromCurrentUser()},l((i=c,s=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error."):(Object(P.f)("Control de competencia registrado con \xe9xito."),l(Yc()),t.resetFields(),o(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/competingProject"),data:i,success:function(e){return Hc(e)},postProcessSuccess:s}}));case 6:case"end":return e.stop()}var i,s}),e)})));return function(){return e.apply(this,arguments)}}(),j={width:"100%"};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Te.a,{className:"site-page-header",onBack:function(){return window.history.back()},title:"Nuevo control de competencia",style:{marginLeft:"-25px"},children:Object(h.jsx)(w.a,{style:{borderColor:"black"},children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:24},children:Object(h.jsx)(N.a,{className:"gutter-row",span:24,children:i?Object(h.jsx)(d.Redirect,{to:"/projects/control-powers"}):Object(h.jsx)(g.a,{form:t,layout:"vertical",onFinish:u,style:{marginLeft:"27px",marginRight:"27px"},initialValues:{state:!0},children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(li,{itemStyle:j,calculatePercentageUnitsSold:function(){return 0}}),Object(h.jsx)(di,{itemStyle:j}),Object(h.jsx)(ui,{itemStyle:j}),Object(h.jsx)(J.a,{}),Object(h.jsx)(g.a.Item,{style:{marginTop:20},children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Enviar"})})]})})})})})})})},bi=function(){return Object(h.jsx)(ji,{})},mi=function(e){var t=e.id,n=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"}),a=Object(s.d)();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:n,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar el cliente ?",onConfirm:function(){var e,n,r;a((e=t,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):Object(P.f)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/customer/").concat(e),success:function(){return st(e)},postProcessSuccess:n,postProcessError:r}}))},onCancel:function(){Object(P.g)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{type:"primary",size:"small",danger:!0,icon:Object(h.jsx)(Xt.a,{})})})})})},pi=function(e){var t=e.disable,n=e.styles,a=[{min:7,max:11,required:!0},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=4;break}return e.abrupt("return",Promise.reject(new Error(" ")));case 4:if(a=/^(?!\s)/,""===n){e.next=12;break}if(!(n.length<6)){e.next=8;break}return e.abrupt("return",Promise.reject(new Error("La identificaci\xf3n debe tener al menos 7 d\xedgitos.")));case 8:if(a.test(n)){e.next=10;break}return e.abrupt("return",Promise.reject(new Error("Identificiaci\xf3n no v\xe1lida.")));case 10:e.next=13;break;case 12:return e.abrupt("return",Promise.reject(new Error("Identificiaci\xf3n vac\xeda.")));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}];return Object(h.jsx)(h.Fragment,{children:t?Object(h.jsx)(g.a.Item,{name:"identification",label:"N\xfamero de identificaci\xf3n",children:Object(h.jsx)(_.a,{disabled:t,defaultValue:"Identificacion",placeholder:"Identificacion",style:n.ItemFormStyle})}):Object(h.jsx)(g.a.Item,{name:"identification",label:"N\xfamero de identificaci\xf3n",rules:[].concat(a,[{min:7,max:15,message:"Debe tener al menos 7 n\xfameros y no m\xe1s de 15."}]),children:Object(h.jsx)(_.a,{disabled:t,placeholder:"Identificacion",style:n.ItemFormStyle})})})},fi={ItemFormStyle:{width:"100%"},button:{width:"100%"}},Oi=function(e){var t,n,r=e.detectAge,c=e.disable,i=Object(s.d)();Object(a.useEffect)((function(){i(Le()),i(Be())}),[]);var o=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.occupation})),l=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.registerType})),d=function(e){if(!/^[a-zA-Z\u00C0-\u017F\s]+$/.test(e))return Promise.reject(new Error("El nombre no puede contener n\xfameros."))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"name",label:"Nombres",rules:[{min:3,max:100,message:"Debe tener al menos 3 letras."},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(_.a,{placeholder:"Nombres"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"lastName",label:"Apellidos",rules:[{min:3,max:100,message:"Debe tener al menos 3 letras."},{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(_.a,{placeholder:"Apellidos"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"identificationType",label:"Tipo de identificaci\xf3n",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,disabled:c,optionFilterProp:"children",style:fi.ItemFormStyle,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:1,children:"Cedula de Ciudadania"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Cedula de Extranjeria"}),Object(h.jsx)(dt.a.Option,{value:3,children:"Nit"}),Object(h.jsx)(dt.a.Option,{value:4,children:"Tarjeta de Identidad"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(pi,{disable:c,styles:fi})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"El campo es requerido."},{type:"email",message:"No es un email v\xe1lido."}],children:Object(h.jsx)(_.a,{placeholder:"Email"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"gender",label:"G\xe9nero",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:"M",children:"Masculino"}),Object(h.jsx)(dt.a.Option,{value:"F",children:"Femenino"})]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"phone",label:"Tel\xe9fono",rules:[{required:!0,message:"El Tel\xe9fono es requerido."},{type:"number",min:999999,max:999999999999999,message:"Debe tener al menos 7 n\xfameros y no m\xe1s de 15."}],children:Object(h.jsx)(ut.a,{style:{width:"100%"},placeholder:"Tel\xe9fono"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"direction",label:"Direcci\xf3n",rules:[{min:5,message:"Debe tener al menos 5 caracteres."}],children:Object(h.jsx)(_.a,{placeholder:"Direcci\xf3n"})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{label:"Ocupaci\xf3n",name:"occupation",style:{width:"70%"},children:Object(h.jsxs)(dt.a,{style:fi.ItemFormStyle,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},loading:Array.isArray(o),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(o)&&(null===(t=o._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})}),Object(h.jsx)(g.a.Item,{name:"add",label:"  ",children:Object(h.jsx)(Ge,{})})]})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{label:"Tipo de registro",name:"typeRegister",style:{width:"70%"},children:Object(h.jsxs)(dt.a,{style:fi.ItemFormStyle,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},loading:Array.isArray(l),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(l)&&(null===(n=l._payload)||void 0===n?void 0:n.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})}),Object(h.jsx)(g.a.Item,{name:"add",label:"  ",children:Object(h.jsx)(Xe,{})})]})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"dateBirth",label:"Fecha de Nacimiento",rules:[{required:!1}],children:Object(h.jsx)(jt.a,{onChange:r,style:fi.ItemFormStyle,placeholder:"Ingrese la fecha"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"age",label:"Edad",children:Object(h.jsx)(_.a,{style:fi.ItemFormStyle,placeholder:"Edad",disabled:!0})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"sons",label:"Numero de Hijos",rules:[{type:"number"}],children:Object(h.jsx)(ut.a,{style:fi.ItemFormStyle,placeholder:"Cantidad de Hijos"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Activo",name:"state",children:Object(h.jsx)(je.a,{})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:64,xl:6,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",label:"Habeas Data",name:"habeasData",children:Object(h.jsx)(je.a,{})})})]})]})},hi=function(){return{DTOSet:function(e){return{name:e.name,lastName:e.lastName,gender:e.gender,phone_number:e.phone,address:e.direction||null,birthday:void 0!==e.dateBirth?e.dateBirth.format("YYYY-MM-DD"):null,identification:e.identification||null,email:e.email,identification_type:void 0===e.identificationType||""===e.identificationType?null:e.identificationType,occupation:void 0===e.occupation||""===e.occupation?null:e.occupation,register_type:void 0===e.typeRegister||""===e.typeRegister?null:e.typeRegister,children_number:e.sons||null,has_habeas_data:e.habeasData||!1,state:e.state,assesor_id:JSON.parse(localStorage.getItem("USER_INFO")).id}},FillInTheForm:function(e){var t=e.fullName.split("_");return{name:t[0],lastName:t[1],email:e.email,identification:e.identification,phone:e.phoneNumber,occupation:isNaN(parseInt(e.occupation))?"":parseInt(e.occupation),typeRegister:isNaN(parseInt(e.typeRegister))?"":parseInt(e.typeRegister),age:isNaN(parseInt(e.age))||null==e.birthday?"":parseInt(e.age),sons:parseInt(e.sons),direction:e.address,identificationType:isNaN(parseInt(e.identificationType))?"":e.identificationType,gender:e.gender,dateBirth:se()(e.birthday).isValid()?se()(e.birthday):void 0,habeasData:e.habeasData,state:e.state}}}},xi=function(e){var t=e.customer,n=g.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(s.d)(),u=hi(),j=u.DTOSet,b=u.FillInTheForm,O=function(){l(!1),r.resetFields()},x=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.validateFields();case 2:n=e.sent,a=j(n),d((c=t.id,i=a,o=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,d($e()),Object(P.f)(n.message),O();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/customer/").concat(c),data:i,success:function(e,t){return it(e,t)},postProcessSuccess:o,postProcessError:s}}));case 5:case"end":return e.stop()}var c,i,o,s}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){r.setFieldsValue(b(t)),l(!0)},type:"primary",size:"small",icon:Object(h.jsx)(le.a,{}),style:{backgroundColor:"#ffa247",borderColor:"#ffa247"}}),Object(h.jsx)(lt.a,{title:"Editar Clientes",width:"800",onClose:O,visible:o,bodyStyle:{paddingBottom:80},children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:r,onFinish:x,children:[Object(h.jsx)(Oi,{disable:null!=t.identification&&null,detectAge:function(e){var t=0;if(e){var n=new Date,a=new Date(e);t=n.getFullYear()-a.getFullYear();var c=n.getMonth()-a.getMonth();(c<0||0===c&&n.getDate()<a.getDate())&&t--,r.setFieldsValue({age:t})}else r.setFieldsValue({age:0})}}),Object(h.jsxs)("div",{style:{textAlign:"right"},children:[Object(h.jsx)(S.a,{onClick:O,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Actualizar Cliente"})]})]})})]})},vi=n(626),yi=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(s.d)(),l=hi().DTOSet,d=function(){r(!1),i.resetFields()},u=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validateFields();case 2:t=e.sent,n=l(t),o(et(n,function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if((n=e.sent).error){for(a in n.message)"validation.unique"===n.message[a][0]&&Object(P.g)("Los datos del campo ".concat(a," ya se encuentran registrados."));Object(P.c)(n.message)}else o($e()),Object(P.f)(n.message),d();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Registrar Cliente"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:j,children:Object(h.jsx)(S.a,{onClick:function(){r(!0)},type:"primary",size:"small",icon:Object(h.jsx)(vi.a,{})})}),Object(h.jsx)(lt.a,{title:"Nuevo Cliente",visible:n,width:"800",onClose:d,bodyStyle:{paddingBottom:80},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",onFinish:u,form:i,style:{height:"100%",width:"100%"},children:[Object(h.jsx)(Oi,{disable:!1,detectAge:function(){var e=i.getFieldValue("dateBirth"),t=0,n=new Date,a=new Date(e);t=n.getFullYear()-a.getFullYear();var r=n.getMonth()-a.getMonth();(r<0||0===r&&n.getDate()<a.getDate())&&t--,i.setFieldsValue({age:t})}}),Object(h.jsxs)("div",{style:{textAlign:"right"},children:[Object(h.jsx)(S.a,{onClick:d,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Registrar Cliente"})]})]})})]})},gi=Object(a.createContext)(),_i=function(e){var t=e.children,n=e.request;return Object(h.jsx)(gi.Provider,{value:{request:n},children:t})},Si=function(e){var t=e.id,n=e.advisors,r=e.adviserName,c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Reasignar asesor"}),i=Object(s.d)(),o=g.a.useForm(),l=Object(f.a)(o,1)[0],d=Object(a.useState)(),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(a.useState)(0),x=Object(f.a)(O,2),v=x[0],y=x[1],w=Object(a.useState)(""),C=Object(f.a)(w,2),I=C[0],E=C[1],F=function(){b(!1),l.resetFields()},A=r?"Fecha de Reasignaci\xf3n":"Fecha de Expiracion";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(S.a,{type:"primary",size:"small",onClick:function(){b(!0)},icon:Object(h.jsx)(vi.a,{})})}),Object(h.jsx)(ue.a,{title:"Reasignar asesores",visible:j,footer:!1,onCancel:function(){return F()},children:Object(h.jsxs)(g.a,{name:"nest-messages",layout:"vertical",form:l,style:{height:"100%",width:"100%"},validateMessages:{required:"${label} es requerido"},onFinish:function(){i(nt(t,{assessor:v,reassignment_date:I},function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.a)(n.message):(i($e()),Object(P.f)(n.message),F());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(h.jsx)(g.a.Item,{label:"Anterior Asesor:",name:"currentAdviser",children:Object(h.jsx)(_.a,{defaultValue:r,disabled:!0})}),Object(h.jsx)(g.a.Item,{name:"newAdviser",label:"Asesor",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{onChange:y,placeholder:"Elija un asesor",style:{width:"100%"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:0,children:"Seleccione..."}),n.filter((function(e){return 0!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:parseInt(e.id),children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})}),Object(h.jsx)(g.a.Item,{name:"date",label:A,rules:[{required:!0},function(){return{validator:function(e,t){return function(e){var t=new Date(e),n=new Date;if(null!=e)return t>n?Promise.resolve():Promise.reject(new Error("La fecha debe ser mayor a la actual"))}(t)}}}],children:Object(h.jsx)(jt.a,{style:{width:"100%"},placeholder:"Ingrese la fecha de expiracion",onChange:function(e){return function(e){null!=e&&E(e.format(Gt))}(e)},format:Gt,value:I})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Guardar"})})]})})]})},wi=n(123),Ci=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer._payload})),l=Object(a.useState)(!0),d=Object(f.a)(l,2),u=d[0],b=d[1];Object(a.useEffect)((function(){e($e()),e(Ln(function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):(a=[],n._payload.forEach((function(e){a.push({id:e.id,name:e.name,state:e.state})})),c(a)),b(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var O=[],v=[],y=[],g=[],_=[];var w=function(t){var n,a,r;e((n=t,a=function(){var t=Object(p.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:(a=t.sent).error?Object(P.a)(a.message):Object(P.f)(a.message),e($e());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/customer/state/").concat(n),success:function(e){return ct(e)},postProcessSuccess:a,postProcessError:r}}))},C=[{title:"#",width:9,dataIndex:"index",key:"index",sorter:function(e,t){return e.index-t.index}},Object(j.a)(Object(j.a)({title:"Nombre",width:25,dataIndex:"name",key:"name"},Object(ce.b)("name")),ce.c),{title:"Identificaci\xf3n",width:15,dataIndex:"identification",key:"identification"},{title:"Habeas Data",width:14,dataIndex:"data",key:"data",align:"center",render:function(e,t){return t.habeasData?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})}},{title:"Tel\xe9fono",dataIndex:"phoneNumber",width:15,key:"phoneNumber"},{title:"Correo",dataIndex:"email",width:30,key:"email"},{title:"Asesor",dataIndex:"adviserName",width:20,key:"adviserName",render:function(e){return null!=e?e:"Asesor no asignado"}},{title:"Activo",width:11,dataIndex:"state",fixed:"right",key:"state",align:"center",render:function(e,t){return n=t.state,a=t.id,n?Object(h.jsx)(S.a,{size:"small",type:"text",onClick:function(){return w(a)},icon:Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}})}):Object(h.jsx)(S.a,{size:"small",type:"text",onClick:function(){return w(a)},icon:Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})});var n,a}},{title:"Acciones",dataIndex:"actions",width:21,fixed:"right",render:function(e,t){return I(t)}}],I=function(e){var t=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[" ",e.name,Object(h.jsx)("hr",{}),"Creado: ",e.createAt,Object(h.jsx)("br",{})," Modificado: ",e.updateAt," "]});return Object(h.jsxs)(_i,{request:E(e),children:[Fe(R.Sf)?Object(h.jsx)(o.b,{to:"/customer/customer-tracking/".concat(e.id),children:Object(h.jsx)(S.a,{size:"small",type:"ghost",icon:Object(h.jsx)(wi.a,{})})}):null,"  ",Fe(R.Eg)?Object(h.jsx)(xi,{customer:e}):null,"  ",Fe(R.ud)?Object(h.jsx)(Si,{adviserName:e.adviserName,id:e.id,advisors:r}):null,"  ",Fe(R.Ob)?Object(h.jsx)(mi,{id:e.id}):null,"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{size:"small",type:"primary",icon:Object(h.jsx)(Ht.a,{})})})]})},E=function(e){for(var t=0;t<O.length;t++)if(O[t].id===e.id)return{selectOccupationOptions:g,selectRegisterTypesOptions:_,selectAsessorOptions:y,customer:O[t]}};return i&&i.forEach((function(e,t){!function(e,t){v.push(function(e,t){return{id:e.id,index:t,address:e.address,identification:e.identification,identificationType:parseInt(e.identification_type),name:e.name.replace("_"," "),fullName:e.name,phoneNumber:e.phone_number,email:e.email,habeasData:e.has_habeas_data,state:e.state,adviserName:e.adviserName,occupation:e.occupation_id,age:Yt(e.birthday),birthday:e.birthday,sons:e.children_number?parseInt(e.children_number):0,typeRegister:e.register_type_id,gender:e.gender,updateAt:Jt(e.updated_at),createAt:Jt(e.created_at)}}(e,t))}(e,t+1)})),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ht,{title:"Lista de Clientes",drawer:Object(h.jsx)(_i,{children:Object(h.jsx)(yi,{})}),table:[Object(h.jsx)(h.Fragment,{children:u?Object(h.jsx)(x,{}):Object(h.jsx)(Q.a,{columns:C,dataSource:v,scroll:{x:1800,y:300},bordered:!0})})]})})},Pi=function(){return Object(h.jsx)(Ci,{})};function Ii(e,t,n,a){var r=new Date(e),c={mes:r.getMonth()+1,year:r.getFullYear(),mesConstruccion:0,mesPlano:0,mesTotal:0},i=new Date(t),o=new Date(n),s=12*r.getFullYear()+r.getMonth()-(12*i.getFullYear()+i.getMonth()),l=12*o.getFullYear()+o.getMonth()-(12*r.getFullYear()+r.getMonth());return s>0?c.mesConstruccion=s:c.mesPlano=Math.abs(s)+1,c.mesTotal=l>a?a:l,c}var Ei=function(e){var t;if(void 0!==(null===(t=e[0])||void 0===t?void 0:t.value))for(var n=0;n<e.length;n++)null==e[n].value&&(e[n].value=0,e[n].porcentaje=0);return e},Fi=function(e,t,n,a,r){var c=JSON.parse(JSON.stringify(t));void 0!==n&&c.length>0&&(c[c.length-1].value=n);var i=null===c||void 0===c?void 0:c.filter((function(e){return"Entrega"!==e.month})),o=null===i||void 0===i?void 0:i.filter((function(e){return"Presente"===e.tipo})),s=null===i||void 0===i?void 0:i.filter((function(e){return"Construccion"===e.tipo})),l=Math.pow(1+r,s.length),d=Math.pow(1+a,o.length),u=Ri(s,r),j=Ri(o,a);return Ti(e,d,l,u,j)},Ai=function(e,t,n,a){var r=JSON.parse(JSON.stringify(e));void 0!=t&&(null===r||void 0===r?void 0:r.length)>0&&(r[r.length-1].value=t);var c=null===r||void 0===r?void 0:r.filter((function(e){return"Presente"===e.tipo})),i=null===r||void 0===r?void 0:r.filter((function(e){return"Construccion"===e.tipo})),o=Ri(i,a),s=Ri(c,n);return ki(s,o,n,c.length)},ki=function(e,t,n,a){return e+t/Math.pow(1+n,a)},Ti=function(e,t,n,a,r){return n*(e*t-r*t-a)},Ni=function(e,t){return e-t},Di=function(e){var t,n=0;if(void 0!==(null===(t=e[0])||void 0===t?void 0:t.value))for(var a=0;a<e.length;a++)n+=parseFloat(e[a].value);return n},Ri=function(e,t){var n,a=0;if(void 0!==(null===(n=e[0])||void 0===n?void 0:n.value))for(var r=0;r<e.length;r++)a+=parseFloat(e[r].value/Math.pow(1+t,r));return a},Li=function(){var e={0:"Enero",1:"Febrero",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre",10:"Noviembre",11:"Diciembre"},t={0:"Ene-",1:"Feb-",2:"Mar-",3:"Abr-",4:"May-",5:"Jun-",6:"Jul-",7:"Ago-",8:"Sep-",9:"Oct-",10:"Nov-",11:"Dic-"},n=function(t){var n=new Date(t),a=n.getMonth(),r=n.getDay(),c=n.getFullYear();return r+" de "+e[a]+" de "+c},r=function(e,t){return e.filter((function(e){return e!==t}))},c=Object(a.useState)({discount:[],coupons:[],modified_values:[]}),i=Object(f.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)({fechaQuote:se()(),comoEntero:0,nivelInteres:0}),d=Object(f.a)(l,2),u=d[0],b=d[1],m=Object(a.useState)({name:"",area:0,label:"",estimatedDeliveryDate:"",bedrooms:0,toilets:0,parking:""}),p=Object(f.a)(m,2),O=p[0],h=p[1],x=Object(a.useState)([{key:0,month:"",value:0,porcentaje:0,tipo:""}]),v=Object(f.a)(x,2),y=(v[0],v[1]),g=Object(a.useState)({presentValueGiven:0,valueOfTheUnitProposed:0,financialDiscountOrIncrease:0,discountFinishes:0}),_=Object(f.a)(g,2),S=_[0],w=(_[1],Object(a.useState)({presentValueGivenByTheProject:0,valueOfTheUnitProposedByTheProject:0})),C=Object(f.a)(w,2),P=(C[0],C[1],Object(a.useState)({valueKit:0,unitValue:0,initialFeeNotFundedPercentage:0,initialFeeFinancedPercentage:0,flatTax:0,constructionTax:0,finishesIncluded:!1})),I=Object(f.a)(P,2),E=I[0],F=I[1],A=Object(a.useState)({valueParking:0,valueKit:0,valueOthers:0,heightPremium:0,sightCousin:0}),k=Object(f.a)(A,2),T=k[0],N=k[1],D=Object(a.useState)({valueM:0,tradePolicies:!1,Coupon:!1,initialValue:0,discountFinishes:0,discountCoupons:0,discountCouponsPrevious:0,commercialDiscounts:0,previousCommercialDiscount:0,unitValue:0,includesFinishes:!1}),R=Object(f.a)(D,2),L=R[0],V=R[1],q=Object(a.useState)({initialFeeNotFunded:0,initialFeeNotFundedPercentage:0,initialFeeFinanced:0,initialFeeFinancedPercentage:0,formOfPayments:[{key:0,month:"",value:0,porcentaje:0,tipo:""}],unitValue:0,presentValue:0,commercialDiscounts:0,discountCoupons:0,discountFinishes:0,finishesIncluded:!1}),M=Object(f.a)(q,2),U=M[0],z=M[1],G=Object(a.useState)({initialFeeNotFunded:0,initialFeeNotFundedPercentage:0,initialFeeFinanced:0,initialFeeFinancedPercentage:0,formOfPayments:[{key:0,month:"",value:0,porcentaje:0,tipo:""}],unitValue:0,presentValue:0,commercialDiscounts:0,discountCoupons:0,discountFinishes:0,finishesIncluded:!1,financialDiscountOrIncrease:0}),B=Object(f.a)(G,2),Y=B[0],J=B[1],H=Object(a.useState)({mes:0,year:0,mesConstruccion:0,mesPlano:0,mesTotal:0}),Z=Object(f.a)(H,2),Q=Z[0],K=Z[1],W=Object(a.useState)({flatTax:0,constructionTax:0}),X=Object(f.a)(W,2),$=X[0],ee=X[1];Object(a.useEffect)((function(){te()}),[E]);var te=function(){var e=Object(j.a)({},Q),t=E.initialFeeNotFundedPercentage*E.unitValue,n=E.initialFeeFinancedPercentage*E.unitValue,a=ie(t,Q.mesTotal,n/Q.mesTotal,E.unitValue,n+t,e),r=Ai(a,void 0,E.flatTax,E.constructionTax);z(Object(j.a)(Object(j.a)({},U),{},{unitValue:E.unitValue,initialFeeNotFunded:t,initialFeeFinanced:n,formOfPayments:a,presentValue:r,finishesIncluded:E.finishesIncluded})),J(Object(j.a)(Object(j.a)({},Y),{},{unitValue:E.unitValue,formOfPayments:JSON.parse(JSON.stringify(a)),presentValue:parseFloat(JSON.parse(JSON.stringify(r))),initialFeeNotFunded:parseFloat(JSON.parse(JSON.stringify(t))),initialFeeFinanced:parseFloat(JSON.parse(JSON.stringify(n))),initialFeeNotFundedPercentage:100*E.initialFeeNotFundedPercentage,financialDiscountOrIncrease:E.finishesIncluded}))},ne=function(e){switch(e){case"0":return"";case"1":return" Sencillo";default:return" Doble"}},ae=function(e,t,n){return 0!==parseInt(n)?"1"===e?parseFloat(t.simple_parking_value):parseFloat(t.double_parking_value):0},re=function(e,t,n){var a=e.map((function(e){return t.forEach((function(t){e.month===t.month&&(e.value=t.value,e.porcentaje=oe(e.value,n))})),e}));return a[a.length-1].value=ce(a,n),a[a.length-1].porcentaje=oe(a[a.length-1].value,n),a},ce=function(e,t){Ei(e);var n=0;return e.forEach((function(e){"Entrega"!==(null===e||void 0===e?void 0:e.month)&&(n+=parseFloat(null===e||void 0===e?void 0:e.value))})),t-n},ie=function(e,n,a,r,c,i){for(var o=oe(a,r),s=[{key:0,month:"C.I. No Financiada",value:parseFloat(e),porcentaje:parseFloat(oe(e,r)),tipo:i.mesPlano>0?"Presente":"Construccion"}],l=1;l<=parseInt(n);l++)i.mes>11&&(i.mes=0,i.year++),s=s.concat({key:l,month:t[i.mes]+i.year,value:parseFloat(parseFloat(a).toFixed(2)),porcentaje:parseFloat(o),tipo:l>i.mesPlano?"Construccion":"Presente"}),i.mes++;return s=s.concat({key:parseInt(n)+1,month:"Entrega",value:parseFloat(r)-parseFloat(c),porcentaje:parseFloat(oe(parseFloat(r)-parseFloat(c),parseFloat(r))),tipo:s[s.length-1].tipo}),y(JSON.parse(JSON.stringify(s))),s},oe=function(e,t){var n=100*parseFloat(e)/parseFloat(t);return 0===t||0===e||0===t?0:n};return{basicInformation:u,project:O,included:T,propertyData:L,paymentMethodProposedByTheProject:U,paymentMethodProposedByTheClient:Y,response:o,finalValueProposedByTheClient:S,selectParking:ne,basicInformationSet:function(e){ee({flatTax:parseFloat(e.project.sale_parameter.interest_on_plans_percentage)/100,constructionTax:parseFloat(e.project.sale_parameter.interest_in_construction_percentage)/100}),F({valueKit:parseFloat(e.unit.unit_type.finish_kit_value),unitValue:parseFloat(e.value_total_unit),initialFeeNotFundedPercentage:parseInt(e.project.payment_relationship_setting.initial_fee_promise_signature_trust_percentage)/100,initialFeeFinancedPercentage:parseInt(e.project.payment_relationship_setting.initial_fee_finance_in_construction_percentage)/100,flatTax:parseFloat(e.project.sale_parameter.interest_on_plans_percentage)/100,constructionTax:parseFloat(e.project.sale_parameter.interest_in_construction_percentage)/100,finishesIncluded:"1"===e.finishes_included});var t=Ii(e.created_at,e.project.start_build_date,e.project.estimated_delivery_date,e.project.payment_relationship_setting.maximum_number_months_finance_initial_fee);b({fechaQuote:se()(e.created_at),comoEntero:parseInt(e.channel_id),nivelInteres:parseInt(e.interest_level)}),K(t)},projectSet:function(e){h({name:e.project.name,area:e.unit.unit_type.area,label:e.unit.label,estimatedDeliveryDate:n(e.project.estimated_delivery_date),bedrooms:parseInt(e.unit.unit_type.number_rooms),toilets:parseInt(e.unit.unit_type.bathroom_number),parking:ne(e.unit.parking_number)})},includedSet:function(e){N({valueParking:ae(e.unit.parking,e.project.sale_parameter,e.unit.parking_number),valueKit:parseFloat(e.unit.unit_type.finish_kit_value),valueOthers:parseFloat(e.unit.unit_type.value_other_additional),heightPremium:parseFloat(e.unit.bonus_view),sightCousin:parseFloat(e.unit.bonus_height)})},propertyDataSet:function(e){V({valueM:parseFloat(e.value_m2),tradePolicies:!1,Coupon:!1,initialValue:parseFloat(e.value_initial_unit),discountFinishes:parseFloat(e.unit.unit_type.finish_kit_value),discountCoupons:parseFloat(e.value_coupons),discountCouponsPrevious:0,commercialDiscounts:parseFloat(e.value_discounts),previousCommercialDiscount:0,unitValue:parseFloat(e.value_total_unit),includesFinishes:"0"!==e.finishes_included})},changeStateTableIncluded:function(){V(Object(j.a)(Object(j.a)({},L),{},{tradePolicies:!L.tradePolicies}))},discountsSet:function(e,t,n,a){var c=[],i=[];o.coupons!==[]&&(i=o.coupons),o.discount!==[]&&(c=o.discount);var l=Object(j.a)({},o),d=Object(j.a)({},L),u=parseFloat(e)*parseFloat(O.area);"Valor m2"===a&&(n?(c.push(t),d.valueM=d.valueM-parseFloat(e),d.unitValue=d.unitValue-u,d.commercialDiscounts+=parseFloat(u)):(c=r(l.discount,t),d.valueM=d.valueM+parseFloat(e),d.unitValue=d.unitValue+u,d.commercialDiscounts-=parseFloat(u))),"Valor total"===a&&(n?(c.push(t),d.unitValue=d.unitValue-parseFloat(e),d.commercialDiscounts+=parseFloat(e)):(c=r(l.discount,t),d.unitValue=d.unitValue+parseFloat(e),d.commercialDiscounts-=parseFloat(e))),"Cupon"===a&&(n?(i.push(t),d.unitValue=d.unitValue-parseFloat(e),d.discountCoupons+=parseFloat(e)):(i=r(l.coupons,t),d.unitValue=d.unitValue+parseFloat(e),d.discountCoupons-=parseFloat(e))),l.discount=c,l.coupons=i,s(l),V(d),F(Object(j.a)(Object(j.a)({},E),{},{unitValue:parseFloat(JSON.parse(JSON.stringify(d.unitValue)))}))},onChangeKit:function(e){var t=Object(j.a)({},L);e.target.checked?t.unitValue=t.unitValue+T.valueKit:t.unitValue=t.unitValue-T.valueKit,t.includesFinishes=e.target.checked,V(t),F(Object(j.a)(Object(j.a)({},E),{},{unitValue:parseFloat(JSON.parse(JSON.stringify(t.unitValue))),finishesIncluded:e.target.checked}))},changeStateTableCoupon:function(){V(Object(j.a)(Object(j.a)({},L),{},{Coupon:!L.Coupon}))},CalculateDelivery:ce,paymentMethodProposedByTheProjectSet:function(e){var t=parseInt(e.project.payment_relationship_setting.initial_fee_promise_signature_trust_percentage),n=parseInt(e.project.payment_relationship_setting.initial_fee_finance_in_construction_percentage),a=Ii(e.created_at,e.project.start_build_date,e.project.estimated_delivery_date,e.project.payment_relationship_setting.maximum_number_months_finance_initial_fee),r=ie(e.total_unfunded_initial_fee_value,e.way_to_pay[0].amount_dues,e.way_to_pay[0].value,e.value_total_unit,parseFloat(e.total_unfunded_initial_fee_value)+parseFloat(e.total_funded_initial_fee_value),a),c=Ai(r,void 0,parseFloat(e.project.sale_parameter.interest_on_plans_percentage)/100,parseFloat(e.project.sale_parameter.interest_in_construction_percentage)/100);z({initialFeeNotFunded:e.total_unfunded_initial_fee_value,initialFeeNotFundedPercentage:t,initialFeeFinanced:e.total_funded_initial_fee_value,initialFeeFinancedPercentage:n,formOfPayments:r,unitValue:e.value_total_unit,presentValue:c,commercialDiscounts:e.value_discounts,discountCoupons:e.value_coupons,discountFinishes:e.unit.unit_type.finish_kit_value,finishesIncluded:"1"===e.finishes_included})},paymentMethodProposedByTheClientSet:function(e){var t=parseInt(e.project.payment_relationship_setting.initial_fee_promise_signature_trust_percentage),n=parseInt(e.project.payment_relationship_setting.initial_fee_finance_in_construction_percentage),a=Ii(e.created_at,e.project.start_build_date,e.project.estimated_delivery_date,e.project.payment_relationship_setting.maximum_number_months_finance_initial_fee),r=ie(e.total_unfunded_initial_fee_value,e.way_to_pay[0].amount_dues,e.way_to_pay[0].value,e.value_total_unit,parseFloat(e.total_unfunded_initial_fee_value)+parseFloat(e.total_funded_initial_fee_value),a);r=re(r,e.way_to_pay[0].way_to_pay_amounts,e.value_total_unit);var c=Ai(r,void 0,$.flatTax,$.constructionTax);J({initialFeeNotFunded:e.total_unfunded_initial_fee_value,initialFeeNotFundedPercentage:t,initialFeeFinanced:e.total_funded_initial_fee_value,initialFeeFinancedPercentage:n,formOfPayments:r,unitValue:e.value_total_unit,presentValue:c,commercialDiscounts:e.value_discounts,discountCoupons:e.value_coupons,discountFinishes:e.unit.unit_type.finish_kit_value,finishesIncluded:"1"===e.finishes_included,financialDiscountOrIncrease:0})},modified_values:function(e){var t=Object(j.a)({},o);t.modified_values=e,s(t)},calculatePor:oe,calculatePresentValueByTheClient:function(e){var t=Fi(U.presentValue,e,void 0,$.flatTax,$.constructionTax),n=Ai(e,t,$.flatTax,$.constructionTax),a=null===e||void 0===e?void 0:e.filter((function(e){return"Entrega"!==e.month})),r=parseFloat(Di(a)+t),c=-1*Ni(U.unitValue,r),i=Math.round(function(e){var t=0;return e.map((function(e){"C.I. No Financiada"!==e.month&&"Entrega"!==e.month&&(t+=parseFloat(e.value))})),t}(e)),o=oe(i,parseFloat(U.unitValue));J(Object(j.a)(Object(j.a)({},Y),{},{presentValue:n,financialDiscountOrIncrease:c,initialFeeFinanced:i,unitValue:Math.round(r),initialFeeFinancedPercentage:o,finishesIncluded:E.finishesIncluded}))},recalculatePaymentPlan:function(){te()},formatDate:n}},Vi=n(336),qi=function(e){var t=e.name,n=e.nameFile,a=e.state,r=e.link,c=(e.id,e.label);return r?Object(h.jsx)(g.a.Item,{label:c,children:Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:16,children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:n,size:"small"})}),Object(h.jsxs)(N.a,{children:[Object(h.jsx)(S.a,{onClick:function(){return function(e){var t=document.createElement("a");t.href="".concat(e),t.target="_blank",document.body.appendChild(t),t.click()}(r)},size:"small",type:"primary",icon:Object(h.jsx)(Vi.a,{})}),Object(h.jsx)(S.a,{disabled:a,onClick:function(){},size:"small",type:"primary",danger:!0,icon:Object(h.jsx)(Xt.a,{})})]})]})}):Object(h.jsx)(g.a.Item,{label:c,name:t,getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:Object(h.jsx)(rn.a,{name:t,action:R.Pe,valuePropName:"fileList",maxCount:1,accept:".pdf",children:Object(h.jsx)(S.a,{disabled:a,icon:Object(h.jsx)(Dc.a,{}),children:"Documento Solicitud"})})})},Mi=function(e){var t=e.record,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=void 0!==(null===t||void 0===t?void 0:t.id)?null===t||void 0===t?void 0:t.id:0,s="comment"+o,l="application_document"+o,d=null===t||void 0===t?void 0:t.customerRequests.link,u=null===t||void 0===t?void 0:t.customerRequests.name;return Object(a.useEffect)((function(){"APROBADA"===(null===t||void 0===t?void 0:t.state)||"TRAMITADA"===(null===t||void 0===t?void 0:t.state)||"DECLINADA"===(null===t||void 0===t?void 0:t.state)?i(!0):i(!1)}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{name:s,initialValue:null===t||void 0===t?void 0:t.name,children:Object(h.jsx)(_.a.TextArea,{disabled:c,showCount:!0,maxLength:200})}),Object(h.jsx)(qi,{label:"Documento Solicitud",name:l,state:c,id:o,link:d,nameFile:u})]})},Ui=function(e){var t=e.record,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=void 0!==(null===t||void 0===t?void 0:t.id)?null===t||void 0===t?void 0:t.id:0,s="budget"+o,l="technicalDocument"+o,d="approvalOfWorksDirector"+o,u=null===t||void 0===t?void 0:t.technicalManagement.link,b=null===t||void 0===t?void 0:t.technicalManagement.name;return Object(a.useEffect)((function(){"APROBADA"===t.state||"TRAMITADA"===t.state||"DECLINADA"===t.state?i(!0):i(!1)}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{label:"Presupuesto",name:s,initialValue:t.budget,children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"},size:"small",disabled:c}))}),Object(h.jsx)(qi,{label:"Documento T\xe9cnico",name:l,state:c,id:o,link:u,nameFile:b}),Object(h.jsx)(g.a.Item,{label:"Aprobaci\xf3n Director de la Obra",style:{fontSize:10},name:d,initialValue:t.approvalOfWorksDirector,children:Object(h.jsxs)(dt.a,{size:"small",disabled:c,defaultValue:t.approvalOfWorksDirector,children:[Object(h.jsx)(dt.a.Option,{value:1,children:"Si"}),Object(h.jsx)(dt.a.Option,{value:0,children:"No"})]})})]})},zi=function(){var e=Li().formatDate,t=[{title:"Fecha de Solicitud",width:15,dataIndex:"applicationDate",align:"center",key:"applicationDate"},{title:"Solicitudes del Cliente",dataIndex:"customerRequests",align:"center",key:"customerRequests",render:function(e,t){return Object(h.jsx)(Mi,{record:t})}},{title:"Gesti\xf3n T\xe9cnica",dataIndex:"technicalManagement",align:"center",key:"technicalManagement",render:function(e,t){return Object(h.jsx)(Ui,{record:t})}}],n=Object(a.useState)({email:"",id:0,identification:0,name:"",occupation:"",phoneNumber:"",registerDate:""}),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)({id:0,interests:""}),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)([{code:"",project:"",unit:"",trustCode:"",numberRooms:0,projectUnitStatus:""}]),j=Object(f.a)(u,2),b=j[0],m=j[1],p=function(e){return null===e?{}:{id:e.id,name:e.name,link:e.path}},O=function(e){return"0.000000"===e||"100.000000"===e?parseInt(e)+" %":parseFloat(e).toFixed(2)+" %"};return{customer:c,setCustomer:i,interest:l,setInterest:d,quotations:b,setQuotations:m,columns:t,CustomerSet:function(t){i({email:t.email,id:t.id,identification:t.identification,name:t.name,occupation:t.occupation,phoneNumber:t.phone_number,registerDate:e(t.register_date)})},DataSet:function(e){return{id:e.id,name:e.comment,applicationDate:e.application_date,customerRequests:p(e.application_document),budget:parseFloat(e.budget).toFixed(2),approvalOfWorksDirector:parseInt(e.approval_of_works_director),technicalManagement:p(e.technical_document),finish:"1"===e.fulfilled,afterSalesAccomplished:p(e.fulfilled_document),state:e.state.name_state}},SaleSet:function(t){return{id:parseInt(t.id),saleDate:e(t.sale_date),projectName:t.project_name,labelUnit:t.label_unit,fiduciaryCode:t.fiduciary_code,unitValue:he.format(t.unit_value),reformsValue:he.format(t.reform_value),totalValue:he.format(t.total_value),percentageCollected:t.percentage_collected,percentageLegalization:O(t.percentage_of_legalization),observation:t.observation}}}},Gi=function(e){var t=e.customer;return Object(h.jsxs)(oc.b,{title:"Datos del Cliente",layout:"vertical",bordered:!0,children:[Object(h.jsx)(oc.b.Item,{label:"Nombre",children:t.name}),Object(h.jsx)(oc.b.Item,{label:"Identificaci\xf3n",children:t.identification}),Object(h.jsx)(oc.b.Item,{label:"Tel\xe9fono",children:t.phoneNumber}),Object(h.jsx)(oc.b.Item,{label:"E-mail",children:t.email}),Object(h.jsx)(oc.b.Item,{label:"Ocupaci\xf3n",children:t.occupation}),Object(h.jsx)(oc.b.Item,{label:"Fecha Registro",children:t.registerDate})]})},Bi=n(627),Yi=function(e){var t=e.record,n=Object(s.d)(),a=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Ver / Imprimir "});return Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){n(X(t.id,function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,(a=document.createElement("a")).href="".concat(n._payload.path),a.target="_blank",document.body.appendChild(a),a.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},style:{backgroundColor:"#2cc02c",marginTop:3},icon:Object(h.jsx)(Bi.a,{style:{color:"#fff"}})})})},Ji=function(e){var t=e.record,n=e.setSalesUpdate,r=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Observaciones "}),c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=g.a.useForm(),u=Object(f.a)(d,1)[0],j=Object(s.d)(),b=function(){O(),l(!1)},O=function(){u.resetFields()},x=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.validateFields();case 2:a=e.sent,j((r=t.id,c=a,i=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(a=e.sent).error?Object(P.c)(a.message):(n(),b(),Object(P.f)(a.message));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/sales2/observation/").concat(r),data:c,postProcessSuccess:i,postProcessError:o}}));case 4:case"end":return e.stop()}var r,c,i,o}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:r,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){l(!0)},style:{backgroundColor:"#002140",marginTop:3},icon:Object(h.jsx)(wi.a,{style:{color:"#fff"}})})}),Object(h.jsx)(ue.a,{visible:o,title:"Observaci\xf3n",onCancel:function(){return b()},onOk:function(){return x()},okText:"Guardar",cancelText:"Finalizar",children:Object(h.jsx)(g.a,{name:"registerObservations",layout:"vertical",form:u,children:Object(h.jsx)(g.a.Item,{label:"Observaci\xf3nes",name:"observation",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(h.jsx)(_.a.TextArea,{showCount:!0,maxLength:100})})})})]})},Hi=n(630),Zi=function(e){var t=e.project,n=e.creator_user,r=e.unit,c=e.customer,i=e.date_reform_request;Object(a.useEffect)((function(){}),[t,n,r,c,i]);var o=Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(oc.b,{title:"Detalle de la venta",children:[Object(h.jsx)(oc.b.Item,{label:"Proyecto",children:t.name}),Object(h.jsx)(oc.b.Item,{label:"Empresa comercializadora",children:null===t||void 0===t?void 0:t.businessName}),Object(h.jsx)(oc.b.Item,{label:"Usuario creador",children:null===n||void 0===n?void 0:n.name}),Object(h.jsx)(oc.b.Item,{label:"Cliente",children:c.name}),Object(h.jsx)(oc.b.Item,{label:"Unidad",children:r.label}),Object(h.jsx)(oc.b.Item,{label:"Fecha de solicitud",children:i?se()(i,Gt).format(Gt):""})]})});return Object(h.jsx)(h.Fragment,{children:o})},Qi=n(21),Ki=n(42),Wi=n.n(Ki),Xi=n(88),$i=n.n(Xi),eo=function(e){var t=e.columns,n=e.dataSource;return Object(h.jsx)(Q.a,{bordered:!0,pagination:{position:["none","none"]},dataSource:Object(ce.a)(n),columns:t})},to=n(628),no=n(629),ao=function(e,t){switch(t){case"fetchAllReformRequest":return e.error?ro():(c=e,{type:R.Bc,payload:c});case"createReformRequest":return e.error?co():(r=e,{type:R.C,payload:r});case"updateReformRequest":return e.error?io():(a=e,{type:R.kh,payload:a});case"deleteReformRequest":return e.error?oo():(n=e,{type:R.Vd,payload:n})}var n,a,r,c},ro=function(){return{type:R.ic,payload:null}},co=function(){return{type:R.fc,payload:null}},io=function(){return{type:R.mc,payload:null}},oo=function(){return{type:R.kc,payload:null}},so=_.a.TextArea;function lo(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}var uo=function(e){var t=e.maximum_reforms_date,n=e.reforms_requests,r=e.idSale,c=e.updateListReformRequest,i={isNew:!0,body_description:null,request_document:null,technical_document:null,customer_document:null,customer_management:{approved:null,is_paid:null},technical_management:{approved:null,buget:null,date_pay:null}},o=Object(a.useState)([Wi.a.cloneDeep(i)]),l=Object(f.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(!1),m=Object(f.a)(b,2),p=m[0],O=m[1],x=Object(a.useState)([]),v=Object(f.a)(x,2),y=v[0],g=v[1],_=Object(a.useState)([]),w=Object(f.a)(_,2),C=w[0],I=w[1],E=Object(a.useState)({}),F=Object(f.a)(E,2)[1],A=Object(s.d)(),k=lo(y),D=(lo(C),lo(n));Object(a.useEffect)((function(){}),[]),Object(a.useEffect)((function(){g(Wi.a.cloneDeep(n));var e=0===(null===k||void 0===k?void 0:k.length)&&0===(null===y||void 0===y?void 0:y.length)&&Wi.a.isEqual(k,y),t=(null===D||void 0===D?void 0:D.length)===n.length-1&&Wi.a.isEqual(k,y),a=(null===D||void 0===D?void 0:D.length)===n.length+1&&Wi.a.isEqual(k,y),r=(null===D||void 0===D?void 0:D.length)===n.length&&!Wi.a.isEqual(D,n),c=Wi.a.isEqual(D,n);if((e||c)&&I(Wi.a.cloneDeep(n)),t){var i=Wi.a.differenceWith(Object(Qi.a)(Wi.a.cloneDeep(n)),Object(Qi.a)(Wi.a.cloneDeep(C)),Wi.a.isEqual);I([].concat(Object(Qi.a)(C),Object(Qi.a)(i)))}if(r){var o=Wi.a.cloneDeep(n),s=Wi.a.differenceWith(o,Wi.a.cloneDeep(y),Wi.a.isEqual)[0],l=o.indexOf(s),d=C.map((function(e){return e.id===s.id?n[l]:e}));I(Wi.a.cloneDeep(d))}if(a){var u=Wi.a.difference(Wi.a.cloneDeep(C),Wi.a.cloneDeep(n));I(Object(Qi.a)(C.filter((function(e){return e.id!==u.id}))))}}),[n]);var L=function(e,t,n){(null===t||void 0===t?void 0:t.isNew)?d[0].body_description=e.target.value:C[n].body_description=e.target.value,F({})},V=function(e,t,n){(null===t||void 0===t?void 0:t.isNew)?d[0].request_document=e:C[n].request_document=e,F({})},q=function(e,t,n){(null===t||void 0===t?void 0:t.isNew)?d[0].technical_management?d[0].technical_management.approved=e:d[0].technical_management={approved:e}:C[n].technical_management?C[n].technical_management.approved=e:C[n].technical_management={approved:e},F({})},M=function(e,t,n,a){if(null===n||void 0===n?void 0:n.isNew){var r=d[0].technical_management;r?r.date_pay=se()(e).format(Gt):r={date_pay:se()(e).format(Gt)}}else C[a].technical_management?C[a].technical_management.date_pay=se()(e).format(Gt):C[a].technical_management={date_pay:se()(e).format(Gt)};F({})},U=function(e,t,n){(null===t||void 0===t?void 0:t.isNew)?d[0].technical_document=e:C[n].technical_document=e,F({})},z=function(e,t,n){(null===t||void 0===t?void 0:t.isNew)?d[0].customer_management?d[0].customer_management.approved=e:d[0].customer_management={approved:e}:C[n].customer_management?C[n].customer_management.approved=e:C[n].customer_management={approved:e},F({})},G=function(e,t,n){(null===t||void 0===t?void 0:t.isNew)?d[0].customer_document=e:C[n].customer_document=e,F({})},B=function(e,t,n){if(null===t||void 0===t?void 0:t.isNew){var a=d[0].customer_management;a?a.is_paid=W(e.target.checked):a={is_paid:W(e.target.checked)}}else C[n].customer_management?C[n].customer_management.is_paid=W(e.target.checked):C[n].customer_management={is_paid:W(e.target.checked)};F({})},Y=function(e){var t,n,a,r,c=new FormData,o=Wi.a.cloneDeep(e),s=Wi.a.cloneDeep(i);delete s.isNew,e.isNew&&delete o.isNew;for(var l=Object.keys(s),d={},u=function(t,n){var a,r,c=Object.keys(i[t]),o={};if(null!==(null===(a=n[t])||void 0===a?void 0:a.approved)&&1===(null===(r=n[t])||void 0===r?void 0:r.approved)){var s,l=Object(Dr.a)(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;o[u]="is_paid"===u?Wi.a.cloneDeep(e[t][u]||0):Wi.a.cloneDeep(e[t][u]||"")}}catch(x){l.e(x)}finally{l.f()}d[t]=JSON.stringify(o)}else{var j;if(1==(null===(j=n[t])||void 0===j?void 0:j.approved)){var b,m=Object(Dr.a)(c);try{for(m.s();!(b=m.n()).done;){var p=b.value;o[p]="is_paid"===p?Wi.a.cloneDeep(e[t][p]||0):Wi.a.cloneDeep(e[t][p]||"")}}catch(x){m.e(x)}finally{m.f()}d[t]=JSON.stringify(o)}else{var f,O=Object(Dr.a)(c);try{for(O.s();!(f=O.n()).done;){var h=f.value;o[h]="","is_paid"===h&&(o[h]=0)}}catch(x){O.e(x)}finally{O.f()}o.approved=0,d[t]=JSON.stringify(o)}}},j=function(e,t,n,a){var r,c,i,o;void 0!==(null===(r=e[a])||void 0===r?void 0:r.approved)&&null!==(null===(c=e[a])||void 0===c?void 0:c.approved)?1===(null===(i=e[a])||void 0===i?void 0:i.approved)?t[n]=e[n]:0===!(null===(o=e[a])||void 0===o?void 0:o.approved)&&(t[n]=""):(delete t[n],delete t[a])},b=0,m=l;b<m.length;b++){var p=m[b];switch(p){case"technical_management":case"customer_management":u(p,o);break;default:d[p]=o[p]}}for(var f in void 0===(null===(t=o.technical_management)||void 0===t?void 0:t.approved)&&null===(null===(n=o.technical_management)||void 0===n?void 0:n.approved)||j(o,d,"technical_document","technical_management"),void 0===(null===(a=o.customer_management)||void 0===a?void 0:a.approved)&&null===(null===(r=o.customer_management)||void 0===r?void 0:r.approved)||j(o,d,"customer_document","customer_management"),void 0!==o.request_document&&null!==o.request_document||(d.request_document=""),d)c.append(f,d[f]);e.isNew?J(c,e):H(c,e)},J=function(e){e.append("creator_user_id",JSON.parse(localStorage.getItem("USER_INFO")).id),A({type:R.Wf,payload:null}),A(function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/reformRequest/").concat(e),data:t,success:function(e){return ao(e,"createReformRequest")},postProcessSuccess:n,postProcessError:a}}}(r,e,(function(e){e.error||Object(P.f)("Solicitud creada"),K(),c()})))},H=function(e,t){var n,a,r,i;A({type:R.dg,payload:null}),A((n=t.id,a=e,r=function(e){e.error||Object(P.f)("Solicitud modificada"),c()},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/reformRequest/update/").concat(n),data:a,success:function(e){return ao(e,"updateReformRequest")},postProcessSuccess:r,postProcessError:i}}))},Z=function(e){var t,n,a;A({type:R.bg,payload:null}),A((t=e.id,n=function(e){e.error||Object(P.f)("Solicitud eliminada"),c()},{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/reformRequest/").concat(t),success:function(e){return ao(e,"deleteReformRequest")},postProcessSuccess:n,postProcessError:a}}))},K=function(){u([{isNew:!0}]),O(!p)},W=function(e){return void 0!==e&&null!==e&&e?1:0},X=function(e,t,n){var a,r,c,i,o,s,l,u,j,b,m,p,f,O,h,x,v,g,_,S,w,P,I,E,F,A,k,T,N,D,L,V,q,M,U,z,G,B=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Y=!1,J=null===(a=y[n])||void 0===a||null===(r=a.technical_management)||void 0===r?void 0:r.approved,H=null===(c=C[n])||void 0===c||null===(i=c.technical_management)||void 0===i?void 0:i.approved,Z=null===(o=y[n])||void 0===o||null===(s=o.customer_management)||void 0===s?void 0:s.approved,Q=null===(l=C[n])||void 0===l||null===(u=l.customer_management)||void 0===u?void 0:u.approved,K=null===(j=d[0])||void 0===j||null===(b=j.technical_management)||void 0===b?void 0:b.approved;if(null===t||void 0===t?void 0:t.isNew)switch(Y=!1,e){case"customer_request":null===(void 0===(null===(m=d[n])||void 0===m||null===(p=m.technical_management)||void 0===p?void 0:p.approved)?null:null===(f=d[n])||void 0===f||null===(O=f.technical_management)||void 0===O?void 0:O.approved)&&(Y=!1),0!==K&&1!==K||(Y=!0);break;case"technical_management":case"customer_management":Y=!0}else switch(Y=!1,e){case"customer_request":(null===(h=y[n])||void 0===h||null===(x=h.state)||void 0===x?void 0:x.id)>=2&&(Y=!0),null===(void 0===J?null:J)&&(Y=!1),1!==J&&0!==J||(Y=!0),null===(void 0===(null===(v=C[n])||void 0===v||null===(g=v.technical_management)||void 0===g?void 0:g.approved)?null:null===(_=C[n])||void 0===_||null===(S=_.technical_management)||void 0===S?void 0:S.approved)&&(Y=!1),0!==H&&1!==H||(Y=!0),(null===(w=y[n])||void 0===w||null===(P=w.state)||void 0===P?void 0:P.id)>=3&&(Y=!0),Fe(R.Eb)||(Y=!0);break;case"technical_management":(null===(I=y[n])||void 0===I||null===(E=I.state)||void 0===E?void 0:E.id)>=3&&(Y=!0),null===(void 0===Z?null:Z)&&(Y=!1),1!==Z&&0!==Z||(Y=!0),null===(void 0===(null===(F=C[n])||void 0===F||null===(A=F.customer_management)||void 0===A?void 0:A.approved)?null:null===(k=C[n])||void 0===k||null===(T=k.customer_management)||void 0===T?void 0:T.approved)&&(Y=!1),0!==Q&&1!==Q||(Y=!0),0!==J||B||(Y=!0),0!==H||B||(Y=!0),(null===(N=y[n])||void 0===N||null===(D=N.state)||void 0===D?void 0:D.id)>=4&&(Y=!0),Fe(R.fg)||(Y=!0);break;case"customer_management":null===(void 0===J?null:J)&&(Y=!1),0===J&&(Y=!0),1===J&&(Y=!1),null===(void 0===(null===(L=C[n])||void 0===L||null===(V=L.technical_management)||void 0===V?void 0:V.approved)?null:null===(q=C[n])||void 0===q||null===(M=q.technical_management)||void 0===M?void 0:M.approved)&&(Y=!1),0===H&&(Y=!0),1===H&&(Y=!1),0!==Z||B||(Y=!0),0!==Q||B||(Y=!0),(null===(U=y[n])||void 0===U||null===(z=U.state)||void 0===z?void 0:z.id)>=4&&(Y=!0),Y=1!=(null===(G=t.technical_management)||void 0===G?void 0:G.approved)&&2!=t.state_id,"TRAMITADA"!=t.state.name_state&&"DECLINADA"!=t.state.name_state||(Y=!0),Fe(R.Db)||(Y=!0)}return Y},$=function(e){var t=e.props,n=e.children;return{props:t=t||{style:{background:"#d9edf7"}},children:void 0===n?Object(h.jsx)(h.Fragment,{}):n}},ee=[{title:"#",dataIndex:"index",key:"index",render:function(e,t){return $({children:Object(h.jsx)("label",{children:1+y.indexOf(t)})})}},{title:"Fecha",dataIndex:"date",key:"date",render:function(e,t){return $({children:Object(h.jsxs)($i.a,{children:[se()(null===t||void 0===t?void 0:t.created_at).format(Gt)," "]})})}},{title:"Solicitudes del cliente",dataIndex:"customerRequests",key:"customerRequests",render:function(e,t){var n,a=y.indexOf(t),r={onChange:function(e){e.fileList.length>0&&(e.fileList[0].name="Archivo cargado"),"removed"===e.file.status&&V(null,t,a)},beforeUpload:function(e){return V(e,t,a),!1},maxCount:1},c=Object(h.jsx)("a",{href:null===t||void 0===t||null===(n=t.multimedia)||void 0===n?void 0:n.path,target:"_blank",children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(nc.a,{})})});return $({children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(T.a,{justify:"center",align:"top",children:Object(h.jsxs)(Lr.b,{direction:"vertical",size:"middle",children:[Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Descripci\xf3n"})}),(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(so,{onBlur:function(e){L(e,t,a)},disabled:X("customer_request",t,0),rows:4}):Object(h.jsx)(so,{defaultValue:null===t||void 0===t?void 0:t.body_description,disabled:X("customer_request",t,a),onBlur:function(e){L(e,t,a)},rows:4})]}),Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Documento solicitud"})}),(null===t||void 0===t?void 0:t.multimedia)&&c,(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},r),{},{children:Object(h.jsx)(S.a,{disabled:X("customer_request",t,0),icon:Object(h.jsx)(Dc.a,{})})})):Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},r),{},{children:Object(h.jsx)(S.a,{style:{background:"#5cb85c",color:"#ffffff"},disabled:X("customer_request",t,a),icon:Object(h.jsx)(Dc.a,{})})}))]})]})})})})}},{title:"Gesti\xf3n t\xe9cnica",dataIndex:"technicalManagement",key:"technicalManagement",render:function(e,t){var n,a,r,c,i,o,s,l,u,b=y.indexOf(t),m={onChange:function(e){e.fileList.length>0&&(e.fileList[0].name="Archivo cargado"),"removed"===e.file.status&&U(null,t,b)},beforeUpload:function(e){return U(e,t,b),!1},maxCount:1},p={min:0,size:"small",formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onBlur:function(e){!function(e,t,n){var a;(a=(null===t||void 0===t?void 0:t.isNew)?d[0].technical_management:C[n].technical_management)?a.buget=e:a={buget:e},F({})}(e.target.ariaValueNow,t,b)}},f=Object(h.jsx)("a",{href:null===t||void 0===t||null===(n=t.technical_management)||void 0===n||null===(a=n.multimedia)||void 0===a?void 0:a.path,target:"_blank",children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(nc.a,{})})});return $({children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(T.a,{justify:"center",align:"top",children:Object(h.jsxs)(Lr.b,{direction:"vertical",children:[Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Aprobaci\xf3n t\xe9cnica"})}),(null===t||void 0===t?void 0:t.isNew)?Object(h.jsxs)(dt.a,{disabled:X("technical_management",t,0,!0),defaultValue:null,style:{width:120},onChange:function(e){q(e,t,b)},size:"small",children:[Object(h.jsx)(dt.a.Option,{value:2,children:"Seleccione"}),Object(h.jsx)(dt.a.Option,{value:1,children:"Si"}),Object(h.jsx)(dt.a.Option,{value:0,children:"No"})]}):Object(h.jsxs)(dt.a,{disabled:X("technical_management",t,b,!0),defaultValue:void 0===(null===t||void 0===t||null===(r=t.technical_management)||void 0===r?void 0:r.approved)?null:parseInt(null===t||void 0===t||null===(c=t.technical_management)||void 0===c?void 0:c.approved)||null,style:{width:120},onChange:function(e){q(e,t,b)},size:"small",children:[Object(h.jsx)(dt.a.Option,{value:null,children:"Seleccione"}),Object(h.jsx)(dt.a.Option,{value:1,children:"Si"}),Object(h.jsx)(dt.a.Option,{value:0,children:"No"})]})]}),Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Presupuesto"})}),(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(ut.a,Object(j.a)({disabled:X("technical_management",t,0)},p)):Object(h.jsx)(ut.a,Object(j.a)({disabled:X("technical_management",t,b),defaultValue:(null===t||void 0===t||null===(i=t.technical_management)||void 0===i?void 0:i.buget)||0},p))]}),Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Fecha de pago"})}),(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(jt.a,{disabled:X("technical_management",t,0),format:Gt,onChange:function(e,n){M(e,0,t,b)},size:"small"}):Object(h.jsx)(jt.a,{disabled:X("technical_management",t,b),format:Gt,defaultValue:void 0===(null===t||void 0===t||null===(o=t.technical_management)||void 0===o?void 0:o.date_pay)||null===(null===t||void 0===t||null===(s=t.technical_management)||void 0===s?void 0:s.date_pay)?null:se()(null===t||void 0===t||null===(l=t.technical_management)||void 0===l?void 0:l.date_pay,Gt),onChange:function(e,n){M(e,0,t,b)},size:"small"})]}),Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Documento t\xe9cnico"})}),(null===t||void 0===t||null===(u=t.technical_management)||void 0===u?void 0:u.multimedia)&&f,(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},m),{},{children:Object(h.jsx)(S.a,{disabled:X("technical_management",t,0),icon:Object(h.jsx)(Dc.a,{})})})):Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},m),{},{children:Object(h.jsx)(S.a,{style:{background:"#5cb85c",color:"#ffffff"},disabled:X("technical_management",t,b),icon:Object(h.jsx)(Dc.a,{})})}))]})]})})})})}},{title:"Gesti\xf3n clientee",dataIndex:"clientManagement",key:"clientManagement",render:function(e,t){var n,a,r,c,i,o,s,l,d,u=y.indexOf(t),b={onChange:function(e){e.fileList.length>0&&(e.fileList[0].name="Archivo cargado"),"removed"===e.file.status&&G(null,t,u)},beforeUpload:function(e){return G(e,t,u),!1},maxCount:1},m=Object(h.jsx)("a",{href:null===t||void 0===t||null===(n=t.customer_management)||void 0===n||null===(a=n.multimedia)||void 0===a?void 0:a.path,target:"_blank",children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(nc.a,{})})});return $({children:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(T.a,{justify:"center",align:"top",children:Object(h.jsxs)(Lr.b,{direction:"vertical",children:[Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Aprobaci\xf3n del cliente"})}),(null===t||void 0===t?void 0:t.isNew)?Object(h.jsxs)(dt.a,{disabled:X("customer_management",t,0,!0),defaultValue:null===t||void 0===t||null===(r=t.customer_management)||void 0===r?void 0:r.approved,style:{width:120},onChange:function(e){z(e,t,u)},size:"small",children:[Object(h.jsx)(dt.a.Option,{value:null,children:"Seleccione"}),Object(h.jsx)(dt.a.Option,{value:1,children:"Si"}),Object(h.jsx)(dt.a.Option,{value:0,children:"No"})]}):Object(h.jsxs)(dt.a,{disabled:X("customer_management",t,u,!0),defaultValue:void 0===(null===t||void 0===t||null===(c=t.customer_management)||void 0===c?void 0:c.approved)||null===(null===t||void 0===t||null===(i=t.customer_management)||void 0===i?void 0:i.approved)?null:parseInt(null===t||void 0===t||null===(o=t.customer_management)||void 0===o?void 0:o.approved),style:{width:120},onChange:function(e){z(e,t,u)},size:"small",children:[Object(h.jsx)(dt.a.Option,{value:null,children:"Seleccione"}),Object(h.jsx)(dt.a.Option,{value:1,children:"Si"}),Object(h.jsx)(dt.a.Option,{value:0,children:"No"})]})]}),Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Aprobaci\xf3n cliente"})}),(null===t||void 0===t||null===(s=t.customer_management)||void 0===s?void 0:s.multimedia)&&m,(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},b),{},{children:Object(h.jsx)(S.a,{disabled:X("customer_management",t,0),icon:Object(h.jsx)(Dc.a,{})})})):Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},b),{},{children:Object(h.jsx)(S.a,{style:{background:"#5cb85c",color:"#ffffff"},disabled:X("customer_management",t,u),icon:Object(h.jsx)(Dc.a,{})})}))]}),Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(T.a,{justify:"start",align:"top",children:Object(h.jsx)("label",{children:"Pago realizado?"})}),(null===t||void 0===t?void 0:t.isNew)?Object(h.jsx)(je.a,{disabled:X("customer_management",t,0),onChange:function(e){B(e,t,u)},size:"small",children:"Si"}):Object(h.jsx)(je.a,{disabled:X("customer_management",t,u),defaultChecked:(d=null===t||void 0===t||null===(l=t.customer_management)||void 0===l?void 0:l.is_paid,void 0===d||null===d?null:1===d),onChange:function(e){B(e,t,u)},size:"small",children:"Si"})]})]})})})})}},{title:"Estado",dataIndex:"state",key:"state",render:function(e,t){var n;return $({children:Object(h.jsx)($i.a,{children:null===t||void 0===t||null===(n=t.state)||void 0===n?void 0:n.name_state})})}},{title:"Acciones",dataIndex:"actions",key:"actions",render:function(e,t){return $({children:Object(h.jsxs)(h.Fragment,{children:[te(t),Fe(R.Wb)?Object(h.jsx)(de.a,{title:"Eliminar",children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar esta solicitud?",onConfirm:function(){Z(t)},onCancel:function(){},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{style:{background:"#d9534f"},type:"default",onClick:function(){},icon:Object(h.jsx)(to.a,{style:{color:"#ffffff"}}),size:"small"})})}):null]})})}}],te=function(e){var t=y.indexOf(e),n=Wi.a.isEqual(Wi.a.cloneDeep(y[t]),Wi.a.cloneDeep(C[t]));return y.length,Fe(R.lh)?n?Object(h.jsx)(de.a,{title:"Actualizar",children:Object(h.jsx)(S.a,{disabled:!0,type:"default",icon:Object(h.jsx)(no.a,{}),size:"small",onClick:function(){Y(y.indexOf(e))}})}):Object(h.jsx)(de.a,{title:"Actualizar",children:Object(h.jsx)(S.a,{type:"default",icon:Object(h.jsx)(no.a,{}),size:"small",onClick:function(){Y(C[t])}})}):null},ne=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{justify:"center",align:"top",gutter:[16,44],children:[Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(Q.a,{dataSource:Object(ce.a)(y),columns:ee,rowKey:"id",bordered:!0})}),p&&Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(eo,{columns:ee.slice(2,ee.length-2),dataSource:Object(ce.a)(d)})})]}),Object(h.jsxs)(T.a,{justify:"end",align:"top",gutter:16,className:"margin-top-10",children:[!p&&Object(h.jsx)(N.a,{children:Fe(R.yb)?Object(h.jsx)(S.a,{type:"primary",onClick:K,disabled:se()(t).isBefore(se()()),children:"Nueva petici\xf3n"}):null}),p&&Object(h.jsx)(N.a,{children:Object(h.jsx)(S.a,{type:"primary",onClick:K,children:"Cancelar"})}),p&&Object(h.jsx)(N.a,{children:Fe(R.yb)?Object(h.jsx)(S.a,{type:"primary",onClick:function(){Y(d[0])},children:"Registrar"}):null})]})]});return Object(h.jsx)(h.Fragment,{children:ne})},jo=n(656),bo=function(e){return e.salesWhitReformRequest},mo=Object(jo.a)((function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.date_reform_request}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.reforms_requests}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.project)||void 0===n?void 0:n.id}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.project)||void 0===n?void 0:n.name}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.project)||void 0===n?void 0:n.maximum_reforms_date}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.id}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.name}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.id}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.unit)||void 0===n?void 0:n.label}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.creator_user)||void 0===n?void 0:n.id}),(function(e){var t,n;return null===(t=e.reformRequestBySale)||void 0===t||null===(n=t.creator_user)||void 0===n?void 0:n.name}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.isFetchingAllReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.errorAllReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.isAddingReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.errorAddReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.isUpdatingReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.errorUpdatingReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.isDeletingReformRequest}),(function(e){var t;return null===(t=e.reformRequestBySale)||void 0===t?void 0:t.errorDeletingReformRequest}),(function(e,t,n,a,r,c,i,o,s,l,d,u,j,b,m,p,f,O,h){return{date_reform_request:e,reforms_requests:t,isFetchingAllReformRequest:u,errorAllReformRequest:j,isAddingReformRequest:b,errorAddReformRequest:m,isUpdatingReformRequest:p,errorUpdatingReformRequest:f,isDeletingReformRequest:O,errorDeletingReformRequest:h,project:{id:n,name:a,maximun_reform_date:r},customer:{id:c,name:i},unit:{id:o,label:s},creator_user:{id:l,name:d}}})),po=function(e){var t=e.visibleModal,n=e.handleCancel,r=e.onClose,c=e.idSale,i=Object(s.d)(),o=Object(s.e)(mo,s.c),l=function(){var e;i({type:R.Zf,payload:null}),i((e=c,{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/reformRequest/reform_by_sale/").concat(e),success:function(e){return ao(e,"fetchAllReformRequest")}}}))};Object(a.useEffect)((function(){return l(),function(){i({type:R.bb,payload:{}})}}),[]);var d=function(e){Object(P.c)(e)};Object(a.useEffect)((function(){(null===o||void 0===o?void 0:o.errorAddReformRequest)&&d("No fue posible agregar la solicitud"),(null===o||void 0===o?void 0:o.errorUpdatingReformRequest)&&d("No fue posible actualizar los datos de la solicitud"),(null===o||void 0===o?void 0:o.errorDeletingReformRequest)&&d("No fue posible eliminar la solicitud"),(null===o||void 0===o?void 0:o.errorAllReformRequest)&&d("No fue posible consultar las solicitudes")}),[o]);var u=o.isFetchingAllReformRequest||o.isAddingReformRequest||o.isUpdatingReformRequest||o.isDeletingReformRequest,b=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Zi,Object(j.a)({},o)),Object(h.jsx)(uo,Object(j.a)(Object(j.a)({onClose:r},o),{},{idSale:c,updateListReformRequest:l}))]});return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ue.a,{title:"Solicitud de reforma",visible:t,onCancel:n,footer:!1,width:"80%",destroyOnClose:!0,children:Object(h.jsx)(O.a,{spinning:u,tip:"Cargando...",children:b})})})},fo=function(e){var t=e.record,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Solicitudes de Reforma "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){return i(!0)},style:{backgroundColor:"#002140",marginTop:3},icon:Object(h.jsx)(Hi.a,{style:{color:"#fff"}})})}),c&&Object(h.jsx)(po,{idSale:null===t||void 0===t?void 0:t.id,visibleModal:c,handleCancel:function(){i(!c)},onClose:i})]})},Oo=n(632),ho=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Proyecto",name:"project",children:Object(h.jsx)(_.a,{disabled:!0})})}),Object(h.jsx)(N.a,{span:2}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Empresa Comercializadora",name:"tradingCompany",children:Object(h.jsx)(_.a,{disabled:!0})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Usuario Creador",name:"creatorUser",children:Object(h.jsx)(_.a,{disabled:!0})})}),Object(h.jsx)(N.a,{span:2}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Cliente",name:"customer",children:Object(h.jsx)(_.a,{disabled:!0})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Unidad",name:"unit",children:Object(h.jsx)(_.a,{disabled:!0})})}),Object(h.jsx)(N.a,{span:2}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha de Solicitud",name:"applicationDate",children:Object(h.jsx)(_.a,{disabled:!0})})})]})]})},xo=function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/after_sales/technicalDocument/").concat(e),data:t,postProcessSuccess:n,postProcessError:a}}},vo=function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/after_sales/fulfilled/").concat(e),data:t,postProcessSuccess:n,postProcessError:a}}},yo=function(e){var t=e.buttons,n=e.sale_id,a=e.searchForInformation,r=e.NuevoSet,c=Object(s.d)(),i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=function(){var e=Object(p.a)(m.a.mark((function e(){var t,i,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:if(t=e.sent,(i=new FormData).append("comment",t.comment0),i.append("assessor_id",JSON.parse(localStorage.getItem("USER_INFO")).id),"undefined"!==typeof t.application_document0)for(s=0;s<t.application_document0.length;s++)i.append("application_document",t.application_document0[s].originFileObj,t.application_document0[s].name);c((l=n,d=i,u=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.f)(n.message),a();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/after_sales/").concat(l),data:d,postProcessSuccess:u,postProcessError:j}})),r();case 9:case"end":return e.stop()}var l,d,u,j}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(g.a,{layout:"vertical",form:o,name:"PostSaleSave",children:Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:8,children:Object(h.jsxs)(w.a,{title:"Solicitudes del Cliente",children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{children:Object(h.jsx)(Mi,{})})}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:12,children:t("Cancelar",!0)}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(S.a,{size:"large",type:"primary",htmlType:"submit",onClick:function(){return l()},children:"Guardar"})})]})]})})})})},go=function(e){var t=e.record,n=e.setCheckes,r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],s=void 0!==(null===t||void 0===t?void 0:t.id)?null===t||void 0===t?void 0:t.id:0,l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b="finish"+s,m="complianceDocument"+s,p=null===t||void 0===t?void 0:t.afterSalesAccomplished.link,O=null===t||void 0===t?void 0:t.afterSalesAccomplished.name;console.log(t),Object(a.useEffect)((function(){"TRAMITADA"===(null===t||void 0===t?void 0:t.state)||"EN PROCESO"===(null===t||void 0===t?void 0:t.state)||"DECLINADA"===t.state?o(!0):o(!1)}),[t]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(qi,{label:"Documento Adjunto",name:m,state:i,id:s,link:p,nameFile:O}),Object(h.jsx)(g.a.Item,{label:"Postventa cumplida?",name:b,valuePropName:u,children:Object(h.jsx)(je.a,{value:u,disabled:i,onChange:function(e){return function(e){n(t.id,e.target.checked),j(e.target.checked)}(e)}})})]})},_o=n(631),So=function(e){var t=e.sale_id,n=e.query,r=e.searchForInformation,c=Object(a.useState)([]),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(!1),u=Object(f.a)(d,2),j=u[0],b=u[1],O=Object(s.d)(),x=g.a.useForm(),v=Object(f.a)(x,1)[0],y=Object(a.useState)([]),_=Object(f.a)(y,2),w=_[0],C=_[1],I=zi(),E=I.DataSet,F=I.columns;Object(a.useEffect)((function(){A(n)}),[n]);var A=function(e){var t=[];null===e||void 0===e||e.forEach((function(e){t.push(E(e))})),l(t)},k=function(e){var t,n,a;O((t=e,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.f)("Eliminado con exito : "+n._payload.comment),r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/after_sales/").concat(t),postProcessSuccess:n,postProcessError:a}}))},T=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,c,i,o,s,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.validateFields();case 2:if(a=e.sent,c=new FormData,i=D("finish"+t),o=null!==i&&!0===w[i].state?1:0,c.append("valor",a["budget"+t]),c.append("comment",a["comment"+t]),c.append("fulfilled",o),c.append("approval_of_works_director",a["approvalOfWorksDirector"+t]),"undefined"!==typeof a["complianceDocument"+t])for(s=0;s<a["complianceDocument"+t].length;s++)c.append("fulfilled_document",a["complianceDocument"+t][s].originFileObj,a["complianceDocument"+t][s].name);if("undefined"!==typeof a["technicalDocument"+t])for(l=0;l<a["technicalDocument"+t].length;l++)c.append("technicalDocument",a["technicalDocument"+t][l].originFileObj,a["technicalDocument"+t][l].name);if("undefined"!==typeof a["application_document"+t])for(d=0;d<a["application_document"+t].length;d++)c.append("application_document",a["application_document"+t][d].originFileObj,a["application_document"+t][d].name);"EN PROCESO"===n.state?O(xo(t,c,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.f)(n.message),r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):"APROBADA"===n.state&&O(vo(t,c,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.f)(n.message),r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e,t){return Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(De.a,{}),size:"large",onClick:function(){return b(!j)},danger:t,children:e})},D=function(e){var t=null;return w.length>0&&w.find((function(n,a){return n.name===e?t=a:null})),t},L=function(e,t){var n=[],a=null,r="finish"+e;w.length>0&&(n=w,a=D(r)),null!==a?n[a]=t:n.push({name:r,state:t}),C(n)};return F.push({title:"Postventa Cumplida",dataIndex:"afterSalesAccomplished",align:"center",key:"afterSalesAccomplished",render:function(e,t){return Object(h.jsx)(go,{setCheckes:L,record:t})}},{title:"Estado",width:15,dataIndex:"state",align:"center",key:"state"},{title:"",width:50,dataIndex:"action",align:"center",key:"action",render:function(e,t){return function(e){var t="TRAMITADA"===(null===e||void 0===e?void 0:e.state),n=!1;return"TRAMITADA"!==(null===e||void 0===e?void 0:e.state)&&"DECLINADA"!==(null===e||void 0===e?void 0:e.state)||(n=!0),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{disabled:n,onClick:function(){return T(e.id,e)},size:"small",type:"primary",icon:Object(h.jsx)(_o.a,{})}),Object(h.jsx)(S.a,{disabled:t,onClick:function(){return k(e.id)},size:"small",type:"primary",danger:!0,icon:Object(h.jsx)(Xt.a,{})})]})}(t)}}),Object(h.jsxs)(h.Fragment,{children:[j?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(yo,{searchForInformation:r,buttons:N,sale_id:t,NuevoSet:function(){b(!1)}})}):N("Solicitudes",!1),Object(h.jsx)(g.a,{form:v,name:"EditarPostVentas",children:Object(h.jsx)(Q.a,{columns:F,dataSource:o,width:"100%"})})]})},wo=function(e){var t=e.basicInformation,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(s.d)(),l=g.a.useForm(),d=Object(f.a)(l,1)[0],u=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Posventas "}),j=Object(a.useState)([]),b=Object(f.a)(j,2),O=b[0],x=b[1],v=function(){i(!1),d.resetFields()},y=function(){var e,n,a;o((e=t.id,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,_(n._payload.infoBase),x(n._payload.afterSale);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/after_sales/").concat(e),postProcessSuccess:n,postProcessError:a}}))},_=function(e){d.setFieldsValue({project:e.project_name,tradingCompany:e.trading_company,creatorUser:e.creator_user,customer:e.customer_name,unit:e.unit_name,applicationDate:e.application_date})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:u,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){return i(!0),void y()},style:{backgroundColor:"#002140",marginTop:3},icon:Object(h.jsx)(Oo.a,{style:{color:"#fff"}})})}),Object(h.jsx)(ue.a,{title:"Solicitud de Postventa",visible:c,onCancel:function(){return v()},cancelText:"Cerrar",okText:"Guardar",width:"90%",children:Object(h.jsxs)(g.a,{form:d,layout:"vertical",autoComplete:"off",children:[Object(h.jsx)(ho,{}),Object(h.jsx)(So,{sale_id:t.id,query:O,searchForInformation:y})]})})]})},Co=n(634),Po=n(633),Io=function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/sales/get-sale-legalization/").concat(e),success:function(e){return Ao(e)},postProcessSuccess:t}}},Eo=function(e){return{type:R.Jh,payload:e}},Fo=function(e){return{type:R.Wg,payload:e}},Ao=function(e){return{type:R.uf,payload:e}},ko=function(e){var t=e.data,n=e.idSale,r=e.setDataSource,c=Object(a.useState)({}),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(s.d)();Object(a.useEffect)((function(){if(!u(o)&&void 0!=o){var e=Object(Qi.a)(t),a=o.record;e.forEach((function(e){if(e.id===a.id){o.name=a.FileName,e.file=o.originFileObj;var t=new FormData;t.append("sales_legalization_documents_id",a.id),t.append("user_id",JSON.parse(localStorage.getItem("USER_INFO")).id),t.append("document",e.file),d(function(e,t,n,a){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/sales/legalization-document/").concat(e),data:t,success:function(e){return Eo(e)},postProcessSuccess:n,postProcessError:a}}}(n,t,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS, Ha ocurrido un error."):(Object(P.f)("Documento subido con \xe9xito."),d(Io(n,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS, Ha ocurrido un error."):r(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})),l({})}}),[o]);var u=function(e){return 0===Object.keys(e).length},b={name:"file",headers:{authorization:"authorization-text"},beforeUpload:function(e){return!1},showUploadList:!1,progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},strokeWidth:3,format:function(e){return"".concat(parseFloat(e.toFixed(2)),"%")},showInfo:!0}},O=[{title:"#",width:50,dataIndex:"id",key:"id",render:function(e,t,n){return Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)("h6",{children:n+1})," "]})}},{title:Object(h.jsx)("strong",{children:"Etiqueta"}),width:200,dataIndex:"label",key:"label"},{title:Object(h.jsx)("strong",{children:"Nombre del  archivo"}),width:220,dataIndex:"fileName",key:"fileName",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:t.file?Object(h.jsx)("h6",{style:{fontSize:"14px"},children:t.fileName}):Object(h.jsx)("h6",{style:{fontSize:"14px"},children:"No se ha adjuntado archivo.."})})}},{dataIndex:"ActionsSelectFile",width:160,render:function(e,t){return Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({name:"cargarCodigosFiduciarios",onChange:function(e){!function(e,t){if("uploading"!==e.file.status){for(var n=0;n<e.fileList.length;n++){var a=e.fileList[n];a.record=t}l(a)}}(e,t)}},b),{},{children:Object(h.jsx)(S.a,{type:"primary",disabled:t.file,icon:Object(h.jsx)(Dc.a,{}),children:"Elegir Archivo"})}))},fixed:"right"},{dataIndex:"ActionsDownload",width:160,fixed:"right",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S.a,{disabled:!t.file,style:{background:"#389e0d",color:"#fff"},icon:Object(h.jsx)(Po.a,{}),onClick:function(){return function(e){var t=document.createElement("a");t.href="".concat(e.file.path),t.target="_blank",document.body.appendChild(t),t.click()}(t)},children:"Descargar"})})}}];return Object(h.jsx)(Q.a,{size:"small",scroll:{x:900,y:400},bordered:!0,columns:O,dataSource:Object(ce.a)(t)||[],pagination:!1})},To=function(e){var t=e.dataSource,n=e.setDataSource,a=e.idSale;return Object(h.jsx)(w.a,{title:"Listado de Documentos",actions:[Object(h.jsx)("h6",{children:"Formatos Aceptados: .pdf, .doc, .xls, .docx, .xlsx, .jpg, .png, .jpeg, .bmp, .gif"})],children:Array.isArray(t)?Object(h.jsx)(x,{}):Object(h.jsx)(ko,{idSale:a,data:Object(ce.a)(null===t||void 0===t?void 0:t._payload),setDataSource:n})})},No=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/salesmade"),success:function(e){return qo(e)}}}},Do=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",headers:R.hg,url:"".concat(R.Ne,"/salesmade/switch-customer-in-sale/").concat(e),data:t,success:function(e){return Mo(e)},postProcessSuccess:n,postProcessError:a}}},Ro=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",headers:R.hg,url:"".concat(R.Ne,"/sales2/").concat(e),data:t,success:function(e){return Lo(e)},postProcessSuccess:n,postProcessError:a}}},Lo=function(e){return{type:R.Gb,payload:e}},Vo=function(e){return{type:R.P,payload:e}},qo=function(e){return{type:R.Gf,payload:e}},Mo=function(e){return{type:R.V,payload:e}},Uo=function(e){return{type:R.qf,payload:e}},zo=function(e){var t=e.data,n=Object(s.d)(),r=Object(a.useState)([]),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){u&&n(Io(t.id,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS! ha ocurrido un error"):o(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[u]);var b=function(){j(!1)},O=function(){var e,a,r;i.hasOwnProperty("_payload")?n((e=t.id,a=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! ha ocurrido un error"):(Object(P.f)("Documentos legalizados con \xe9xito"),n(No()),b());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",headers:R.hg,url:"".concat(R.Ne,"/salesmade/update-percentage-legalization-document/").concat(e),success:function(e){return Fo(e)},postProcessSuccess:a,postProcessError:r}})):Object(P.g)("No hay documentos que legalizar.")},x=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Legalizar documentos"});return Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:x,children:Object(h.jsx)(S.a,{style:{background:"#52c41a",color:"#fff"},size:"small",onClick:function(){j(!0)},icon:Object(h.jsx)(Co.a,{}),disabled:t.is_desisted})}),u&&Object(h.jsx)(ue.a,{title:"Legalizar Documentos",visible:u,footer:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){return b()},children:"Cerrar"},"close"),Object(h.jsx)(S.a,{type:"primary",style:{background:"#389e0d",borderColor:"#389e0d",color:"#fff"},onClick:function(){return O()},children:"Legalizar Documentos"},"legalizedDocuments")],onCancel:function(){return j(!1)},width:1e3,children:u&&Object(h.jsx)(To,{dataSource:i,setDataSource:o,idSale:t.id})})]})},Go=function(e){var t=e.query,n=Object(a.useState)([]),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(s.d)(),l=zi().SaleSet;Object(a.useEffect)((function(){var e=[];t.customer.sale.forEach((function(t){e.push(l(t))})),i(e)}),[t]);var d=function(){var e,n,a,r=[];o((e=t.customer.id,n=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent._payload.forEach((function(e){r.push(l(e))})),i(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/after_sales/sales/").concat(e),postProcessSuccess:n,postProcessError:a}}))},u=[{title:"C\xf3digo",width:50,dataIndex:"id",align:"center",key:"id",sorter:function(e,t){return e.id-t.id}},{title:"Fecha",width:70,dataIndex:"saleDate",align:"center",key:"saleDate",sorter:function(e,t){return e.saleDate-t.saleDate}},Object(j.a)(Object(j.a)({title:"Proyecto",dataIndex:"projectName",align:"center",key:"projectName",width:100},Object(ce.b)("project")),ce.c),{title:"Unidad",dataIndex:"labelUnit",align:"center",key:"labelUnit",width:70,sorter:function(e,t){return e.unit-t.unit}},Object(j.a)(Object(j.a)({title:"C\xf3d. Fiduciario",dataIndex:"fiduciaryCode",align:"center",key:"fiduciaryCode",width:70},Object(ce.b)("trustCode")),ce.c),{title:"Valor Unidad",dataIndex:"unitValue",align:"center",key:"unitValue",width:70,sorter:function(e,t){return e.unitValue-t.unitValue}},{title:"Valor Reformas",dataIndex:"reformsValue",key:"reformsValue",align:"center",width:70,sorter:function(e,t){return e.reformsValue-t.reformsValue}},{title:"Valor Total",dataIndex:"totalValue",key:"totalValue",align:"center",width:70,sorter:function(e,t){return e.totalValue-t.totalValue}},Object(j.a)(Object(j.a)({title:"# CI Recaudo",dataIndex:"percentageCollected",key:"percentageCollected",align:"center",width:70},Object(ce.b)("ciCollection")),ce.c),Object(j.a)(Object(j.a)({title:"Legalizacion",dataIndex:"percentageLegalization",key:"percentageLegalization",align:"center",width:70},Object(ce.b)("legalization")),ce.c),Object(j.a)(Object(j.a)({title:"Observaciones",dataIndex:"observation",key:"observation",align:"center",width:100},Object(ce.b)("observations")),ce.c),{title:"Acciones",key:"acciones",fixed:"right",width:80,render:function(e,t){return function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Yi,{record:e}),Object(h.jsx)(zo,{data:e}),Object(h.jsx)(fo,{record:e}),Object(h.jsx)(wo,{basicInformation:e}),Object(h.jsx)(Ji,{record:e,setSalesUpdate:d})]})}(t)}}];return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(Q.a,{scroll:{x:1800,y:300},size:"small",bordered:!0,columns:u,dataSource:c})})})},Bo=function(e){var t=e.quotations,n=[{title:"C\xf3digo",width:20,dataIndex:"code",align:"center",key:"code",sorter:function(e,t){return e.code-t.code}},Object(j.a)(Object(j.a)({title:"Proyecto",width:50,dataIndex:"project",align:"center",key:"project"},Object(ce.b)("project")),ce.c),{title:"Unidad",dataIndex:"unit",key:"unit",align:"center",width:30,sorter:function(e,t){return e.unit-t.unit}},Object(j.a)(Object(j.a)({title:"C\xf3d. Fiduciario",dataIndex:"trustCode",align:"center",key:"trustCode",width:30},Object(ce.b)("trustCode")),ce.c),Object(j.a)(Object(j.a)({title:"No. Habitaciones",dataIndex:"numberRooms",key:"numberRooms",align:"center",width:30},Object(ce.b)("numberRooms")),ce.c),{title:"Estado Unidad del Proyecto",dataIndex:"projectUnitStatus",key:"projectUnitStatus",align:"center",width:40,render:function(e,t){return function(e){switch(e){case"Disponible":return Object(h.jsxs)(H.a,{color:"green",children:[" ",e," "]});case"Separada":return Object(h.jsxs)(H.a,{color:"lime",children:[" ",e," "]});case"Comprada":return Object(h.jsxs)(H.a,{color:"red",children:[" ",e," "]});default:return Object(h.jsxs)(H.a,{color:"white",children:[" ",e," "]})}}(t.projectUnitStatus)}}];return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(Q.a,{size:"small",columns:n,scroll:{x:1100,y:300},dataSource:t,bordered:!0})})})},Yo=n(234);function Jo(){return JSON.parse(localStorage.getItem("USER_INFO")).id}var Ho,Zo,Qo=function(e){var t,n=null===e||void 0===e?void 0:e.customerData,r=null===e||void 0===e||null===(t=e.customerData)||void 0===t?void 0:t.managementTypes,c=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.activityType._payload})),i=null===c||void 0===c?void 0:c.filter((function(e){return 3===(null===e||void 0===e?void 0:e.id)||4===(null===e||void 0===e?void 0:e.id)||9===(null===e||void 0===e?void 0:e.id)||8===(null===e||void 0===e?void 0:e.id)})).sort((function(e,t){if(e.name.length<t.name.length)return-1;if(e.name.length>t.name.length)return 1;return 0}));var o=Object(s.d)();Object(a.useEffect)((function(){o(Qa())}),[]);var l=Object(a.useState)(),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(),m=Object(f.a)(b,2),p=m[0],O=m[1],x=Object(a.useState)(),v=Object(f.a)(x,2),y=v[0],w=v[1],C=Object(a.useState)(),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)(),k=Object(f.a)(A,2),T=k[0],N=k[1],D=_.a.TextArea,L="YYYY/MM/DD",V=g.a.useForm(),q=Object(f.a)(V,1)[0],M=function(){j(!1)},U={scheduled:E,activity_description:T,activity_type_id:p,customer_id:n.customer.id,management_type_id:y,creator_user_id:Jo()},z=function(){q.resetFields()},G=function(){e.myClick()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(S.a,{type:"primary",onClick:function(){j(!0)},style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},children:[Object(h.jsx)(De.a,{style:{fontSize:20}})," ","Agregar Actividad"]}),Object(h.jsx)(ue.a,{title:"Agregar Actividad",visible:u,footer:!1,onCancel:function(){return j(!1)},children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:q,validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un numero"}},onFinish:function(){var e,t,a;o((e=U,t=function(e){e.error?Object(P.c)("Op a ocurrido un error"):(Object(P.f)("Ha sido agregado con \xe9xito"),G(),z(),M(),o(tt(n.customer[0].id)))},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/activity"),data:e,success:function(e){return be(e)},postProcessSuccess:t,postProcessError:a}}))},children:[Object(h.jsx)(g.a.Item,{name:"activityType",label:"Tipo",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:O,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===i||void 0===i?void 0:i.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.Item,{name:"managementType",label:"Tipo de Gestion",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:w,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),r.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.Item,{name:"scheduledDate",label:"Fecha Programada",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:E,format:L,onChange:function(e){var t;null!=(t=e)&&F(t.format(L))},style:{width:"100%"},placeholder:"Ingrese la fecha"})}),Object(h.jsx)(g.a.Item,{name:"activityDescription",label:"Actividad",rules:[{required:!0}],children:Object(h.jsx)(D,{value:T,onChange:function(e){return N(e.target.value)},rows:3})}),Object(h.jsxs)("div",{style:{textAlign:"right"},children:[Object(h.jsx)(S.a,{onClick:M,style:{marginRight:8},children:"Cancel"}),Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Registrar Actividad"})]})]})})]})},Ko=function(e){var t=e.query,n=e.myOnClick,r=zi(),c=r.quotations,i=r.setQuotations,o=Object(s.d)(),l=Object(a.useState)([]),d=Object(f.a)(l,2),u=d[0],j=d[1],b=function(){var e,n,a;o((e=t.customer.id,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,(a=document.createElement("a")).href=n._payload,a.target="_blank",document.body.appendChild(a),a.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/activity/get_pdf_activity/").concat(e),postProcessSuccess:n,postProcessError:a}}))};return Object(a.useEffect)((function(){var e,n,a,r=[],c=[];null===t||void 0===t||null===(e=t.activities)||void 0===e||e.forEach((function(e){c.push(function(e){var t,n;return{id:e.id,creatorUser:e.user.person.name,scheduleDate:e.scheduled,typeActivity:null===e||void 0===e||null===(t=e.activity_type)||void 0===t?void 0:t.name,managementType:null===e||void 0===e||null===(n=e.management_type)||void 0===n?void 0:n.name,activity:e.activity_description,activityPerformed:e.done,commentary:e.commentary}}(e))})),null===t||void 0===t||null===(n=t.customer)||void 0===n||null===(a=n.quotation)||void 0===a||a.forEach((function(e){r.push({code:e.code,project:e.project,unit:e.unit,trustCode:e.trustCode,numberRooms:parseInt(e.numberRooms),projectUnitStatus:e.projectUnitStatus})})),j(c),i(r)}),[t]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(Yo.a,{tab:Object(h.jsx)("span",{children:"Datos de Cotizaciones"}),children:Object(h.jsx)(Bo,{quotations:c})},"1"),Object(h.jsx)(Yo.a,{tab:Object(h.jsx)("span",{children:"Datos de Compras"}),children:Object(h.jsx)(Go,{query:t})},"2"),Object(h.jsxs)(Yo.a,{tab:Object(h.jsx)("span",{children:"Actividades"}),children:[Object(h.jsxs)("div",{style:{display:"inline-flex",marginLeft:"77%",marginBottom:"0.5%"},children:[Object(h.jsx)(S.a,{onClick:function(){return b()},style:{marginRight:10},type:"primary",children:"Imprimir"}),Object(h.jsx)(Qo,{myClick:n,customerData:t})]}),Object(h.jsx)(fe,{myOnClick:n,data:u,x:1300,y:300})]},"3")]})})},Wo=function(e){var t=e.customerAttachments,n=e.id,a=e.myOnClick,r=Object(s.d)(),c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Eliminar"}),i=[],o=[{title:"#",width:20,dataIndex:"key",key:"key"},{title:"Documento",width:80,dataIndex:"document",key:"document"},{title:"Acciones",dataIndex:"actions",width:30,key:"id_attachment",render:function(e,t){return u("user",t)}}];0===i.length&&t.forEach((function(e){i.push({key:e.id,document:e.name,path:e.path})}));var l={showUploadList:!1,onSuccess:function(e){e.error?Object(P.c)(e.message):(a(),Object(P.f)(e.message))},onError:function(e){Object(P.c)(e)},customRequest:function(e){var t=e.onSuccess,a=e.file,c=new FormData;c.append("customer_file",a,a.name),r(function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/customer/attachments/").concat(e),data:t,success:function(e){return rt(e)},postProcessSuccess:n,postProcessError:a}}}(n,c,t))}},d=function(e){r(function(e,t,n,a){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/customer/attachments/").concat(e),success:function(e){return rt(e)},postProcessSuccess:n,postProcessError:a}}}(e.key,0,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):(a(),Object(P.f)(n.message));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},u=function(e,t){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(Wt.a,{title:"\xbfDeseo eliminar?",okText:"Si",cancelText:"No",onConfirm:function(){return d(t)},children:Object(h.jsx)(S.a,{type:"primary",size:"small",danger:!0,icon:Object(h.jsx)(Xt.a,{})})})}),"  ",Object(h.jsx)(S.a,{type:"primary",size:"small",icon:Object(h.jsx)(Vi.a,{}),onClick:function(){return function(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click()}(t.path)}})]})};return Object(h.jsxs)(N.a,{xs:24,sm:24,md:14,lg:12,xl:12,children:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(oc.b,{title:"Documentos del cliente"}),Object(h.jsx)(Q.a,{bordered:!0,columns:o,dataSource:i,style:{width:"100%"},pagination:{pageSize:10},scroll:{y:240}})]}),Object(h.jsx)(T.a,{children:Object(h.jsx)("div",{style:{marginLeft:"78%"},children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},l),{},{children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Subir Archivos"})}))})})]})},Xo=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:[Object(h.jsx)(oc.b,{title:"Interes del Cliente"}),Object(h.jsx)(g.a.Item,{name:"interestLevel",label:"Nivel de Interes",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{placeholder:"Nivel de Inter\xe9s",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"Bajo"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"Medio"}),Object(h.jsx)(dt.a.Option,{value:"3",children:"Alto"}),Object(h.jsx)(dt.a.Option,{value:"4",children:"Cliente Actual"})]})})]})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{name:"interests",label:"Qu\xe9 estas buscando?",rules:[{required:!0}],children:Object(h.jsx)(_.a.TextArea,{placeholder:"Ingrese que esta Buscando"})})})}),Object(h.jsx)(T.a,{span:24,children:Object(h.jsx)(S.a,{style:{marginLeft:"85%"},type:"primary",htmlType:"submit",children:"Guardar"})})]})},$o={required:"El campo es requerido"},es={required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},ts=function(){var e,t=Object(d.useParams)().id,n=Object(a.useState)(null),r=Object(f.a)(n,2),c=r[0],i=r[1],l=g.a.useForm(),u=Object(f.a)(l,1)[0],j=Object(a.useState)(!1),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),C=y[0],I=y[1],E=Object(s.d)(),F=zi(),A=F.customer,k=F.setCustomer,D=F.interest,L=F.setInterest,V=Li().formatDate,q=Object(a.useState)([]),M=Object(f.a)(q,2),U=M[0],z=M[1],G=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer}));Object(a.useEffect)((function(){E($e()),void 0!==t&&(i(t),O||B())}),[]),Object(a.useEffect)((function(){i(t),B()}),[t]);var B=function(){null===c&&void 0===t?Object(P.g)("Debe seleccionar un usuario"):E(tt(null!==c?c:t,function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):(x(!0),Y(n),I(n._payload),z(null===(a=n._payload.customer)||void 0===a?void 0:a.customer_attachments),k({email:n._payload.customer.email,id:n._payload.customer.id,identification:n._payload.customer.identification,name:n._payload.customer.name,occupation:n._payload.customer.occupation,phoneNumber:n._payload.customer.phone_number,registerDate:V(n._payload.customer.register_date)}),L({id:null===n._payload.customer.interest_level||void 0===n._payload.customer.interest_level?"":n._payload.customer.interest_level,interests:n._payload.customer.interests}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},Y=function(e){u.setFieldsValue({interestLevel:null===e._payload.customer.interest_level?"":e._payload.customer.interest_level,interests:e._payload.customer.interests})},H=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.validateFields();case 2:t=e.sent,n=Z(t),E((a=A.id,r=n,c=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):(Object(P.f)(n.message),B());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/customer/interests/").concat(a),data:r,postProcessSuccess:c,postProcessError:i}}));case 5:case"end":return e.stop()}var a,r,c,i}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){return{interest_level:e.interestLevel,interests:e.interests}};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{title:"Seguimiento de Clientes ",style:{marginBottom:"80px"},extra:Object(h.jsxs)(o.b,{to:"/customer/client",children:[" ",Object(h.jsx)(S.a,{size:"small",type:"primary",children:"Volver"})," "]}),children:[Object(h.jsx)(g.a,{layout:"vertical",size:"middle",validateMessages:$o,onFinish:function(){return B()},children:Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:[Object(h.jsx)(oc.b,{title:"Buscar Cliente"}),Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{name:"searchCustomer",label:"Digite la Idetificaci\xf3n o Nombre Para Buscar",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",initialvalues:c,onChange:i,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null===G||void 0===G||null===(e=G._payload)||void 0===e?void 0:e.map((function(e){var t;return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(null!==(t=e.identification)&&void 0!==t?t:"-")},e.id+e.name+e.id)}))]})}),Object(h.jsx)(g.a.Item,{name:"SearchCustomer",label:" ",children:Object(h.jsx)(S.a,{onClick:function(){return B()},icon:Object(h.jsx)(wi.a,{})})})]})]})})}),O?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(J.a,{}),Object(h.jsx)(Gi,{customer:A}),Object(h.jsx)(J.a,{}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a,{layout:"vertical",size:"middle",form:u,onFinish:function(){return H()},validateMessages:es,children:Object(h.jsx)(Xo,{interest:D})})}),Object(h.jsx)(Wo,{myOnClick:B,id:c,customerAttachments:U})]}),Object(h.jsx)(J.a,{}),Object(h.jsx)(oc.b,{title:"Datos de Movimiento del Cliente"}),Object(h.jsx)(Ko,{query:C,myOnClick:B})]}):null]})})},ns=function(){return Object(h.jsx)(ts,{})},as=(n(296),n(221)),rs=n.n(as),cs=n(635),is={labelCol:{span:24},wrapperCol:{span:24}},os={scrollContainer:{overflow:"auto",backgroundColor:"#f5f5f5",height:"180px",color:"rgba(0,0,0,.25)"}},ss=function(e){var t=e.data,n=e.update_table,r=Object(s.d)();Object(a.useEffect)((function(){c()}),[t]);var c=function(){o.setFieldsValue({email:t.email_quote_format})},i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],b=d[1],m=function(){return b(!1)},p=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Enviar Cotizaci\xf3n "}),O=Object(h.jsxs)("span",{children:["Enviar Email - Cotizaci\xf3n #",t.code," "]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:p,children:Object(h.jsx)(S.a,{style:{background:"#5cb85c",borderColor:"#4cae4c"},icon:Object(h.jsx)(cs.a,{style:{color:"#fff"}}),onClick:function(){return b(!0)},size:"small"})}),Object(h.jsx)(ue.a,{size:"small",footer:!1,visible:u,backgroundColor:"#eb5a44",title:O,onCancel:m,children:Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:2,span:20,children:Object(h.jsxs)(g.a,Object(j.a)(Object(j.a)({form:o},is),{},{name:"sendEmail",onFinish:function(){var e=[];e.push(t.project_name),e.push(t.email),e.push(t.email_quote_format),e.push(t.id),r(function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/quotation/send_mail/").concat(t),data:e,headers:R.hg,postProcessSuccess:n,postProcessError:a}}}(e,t.customer_id,(function(e){if(e.error)return Object(P.c)("\xa1UPS! Ha ocurrido un error");m(),n(),Object(P.f)("Se ha enviado el email correctamente")})))},children:[Object(h.jsx)(g.a.Item,{label:"Nombre del cliente:",name:"clientName",rules:[{required:!1,message:"El campo es requerido"}],children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:t.name})}),Object(h.jsx)(g.a.Item,{label:"Nombre del proyecto:",name:"projectName",rules:[{required:!1,message:"El campo es requerido"}],children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:t.project_name})}),Object(h.jsx)(g.a.Item,{label:"Correo:",name:"email",rules:[{required:!1,message:"El campo es requerido"}],children:Object(h.jsx)(rs.a,Object(j.a)(Object(j.a)({className:"reactQuill"},{theme:"snow",scrollingContainer:".scroll-container",modules:{toolbar:!1},readOnly:!0}),{},{style:os.scrollContainer}))}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{style:{backgroundColor:"#52c41a",color:"#fff"},htmlType:"submit",children:"Enviar email"})})]}))})})})]})},ls=n(636),ds={labelCol:{span:24},wrapperCol:{span:24}},us={required:"${label} es requerido",number:"El ${label} no puede ser menor a 0",types:{number:"No es un numero v\xe1lido!"}},js=function(e){var t=e.props;Object(a.useEffect)((function(){O()}),[]);var n=(new Date).toISOString().slice(0,10),r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(s.d)(),d=function(){return o(!1)},u=g.a.useForm(),b=Object(f.a)(u,1)[0],O=function(){b.setFieldsValue({maximumDaysSeparation:t.maximum_separation_days})},x=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.validateFields();case 3:n=e.sent,a={number_days_separated:n.splitDays,quotation_id:t.id},l((r=t.unit_id,c=a,i=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se actualizaba"):(Object(P.f)("Ha sido actualizada con \xe9xito"),l(K()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/unit/apart-unit/").concat(r),data:c,success:function(e,t){return $(e,t)},postProcessSuccess:i,postProcessError:o}})),v(),d(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Failed:",e.t0);case 13:case"end":return e.stop()}var r,c,i,o}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),v=function(){b.setFieldsValue({splitDays:null})},y=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Separar Unidad "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:y,children:Object(h.jsx)(S.a,{style:{background:"#2827CC",borderColor:"#2827CC"},size:"small",icon:Object(h.jsx)(ls.a,{style:{color:"#fff"}}),disabled:"Comprada"===(null===t||void 0===t?void 0:t.unit_state)||"Separada"===(null===t||void 0===t?void 0:t.unit_state)||t.final_date<n,onClick:function(){return o(!0)}})}),Object(h.jsx)(ue.a,{visible:i,onCancel:d,title:y,size:"small",footer:!1,style:{width:350},children:Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:4,span:18,children:Object(h.jsxs)(g.a,Object(j.a)(Object(j.a)({validateMessages:us,form:b},ds),{},{onFinish:x,name:"FormPresupuesto",children:[Object(h.jsx)(g.a.Item,{label:"M\xe1ximo D\xedas de separaci\xf3n",name:"maximumDaysSeparation",rules:[{required:!1,message:"El campo es requerido"}],children:Object(h.jsx)(ut.a,{value:b.getFieldValue("maximumDaysSeparation"),style:{width:"90%"},disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Dias de separaci\xf3n",name:"splitDays",rules:[{required:!0,validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("El campo es requerido")));case 2:if(!(n>b.getFieldValue("maximumDaysSeparation"))){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("No se puede superar el m\xe1ximo de d\xedas")));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(ut.a,{value:b.getFieldValue("splitDays"),style:{width:"90%"}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{style:{backgroundColor:"#52c41a",color:"#fff",marginLeft:"25%"},htmlType:"submit",children:"Separar unidad"})})]}))})})})]})},bs=Object(a.createContext)(),ms=function(e){var t=e.children,n=e.quotes;return Object(h.jsx)(bs.Provider,{value:{quotes:n},children:t})},ps=(n(249),function(e){var t=e.info,n=e.onClose,r=Object(a.useState)(null),c=Object(f.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){o(t)}),[t]);var l=Object(s.d)(),d=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),u=g.a.useForm(),j=Object(f.a)(u,1)[0],b=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.validateFields();case 3:a=e.sent,r={cutoff_date:a.cutoffDate,sale_date:a.datePurchase.format("YYYY-MM-DD"),quotation_id:t.id},l((c=r,i=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se actualizaba"):Object(P.f)("Se ha efectuado la venta correctamente"),l(K());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/sales"),data:c,success:function(e){return ee(e)},postProcessSuccess:i,postProcessError:o}})),O(),n(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Failed:",e.t0);case 13:case"end":return e.stop()}var c,i,o}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),O=function(){j.resetFields()};return Object(h.jsx)(h.Fragment,{children:i&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{validateMessages:{required:"${label} es requerido",number:"El ${label} no puede ser menor a 0",types:{number:"No es un numero v\xe1lido!"}},form:j,onFinish:b,children:[Object(h.jsxs)(oc.b,{className:"descriptionStyle",bordered:!0,style:{width:"80%",margin:"auto"},title:!1,size:"small",column:1,children:[Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Projecto"}),children:i.project_name}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Cliente"}),children:i.name}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"C\xe9dula"}),children:i.identification}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Correo"}),children:i.email}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Tel\xe9fono"}),children:i.phone_number}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Fecha de Compra"}),children:Object(h.jsx)(g.a.Item,{label:null,name:"datePurchase",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(jt.a,{placeholder:"Seleccione una fecha",value:j.getFieldValue("datePurchase"),style:{width:"100%"}})})}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"No. Unidad"}),children:i.label}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"C\xf3digo Fiduciario"}),children:i.fiduciary_code}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"\xc1rea Unidad"}),children:i.square_meters}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Parquedero"}),children:i.parking}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Valor Total"}),children:d.format(i.value_total_unit)}),Object(h.jsx)(oc.b.Item,{label:Object(h.jsx)("strong",{children:"Fecha de Corte"}),children:Object(h.jsx)(g.a.Item,{label:null,name:"cutoffDate",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{value:j.getFieldValue("cutoffDate"),defaultValue:"",style:{width:"100%",height:"35px"},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),Object(h.jsx)(dt.a.Option,{value:0,children:"5 de cada meses"}),Object(h.jsx)(dt.a.Option,{value:1,children:"15 de cada meses"})]})})})]}),Object(h.jsx)(S.a,{style:{background:"#1890ff",color:"#fff",margin:"15px 45%"},htmlType:"submit",children:"Legalizar venta"})]})})})}),fs=function(e){var t=e.data,n=e.onClose,r=Object(a.useState)([]),c=Object(f.a)(r,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){o(t)}),[t]),Object(h.jsx)(h.Fragment,{children:i&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{style:{textAlign:"center",marginBottom:"16px"},children:"Legalizaci\xf3n de venta"}),Object(h.jsx)(ps,{onClose:n,info:i.record})," "]})})},Os=n(637),hs=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=function(){return c(!1)},o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Comprar Unidad "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(S.a,{style:{background:"#5cb85c",borderColor:"#4cae4c"},icon:Object(h.jsx)(Os.a,{style:{color:"#fff"}}),disabled:"Comprada"===e.record.unit_state,onClick:function(){return c(!0)},size:"small"})}),Object(h.jsx)(ue.a,{size:"small",footer:!1,visible:r,backgroundColor:"#40CD0A",title:"Legalizar venta",width:700,onCancel:i,children:Object(h.jsx)(fs,{onClose:i,data:e})})]})},xs=function(){var e=Object(s.d)(),t=(new Date).toISOString().slice(0,10),n=Object(a.useState)(!0);Object(f.a)(n,1)[0];Object(a.useEffect)((function(){e(K())}),[]);var r=Object(d.useHistory)(),c=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.quotation._payload}));Object(a.useEffect)((function(){}),[c]);var i=[Object(j.a)(Object(j.a)({title:"#",dataIndex:"code",key:"code",width:80,align:"center",fixed:"left"},Object(ce.b)("code")),ce.c),Object(j.a)(Object(j.a)({title:"Fecha y hora",dataIndex:"created_at",key:"created_at",width:120,align:"center"},Object(ce.b)("created_at")),ce.c),{title:"V\xe1lida hasta",dataIndex:"final_date",key:"validaHasta",align:"center",width:90},{title:"Cliente",dataIndex:"name",key:"cliente",width:160,render:function(e,t){return o(t)}},Object(j.a)(Object(j.a)({title:"Asesor",dataIndex:"adviser_name",key:"adviser_name",align:"center",width:100},Object(ce.b)("adviser_name")),ce.c),Object(j.a)(Object(j.a)({title:"Proyecto",dataIndex:"project_name",key:"project_name",align:"center",width:120},Object(ce.b)("project_name")),ce.c),{title:"Unidad",dataIndex:"label",key:"unidad",align:"center",width:60},{title:"Valor",dataIndex:"value_total_unit",key:"value_total_unit",align:"center",width:100,render:function(e){return R.sc.format(e)}},{title:"Enviada",dataIndex:"enviada",key:"enviada",align:"center",width:60,render:function(e,t){return l(t)}},{title:"Estado unidad",dataIndex:"unit_state",align:"center",fixed:"right",key:"estadoUnidad",width:90,render:function(e,t){switch(t.unit_state){case"Disponible":return Object(h.jsxs)(H.a,{color:"green",children:[" ",t.unit_state," "]});case"Separada":return Object(h.jsxs)(H.a,{color:"lime",children:[" ",t.unit_state," "]});case"Comprada":return Object(h.jsxs)(H.a,{color:"red",children:[" ",t.unit_state," "]});default:return Object(h.jsxs)(H.a,{color:"white",children:[" ",t.unit_state," "]})}}},{title:"Acciones",key:"actions",fixed:"right",width:150,render:function(e,t){return u(t)}}],o=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("strong",{children:"Nombre:"})," ",Object(h.jsx)("span",{children:e.name})," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Tel\xe9fono:"})," ",Object(h.jsx)("span",{children:e.phone_number})," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Correo:"})," ",Object(h.jsx)("span",{children:e.email})]})},l=function(e){return 1===e.email_sent?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})},u=function(n){var a=function(){var t,a;e((t=n.id,a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,(a=document.createElement("a")).href="".concat(n._payload.path),a.target="_blank",document.body.appendChild(a),a.click();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/quotation/download-quotation/").concat(t),postProcessSuccess:a}}))},c=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Ver/Imprimir "}),i=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "});return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(ms,{quotes:null,children:[Fe(R.Xe)?Object(h.jsx)(ss,{data:n,update_table:function(){e(K())}}):null,"  ",Fe(R.cd)?Object(h.jsx)(hs,{record:n}):null,"  ",Fe(R.gh)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:i,children:Object(h.jsx)(S.a,{disabled:"Comprada"===n.unit_state||(null===n||void 0===n?void 0:n.final_date)<t,type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247",color:"#fff"},size:"small",icon:Object(h.jsx)(le.a,{}),onClick:function(){r.push("/sales/update-quote/".concat(n.id))}})}):null,"  ",Fe(R.Ye)?Object(h.jsx)(js,{props:n}):null,"  ",Fe(R.md)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:c,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){return a()},style:{backgroundColor:"#4C4B99",marginTop:3},icon:Object(h.jsx)(Bi.a,{style:{color:"#fff"}})})}):null,"  ",Object(h.jsx)(Qt,{created_at:n.created_at,name:n.name,updated_at:n.updated_at})]})})};return Object(h.jsx)(Q.a,{columns:i,loading:!1,dataSource:Object(ce.a)(c),scroll:{x:1500,y:300}})},vs=function(){return Ae(R.sd)?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Lista de cotizaciones",extra:[Fe(R.wb)?Object(h.jsx)(o.b,{to:"/sales/new-quotes",children:Object(h.jsx)(S.a,{style:{background:"#1890ff",color:"#fff"},icon:Object(h.jsx)(Ne.a,{}),children:"Nueva cotizaci\xf3n"})}):null]}),Object(h.jsx)(xs,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},ys=function(){return Object(h.jsx)(vs,{})},gs=(n(552),n(605)),_s=Object(a.createContext)(),Ss={},ws=function(e){var t=e.children,n=Object(a.useState)(Ss),r=Object(f.a)(n,2),c=r[0],i=r[1],o={propertyData:c,handlePropertyData:function(e){i(e)},handlePropertyDelete:function(){i({})}};return Object(h.jsx)(_s.Provider,{value:o,children:t})},Cs=_s,Ps=Object(a.createContext)(),Is=[],Es=function(e){var t=e.children,n=Object(a.useState)(Is),r=Object(f.a)(n,2),c=r[0],i=r[1],o={selectedUnits:c,handleSelectedUnit:function(e){if(c.length>2)Object(P.c)("Solo se pueden generar tres cotizacones");else{var t=[].concat(Object(Qi.a)(c),[e]);i(t)}},handleDelete:function(e){var t=Object(Qi.a)(c);i(t.filter((function(t){return t.id!==e})))}};return Object(h.jsx)(Ps.Provider,{value:o,children:t})},Fs=Ps,As=(n(199),{border:"1px solid #bce8f1",borderTop:"none",borderLeft:"none",padding:"9px 0px"}),ks={border:"1px solid #bce8f1",borderLeft:"none",padding:"9px 0px"},Ts={textAlign:"center"},Ns=function(e){var t=e.info,n=Object(a.useContext)(Fs),r=n.selectedUnits,c=n.handleSelectedUnit,i=n.handleDelete,o=Object(a.useState)({}),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(!1),j=Object(f.a)(u,2),b=j[0],m=j[1];Object(a.useEffect)((function(){O(t)||d(t)}),[t]),Object(a.useEffect)((function(){0!==r.length&&(Wi.a.some(r,t)?m(!0):m(!1))}),[r]);var p=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),O=function(e){return 0===Object.keys(e).length};return O(l)?null:Object(h.jsxs)(w.a,{style:{display:"block",width:200,minWidth:200},bordered:!1,className:"card-unit",children:[Object(h.jsxs)("div",{style:ks,children:[" ",Object(h.jsxs)("h6",{style:Ts,children:[" ",l.squareMeter," "]})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsxs)("h6",{style:Ts,children:[" ",l.label]})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:l.unit_state_id})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:l.numberRooms})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:l.bathroomNumber})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:l.numberLevels})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:l.number_floors})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:l.parking_number})]}),Object(h.jsxs)("div",{style:As,children:[" ",Object(h.jsx)("h6",{style:Ts,children:p.format(l.unity_value)})]}),Object(h.jsx)("div",{style:As,children:Object(h.jsx)("h6",{children:Object(h.jsx)(je.a,{style:{paddingLeft:"50%"},onChange:function(e){return function(e){e.target.checked?r.length>2?Object(P.c)("Solo se pueden generar tres cotizacones"):(c(l),m(!0)):(i(t.id),m(!1))}(e)},checked:b})})})]})};function Ds(e){var t=new Date(e),n=t.getMonth(),a=t.getDay(),r=t.getFullYear();return a+" de "+Ho[n]+" de "+r}function Rs(e,t,n,a){return void 0!==a?(parseInt(t)-parseInt(a))*parseFloat(n):parseInt(t)*parseFloat(n)}Ho={0:"Enero",1:"Febrero",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre",10:"Noviembre",11:"Diciembre"},Zo=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2});var Ls,Vs=n(618),qs=function(e){return Object(h.jsx)("div",{style:{display:"block",width:200,minWidth:200},children:Object(h.jsx)(Vs.b,{style:{display:"block",background:"#d9edf7",border:"1px solid #bce8f1",borderBottom:"none"},size:"small",bordered:!0,dataSource:Object(ce.a)(e.data),renderItem:function(e){return Object(h.jsx)($i.a,{strong:!0,children:Object(h.jsx)(Vs.b.Item,{style:{borderBottom:"1px solid #bce8f1",display:"block",textAlign:"end"},children:Object(h.jsxs)(T.a,{children:[" ",Object(h.jsx)(N.a,{children:e})," "]})})})}})})},Ms=["m2","Etiqueta","Disponibles","No. Habitaciones","No. Ba\xf1os","No. Niveles","Piso","Parqueadero","Valor"," "],Us=function(e){var t=e.visible,n=e.handleOk,r=e.handleCancel,c=e.data,i=Object(a.useState)([]),o=Object(f.a)(i,2),s=o[0],l=o[1];Object(a.useEffect)((function(){Array.isArray(c)||d()}),[c]);var d=function(){var e,t=c.unit,n=!1,a=c.payment_relationship_settings,r=c.sale_parameters;t.map((function(t){var i,o;i=t.parking,o=c.sale_parameters,e=1===i?parseInt(o.simple_parking_value):parseInt(o.double_parking_value),0!==parseInt(c.finish_kit_value)&&(n=!0),Object.assign(t,{squareMeter:c.area,nameProject:c.name,fechaDeConstruccion:c.fechaDeConstruccion,projectId:c.id,customerId:c.customerId,project_state:c.project_state,bathroomNumber:c.bathroom_number,numberRooms:c.number_rooms,numberLevels:c.number_levels,estimatedDeliveryDate:c.estimated_delivery_date,finishKitValue:c.finish_kit_value,valueOtherAdditional:c.value_other_additional,initialFeePercentage:null===a||void 0===a?void 0:a.initial_fee_percentage,initialFeeFinanceInConstructionPercentage:null===a||void 0===a?void 0:a.initial_fee_finance_in_construction_percentage,initialFeePromiseSignatureTrustPercentage:null===a||void 0===a?void 0:a.initial_fee_promise_signature_trust_percentage,bankFinancingPercentage:null===a||void 0===a?void 0:a.bank_financing_percentage,maximumNumberMonthsFinanceInitialFee:null===a||void 0===a?void 0:a.maximum_number_months_finance_initial_fee,separationValue:null===a||void 0===a?void 0:a.separation_value,parkingValue:e,interestOnPlansPercentage:null===r||void 0===r?void 0:r.interest_on_plans_percentage,interestInConstructionPercentage:null===r||void 0===r?void 0:r.interest_in_construction_percentage,check:n,bonusView:t.bonus_view,squareMeterValue:t.quote_meter_value,parking:t.parking,Coupons:c.Cupones,discountPolicy:c.discount_policy})})),l(t)};return s?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ue.a,{okText:"Cerrar",visible:t,onOk:n,onCancel:r,title:c.name,width:"75%",children:Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)(qs,{data:Ms}),s.map((function(e,t){return Object(h.jsx)(Ns,{info:e},t)}))]})},s)}):null},zs=function(e){var t,n,a,r,c=e.visible,i=e.handleOk,o=e.handleCancel,s=e.data;return Object(h.jsxs)(ue.a,{okText:"Cerrar",visible:c,onOk:i,onCancel:o,title:s.name,width:1100,children:[Object(h.jsx)("h4",{children:"Im\xe1genes"}),Object(h.jsx)("div",{style:{display:"flex",flexFlow:"wrap"},children:(null===(t=s.images)||void 0===t?void 0:t.length)>0?null===(n=s.images)||void 0===n?void 0:n.map((function(e){return Object(h.jsx)("div",{style:{width:"320px",margin:10,padding:5,border:"1px solid navy",borderColor:"navy"},children:Object(h.jsx)("a",{href:e.path,target:"_blank",rel:"noreferrer",children:Object(h.jsx)("img",{style:{backgroundSize:"cover"},width:"290px",src:e.path,alt:""})})})})):Object(h.jsx)("h6",{children:"No hay im\xe1genes cargadas."})}),Object(h.jsx)("hr",{}),Object(h.jsx)("h4",{children:"Planos"}),Object(h.jsx)("div",{style:{display:"flex",overflow:"auto "},children:(null===(a=s.blueprints)||void 0===a?void 0:a.length)>0?null===(r=s.blueprints)||void 0===r?void 0:r.map((function(e){return Object(h.jsx)("a",{href:e.path,target:"_blank",rel:"noreferrer",children:Object(h.jsx)("img",{width:"300",height:"300",src:e.path,alt:""})})})):Object(h.jsx)("h6",{children:"No hay planos cargados."})})]})},Gs=n(638),Bs=function(e){var t=e.project,n=e.customerId,r=Object(a.useState)(t),c=Object(f.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)([]),l=Object(f.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(f.a)(j,2),m=b[0],p=b[1],O=Object(a.useState)(!1),x=Object(f.a)(O,2),v=x[0],y=x[1],g=Object(a.useState)([]),_=Object(f.a)(g,2),C=_[0],P=_[1];Object(a.useEffect)((function(){u(t),E()}),[t]);var I=function(e){switch(e){case 1:return"Sobre Planos";case 2:return"En Construcci\xf3n";case 3:return"Finalizado"}},E=function(){var e=t.unit_type;e.map((function(e){return Object.assign(e,{estimated_delivery_date:t.estimated_delivery_date,name:t.name,fechaDeConstruccion:t.start_build_date,customerId:n,sale_parameters:t.sale_parameter,total_units_available:e.unit.length,total_units_separated:e.units_number-e.unit.length,payment_relationship_settings:t.payment_relationship_setting,discount_policy:t.discount_policy,project_state:I(parseInt(t.project_state_id)),Cupones:t.Cupones}),e})),o(e)},F=new Intl.NumberFormat("es-CO",{minimumFractionDigits:2}),A=[{title:"Tipo unidad / \xe1rea",dataIndex:"id",key:"unitType",align:"center",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S.a,{onClick:function(){!function(e){p(!0),P(e)}(t)},type:"primary",disabled:0===t.total_units_available,children:F.format(t.area)})})}},{title:"Disponibles / Separadas",dataIndex:"separateAvailable",key:"separateAvailable",align:"center",render:function(e,t){return Object(h.jsx)("h6",{children:"".concat(t.total_units_available," / ").concat(t.total_units_separated)})}},{title:"Nivel de ingresos",dataIndex:"incomeLevel",key:"incomelevel",align:"center",render:function(e,t){return Object(h.jsxs)("h6",{children:[" ",F.format(t.income_level)," "]})}},{title:"Adjuntos",dataIndex:"Attachments",align:"center",key:"Attachments",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(S.a,{type:"primary",onClick:function(){!function(e){P(e),y(!0)}(t)},children:[" ",Object(h.jsx)(nc.a,{})," "]})})}}];return Array.isArray(d)?null:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{headStyle:{color:"#31708f",backgroundColor:"#d9edf7",borderColor:"#bce8f1"},title:d.name,style:{minWidth:600,marginRight:20},children:[Object(h.jsx)(Q.a,{style:{width:"100%"},pagination:!1,dataSource:Object(ce.a)(i),columns:A,bordered:!0,title:function(){return Object(h.jsx)("h6",{style:{textAlign:"left"},children:"Estado"})},footer:function(){return Object(h.jsx)("div",{style:{height:40},children:Object(h.jsxs)(H.a,{style:{float:"left"},color:"black",children:[Object(h.jsx)(Gs.a,{})," Haga clic aqu\xed y seleccione la unidad deseada"]})})}}),Object(h.jsx)(zs,{data:C,visible:v,handleOk:function(){y(!1)},handleCancel:function(){y(!1)}}),Object(h.jsx)(Us,{visible:m,handleOk:function(){p(!1)},handleCancel:function(){p(!1)},data:C})]})})},Ys=function(e){var t=e.projects,n=e.customerId;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Proyectos disponibles",style:{border:"2px solid #bce8f1"},children:Object(h.jsx)("div",{className:"wrapper",children:t.map((function(e){return Object(h.jsx)(Bs,{project:e,customerId:n},e)}))})})})},Js=function(e){var t=e.project,n=e.initialFeeState,a={minWidth:105,padding:0};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(oc.b,{size:"small",title:"Datos del inmueble",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(h.jsx)(oc.b.Item,{label:"Proyecto",children:t.project}),Object(h.jsx)(oc.b.Item,{label:"m\xb2",children:t.squareMeter}),Object(h.jsx)(oc.b.Item,{label:"Etiqueta",children:t.label})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(oc.b,{size:"small",title:"Valor inmueble",bordered:!0,column:{xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Valor m\xb2",children:Zo.format(t.squareMeterValue)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Prima de vista",children:Zo.format(t.sightPremium)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Prima de altura por m\xb2",children:Zo.format(t.heightPremiumPerMeter)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,className:"valor",label:"Valor parcial unidad",children:Zo.format(t.partialValueUnit)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Valor parqueadero",children:Zo.format(t.parkingValue)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Valor terraza/ cuarto \xfatil/ otros",children:Zo.format(t.valueOthers)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Valor kit acabados",children:Zo.format(t.FinishedKitValue)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,className:"valor",label:"Valor total unidad",children:Zo.format(t.totalUnitValue)})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(oc.b,{title:"Cuota inicial",size:"small",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:2},children:[Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"C.I. (".concat(n.initialFeePercentage,"%)"),children:Zo.format(n.initialFee)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"Separaci\xf3n",children:Zo.format(n.separation)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"C.I. No financiada (".concat(n.initialFeeNotFundedPercentage,"%)"),children:Zo.format(n.initialFeeNotFunded)}),Object(h.jsx)(oc.b.Item,{contentStyle:a,label:"C.I. financiada (".concat(n.initialFeeFinancedPercentage,"%)"),children:Zo.format(n.initialFeeFinanced)})]}),Object(h.jsx)("br",{})]})},Hs=function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),o=Object(f.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(0),u=Object(f.a)(d,2),b=u[0],m=u[1],p=e.modified_values,O=e.calculatePor,x=e.calculatePresentValueByTheClient,v=Li().CalculateDelivery;Object(a.useEffect)((function(){var t=e.dataTable,n=[];if(r!==[])for(var a=0;a<(null===t||void 0===t?void 0:t.length);a++){var i,o;(null===(i=r[a])||void 0===i?void 0:i.value)!==(null===(o=t[a])||void 0===o?void 0:o.value)&&n.push(t[a])}n.length>0&&(p(n),l(n)),c(t)}),[e]),Object(a.useEffect)((function(){g()}),[r]),Object(a.useEffect)((function(){x(r,b)}),[b]);var y=[{title:"N\xfamero de cuota",dataIndex:"month",width:80,render:function(e,t){return w(t)},align:"center"},{title:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("lebel",{children:"Valor\xa0\xa0\xa0\xa0\xa0"}),Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",children:Object(h.jsx)(S.a,{size:"small",onClick:function(){_()},type:"danger",icon:Object(h.jsx)(Xt.a,{})})})]}),dataIndex:"value",width:80,render:function(e,t){return P(t)},align:"center"},{title:"Porcentaje",dataIndex:"porcentaje",width:80,render:function(e,t){return I(t)},align:"center"}],g=function(){var t;t=0==e.trueUnitValue?e.valueUnit:e.trueUnitValue;var n=v(r,t);return m(n),n},_=function(){var t=Object(Qi.a)(r);t.forEach((function(t,n){"Entrega"!==t.month?(t.porcentaje=O(0,e.trueUnitValue),t.value=0,C(n,0)):(t.value=g(),t.porcentaje=O(g(),e.trueUnitValue))})),c(t)},w=function(e){return Object(h.jsx)(h.Fragment,{children:"C.I. No Financiada"===(null===e||void 0===e?void 0:e.month)||"Entrega"===(null===e||void 0===e?void 0:e.month)?e.month:Object(h.jsxs)("div",{style:{width:"100%",display:"flex",textAlign:"center"},children:[Object(h.jsx)("div",{style:{width:"30%",borderRight:"1px solid #f0f0f0"},children:null===e||void 0===e?void 0:e.key}),Object(h.jsx)("div",{style:{width:"70%"},children:null===e||void 0===e?void 0:e.month})]})})},C=function(e,t){var n=Object(Qi.a)(r);if(0===s.length){var a=[{month:n[e].month,value:parseFloat(t)}];p(a),l(a)}else{var c=s,i=!1;if(c.forEach((function(a){a.month===n[e].month&&(a.value=parseFloat(parseFloat(t).toFixed(2)),i=!0)})),!i){var o={month:n[e].month,value:t};c.push(o)}p(c),l(c)}},P=function(t){var n,a=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Limpiar "});return Object(h.jsx)(h.Fragment,{children:"Entrega"===(null===t||void 0===t?void 0:t.month)?Zo.format(b):Object(h.jsxs)(h.Fragment,{children:[function(){},Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onChange:function(n){return function(t,n){var a=Object(Qi.a)(r);a.forEach((function(a){a.key===n.key&&(g(),a.month,a.porcentaje=O(t,e.trueUnitValue),a.value=t)})),a.forEach((function(t){"Entrega"===t.month&&(t.porcentaje=O(g(),e.trueUnitValue))})),C(n.key,n.value),c(a)}(n,t)},style:{width:"80%"},name:null===t||void 0===t?void 0:t.key,value:parseFloat(null===(n=r[null===t||void 0===t?void 0:t.key])||void 0===n?void 0:n.value),size:"small"})),Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){!function(t){var n=Object(Qi.a)(r);n.forEach((function(n){n.key===t&&(g(),n.porcentaje=O(0,e.trueUnitValue),n.value=0)})),n.forEach((function(t){"Entrega"===t.month&&(t.porcentaje=O(g(),e.trueUnitValue))})),C(t,0),c(n)}(null===t||void 0===t?void 0:t.key)},type:"danger",icon:Object(h.jsx)(Xt.a,{})})})]})})},I=function(e){return Object(h.jsx)(h.Fragment,{children:parseFloat(null===e||void 0===e?void 0:e.porcentaje).toFixed(2)+" %"})};return 0===r.length?null:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q.a,{pagination:!1,title:function(){return""},columns:y,bordered:!0,dataSource:Object(ce.a)(r),size:"small"})})},Zs=[{title:"N\xfamero de Cuota",dataIndex:"month",width:80,render:function(e,t){return Ws(t)},align:"center"},{title:"Valor",className:"column-money",dataIndex:"value",width:80,render:function(e,t){return Ks(t)},align:"center"},{title:"Porcentaje",dataIndex:"porcentaje",width:80,render:function(e,t){return Xs(t)},align:"center"}],Qs=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),Ks=function(e){return Object(h.jsx)(h.Fragment,{children:Qs.format(e.value)})},Ws=function(e){return Object(h.jsx)(h.Fragment,{children:"C.I. No Financiada"===e.month||"Entrega"===e.month?e.month:Object(h.jsxs)("div",{style:{width:"100%",display:"flex",textAlign:"center"},children:[Object(h.jsx)("div",{style:{width:"30%",borderRight:"1px solid #f0f0f0"},children:e.key}),Object(h.jsx)("div",{style:{width:"70%"},children:e.month})]})})},Xs=function(e){return Object(h.jsx)(h.Fragment,{children:parseFloat(e.porcentaje).toFixed(2)+" %"})},$s=r.a.memo((function(e){var t=e.amountOfFees,n=Object(a.useState)(t),r=Object(f.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(t)}),[t]),Object(h.jsx)(Q.a,{bordered:!0,title:function(){return""},columns:Zs,pagination:!1,size:"small",dataSource:Object(ce.a)(c)})})),el=function(e){var t=e.modified_values,n=e.calculatePor,a=e.financedFee,r=e.propertyData,c=e.valorQuotes,i=e.formOfPaymentProposedByTheProject,o=e.finalValueProposedByTheClient,s=e.finalValuesProposedByTheProject,l=e.paymentMethodProposedByTheClient,d=e.calculatePresentValueByTheClient;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsxs)(N.a,{span:12,children:[Object(h.jsx)(oc.b,{title:"Forma de pago propuesta por el proyecto",column:{xxl:2,xl:1,lg:1,md:1,sm:1,xs:1}}),Object(h.jsx)(w.a,{style:{margin:10},children:Object(h.jsx)($s,{amountOfFees:i})})]}),Object(h.jsxs)(N.a,{span:12,children:[Object(h.jsx)(oc.b,{title:"Foma de pago propuesta por el cliente",column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}}),Object(h.jsx)(w.a,{style:{margin:10},children:Object(h.jsx)(Hs,{dataTable:l,modified_values:t,calculatePor:n,valueShare:a,valueUnit:r.valorTotal,valueMonth:c,calculatePresentValueByTheClient:d,trueUnitValue:o.valueOfTheUnitProposed})})]})]}),Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(oc.b,{style:{marginTop:15,width:"80%"},size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[Object(h.jsx)(oc.b.Item,{label:"Valor de la unidad",children:Zo.format(s.valueOfTheUnitProposedByTheProject)}),Object(h.jsx)(oc.b.Item,{label:"Valor presente",children:Zo.format(s.presentValueGivenByTheProject)})]})}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(oc.b,{style:{marginTop:15,width:"80%"},size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[Object(h.jsx)(oc.b.Item,{label:"Valor de la unidad",children:Zo.format(o.valueOfTheUnitProposed)}),Object(h.jsx)(oc.b.Item,{label:"Valor presente",children:Zo.format(o.presentValueGiven)}),0===o.financialDiscountOrIncrease?Object(h.jsxs)(oc.b.Item,{label:"Descuento financiero",children:[" ",Zo.format(0)," "]}):o.financialDiscountOrIncrease<0?Object(h.jsxs)(oc.b.Item,{className:"valor2",label:"Incremento financiero",children:[" ",Zo.format(-1*o.financialDiscountOrIncrease)," "]}):o.financialDiscountOrIncrease>0?Object(h.jsxs)(oc.b.Item,{className:"valor3",label:"Descuento financiero",children:[" ",0==o.financialDiscountOrIncrease.toFixed(2)?Zo.format(0):Zo.format(-1*o.financialDiscountOrIncrease)," "]}):void 0,Object(h.jsx)(oc.b.Item,{label:"Descuento acabados",children:r.check?Zo.format(0):Zo.format(r.finishKitValue)}),0!==r.valorCupon?Object(h.jsx)(oc.b.Item,{label:"Descuento cupones",children:Zo.format(r.valorCupon)}):null]})})]})]})},tl={0:"Ene-",1:"Feb-",2:"Mar-",3:"Abr-",4:"May-",5:"Jun-",6:"Jul-",7:"Ago-",8:"Sep-",9:"Oct-",10:"Nov-",11:"Dic-"},nl=function(){var e=Object(a.useContext)(Cs),t=e.propertyData,n=(e.handlePropertyData,Object(a.useState)({project:"",squareMeter:0,label:"",squareMeterValue:0,sightPremium:0,heightPremiumPerMeter:0,partialValueUnit:0,parkingValue:0,valueOthers:0,FinishedKitValue:0,totalUnitValue:0})),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)({presentValueGivenByTheProject:0,valueOfTheUnitProposedByTheProject:0}),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)({presentValueGiven:0,valueOfTheUnitProposed:0,financialDiscountOrIncrease:0,discountFinishes:0}),b=Object(f.a)(u,2),m=b[0],p=b[1],O=Object(a.useState)({initialFee:0,initialFeePercentage:0,separation:0,initialFeeNotFunded:0,initialFeeNotFundedPercentage:0,initialFeeFinanced:0,initialFeeFinancedPercentage:0}),h=Object(f.a)(O,2),x=h[0],v=h[1],y=Object(a.useState)({mes:0,year:0,mesConstruccion:0,mesPlano:0,mesTotal:0}),g=Object(f.a)(y,2),_=g[0],S=g[1],w=Object(a.useState)([{key:0,month:"",value:0,porcentaje:0,tipo:""}]),C=Object(f.a)(w,2),P=C[0],I=C[1],E=Object(a.useState)([{key:0,month:"",value:0,porcentaje:0,tipo:""}]),F=Object(f.a)(E,2),A=F[0],k=F[1],T=Object(a.useState)({flatTax:0,constructionTax:0}),N=Object(f.a)(T,2),D=N[0],R=N[1];Object(a.useEffect)((function(){V(),M(),q(),L()}),[t]),Object(a.useEffect)((function(){z(),G()}),[x,_]),Object(a.useEffect)((function(){B()}),[x,P,D]);var L=function(){R({flatTax:parseFloat(t.interestOnPlansPercentage)/100,constructionTax:parseFloat(t.interestInConstructionPercentage)/100})},V=function(){i({project:t.nameProject,squareMeter:t.squareMeter,label:t.label,squareMeterValue:t.squareMeterValue,sightPremium:t.bonus_view,heightPremiumPerMeter:t.bonus_height,partialValueUnit:t.SubTotal,parkingValue:t.parkingValue,valueOthers:t.valueOtherAdditional,FinishedKitValue:t.finishKitValue,totalUnitValue:t.valorTotal})},q=function(){var e=function(e,t,n){var a=new Date,r={mes:a.getMonth()+1,year:a.getFullYear(),mesConstruccion:0,mesPlano:0,mesTotal:0},c=new Date(e),i=new Date(t),o=12*a.getFullYear()+a.getMonth()-(12*c.getFullYear()+c.getMonth()),s=12*i.getFullYear()+i.getMonth()-(12*a.getFullYear()+a.getMonth());return o>0?r.mesConstruccion=o:r.mesPlano=Math.abs(o),r.mesTotal=s>n?n:s,r}(t.fechaDeConstruccion,t.estimatedDeliveryDate,t.maximumNumberMonthsFinanceInitialFee);S(e)},M=function(){var e=t.valorTotal*(parseInt(t.initialFeePercentage)/100),n=t.valorTotal*(parseInt(t.initialFeePromiseSignatureTrustPercentage)/100),a=t.valorTotal*(parseInt(t.initialFeeFinanceInConstructionPercentage)/100);v({initialFee:e,initialFeePercentage:parseInt(t.initialFeePercentage),separation:t.separationValue,initialFeeNotFunded:n,initialFeeNotFundedPercentage:parseInt(t.initialFeePromiseSignatureTrustPercentage),initialFeeFinanced:a,initialFeeFinancedPercentage:parseInt(t.initialFeeFinanceInConstructionPercentage)})},U=function(e,t){var n=100*parseInt(e)/parseInt(t);return 0===t||0===e||0===t?0:n},z=function(){for(var e=Object(j.a)({},_),n=x.initialFeeFinanced/e.mesTotal,a=U(n,t.valorTotal),r=[{key:0,month:"C.I. No Financiada",value:x.initialFeeNotFunded,porcentaje:t.initialFeePromiseSignatureTrustPercentage,tipo:e.mesPlano>0?"Presente":"Construccion"}],c=1;c<=e.mesTotal;c++)e.mes>11&&(e.mes=0,e.year++),r=r.concat({key:c,month:tl[e.mes]+e.year,value:parseFloat(n),porcentaje:parseFloat(a).toFixed(2),tipo:c>e.mesPlano?"Construccion":"Presente"}),e.mes++;r=r.concat({key:e.mesTotal+1,month:"Entrega",value:t.valorTotal-x.initialFee,porcentaje:t.bankFinancingPercentage,tipo:r[r.length-1].tipo}),I(JSON.parse(JSON.stringify(r)))},G=function(){for(var e=Object(j.a)({},_),n=x.initialFeeFinanced/e.mesTotal,a=U(n,t.valorTotal),r=[{key:0,month:"C.I. No Financiada",value:x.initialFeeNotFunded,porcentaje:t.initialFeePromiseSignatureTrustPercentage,tipo:e.mesPlano>0?"Presente":"Construccion"}],c=1;c<=e.mesTotal;c++)e.mes>11&&(e.mes=0,e.year++),r=r.concat({key:c,month:tl[e.mes]+e.year,value:parseFloat(parseFloat(n).toFixed(2)),porcentaje:parseFloat(a).toFixed(2),tipo:c>e.mesPlano?"Construccion":"Presente"}),e.mes++;r=r.concat({key:e.mesTotal+1,month:"Entrega",value:Fi(l.presentValueGivenByTheProject,r,void 0,D.flatTax,D.constructionTax),porcentaje:t.bankFinancingPercentage,tipo:r[r.length-1].tipo}),k(JSON.parse(JSON.stringify(r)))},B=function(){var e=Ai(P,void 0,D.flatTax,D.constructionTax);d({presentValueGivenByTheProject:e,valueOfTheUnitProposedByTheProject:t.valorTotal})};return{project:c,initialFeeState:x,formOfPaymentProposedByTheProject:P,finalValuesProposedByTheProject:l,paymentMethodProposedByTheClient:A,finalValueProposedByTheClient:m,dataDates:_,calculatePresentValueByTheClient:function(e){var n=Fi(l.presentValueGivenByTheProject,e,void 0,D.flatTax,D.constructionTax),a=Ai(e,n,D.flatTax,D.constructionTax),r=null===e||void 0===e?void 0:e.filter((function(e){return"Entrega"!==e.month})),c=parseFloat(Di(r)+n),i=Ni(l.valueOfTheUnitProposedByTheProject,c);p({presentValueGiven:a,valueOfTheUnitProposed:c,financialDiscountOrIncrease:i,discountFinishes:t.valorCupon})}}},al=function(){var e=Object(a.useContext)(Cs),t=e.propertyData,n=e.handlePropertyData,r=nl(),c=r.project,i=r.initialFeeState,o=r.formOfPaymentProposedByTheProject,s=r.finalValuesProposedByTheProject,l=r.dataDates,d=r.paymentMethodProposedByTheClient,u=r.finalValueProposedByTheClient,j=r.calculatePresentValueByTheClient,b=Object(a.useState)({}),m=Object(f.a)(b,2),p=m[0],O=m[1];Object(a.useEffect)((function(){x()}),[]),Object(a.useEffect)((function(){v()}),[p]),Object(a.useEffect)((function(){x()}),[t,i,u]);var x=function(){var e=i.initialFeeFinanced/l.mesTotal,n={amount_dues:l.mesTotal,unit_id:t.id,value:parseFloat(parseFloat(e).toFixed(2)),discounts:t.discounts,cupones:t.cupones,modified_values:p.modified_values?p.modified_values:[],finishes_included:t.check?1:0,value_m2:t.ValorM2,value_total_unit:t.valorTotal,value_discounts:t.valorDescuento,value_coupons:t.valorCupon,value_initial_unit:t.ValorInicial,initial_fee_value:i.initialFee,total_unfunded_initial_fee_value:i.initialFeeNotFunded,total_funded_initial_fee_value:i.initialFeeFinanced,total_funded_fee_value:o[o.length-1].value,value_presented:parseInt(u.presentValueGiven)};O(n)},v=function(){Object.assign(t,{response:p}),n(t)},y=i.initialFeeFinanced/l.mesTotal;return v(),Object(h.jsxs)(w.a,{style:{border:"2px solid #bce8f1"},children:[Object(h.jsx)(Js,{project:c,initialFeeState:i}),Object(h.jsx)(el,{propertyData:t,financedFee:i.initialFeeFinanced,calculatePor:function(e,t){var n=100*parseInt(e)/parseInt(t);return 0===t||0===e||0===t?0:n},modified_values:function(e){var t=p;t.modified_values=e,O(t)},valorQuotes:y,formOfPaymentProposedByTheProject:o,finalValuesProposedByTheProject:s,paymentMethodProposedByTheClient:d,calculatePresentValueByTheClient:j,finalValueProposedByTheClient:u}),Object(h.jsx)(J.a,{})]})},rl=(n(553),function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/coupon/").concat(e),data:t,success:function(e,t){return sl(e,t)},postProcessSuccess:n,postProcessError:a}}}),cl=function(){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/coupon"),success:function(e){return ol(e)}}}},il=function(e){return{type:R.n,payload:e}},ol=function(e){return{type:R.wc,payload:e}},sl=function(e,t){return{type:R.zg,payload:{couponId:e,data:t}}},ll=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),dl=function(e){var t=e.ProjectId,n=e.CustomerId,r=e.Precie,c=e.Discoun,i=e.dataSource,o=Object(s.d)(),l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)([]),O=Object(f.a)(b,2),v=O[0],y=O[1],g=[];Object(a.useEffect)((function(){return I()}),[]);var _=[{title:"C\xf3digo",width:20,dataIndex:"code",key:"code"},{title:"Fecha cencimiento",width:30,dataIndex:"expiration_code",key:"expiration_code"},{title:"Tipo descuento",width:20,dataIndex:"discount_type",key:"discount_type",render:function(e,t){return S(t)}},{title:"Total a descontar",width:20,dataIndex:"valueDiscount",key:"valueDiscount",render:function(e,t){return w(t)}},{title:"Acciones",width:20,dataIndex:"",key:"",render:function(e,t){return C(t)}}],S=function(e){switch(e.discount_type){case 1:default:return"Valor total";case 2:return"Porcentaje"}},w=function(e){return ll.format(e.valueDiscount)},C=function(e){var t=new Date(e.expiration_code),n=new Date;return Object(h.jsx)(je.a,{style:{paddingLeft:"50%"},onChange:function(t){return P(e,t)},disabled:n>t})},P=function(e,t){var n,a=e.valueDiscount;t.target.checked?g.push(e.key):(g.forEach((function(t,a){t.id===e.key&&(n=a)})),g.splice(n,1)),c(a,e.key,t.target.checked,"Cupon")},I=function(){var e,a,c,s=new FormData,l=[];s.append("project_id",t),s.append("customer_id",n),void 0!==i?(i.forEach((function(e){l.push({key:e.id,code:e.code,expiration_code:e.expiration_code,discount_type:e.discount_type,valueDiscount:1===parseInt(e.discount_type)?e.discount_value:r*(e.discount_percentage/100)})})),y(l),j(!0)):o((e=s,a=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent._payload.forEach((function(e){l.push({key:e.id,code:e.code,expiration_code:e.expiration_code,discount_type:e.discount_type,valueDiscount:1===e.discount_type?e.discount_value:r*(e.discount_percentage/100)})})),y(l),j(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/coupon/filter-coupons"),data:e,postProcessSuccess:a,postProcessError:c}}))};return u?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q.a,{style:{width:"100%"},pagination:!1,columns:_,dataSource:v,bordered:!0})}):Object(h.jsx)(x,{})},ul={1:"Valor m2",2:"Valor total"},jl=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),bl=function(e){var t=e.Project,n=e.Discoun,a=[],r=[{title:"Pol\xedtica",width:120,dataIndex:"dates"},{title:"Tipo descuento",width:20,dataIndex:"discountType"},{title:"Descuento",width:20,dataIndex:"discount"},{title:"Acciones",width:10,render:function(e,t){return c(t)}}],c=function(e){return Object(h.jsx)(je.a,{style:{paddingLeft:"50%"},onChange:function(t){return i(e,t)}})},i=function(e,r){var c,i,o,s,l,d=0;r.target.checked?(null===(i=t.discountPolicy)||void 0===i||i.forEach((function(t){e.key===t.id&&(a.push(e.key),d=t.amount)})),null===(o=t.discount_policy)||void 0===o||o.forEach((function(t){e.key===t.id&&(a.push(e.key),d=t.amount)}))):(null===(s=t.discountPolicy)||void 0===s||s.forEach((function(t){e.key===t.id&&(d=t.amount)})),null===(l=t.discount_policy)||void 0===l||l.forEach((function(t){e.key===t.id&&(d=t.amount)})),a.forEach((function(t,r){t.id===e.key&&(c=r,n(t.amount,a))})),a.splice(c,1));n(d,e.key,r.target.checked,e.discountType)},o=[];return function(){var e,n;void 0!==t&&(null===(e=t.discountPolicy)||void 0===e||e.forEach((function(e){o=o.concat({key:e.id,dates:"Desde la "+parseInt(e.lower_limit)+"\xba hasta la "+parseInt(e.upper_limit)+"\xba unidad vendida",discountType:ul[e.discount_type],discount:jl.format(parseInt(e.amount))})})),null===(n=t.discount_policy)||void 0===n||n.forEach((function(e){o=o.concat({key:e.id,dates:"Desde la "+parseInt(e.lower_limit)+"\xba hasta la "+parseInt(e.upper_limit)+"\xba unidad vendida",discountType:ul[e.discount_type],discount:jl.format(parseInt(e.amount))})})))}(),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q.a,{style:{width:"90%"},pagination:!1,columns:r,dataSource:Object(ce.a)(o),bordered:!0})})},ml=n(334),pl={borderRadius:"10px",width:"90%",fontSize:"12px",margin:"-5px 0px 0px 9px"},fl=function(e){var t=e.dataSource,n=Object(a.useContext)(Cs).handlePropertyData,r=Object(a.useContext)(Fs).handleDelete,c=Object(a.useState)(t.check),i=Object(f.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)(null===t||void 0===t?void 0:t.unity_value),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(!1),m=Object(f.a)(b,2),p=m[0],O=m[1],x=Object(a.useState)(!1),v=Object(f.a)(x,2),y=v[0],g=v[1],_=Object(a.useState)(!t.check),C=Object(f.a)(_,2),P=C[0],I=C[1],E=Object(a.useState)(t.squareMeterValue),F=Object(f.a)(E,2),A=F[0],k=F[1],T=Object(a.useState)(0),N=Object(f.a)(T,2),D=N[0],R=N[1],L=Object(a.useState)(0),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(a.useState)(0),z=Object(f.a)(U,2),G=z[0],B=z[1],Y=Object(a.useState)(0),J=Object(f.a)(Y,2),Z=J[0],Q=J[1],K=Object(a.useState)(t),W=Object(f.a)(K,2),X=W[0],$=W[1];Object(a.useEffect)((function(){R(Rs(t.bonus_height,t.squareMeterValue,t.squareMeter))}),[]);Object(a.useEffect)((function(){}),[o,t]),Object(a.useEffect)((function(){}),[D]);var ee,te=function(e,n,a,r){var c=X,i=parseFloat(e)*parseFloat(t.squareMeter),s=parseFloat(q)-i;if("Valor m2"===r){var l=[];if(c.discounts&&(l=c.discounts),l.push(n),c.discounts=l,a){var d=A,b=q+i;k(d-=e),M(b),j(u-b),P||I(!0),R(Rs(t.bonus_height,t.squareMeterValue,t.squareMeter,e))}else{var m=A;m+=parseFloat(e),j(u+i),M(s),k(m),o&&0===s&&0===Z&&0===G&&I(!1)}}if("Valor total"===r){var p=[];if(c.discounts&&(p=c.discounts),p.push(n),c.discounts=p,a){var f=parseInt(q)+parseInt(e);B(parseInt(e)),M(parseInt(f)),j(u-parseInt(e)),P||I(!0)}else{var O=q-e,h=G-e;Number.isNaN(h)&&(h=0),o&&0===O&&0===h&&0===Z&&I(!1),B(h),j(u+parseInt(e)),M(O)}}if("Cupon"===r){var x=[];if(c.cupones&&(x=c.cupones),x.push(n),c.cupones=x,a){var v=Z;v+=parseInt(e),j(u-parseInt(e)),Q(parseInt(v)),P||I(!0)}else{var y=Z;y-=parseInt(e),j(u+parseInt(e)),Q(parseInt(y)),o&&0===q&&0===y&&0===G&&I(!1)}}$(c)},ne=function(){O(!1)},ae=function(){g(!1)},re=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{headStyle:{color:"#31708f",backgroundColor:"#d9edf7",borderColor:"#bce8f1"},title:t.nameProject,extra:Object(h.jsx)(Wt.a,{title:"\xbfEstas seguro?",onConfirm:function(){r(t.id)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",danger:!0})}),actions:[Object(h.jsx)(S.a,{onClick:function(){var e=Wi.a.cloneDeep(X);e.ValorM2=A,e.SubTotal=D,e.check=o,e.ValorInicial=null===t||void 0===t?void 0:t.unity_value,e.valorDescuento=q,e.valorCupon=Z,e.valorTotal=u,n(e)},icon:Object(h.jsx)(Ut.a,{})})],className:"container card-selected",children:Object(h.jsxs)("section",{className:"grid-selected-item",children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Tipo de unidad"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsxs)("h6",{children:[t.squareMeter," m\xb2"]})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Etiqueta"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:t.label})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Fecha estimada de entrega"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Ds(t.estimatedDeliveryDate)})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Habitaciones"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:t.numberRooms})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Ba\xf1os"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:t.bathroomNumber})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Parqueadero"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsxs)("h6",{children:[t.parking_number," ",(ee=t.parking,"1"===ee?"Sencillo":"Doble")," "]})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Valor m\xb2"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.squareMeterValue)})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Valor parqueadero"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.parkingValue)})," "]}),"0.00"!==t.finishKitValue?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Valor kit de acabados"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.finishKitValue)})," "]})]}):null,Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Valor Terraza/ cuarto \xfatil/ otros"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.valueOtherAdditional)})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Prima Vista"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.bonus_view)})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Prima Altura por m2"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.bonus_height)})," "]}),"0.00"!==t.finishKitValue?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Incluye acabados"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)(je.a,{style:{paddingLeft:"50%"},onChange:function(e){return function(e){var n,a=parseFloat(t.finishKitValue),r=parseFloat(u);e.target.checked?(s(!0),n=r+a,0===q&&I(!1)):(n=r-a,I(!0),s(!1)),j(n)}(e)},checked:o})})," "]})]}):null,Object(h.jsx)("div",{className:"item",children:Object(h.jsx)(H.a,{style:pl,color:"black",children:Object(h.jsxs)("span",{children:["Haga clic aqu\xed para ver las ",Object(h.jsx)("br",{}),"pol\xedticas comerciales ",Object(h.jsx)(ml.a,{})]})})}),Object(h.jsx)("div",{className:"item",children:Object(h.jsx)(S.a,{type:"primary",onClick:function(){O(!0)},children:"Politicas comerciales"})}),Object(h.jsx)("div",{className:"item",children:Object(h.jsx)(H.a,{style:pl,color:"black",children:Object(h.jsxs)("span",{children:["Haga click aqu\xed para ",Object(h.jsx)("br",{})," aplicar cup\xf3n ",Object(h.jsx)(ml.a,{})]})})}),Object(h.jsx)("div",{className:"item",children:Object(h.jsx)(S.a,{type:"primary",onClick:function(){g(!0)},children:"Cupones"})}),P?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:"Valor inicial"})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.unity_value)})," "]})]}):null,o||"0.00"===t.finishKitValue?null:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Descuento acabados"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(t.finishKitValue)})," "]})]}),0!==q?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Descuento comerciales"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(q)})," "]})]}):null,0!==Z?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Descuentos cupones"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:re.format(Z)})," "]})]}):null,Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:"Valor de la unidad"})})," "]}),Object(h.jsxs)("div",{className:"item",children:[" ",Object(h.jsx)("h6",{children:Object(h.jsx)("b",{children:re.format(u)})})," "]})]})}),Object(h.jsx)(ue.a,{title:"Descuentos Comerciales",visible:p,onCancel:ne,width:1e3,footer:[Object(h.jsx)(S.a,{onClick:ne,children:"Cerrar"},"back")],children:Object(h.jsx)(bl,{Discoun:te,Project:t})}),Object(h.jsx)(ue.a,{title:"Descuentos Cupones",visible:y,onCancel:ae,width:1e3,footer:[Object(h.jsx)(S.a,{onClick:ae,children:"Cerrar"},"back")],children:Object(h.jsx)(dl,{ProjectId:t.projectId,CustomerId:t.customerId,Precie:t.unity_value,Discoun:te})})]})},Ol=function(){var e=Object(a.useContext)(Fs).selectedUnits;return Object(h.jsx)(w.a,{style:{padding:10,border:"2px solid #bce8f1"},title:"Unidades Seleccionadas",children:Object(h.jsx)("section",{className:"wrapper ",children:e.map((function(e){return Object(h.jsx)(fl,{dataSource:e},e.id)}))})})},hl=function(e){var t,n=e.dataPro,r=e.customerId,c=Object(a.useContext)(Fs).selectedUnits,i=Object(a.useContext)(Cs).propertyData;return Object(h.jsxs)("div",{children:[Object(h.jsx)(Ys,{projects:n,customerId:r}),Object(h.jsx)(J.a,{}),c.length>0&&Object(h.jsx)(Ol,{}),Object(h.jsx)(J.a,{}),(t=i,!(0===Object.keys(t).length)&&Object(h.jsx)(al,{}))]})},xl=function(e){var t,n,r=e.selectCustomerSet,c=e.idChannelSet,i=Object(s.d)(),o=Object(a.useState)(),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)(),b=Object(f.a)(j,2),m=b[0],p=b[1];Object(a.useEffect)((function(){i($e()),i(Fa())}),[]),Object(a.useEffect)((function(){x(),O()}),[m]),Object(a.useEffect)((function(){v()}),[d]);var O=function(){},x=function(){r(m)},v=function(){c(d)},y=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),w=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.channel}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:16,children:Object(h.jsx)(J.a,{className:"divDatosCliente",children:"Datos del Cliente"})}),Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(J.a,{children:"Asesor"})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{span:16,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{of:!0,xs:24,sm:24,md:24,lg:15,xl:16,children:Object(h.jsx)(_.a.Group,{compact:!0,children:Object(h.jsx)(g.a.Item,{label:"Buscar cliente (identificaci\xf3n o nombre)",name:"customerItemForm",rules:[{required:!0,message:"Campo requerido"}],style:{width:"100%"},children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:p,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0}],children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),y.hasOwnProperty("_payload")&&(null===(t=y._payload)||void 0===t?void 0:t.map((function(e){return 1===e.state?Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name.replace("_"," ")," - CC: ").concat(e.identification)},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id)):""})))]})})})}),Object(h.jsx)(N.a,{of:!0,xs:24,sm:24,md:24,lg:8,xl:7,children:Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(mt,{})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{label:"Nombre",name:"nombre",children:Object(h.jsx)(_.a,{placeholder:"Cliente",disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Apellido",name:"apellido",rules:[{required:!1}],children:Object(h.jsx)(_.a,{placeholder:"Apellido",disabled:!0})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{label:"Email",name:"email",type:"email",children:Object(h.jsx)(_.a,{placeholder:"E-mail",disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Tel\xe9fono",name:"t\xe9lefono",rules:[{required:!1}],children:Object(h.jsx)(_.a,{placeholder:"Telefono",disabled:!0})})]})]}),Object(h.jsx)(T.a,{children:Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{name:"channelFormItem",label:"\xbfComo se enter\xf3?",rules:[{required:!0,message:"Campo requerido"}],style:{width:"50%"},children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:u,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),w.hasOwnProperty("_payload")&&(null===(n=w._payload)||void 0===n?void 0:n.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name)},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})}),Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(Ma,{})})]})})]}),Object(h.jsxs)(N.a,{span:8,children:[Object(h.jsx)(g.a.Item,{label:"Nombre asesor",name:"nombreAsesor",rules:[{required:!1,message:""}],children:Object(h.jsx)(_.a,{style:{width:"100%"},placeholder:"Asesor",disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Empresa",name:"empresaAssessor",rules:[{required:!1,message:""}],children:Object(h.jsx)(_.a,{placeholder:"Empresa",disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Email",name:"emailAssessor",rules:[{required:!1,message:""}],children:Object(h.jsx)(_.a,{disabled:!0,placeholder:"E-mail"})}),Object(h.jsx)(g.a.Item,{label:"Tel\xe9fono",name:"t\xe9lefonoAssessor",rules:[{required:!1,message:""}],children:Object(h.jsx)(_.a,{placeholder:"Telefono",disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"\xdaltimo contacto",name:"ultimoContacto",rules:[{required:!1,message:""}],children:Object(h.jsx)(_.a,{placeholder:"Ultimo contacto",disabled:!0})})]})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:10}),Object(h.jsx)(N.a,{children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(wi.a,{}),htmlType:"submit",activateKey:"2",children:"Buscar Proyecto"})})})]})]})},vl={labelCol:{span:24},wrapperCol:{span:21}},yl=function(e){var t=Object(s.d)(),n=e.onClose,a=e.setPriceRange,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=function(){var e=Object(p.a)(m.a.mark((function e(){var r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setFieldsValue({state:!0}),e.next=3,c.validateFields();case 3:r=e.sent,(i=new FormData).append("name",r.nombre),i.append("state",1),t((o=i,s=function(e){e.error?Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba"):(Object(P.f)("Rango de precio registrado"),n(),a(e))},l=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/price-range/name"),data:o,postProcessSuccess:s,postProcessError:l}}));case 8:case"end":return e.stop()}var o,s,l}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(g.a,Object(j.a)(Object(j.a)({},vl),{},{name:"FormPresupuesto",form:c,onFinish:i,children:[Object(h.jsx)(g.a.Item,{label:"Nombre",name:"nombre",rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsx)(_.a,{})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]}))},gl=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=e.createArrangement,o=function(){c(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){c(!0)},children:Object(h.jsx)(De.a,{})}),Object(h.jsx)(ue.a,{width:500,title:"Nuevo rango de precios",visible:r,onCancel:o,footer:!1,children:Object(h.jsx)(yl,{onClose:o,setPriceRange:function(e){i(e)}})})]})},_l=n(332),Sl=function(e){var t=e.prev,n=e.Customer,r=e.projectsSet,c=e.showSet,i=Object(s.d)(),o=Object(a.useState)(0),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)("Todo"),b=Object(f.a)(j,2),m=b[0],p=b[1],O=Object(a.useState)(0),x=Object(f.a)(O,2),v=x[0],y=x[1],_=Object(a.useState)(0),w=Object(f.a)(_,2),C=w[0],I=w[1],E=Object(a.useState)("0"),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(a.useState)([]),L=Object(f.a)(D,2),V=L[0],q=L[1],M=Object(a.useState)([]),U=Object(f.a)(M,2),z=U[0],G=U[1],B=Object(a.useState)([]),Y=Object(f.a)(B,2),H=Y[0],Z=Y[1],Q=Object(a.useState)([]),K=Object(f.a)(Q,2),W=K[0],X=K[1],$=Object(a.useState)(n),ee=Object(f.a)($,1)[0],ne=function(e){var t=W;e._payload.forEach((function(e){t.push({id:e.id,name:e.name})})),X(t)};Object(a.useEffect)((function(){var e;i(wc((function(e){if(!e.error){var t,n=[],a=[];e._payload.project_state.forEach((function(e){n.push({name:e.name,id:e.id})})),null===(t=e._payload)||void 0===t||t.project_types.forEach((function(e){a.push({name:e.name,id:e.id})})),q(n),G(a)}}))),i((e=function(e){if(!e.error){var t=[];e._payload.forEach((function(e){t.push(e.area)})),Z(t)}},{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/project/get_area"),postProcessSuccess:e,success:function(e){return Ic(e)}}})),i(br((function(e){e.error||ne(e)})))}),[]);var ae={project_type:d,number_rooms:C,state:v,area:m,price_range:A,selectCustomer:ee};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:12,children:[Object(h.jsx)(N.a,{span:4,children:Object(h.jsx)(S.a,{size:"large",icon:Object(h.jsx)(_l.a,{}),onClick:function(){return t()},children:"Previous"})}),Object(h.jsx)(N.a,{span:20,children:Object(h.jsx)(J.a,{children:"Buscar Proyecto"})})]}),Object(h.jsxs)(T.a,{gutter:12,children:[Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{name:"projectType",label:"Tipo de proyecto",children:Object(h.jsxs)(dt.a,{onChange:u,defaultValue:"Todo",children:[Object(h.jsx)(dt.a.Option,{value:"Todo",children:"Todos"}),z.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{name:"numberRooms",label:"No. Habitaciones",children:Object(h.jsxs)(dt.a,{placeholder:"Seleccione un No. Habitaciones",onChange:I,defaultValue:"Todos",children:[Object(h.jsx)(dt.a.Option,{value:"0",children:"Todos"}),Object(h.jsx)(dt.a.Option,{value:"1",children:"1"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"2"}),Object(h.jsx)(dt.a.Option,{value:"3",children:"3"}),Object(h.jsx)(dt.a.Option,{value:"4",children:"4"}),Object(h.jsx)(dt.a.Option,{value:"5",children:"5"}),Object(h.jsx)(dt.a.Option,{value:"6",children:"6"})]})})}),Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{name:"state",label:"Estado",children:Object(h.jsxs)(dt.a,{onChange:y,defaultValue:"Todos",children:[Object(h.jsx)(dt.a.Option,{value:"0",children:"Todos"}),V.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{name:"zone",label:"Zona",children:Object(h.jsxs)(dt.a,{placeholder:"Seleccione una Zona",onChange:p,defaultValue:"Todo",children:[Object(h.jsx)(dt.a.Option,{value:"Todo",children:"Todos"}),H.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e,children:e},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})})]}),Object(h.jsxs)(T.a,{gutter:12,children:[Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{name:"presupuestoDisponible",label:"Presupuesto disponible (Valores en Millones)",children:Object(h.jsxs)(dt.a,{style:{width:"100%"},placeholder:"Seleccione un presupuesto disponible",onChange:k,defaultValue:"Todos",children:[Object(h.jsx)(dt.a.Option,{value:"0",children:"Todos"}),W.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{span:4,children:Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(gl,{createArrangement:ne})})}),Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(S.a,{type:"primary",onClick:function(){var e,t,n;i((e=ae,t=function(e){e.error?Object(P.c)("\xa1UPS! Ha ocurrido un error"):0!==e._payload.length?(c(!1),r(e._payload)):(Object(P.g)("Lo sentimos no hay proyectos disponibles con los filtros actuales "),r([]),c(!0))},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/quotation/projects_filter"),data:e,headers:R.hg,success:function(e){return te(e)},postProcessSuccess:t,postProcessError:n}}))},children:"Buscar Disponibilidad de Proyectos"})})})]})]})},wl=n(615),Cl={labelCol:{span:32},wrapperCol:{span:23}},Pl=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useState)(0),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(""),u=Object(f.a)(l,2),b=u[0],O=u[1],x=Object(a.useState)(0),v=Object(f.a)(x,2),y=v[0],_=v[1],C=Object(a.useState)([]),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)(!0),k=Object(f.a)(A,2),D=k[0],L=k[1],V=Object(a.useState)(""),q=Object(f.a)(V,2),M=q[0],U=q[1],z=Object(a.useState)(!1),G=Object(f.a)(z,2),B=G[0],Y=G[1],H=Object(a.useContext)(Cs).propertyData;Object(a.useEffect)((function(){Z()}),[b]);var Z=function(){var t,n;""!==b&&e((t=b,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error||W(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/customer/with-assesor/").concat(t),postProcessSuccess:n}}))},Q=function(e){F(e)},K=function(e){L(e)},W=function(e){var t=e.name.split("_");n.setFieldsValue({nombre:t[0],apellido:t[1],"t\xe9lefono":e.phone_number,email:e.email,ultimoContacto:null!==e.assessor?e.assessor.updated_at:"",nombreAsesor:null!=e.assessor?e.assessor.name:"",empresaAssessor:null!==e.assessor?e.assessor.affiliated_company:"","t\xe9lefonoAssessor":null!==e.assessor?e.assessor.phone_number:"",emailAssessor:null!=e.assessor?e.assessor.email:""})},X=function(e){O(e)},$=function(e){o(e)},ee=function(){_(y-1)},te=Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:10,lg:10,xl:17}),Object(h.jsx)(N.a,{xs:24,sm:24,md:10,lg:10,xl:7,children:Object(h.jsx)(g.a.Item,{name:"nivelIneres",label:"Nivel de Inter\xe9s",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{placeholder:"Seleccione un nivel de inter\xe9s",onChange:U,defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione"}),Object(h.jsx)(dt.a.Option,{value:"1",children:"Bajo"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"Medio"}),Object(h.jsx)(dt.a.Option,{value:"3",children:"Alto"})]})})})]}),ne=function(){var t=H.response;if(t){if(null==b)return Object(P.c)("debe de selecionar un cliente"),null;if(null==M)return Object(P.c)("debe de selecionar un cliente"),null;Object.assign(t,{channel_id:i,customer_id:b,interest_level:parseInt(M),email_sent:0,assesor_id:JSON.parse(localStorage.getItem("USER_INFO")).id}),e(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/quotation"),data:e,headers:R.hg,postProcessSuccess:t,postProcessError:n}}}(t,(function(e){e.error?199===e.code?(Object(P.g)(e.message),Y(!0)):Object(P.c)("\xa1UPS! Ha ocurrido un error"):(Object(P.f)("Cotizaci\xf3n creada"),Y(!0))})))}else Object(P.g)("Debe salecionar una unidad")},ae=Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:14,sm:24,md:10,lg:10,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:24,md:10,lg:10,xl:1,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{onClick:function(){ne()},type:"danger",disabled:function(){if(0!==i&&""!==b)return!1}(),children:"Guardar"})})})]}),re=function(e){switch(e){case 0:return Object(h.jsx)(xl,{selectCustomerSet:X,idChannelSet:$});case 1:return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Sl,{prev:ee,Customer:b,projectsSet:Q,showSet:K}),Object(h.jsx)("br",{}),Object(h.jsx)(J.a,{}),D?Object(h.jsx)("span",{}):Object(h.jsx)(Es,{children:Object(h.jsx)(hl,{dataPro:E,customerId:b})}),te,Object(h.jsx)(J.a,{}),ae]})}},ce=[{title:"Paso N1",content:re(0),subTitle:"firstStep",status:"first",description:"stepNumberone"},{title:"Paso N2",content:re(1),subTitle:"secondStep",status:"second",description:"stepNumberTwo"}],ie=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFieldValue();case 2:(t=e.sent).nombreAsesor?t.channelFormItem&&t.customerItemForm&&_(y+1):Object(P.c)("El cliente no tiene un asesor asignado");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return B?Object(h.jsx)(d.Redirect,{exact:!0,to:"/sales/quotes"}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(g.a,Object(j.a)(Object(j.a)({},Cl),{},{name:"formSelectCliente",form:n,onFinish:ie,layout:"vertical",children:Object(h.jsx)(w.a,{children:Object(h.jsxs)(wl.a,{current:y,type:"navigation",className:"site-navigation-steps",children:[ce.map((function(e){return Object(h.jsx)(gs.a,{className:"stepQuotes",status:e.status,title:e.title},e.title)})),Object(h.jsx)("div",{className:"steps-content2",children:ce[y].content})]})})}))})},Il=function(){return Fe(R.wb)?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(Te.a,{title:"Nueva cotizaci\xf3n",extra:[Object(h.jsxs)(o.b,{to:"/sales/quotes",style:{backgroundColor:"#1890ff",padding:8,borderRadius:2,color:"#ffffff"},children:["Listar Cotizaciones ",Object(h.jsx)(ml.a,{style:{fontSize:20}})]},"1")]}),Object(h.jsx)(ws,{children:Object(h.jsx)(Pl,{})})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},El=function(){return Object(h.jsx)(Il,{})},Fl=n(639),Al=function(e){var t=e.data,n=e.index,r=e.handleDelete,c=e.form,i=e.getDataToChild;Object(a.useEffect)((function(){l()}),[]);var o=Object(s.e)((function(e){return e.customer})),l=function(){c.setFieldsValue(Object(Nc.a)({},"responsible".concat(n+1),t.customer_id))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h6",{style:{fontSize:14,marginBottom:"3px",marginLeft:"20px"},children:"Cliente Responsable"}),Object(h.jsxs)("div",{style:{display:"flex",flexFlow:"row"},children:[Object(h.jsx)("article",{style:{width:"10%",textAlign:"center",border:"1px solid #d9d9d9",height:"32px"},children:n+1}),Object(h.jsx)(g.a.Item,{name:"responsible".concat(n+1),rules:[{required:!0,message:"El campo es requerido"}],style:{width:"90%"},children:Object(h.jsxs)(dt.a,{value:t.customer_id,defaultValue:"",showSearch:!0,style:{width:"90%"},optionFilterProp:"children",onChange:function(e){t.customer_id=e,i(t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),void 0!==o._payload?!Array.isArray(o)&&o._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(e.identification)},e.id)})):null]})}),Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",danger:!0,onClick:function(){r(t.id)}})]})]})},kl=function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/sales/get-responsible/").concat(e),success:function(e){return Ll(e)},postProcessSuccess:t}}},Tl=function(e,t,n,a){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/sales/assign-responsible/").concat(e),data:t,success:function(e){return Rl(e)},postProcessSuccess:n,postProcessError:a}}},Nl=function(){return{type:R.O,payload:{method:null,success:function(){return Dl()}}}},Dl=function(){return{type:R.ke,payload:[]}},Rl=function(e){return{type:R.Qg,payload:e}},Ll=function(e){return{type:R.gf,payload:e}},Vl=function(e){var t=e.assignResponsibleDatabase,n=e.handleCancel,r=e.id,c=Object(s.d)(),i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=Object(a.useState)(1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(t._payload),O=Object(f.a)(b,2),x=O[0],v=O[1],y=function(e){var t=Object(Qi.a)(x);v(t.filter((function(t){return t.id!==e})))},_=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:t=e.sent,a=[],Object(Qi.a)(x).forEach((function(e){var n={customer_id:e.hasOwnProperty("responsible".concat(e.key))?t["responsible".concat(e.key)]:e.customer_id,id:e.id<0?null:e.id};a.push(n)})),c(Tl(r,a,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error"):(Object(P.f)("Actualizado correctamente"),n(),c(kl(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return function(){c(Nl())}}),[]);var C=function(e){var t=Object(Qi.a)(x);t.map((function(t){return t.id===e.id&&(t=e),t})),v(t)},I=[{title:null,dataIndex:"customer_id",key:"customer_id",render:function(e,t,n){return Object(h.jsx)(Al,{getDataToChild:C,handleDelete:y,form:o,data:t,index:n},t.customer_id)}}];return Object(h.jsxs)(g.a,{form:o,onFinish:_,children:[Object(h.jsx)(w.a,{style:{width:"100%"},title:"Listado de clientes",actions:[Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:16,sm:0,md:0,lg:0,xl:20}),Object(h.jsx)(N.a,{xs:8,sm:8,md:8,lg:8,xl:3,children:Object(h.jsxs)(S.a,{style:{textAlign:"right"},type:"primary",onClick:function(){var e=Object(Qi.a)(x),t={customer_id:null,id:-1*u,key:u};v([].concat(Object(Qi.a)(e),[t])),j(u+1)},children:[" ","Agregar"," "]})})]})})],children:x.length>0?Object(h.jsx)(Q.a,{size:"small",pagination:!1,columns:I,dataSource:Object(ce.a)(x)}):null}),Object(h.jsx)(J.a,{}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:16,sm:0,md:0,lg:0,xl:18}),Object(h.jsxs)(N.a,{xs:8,sm:8,md:8,lg:8,xl:6,children:[Object(h.jsx)(S.a,{htmlType:"submit",type:"primary",style:{background:"#389e0d",borderColor:"#389e0d",color:"#fff"},children:"Guardar"},"finish"),",",Object(h.jsx)(S.a,{type:"primary",onClick:n,children:"Finalizar"},"close")]})]})]})},ql=function(e){var t=e.isModalVisible,n=e.data,r=e.handleCancel,c=Object(s.d)(),i=Object(a.useState)([]),o=Object(f.a)(i,2),l=o[0],d=o[1];return Object(a.useEffect)((function(){t&&(c(kl(n.id,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,d(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c($e()))}),[t]),Object(h.jsx)(h.Fragment,{children:Array.isArray(l)&&t?Object(h.jsx)(x,{}):Object(h.jsx)(Vl,{id:n.id,handleCancel:r,assignResponsibleDatabase:l,isModalVisible:t})})},Ml=function(e){var t=e.data,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(s.d)(),l=function(){i(!1)},d=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Asignar Responsables"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:d,children:Object(h.jsx)(S.a,{type:"primary",style:{background:"#40a9ff",color:"#fff"},size:"small",onClick:function(){i(!0)},icon:Object(h.jsx)(Fl.a,{}),disabled:t.is_desisted})}),c&&Object(h.jsx)(ue.a,{title:"Asignar responsables",centered:!0,visible:c,footer:!1,onCancel:l,afterClose:function(){o(Nl())},width:"60vw",children:c&&Object(h.jsx)(ql,{isModalVisible:c,data:t,handleCancel:l})})]})},Ul=n(640),zl=function(e){var t=e.data,n=Object(s.d)(),r=Object(a.useState)(),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor}));Object(a.useEffect)((function(){i&&(n(Ln()),(null===t||void 0===t?void 0:t.assessor_name)&&b())}),[i]);var d=g.a.useForm(),u=Object(f.a)(d,1)[0],j=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.validateFields();case 3:a=e.sent,r={assessor:a.advisers,reassignment_date:a.reassignmentDate.format("YYYY-MM-DD")},n(nt(t.customer.id,r,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error."):(Object(P.f)("Ha sido actualizado con \xe9xito."),n(No()),O(),x());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),b=function(){u.setFieldsValue({previousAdvisor:t.assessor_name})},O=function(){u.resetFields()},x=function(){o(!1)},v=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Reasignar Asesor"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:v,children:Object(h.jsx)(S.a,{type:"primary",onClick:function(){o(!0)},style:{background:"#40a9ff",color:"#fff"},size:"small",icon:Object(h.jsx)(Ul.a,{}),disabled:t.is_desisted})}),Object(h.jsx)(ue.a,{title:"Reasignar Asesor",name:"FormCuopons",layout:"vertical",visible:i,onCancel:x,footer:!1,width:800,centered:!0,children:Object(h.jsxs)(g.a,{form:u,onFinish:j,labelCol:{span:8},wrapperCol:{span:12},children:[Object(h.jsx)(g.a.Item,{label:"Asesor Anterior",name:"previousAdvisor",disabled:!0,children:Object(h.jsx)(_.a,{value:u.getFieldValue("previousAdvisor"),disabled:!0,style:{width:"100%"}})}),Object(h.jsx)(g.a.Item,{label:"Usuario",name:"advisers",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),l.hasOwnProperty("_payload")&&l._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(e.identification)})}))]})}),Object(h.jsx)(g.a.Item,{name:"reassignmentDate",label:"Fecha reasignaci\xf3n",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(jt.a,{placeholder:"Selecione la fecha...",style:{width:"100%"}})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",style:{marginLeft:"100%"},htmlType:"submit",children:"Guardar"})})]})})]})},Gl=n(641),Bl=function(e){return{type:R.zb,payload:e}},Yl=(dt.a.Option,function(e){var t=e.salesMade,n=e.isModalVisible,r=e.onCloseModal,c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(s.d)(),l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],b=d[1],O=Object(a.useState)(!1),v=Object(f.a)(O,2),y=v[0],w=v[1],C=Object(a.useState)([]),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)({}),k=Object(f.a)(A,2),D=k[0],L=k[1],V="".concat(y?"Recibida":"No recibida");Object(a.useEffect)((function(){var e,a;n&&o((e=t.id,a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS, Ha ocurrido un error."):F(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/payments/by-id-sale/").concat(e),postProcessSuccess:a}}))}),[n]),Object(a.useEffect)(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validateFields(["nameDocument","bankName","expirationDate","consignmentValue"]);case 2:case"end":return e.stop()}}),e)}))),[u]),Object(a.useEffect)((function(){var e,n,a,r;Array.isArray(E)||(i.setFieldsValue({customer:t.customer.person.name,project:t.project_name,unit:t.unit_name}),E._payload&&(i.setFieldsValue({nameDocument:(null===(e=E._payload)||void 0===e?void 0:e.multimedia)?E._payload.multimedia.name:null,bankName:E._payload.bank_name||null,expirationDate:se()(E._payload.consignment_date)||null,consignmentValue:E._payload.consignment_amount||null,paymentType:String(E._payload.consignment_type)||"2",creditApprovalDocument:(null===(n=E._payload)||void 0===n?void 0:n.multimedia)?[E._payload.multimedia]:null,approvementLetter:1===E._payload.state}),w(1===E._payload.state),L((null===(a=E._payload)||void 0===a?void 0:a.multimedia)?null===(r=E._payload)||void 0===r?void 0:r.multimedia:{})))}),[E]);var q,M={showUploadList:!1,beforeUpload:function(e){return!1},maxCount:1,onChange:function(e){"uploading"!==e.file.status&&(i.setFieldsValue({creditApprovalDocument:e.file,nameDocument:e.file.name}),L(e.file),e.fileList[0].name="archivo cargado")}},U=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new yt,e.next=3,i.validateFields();case 3:(a=e.sent).document=document,c=new FormData,E._payload&&c.append("id",E._payload.id),c.append("consignment_type",a.paymentType),c.append("consignment_date",a.expirationDate.format("YYYY-MM-DD")),c.append("consignment_amount",a.consignmentValue),c.append("state",a.approvementLetter?1:0),c.append("bank_name",a.bankName||null),c.append("sale_id",t.id),c.append("user_id",n.getIdFromCurrentUser()),c.append("payment_document",D),o((s=c,l=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS, Ha ocurrido un error."):(Object(P.f)("Ha sido actualizado con \xe9xito"),r());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=void 0,{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/payments"),data:s,success:function(e){return Bl(e)},postProcessSuccess:l,postProcessError:d}}));case 16:case"end":return e.stop()}var s,l,d}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){i.setFieldsValue({creditApprovalDocument:null,nameDocument:null}),L({})},G=function(e){e.target.checked?w(!0):w(!1)};return Object(h.jsxs)(h.Fragment,{children:[" ",Array.isArray(E)?Object(h.jsx)(x,{}):Object(h.jsxs)(g.a,{layout:"vertical",onFinish:U,size:"middle",form:i,initialValues:{approvementLetter:!1},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"customer",label:"Cliente",children:Object(h.jsx)(_.a,{disabled:!0,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"project",label:"Proyecto",children:Object(h.jsx)(_.a,{disabled:!0,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"unit",label:"Unidad",children:Object(h.jsx)(_.a,{disabled:!0,style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(h.jsx)(g.a.Item,{name:"nameDocument",label:"Documento aprobaci\xf3n de cr\xe9dito",rules:[{required:u,message:"El campo es requerido."}],children:Object(h.jsx)(_.a,{style:{width:"250px"},disabled:!0})}),D&&D.hasOwnProperty("path")?Object(h.jsx)(g.a.Item,{label:".",name:"downloadCreditApprovalDocument",children:Object(h.jsx)(S.a,{style:{background:"#389e0d",color:"#fff"},type:"primary",icon:Object(h.jsx)(Po.a,{}),onClick:function(){var e=document.createElement("a");e.href=D.path,e.target="_blank",document.body.appendChild(e),e.click()},children:"Descargar"})}):null,(q=D,0===Object.keys(q).length?Object(h.jsx)(g.a.Item,{label:".",name:"creditApprovalDocument",children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({name:"creditApprovalDocument",accept:R.Lh},M),{},{children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir archivo"})}))}):null),Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.creditApprovalDocument!==t.creditApprovalDocument},children:function(e){return(0,e.getFieldValue)("creditApprovalDocument")?Object(h.jsx)(g.a.Item,{name:"deleteDocument",label:".",children:Object(h.jsx)(S.a,{onClick:z,type:"primary",icon:Object(h.jsx)(Xt.a,{}),danger:!0,children:"Borrar"})}):null}})]})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"paymentType",label:"Tipo de pago",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{onChange:function(e){b("1"===e)},defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."},"1"),Object(h.jsx)(dt.a.Option,{value:"1",children:"Banco"},"2"),Object(h.jsx)(dt.a.Option,{value:"2",children:"Contado"},"2")]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.paymentType!==t.paymentType},children:function(e){return"1"===(0,e.getFieldValue)("paymentType")?Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{rules:[{required:u,message:"El campo es requerido."}],label:"Banco",name:"bankName",children:Object(h.jsx)(_.a,{style:{width:"100%"}})})}):null}}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{rules:[{required:u,message:"El campo es requerido."}],name:"expirationDate",label:"Fecha de vencimiento",children:Object(h.jsx)(jt.a,{placeholder:"Fecha de vencimiento",style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{rules:[{required:u,message:"El campo es requerido."}],name:"consignmentValue",label:"Valor de consignacion",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"}}))})}),Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.paymentType!==t.paymentType},children:function(e){return"1"===(0,e.getFieldValue)("paymentType")?Object(h.jsx)(N.a,{xs:8,sm:8,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",name:"approvementLetter",label:"Carta aprobaci\xf3n",children:Object(h.jsx)(je.a,{onChange:G,children:V})})}):null}})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(J.a,{}),Object(h.jsx)(N.a,{xs:8,sm:8,md:8,lg:8,xl:21}),Object(h.jsx)(N.a,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})]})]})]})}),Jl=function(e){var t=e.salesMade,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Forma de pago restante"}),s=Object(h.jsxs)("header",{children:["Forma de Pago Restante - Venta No. ",t.unit_code," "]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(S.a,{style:{background:"#52c41a",color:"#fff"},size:"small",onClick:function(){i(!0)},icon:Object(h.jsx)(Gl.a,{}),disabled:t.is_desisted})}),c&&Object(h.jsx)(ue.a,{title:s,centered:!0,visible:c,footer:!1,onCancel:function(){return i(!1)},width:"160vh",children:Object(h.jsx)(Yl,{isModalVisible:c,salesMade:t,onCloseModal:function(){i(!1)}})})]})},Hl=n(642),Zl=function(e){var t=e.customerDatabase,n=e.data,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(s.d)(),o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1];Object(a.useEffect)((function(){d&&b()}),[d]);var j=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.validateFields();case 2:t=e.sent,a={id_customer:t.newCustomer,code:t.newTrustUnit||null},i(Do(n.id,a,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS, Ha corrido un error."):(Object(P.f)("Ha sido actualizado con \xe9xito."),O(),x());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),i(No());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){c.setFieldsValue({actuallyCustomer:n.customer.person.name})},O=function(){c.resetFields()},x=function(){u(!1)},v=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Cambiar cliente "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:v,children:Object(h.jsx)(S.a,{style:{background:"#ffc53d",color:"#fff"},size:"small",onClick:function(){u(!0)},icon:Object(h.jsx)(Hl.a,{}),disabled:n.is_desisted})}),Object(h.jsx)(ue.a,{title:"Cambiar cliente",centered:!0,visible:d,footer:!1,onCancel:function(){return u(!1)},width:800,children:Object(h.jsxs)(g.a,{form:c,name:"nest-messages",layout:"vertical",onFinish:j,children:[Object(h.jsx)(g.a.Item,{label:"Cliente actual",name:"actuallyCustomer",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{name:"newCustomer",label:"Nuevo cliente",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),!Array.isArray(t)&&t._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.Item,{name:"newTrustUnit",label:"Nueva fiducia unidad",children:Object(h.jsx)(_.a,{placeholder:"Nueva fiducia unidad"})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)("div",{style:{position:"absolute",right:1,display:"flex"},children:[Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{marginRight:"10px"},children:"Guardar"}),Object(h.jsx)(S.a,{type:"primary",onClick:x,children:"Finalizar"})]})})]})})]})},Ql=function(e){var t=e.requestExchanges,n=e.setRequestExchanges,r=e.isModalVisible,c=e.data,i=e.addExchangeToApply,o=Object(s.d)();Object(a.useEffect)((function(){if(r){var e={sale_id:c.id,customer_id:c.customer.id};o(function(e,t,n){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/salesmade/coupons"),data:e,success:function(e){return Uo(e)},postProcessSuccess:t,postProcessError:n}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(a=e.sent).error?Object(P.c)("\xa1UPS, Ha ocurrido un problema."):n(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}),[r]);var l=[{title:Object(h.jsx)("strong",{children:"Codigo"}),width:5,dataIndex:"code",key:"code",align:"center"},{title:Object(h.jsx)("strong",{children:"Fecha de vencimiento"}),width:6,dataIndex:"expiration_code",key:"expiration_code",align:"center",render:function(e,t){return Object(h.jsx)("h6",{children:se()(t.expiration_code).format("YYYY-MM-DD")})}},{title:Object(h.jsx)("strong",{children:"Tipo de descuento"}),width:7,dataIndex:"discount_type",key:"discount_type",align:"center",render:function(e,t){return 1===t.discount_type?Object(h.jsx)("h6",{children:"Valor total"}):Object(h.jsx)("h6",{children:"Porcentaje"})}},{title:Object(h.jsx)("strong",{children:"Descuento"}),width:6,dataIndex:"discount_value",key:"discount_value",align:"center",render:function(e,t){return 1===t.discount_type?d.format(t.discount_value):parseFloat(t.discount_percentage).toFixed(2)+" %"}},{title:Object(h.jsx)("strong",{children:"Total a descontar"}),width:6,dataIndex:"discount_value",key:"discount_value",align:"center",render:function(e,t){return 1===t.discount_type?Object(h.jsx)("h6",{style:{fontSize:"14px"},children:d.format(t.discount_value)}):Object(h.jsx)("h6",{children:d.format(parseFloat(c.value_total)*(parseFloat(t.discount_percentage)/100))})}},{title:Object(h.jsx)("strong",{children:"Acciones"}),width:4,dataIndex:"actions",key:"actions",align:"center",render:function(e,t){return u(t)}}],d=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),u=function(e){return Object(h.jsx)(je.a,{name:"check".concat(e.id),onChange:function(){return i(e)},defaultChecked:e.used,disabled:e.used},e.id)};return Array.isArray(t)?Object(h.jsx)(x,{}):Object(h.jsx)(Q.a,{size:"small",scroll:{x:700,y:400},bordered:!0,columns:l,dataSource:Object(ce.a)(null===t||void 0===t?void 0:t._payload),pagination:!1})},Kl=function(e){var t=e.data,n=Object(s.d)(),r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)([]),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)([]),O=Object(f.a)(b,2),x=O[0],v=O[1],y=function(){o(!1)},g=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Administrar canjes"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:g,children:Object(h.jsx)(S.a,{style:{background:"#ffc53d",color:"#fff"},size:"small",onClick:function(){o(!0)},icon:Object(h.jsx)(Os.a,{}),disabled:t.is_desisted})}),Object(h.jsx)(ue.a,{title:"Administrar Canjes",centered:!0,visible:i,footer:Object(h.jsxs)(de.a,{children:[Object(h.jsx)(S.a,{type:"primary",style:{background:"rgb(56, 158, 13)",color:"#fff"},onClick:function(){var e=function(){var e=[];return u.forEach((function(t){var n={coupon_id:t.id};e.push(n)})),e}();if(0===e.length)return Object(P.g)("No ha sido selecionado ningun canje.");var a={customer_id:t.customer.id,sale_id:t.id,coupons:e};n(function(e,t,n){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/salesmade/exchanges-coupons"),data:e,success:function(e){return Vo(e)},postProcessSuccess:t,postProcessError:n}}}(a,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS, Ha ocurrido un problema."):(y(),Object(P.f)("Canjes aplicados exitosamente."),v(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Aplicar Canje"}),Object(h.jsx)(S.a,{type:"primary",onClick:y,children:"Finalizar"})]}),onCancel:function(){return o(!1)},width:900,children:i&&Object(h.jsx)(Ql,{isModalVisible:i,data:t,addExchangeToApply:function(e){var t=u.find((function(t){return t.id===e.id}));j(t?u.filter((function(t){return t.id!==e.id})):[].concat(Object(Qi.a)(u),[e]))},setRequestExchanges:v,requestExchanges:x})})]})};function Wl(e,t,n){return Xl.apply(this,arguments)}function Xl(){return(Xl=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ls=new FormData,e.next=3,t.validateFields();case 3:return(r=e.sent).is_deed_sale=void 0!==r.is_deed_sale&&r.is_deed_sale,delete r.customer,delete r.project,delete r.unit,Ls.append("sale_id",a),Ls.append("document",n),$l(r.date_outlay,"date_outlay"),$l(r.date_deed,"date_deed"),$l(r.date_peace_and_safety,"date_peace_and_safety"),$l(r.date_delivery_property,"date_delivery_property"),$l(r.date_legalization,"date_legalization"),$l(r.date_log,"date_log"),Ls.append("builder_credit_payment",r.builder_credit_payment||0),Ls.append("deed_value",r.deed_value||0),Ls.append("owner",r.owner||""),Ls.append("comments",r.comments||""),Ls.append("is_deed_sale",r.is_deed_sale?1:0),e.abrupt("return",Ls);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(e,t){e&&Ls.append(t,e.format(Gt))}var ed=function(e){return{type:R.q,payload:e}},td=function(e){return{type:R.Jc,payload:{deed_id:e}}},nd=function(e,t){return{type:R.wh,payload:{deed_id:e,data:t}}},ad=function(e){var t=e.salesMade,n=Object(s.d)(),r=function(e){var t=e.name.split("_");return t[0]+" "+t[1]}(t.customer.person),c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)({}),u=Object(f.a)(d,2),b=u[0],O=u[1],x=g.a.useForm(),v=Object(f.a)(x,1)[0],y=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wl(v,b,t.id);case 2:a=e.sent,n((r=a,c=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error"):(Object(P.f)("Escrituraci\xf3n registrada"),C(),n(No()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=void 0,{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/deed"),data:r,success:function(e){return ed(e)},postProcessSuccess:c,postProcessError:i}}));case 4:case"end":return e.stop()}var r,c,i}),e)})));return function(){return e.apply(this,arguments)}}(),w={beforeUpload:function(e){return!1},onChange:function(e){var t=e.file,n=e.fileList;"uploading"!==t.status&&O(n[0]?n[0].originFileObj:{})}},C=function(){l(!1),v.resetFields()};var I=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Escrituraci\xf3n"}),E=Object(h.jsxs)("header",{children:["Escrituraci\xf3n - Venta No. ",t.unit_code," "]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:I,children:Object(h.jsx)(S.a,{style:{background:"#52c41a",color:"#fff"},size:"small",onClick:function(){l(!0)},icon:Object(h.jsx)(Ne.a,{}),disabled:t.is_desisted})}),o&&Object(h.jsx)(ue.a,{title:E,centered:!0,visible:o,onCancel:function(){return l(!1)},width:900,footer:null,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:v,onFinish:y,children:[Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"customer",label:"Cliente",children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:r,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"project",label:"Proyecto",children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:t.project_name,style:{width:"100%"}})})})]}),Object(h.jsx)(T.a,{gutter:15,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"unit",label:"Unidad",children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:t.unit_name,style:{width:"100%"}})})})}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"document",label:"Documento",rules:[{required:!0,message:"El documeto es requerido"}],children:Object(h.jsx)("div",{style:{display:"inline-block"},children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},w),{},{accept:R.Lh,maxCount:1,children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir Archivo"})}))})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_deed",label:"Fecha de escrituraci\xf3n",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_outlay",label:"Fecha de desembolso",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"deed_value",label:"Valor escriturado",children:Object(h.jsx)(ut.a,Object(j.a)({style:{width:"100%"}},R.rc))})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_peace_and_safety",label:"Fecha de Paz y Salvo",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_preorder",label:"Fecha de preentrega",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_delivery_property",label:"Fecha de entrega del inmueble",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_log",label:"Fecha de registro",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_legalization",label:"Fecha de legalizaci\xf3n",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"builder_credit_payment",label:"Abono cr\xe9dito constructor",children:Object(h.jsx)(ut.a,Object(j.a)({style:{width:"100%"}},R.rc))})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"owner",label:"Propietario",children:Object(h.jsx)(_.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"comments",label:"Observaci\xf3n",children:Object(h.jsx)(_.a.TextArea,{})})})]}),Object(h.jsx)(T.a,{gutter:15,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",name:"is_deed_sale",label:"Venta Escriturada",children:Object(h.jsxs)(je.a,{children:[" ","Si"," "]})})})}),Object(h.jsx)(T.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",left:700,top:20},children:"Registrar Escrituraci\xf3n"})})})]})})]})},rd=function(e){var t=e.salesMade,n=Object(s.d)(),r={},c=function(e){var t=e.name.split("_");return t[0]+" "+t[1]}(t.customer.person),i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)({}),b=Object(f.a)(u,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),w=y[0],C=y[1],I=g.a.useForm(),E=Object(f.a)(I,1)[0];var F=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((a=t.deed_id,c=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,r=n._payload,C([{uid:r.document.id,name:r.document.name,status:"done",url:R.Oe+r.document.path}]),d(!0),L();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/deed/").concat(a),postProcessSuccess:c,success:function(e){return td(e)}}}));case 1:case"end":return e.stop()}var a,c}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Number.isInteger(w[0].uid)){e.next=6;break}return e.next=3,Wl(E,w[0].uid,t.id);case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,Wl(E,O,t.id);case 8:a=e.sent;case 9:n((r=t.deed_id,c=a,i=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error"):(Object(P.f)("Escrituraci\xf3n actualizada"),D());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=void 0,{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/deed/").concat(r),data:c,success:function(e,t){return nd(e,t)},postProcessSuccess:i,postProcessError:o}}));case 10:case"end":return e.stop()}var r,c,i,o}),e)})));return function(){return e.apply(this,arguments)}}(),k={beforeUpload:function(e){return!1},onChange:function(e){var t=e.file,n=e.fileList;"uploading"!==t.status&&(x(n[0]?n[0].originFileObj:{}),C(n))}},D=function(){d(!1),E.resetFields()};var L=function(){E.setFieldsValue({date_outlay:V(r.date_outlay),date_deed:V(r.date_deed),date_peace_and_safety:V(r.date_peace_and_safety),date_delivery_property:V(r.date_delivery_property),date_legalization:V(r.date_legalization),date_log:V(r.date_log),date_preorder:V(r.date_preorder),builder_credit_payment:r.builder_credit_payment,deed_value:r.deed_value,owner:r.owner||"",comments:r.comments||"",is_deed_sale:1===r.is_deed_sale,document:[{uid:r.document.id,name:r.document.name,status:"done",url:R.Oe+r.document.path}]})},V=function(e){return null!=e?se()(e):""},q=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Escrituraci\xf3n"}),M=Object(h.jsxs)("header",{children:["Escrituraci\xf3n - Venta No. ",t.unit_code," "]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:q,children:Object(h.jsx)(S.a,{style:{background:"#52c41a",color:"#fff"},size:"small",onClick:function(){return F()},icon:Object(h.jsx)(Ne.a,{}),disabled:t.is_desisted})}),l&&Object(h.jsx)(ue.a,{title:M,centered:!0,visible:l,onCancel:function(){return d(!1)},width:900,footer:null,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:E,onFinish:A,children:[Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"customer",label:"Cliente",children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:c,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"project",label:"Proyecto",children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:t.project_name,style:{width:"100%"}})})})]}),Object(h.jsx)(T.a,{gutter:15,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"unit",label:"Unidad",children:Object(h.jsx)(_.a,{disabled:!0,defaultValue:t.unit_name,style:{width:"100%"}})})})}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"document",label:"Documento",rules:[{required:!0}],children:Object(h.jsx)("div",{style:{display:"inline-block"},children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},k),{},{accept:R.Lh,maxCount:1,fileList:w,children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir Archivo"})}))})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_deed",label:"Fecha de escrituraci\xf3n",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_outlay",label:"Fecha de desembolso",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"deed_value",label:"Valor escriturado",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"}}))})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_peace_and_safety",label:"Fecha de Paz y Salvo",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_preorder",label:"Fecha de preentrega",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_delivery_property",label:"Fecha de entrega del inmueble",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_log",label:"Fecha de registro",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"date_legalization",label:"Fecha de legalizaci\xf3n",children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"builder_credit_payment",label:"Abono cr\xe9dito constructor",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"}}))})})]}),Object(h.jsxs)(T.a,{gutter:15,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"owner",label:"Propietario",children:Object(h.jsx)(_.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"comments",label:"Observacion",children:Object(h.jsx)(_.a.TextArea,{})})})]}),Object(h.jsx)(T.a,{gutter:15,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",name:"is_deed_sale",label:"Venta escriturada",children:Object(h.jsx)(je.a,{children:" "})})})}),Object(h.jsx)(T.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",left:650,top:20},children:"Actualizar escrituraci\xf3n"})})})]})})]})},cd=function(){return{type:R.Ie,payload:[]}},id=function(e){return{type:R.Ab,payload:e}},od=function(e){return{type:R.qh,payload:e}},sd=function(e){return{type:R.qc,payload:e}},ld=_.a.TextArea,dd={width:"100%"},ud=function(e){var t=e.form,n=e.data,r=e.setDocumentNameField,c=e.desistSaleDatabase,i=e.setDocumentToSend,o=Object(s.d)();Object(a.useEffect)((function(){return u(),function(){o({type:R.O,payload:{method:null,success:function(){return cd()}}})}}),[]);var l=function(e){return Array.isArray(e)?e:e&&e.fileList},d={showUploadList:!1,beforeUpload:function(e){return!1},onChange:function(e){"uploading"!==e.status&&(r(e),i(e.file))}},u=function(){t.setFieldsValue({customer:n.customer.person.name,phoneNumber:n.customer.person.phone_number,unitLabel:n.unit_name,totalValue:n.value_total,clientDocument:n.customer.person.identification,project:n.project_name,user:n.assessor_name,unitFiduciaryCode:0,fineValue:0,date:se()(n.sale_date)}),Array.isArray(c)||b()},b=function(){t.setFieldsValue({valuePaidProject:c.value_to_pay_to_project,amountPayAssociatedCompany:c.amount_paid_associated_company,withdrawalDate:c.withdrawal_date?se()(c.withdrawal_date):null,reason:c.motive,fineValue:c.fine_value,documentDesist:m(c),documentName:c.document?c.document.name:null})},m=function(e){var t=[];return i(e.document),e.document?t.push(e.document):t.push({}),t},p=function(){var e=document.createElement("a");e.href=c.document.path,e.target="_blank",document.body.appendChild(e),e.click()},f=function(){t.setFieldsValue({documentDesist:[{}],documentName:null}),i(null)};return Object(h.jsx)(g.a,{layout:"vertical",form:t,name:"formDesist",children:Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{label:"Cliente",name:"customer",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Tel\xe9fono",name:"phoneNumber",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Unidad",name:"unitLabel",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Valor total",name:"totalValue",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{disabled:!0,style:dd}))}),Object(h.jsx)(g.a.Item,{label:"Total abonos al d\xeda",name:"totalBonusesPerDay",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Valor devoluci\xf3n",name:"returnValue",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{disabled:!0,style:dd}))}),Object(h.jsx)(g.a.Item,{label:"Codigo fiduciario de la unidad",name:"unitFiduciaryCode",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(ut.a,{style:dd})}),Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido."}],label:"Valor a pagar a proyecto",name:"valuePaidProject",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{style:dd,placeholder:"Valor a pagar a proyecto"}))}),Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido."}],label:"Motivo",name:"reason",children:Object(h.jsx)(ld,{rows:4,style:dd,placeholder:"Motivo"})})]}),Object(h.jsxs)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsx)(g.a.Item,{label:"Documento cliente",name:"clientDocument",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Proyecto",name:"project",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{label:"Fecha",name:"date",children:Object(h.jsx)(jt.a,{disabled:!0,style:dd})}),Object(h.jsx)(g.a.Item,{label:"Usuario",name:"user",children:Object(h.jsx)(_.a,{disabled:!0})}),Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido."}],label:"Valor multa",name:"fineValue",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{style:dd}))}),Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido."}],label:"Fecha de desistimiento",name:"withdrawalDate",children:Object(h.jsx)(jt.a,{style:dd,placeholder:"Fecha de desistimiento"})}),Object(h.jsx)(g.a.Item,{label:"Valor a pagar a empresa asociada",name:"amountPayAssociatedCompany",rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{style:dd,placeholder:"Valor a pagar a empresa asociada"}))}),Object(h.jsxs)(_.a.Group,{compact:!0,children:[Object(h.jsx)(g.a.Item,{label:"Documento",name:"documentName",children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})}),Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.documentName!==t.documentName},children:function(e){var t=e.getFieldValue;return void 0===t("documentName")||null===t("documentName")?Object(h.jsx)(g.a.Item,{valuePropName:"fileList",label:".",name:"documentDesist",getValueFromEvent:l,children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({style:{width:"50%"},accept:R.Lh},d),{},{name:"documentDesist",maxCount:1,children:Object(h.jsx)(S.a,{size:"middle",type:"primary",icon:Object(h.jsx)(Dc.a,{})})}))}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(S.a,{size:"middle",type:"primary",icon:Object(h.jsx)(Xt.a,{}),danger:!0,onClick:f})}),Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.documentDesist!==t.documentDesist},children:function(e){var t=e.getFieldValue;return t("documentDesist")&&t("documentDesist")[0].hasOwnProperty("path")?Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(S.a,{size:"middle",style:{background:"#389e0d",color:"#fff"},type:"primary",icon:Object(h.jsx)(Po.a,{}),onClick:p})}):null}})]})}})]})]})]})})},jd=function(e){var t=e.data,n=Object(s.d)(),r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)([]),O=Object(f.a)(b,2),v=O[0],y=O[1],_=g.a.useForm(),w=Object(f.a)(_,1)[0];Object(a.useEffect)((function(){var e,a;u&&(o(!1),n((e=t.id,a=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un problema."):o(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/sale-desisted/").concat(e),success:function(e){return sd(e)},postProcessSuccess:a}})))}),[u]);var C=Object(s.e)((function(e){return e.desistSale})),I=function(){return j(!1)},E=function(){w.resetFields()},F=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.validateFields();case 2:n=e.sent,(a=new FormData).append("sale_id",t.id),a.append("withdrawal_date",n.withdrawalDate.format("YYYY-MM-DD")),a.append("value_to_pay_to_project",n.valuePaidProject),a.append("amount_paid_associated_company",n.amountPayAssociatedCompany),a.append("motive",n.reason),a.append("fine_value",n.fineValue),A(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e){Array.isArray(C)?(e.append("document",v||null),n(function(e,t,n){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/sale-desisted"),data:e,success:function(e){return id(e)},postProcessSuccess:t,postProcessError:n}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error."):(Object(P.f)("Ha sido actualizado con \xe9xito"),n(No()),I(),E());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))):(v&&(v.hasOwnProperty("path")?e.append("document",v.id):e.append("document",v)),n(function(e,t,n){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/sale-desisted/update"),data:e,success:function(e){return od(e)},postProcessSuccess:t,postProcessError:n}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error."):(Object(P.f)("Ha sido actualizado con \xe9xito"),I(),E());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))},k=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Desistir"});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:k,children:Object(h.jsx)(S.a,{onClick:function(){return j(!0)},icon:Object(h.jsx)(zt.a,{}),type:"primary",size:"small",danger:!0})}),u&&Object(h.jsx)(ue.a,{title:"Desistimiento - Venta No. ".concat(t.unit_code),centered:!0,visible:u,footer:Object(h.jsx)(de.a,{children:Object(h.jsx)(S.a,{type:"primary",onClick:F,children:"Guardar"})}),onCancel:I,width:1e3,children:i?Object(h.jsx)(ud,{form:w,handleSubmit:F,setDocumentNameField:function(e){w.setFieldsValue({documentName:e.file.name})},data:t,desistSaleDatabase:C,setDocumentToSend:y}):Object(h.jsx)(x,{})})]})},bd={background:"#f2dede"},md=function(){var e=Object(s.d)(),t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.salesMade._payload})),n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),r=function(e){return e?bd:null};Object(a.useEffect)((function(){e(No())}),[]);function c(e){var t=e.name.split("_");return t[0]+" "+t[1]}var i=[{title:"#",width:50,dataIndex:"id",key:"id",align:"center",fixed:"left",render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}},Object(j.a)(Object(j.a)({title:"Codigo",width:90,dataIndex:"unit_code",key:"code",align:"center",fixed:"left"},Object(ce.b)("code")),{},{render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),{title:"Cliente",width:250,dataIndex:"customer.email",key:"customer.email",render:function(e,t){return function(e){var t=e.customer.person,n=e.customer,a=c(t);return{props:{style:r(e.is_desisted)},children:Object(h.jsxs)("div",{style:e.is_desisted?bd:null,children:[Object(h.jsx)("strong",{children:"Nombre:"})," ",Object(h.jsx)("span",{children:a})," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Tel\xe9fono:"})," ",Object(h.jsx)("span",{children:t.phone_number})," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Correo:"})," ",Object(h.jsx)("span",{children:n.email})]})}}(t)}},Object(j.a)(Object(j.a)({title:"Proyecto",width:150,dataIndex:"project_name",key:"project_name",align:"center"},Object(ce.b)("project_name")),{},{render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),Object(j.a)(Object(j.a)({title:"Unidad",width:90,dataIndex:"unit_name",key:"unit_name",align:"center"},Object(ce.b)("unit_name")),{},{render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),{title:"Valor Unidad",dataIndex:"value_unit",width:120,align:"center",key:"value_unit",render:function(e,t){return{props:{style:r(t.is_desisted)},children:R.sc.format(e)}}},{title:"Valor Reformas",dataIndex:"value_reform",width:120,align:"center",key:"value_reform",render:function(e,t){return{props:{style:r(t.is_desisted)},children:R.sc.format(e)}}},{title:"Valor Total",dataIndex:"value_total",width:120,align:"center",key:"value_total",render:function(e,t){return{props:{style:r(t.is_desisted)},children:R.sc.format(e)}}},{title:"% CI Recaudado ",dataIndex:"ciRecaude",width:100,align:"center",key:"ciRecaude",render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}},Object(j.a)(Object(j.a)({title:"Asesor",dataIndex:"assessor_name",width:140,key:"assessor_name",align:"center"},Object(ce.b)("assessor_name")),{},{render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{style:{fontSize:"14px"},children:e})}}}),{title:"Escrituraci\xf3n",dataIndex:"deed",width:110,key:"deed",align:"center",render:function(e,t){return{props:{style:r(t.is_desisted)},children:t.deed_id?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})}}},{title:"Legalizaci\xf3n Documentos",dataIndex:"percentage_legalized_documents",width:120,key:"percentage_legalized_documents",align:"center",render:function(e,t){return{props:{style:r(t.is_desisted)},children:Object(h.jsx)("h6",{children:"".concat(parseFloat(e).toFixed(2),"%")})}}},{title:"Acciones",dataIndex:"actions",width:180,fixed:"right",render:function(e,t){return l(t)}}],l=function(t){var a=Object(h.jsx)("span",{style:{color:"#6A6963"},children:"Ver / Imprimir"}),i=c(t.customer.person),s=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "});return{props:{style:r(t.is_desisted)},children:Object(h.jsxs)("div",{children:[Fe(R.nd)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:a,children:Object(h.jsx)(S.a,{onClick:function(){e(X(t.id,function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,t.error||((a=document.createElement("a")).href="".concat(n._payload.path),a.target="_blank",document.body.appendChild(a),a.click());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},style:{background:"#ffc53d",color:"#fff"},size:"small",icon:Object(h.jsx)(Bi.a,{})})}):null,"  ",Fe(R.vd)?Object(h.jsx)(zl,{fullName:i,data:t}):null,"  ",Fe(R.R)?Object(h.jsx)(Ml,{data:t}):null,"  ",Fe(R.bd)?Object(h.jsx)(zo,{data:t}):null,"  ",Fe(R.wd)?Object(h.jsx)(Jl,{salesMade:t}):null,"  ",Fe(R.Hb)?function(e){return null==e.deed_id?Object(h.jsx)(ad,{salesMade:e}):Object(h.jsx)(rd,{salesMade:e})}(t):null,"  ",Fe(R.W)?Object(h.jsx)(Zl,{data:t,customerDatabase:n}):null,"  ",Fe(R.nc)?Object(h.jsx)(Kl,{data:t}):null,"  ",Fe(R.ph)?Object(h.jsx)(o.b,{to:"/sales/update-sales-made/".concat(t.id),children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:s,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247",color:"#fff"},size:"small",icon:Object(h.jsx)(le.a,{}),disabled:t.is_desisted})})}):null,"  ",Fe(R.Yb)?Object(h.jsx)(jd,{data:t}):null]})}};return Ae(R.Se)?Object(h.jsx)(ht,{title:"Ventas Realizadas",table:Object(h.jsx)(Q.a,{columns:i,dataSource:Object(ce.a)(t),scroll:{x:1500,y:300},bordered:!0})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},pd=function(){return Object(h.jsx)(md,{})},fd=function(e){return{type:R.Cc,payload:e}},Od=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(f.a)(d,2),j=u[0],b=u[1],m=Object(s.e)(bo,s.c),p=Object(s.d)(),x=function(){var e;p((e=function(){l(!1)},{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/sales/get-sales-by-reform"),success:function(e){return fd(e)},postProcessSuccess:e}}))};Object(a.useEffect)((function(){x()}),[]);var v=[{title:"#",width:5,dataIndex:"id",key:"id",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Lr.b,{children:Object(h.jsx)("label",{children:1+m.indexOf(t)})})})}},{title:"Cliente",width:50,dataIndex:"customer",key:"customer",textWrap:"word-break",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Lr.b,{direction:"vertical",size:1,children:[Object(h.jsx)("label",{className:"margin-0",children:t.customer.name}),Object(h.jsxs)("label",{className:"margin-0",children:[Object(h.jsx)("b",{children:"Tel: "}),t.customer.phone_number]}),Object(h.jsxs)("label",{children:[Object(h.jsx)($i.a,{strong:!0,children:"Correo: "})," ",Object(h.jsxs)($i.a,{ellipsis:{rows:1,expandable:!0,tooltip:!0},children:[t.customer.email," "]})]})]})})}},{title:"Proyecto",width:40,dataIndex:"project",key:"project",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)($i.a,{ellipsis:{rows:1,expandable:!0,tooltip:!0},children:[t.project.name," "]})})}},{title:"Unidad",width:15,dataIndex:"unit",key:"unit",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)($i.a,{ellipsis:{rows:1,expandable:!0,tooltip:!0},children:[t.unit.label," "]})})}},{title:"Valor total reformas",dataIndex:"total_value_reform",width:40,key:"total_value_reform",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)($i.a,{ellipsis:{rows:1,expandable:!0,tooltip:!0},children:[null===t||void 0===t?void 0:t.total_value_reform," "]})})}},{title:"Asesor",dataIndex:"adviser",width:40,key:"adviser",render:function(e,t){var n;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)($i.a,{ellipsis:{rows:1,expandable:!0,tooltip:!0},children:[null===t||void 0===t||null===(n=t.assesor)||void 0===n?void 0:n.name," "]})})}},{title:"Acciones",dataIndex:"actions",width:25,fixed:"right",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(de.a,{title:"Detalle de reforma",children:Object(h.jsx)(S.a,{type:"default",icon:Object(h.jsx)(wi.a,{}),size:"small",onClick:function(){return function(e){r(!0),b(e)}(t)}})})})}}],y=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ht,{title:"Solicitudes de reformas",table:Object(h.jsx)(Q.a,{columns:v,rowKey:"id",dataSource:Object(ce.a)(m),scroll:{x:1e3},size:"small",bordered:!0})}),n&&Object(h.jsx)(po,{handleCancel:function(){r(!1),b(null)},visibleModal:n,onClose:r,idSale:j.id})]});return Object(h.jsxs)(h.Fragment,{children:[o&&Object(h.jsx)(O.a,{tip:"Cargando...",children:y}),!o&&y]})},hd=function(){return Object(h.jsx)(Od,{})},xd=function(e){var t=e.record;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("strong",{children:"Nombre:"})," ",Object(h.jsx)("span",{children:t.customer.name})," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Tel\xe9fono:"})," ",Object(h.jsx)("span",{children:t.customer.telephone})," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Correo:"})," ",Object(h.jsx)("span",{children:t.customer.email})]})},vd=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){i()}),[]);var i=function(){var t,n;e((t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,c(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/after_sales"),postProcessSuccess:t,postProcessError:n}}))},o=[{title:"#",width:5,key:"id",dataIndex:"id",align:"center",render:function(e,t){return r.indexOf(t)+1}},{title:"Cliente",width:40,dataIndex:"customer",key:"customer",align:"center",render:function(e,t){return Object(h.jsx)(xd,{record:t})}},{title:"Proyecto",width:50,dataIndex:"project_name",align:"center",key:"project_name"},{title:"Unidad",width:15,dataIndex:"unit_label",align:"center",key:"unit_label"},{title:"Asesor",dataIndex:"assessor_name",width:40,align:"center",key:"assessor_name"},{title:"Descripcion",dataIndex:"description",key:"description",align:"center",width:40},{title:"Fecha de solicitud",dataIndex:"date_request",key:"date_request",align:"center",width:40,render:function(e,t){return(null===t||void 0===t?void 0:t.date_request)?se()(null===t||void 0===t?void 0:t.date_request).format(Gt):""}},{title:"Dias transcurrido desde la solicitud",dataIndex:"days_passed",key:"days_passed",align:"center",width:40,render:function(e,t){return function(e){var t=new Date(e).getTime(),n=(new Date).getTime();return parseFloat((n-t)/864e5).toFixed(2)}(t.date_request)}},{title:"Estado",dataIndex:"state",key:"state",align:"center",width:40},{title:"Acciones",dataIndex:"action",key:"action",width:25,align:"center",fixed:"right",render:function(e,t){return Object(h.jsx)(wo,{basicInformation:t})}}];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Solicitudes de postventas",children:Object(h.jsx)(Q.a,{columns:o,dataSource:r})})})},yd=function(){return Object(h.jsx)(vd,{})},gd=function(){var e=Object(s.d)(),t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=function(){var e=Object(a.useState)(""),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(f.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)(""),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(""),m=Object(f.a)(b,2),p=m[0],O=m[1],h=Object(a.useState)(""),x=Object(f.a)(h,2),v=x[0],y=x[1],g=Object(a.useState)(""),_=Object(f.a)(g,2),S=_[0],w=_[1],C=Object(a.useState)(""),P=Object(f.a)(C,2),I=P[0],E=P[1],F=Object(a.useState)(0),A=Object(f.a)(F,2),k=A[0],T=A[1],N=Object(a.useState)(0),D=Object(f.a)(N,2);return{code:n,setCode:r,customer_id:o,setCustomer:s,project_id:p,setProject:O,creator_user_id:u,setCreatorUser:j,expiration_code:v,setExpirationCode:y,coupon_type:S,setCouponType:w,discount_type:I,setDiscountType:E,discount_percentage:k,setDiscountPercentage:T,discount_value:D[0],setDiscountValue:D[1]}}(),b=u.code,O=u.setCode,v=u.discount_type,y=u.setDiscountType,w=u.discount_percentage,C=u.setDiscountPercentage,I=u.discount_value,E=u.setDiscountValue,F=function(){var t=Object(p.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(!0),t.next=4,D.validateFields();case 4:n=t.sent,a=Object(j.a)(Object(j.a)({},n),{},{code:b,expiration_code:n.expiration_code.format("YYYY-MM-DD"),project_id:"0"===n.project_id?null:parseInt(n.project_id),creator_user_id:A.id}),e((r=a,c=function(t){t.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se registraba el cup\xf3n"):(Object(P.f)("Ha sido agregado con \xe9xito"),e(cl()),d(!1),V())},i=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/coupon"),data:r,success:function(e){return il(e)},postProcessSuccess:c,postProcessError:i}})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}var r,c,i}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){"Valor Total"===v||1===v?C(0):"Porcentaje"!==v&&2!==v||E(0)}),[v]),Object(a.useEffect)((function(){"Valor Total"===v||1===v?C(0):"Porcentaje"!==v&&2!==v||E(0)}),[]);var A=JSON.parse(localStorage.getItem("USER_INFO"));Object(a.useEffect)((function(){var t;r&&(e(_c()),e(Fa()),e((t=function(e){e.error||O(e._payload)},{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/coupon/get-code-coupon"),postProcessSuccess:t}})))}),[r]);var k=g.a.useForm(),D=Object(f.a)(k,1)[0],L=function(){c(!1),y(0),C(0),E(0)},V=function(){L(),q()},q=function(){D.resetFields()},M=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),U=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){c(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo Cup\xf3n"}),r&&Object(h.jsx)(ue.a,{width:1e3,icon:Object(h.jsx)(De.a,{}),title:"Nuevo cup\xf3n",text:"Nuevo cup\xf3n",backgroundColor:"#1890ff",color:"#ffffff",visible:r,footer:!1,onCancel:L,children:Object(h.jsxs)(g.a,{name:"FormCuopons",layout:"vertical",form:D,onFinish:F,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsxs)(g.a.Item,{label:"C\xf3digo",name:"code",rules:[{required:!1,message:"Campo requerido"}],children:[function(){},Object(h.jsx)(_.a,{value:b,disabled:!0})]})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Cliente",name:"customer_id",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",value:D.getFieldValue("customer_id"),filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0}],defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),U.hasOwnProperty("_payload")&&U._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Proyecto",name:"project_id",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},showSearch:!0,optionFilterProp:"children",value:D.getFieldValue("project_id"),rules:[{required:!0}],placeholder:"Seleccionar...",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:"0",children:"TODOS"}),M.hasOwnProperty("_payload")&&M._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Fecha de vencimiento",name:"expiration_code",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(jt.a,{style:{width:"100%"},format:"YYYY/MM/DD",onChange:D.getFieldValue("expiration_code"),placeholder:"Ingrese una fecha"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Tipo de Cup\xf3n",name:"coupon_type",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},value:D.getFieldValue("coupon_type"),placeholder:"Seleccionar...",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:"1",children:"Descuento"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"Pronto pago"}),Object(h.jsx)(dt.a.Option,{value:"3",children:"Canje"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Tipo de descuento",name:"discount_type",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},placeholder:"Seleccionar...",value:D.getFieldValue("discount_type"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:1,children:"Valor total"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Porcentaje"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.discount_type!==t.discount_type},children:function(e){var t=e.getFieldValue;return 2===t("discount_type")?Object(h.jsx)(g.a.Item,{label:"Descuento (%)",name:"discount_percentage",rules:[{type:"number",required:!0,message:"Campo requerido y debe ser mayor a 0",min:1}],children:Object(h.jsx)(ut.a,{style:{width:"100%"},placeholder:"Valor",defaultValue:w,onChange:D.getFieldValue("discount_percentage")})}):1===t("discount_type")?Object(h.jsx)(g.a.Item,{label:"Descuento ($)",name:"discount_value",rules:[{type:"number",required:!0,message:"Campo requerido y debe ser mayor a 0",min:1}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"},placeholder:"Valor",defaultValue:I,onChange:D.getFieldValue("discount_value")}))}):null}})})]}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:21,xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{children:l?Object(h.jsx)(x,{}):Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})})]})})]})},_d=Object(a.createContext)(),Sd=function(e){var t=e.children,n=e.coupon;return Object(h.jsx)(_d.Provider,{value:{coupon:n},children:t})},wd=function(e){var t,n=e.data,r=e.onClose,c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1],b=Object(s.d)(),O=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,i.validateFields();case 4:t=e.sent,delete(a=Object(j.a)(Object(j.a)({},t),{},{expiration_code:t.dateDiscount.format("YYYY-MM-DD"),creator_user_id:n.creator,customer_id:n.customerid,project_id:"0"===t.project_id?null:parseInt(t.project_id)})).dateDiscount,delete a.customer,b(rl(n.id,a,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocurrio un error mientras se actualizaba"):(Object(P.f)("Cup\xf3n actualizado!"),b(cl())),i.resetFields(),r(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){y()}),[]),Object(a.useEffect)((function(){b(_c())}),[]);var v=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),y=function(){i.setFieldsValue({code:n.code,customer:n.customer,dateDiscount:se()(n.expirationCode),project_id:n.project?n.project:"0",coupon_type:n.coupon_type,discount_type:n.discount_type,discount_percentage:parseFloat(n.coupo_valuePercentage).toFixed(2),discount_value:parseFloat(n.coupon_valueDiscount).toFixed(2)})};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{name:"FormCuopons",layout:"vertical",form:i,onFinish:O,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Codigo",name:"code",rules:[{required:!1,message:"Campo requerido"}],children:Object(h.jsx)(_.a,{placeholder:"Codigo",disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Cliente",name:"customer",rules:[{required:!1,message:"Campo requerido"}],children:Object(h.jsx)(_.a,{placeholder:"Cliente",value:n.customer,disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Proyecto",name:"project_id",rules:[{required:!1,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},value:i.getFieldValue("project_id"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:"0",children:"TODOS"}),v.hasOwnProperty("_payload")&&(null===(t=v._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})})))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Fecha de vencimiento",name:"dateDiscount",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(jt.a,{style:{width:"100%"},value:i.getFieldValue("dateDiscount")})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Tipo de cup\xf3n",name:"coupon_type",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},placeholder:"Select...",value:i.getFieldValue("coupon_type"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:1,children:"Descuento"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Pronto Pago"}),Object(h.jsx)(dt.a.Option,{value:3,children:"Canje"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Tipo de descuento",name:"discount_type",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{style:{width:"100%"},placeholder:"Select...",value:i.getFieldValue("discount_type"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Object(h.jsx)(dt.a.Option,{value:1,children:"Valor Total"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Porcentaje"})]})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:10,sm:10,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.discount_type!==t.discount_type},children:function(e){return 2===(0,e.getFieldValue)("discount_type")?Object(h.jsx)(g.a.Item,{label:"Descuento (%)",name:"discount_percentage",rules:[{validator:function(e,t){return parseFloat(t)>0&&null!=t?Promise.resolve():Promise.reject(new Error("Campo requerido y debe ser mayor a 0"))}}],children:Object(h.jsx)(_.a,{style:{width:"100%"},placeholder:"Valor",value:parseFloat(i.getFieldValue("discount_percentage"))})}):Object(h.jsx)(g.a.Item,{label:"Descuento ($)",name:"discount_value",rules:[{validator:function(e,t){return parseFloat(t)>0&&null!=t?Promise.resolve():Promise.reject(new Error("Campo requerido y debe ser mayor a 0"))}}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{style:{width:"100%"},placeholder:"Valor",value:parseFloat(i.getFieldValue("discount_value"))}))})}})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:21,xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{children:d?Object(h.jsx)(x,{}):Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})})]})})},Cd=function(e){var t=e.handleCancel,n=e.onClose,a=e.data;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ue.a,{centered:!0,visible:!0,width:900,footer:!1,onCancel:t,destroyOnClose:!0,title:"Actualizar cup\xf3n",children:Object(h.jsx)(wd,{data:a,onClose:n})})})},Pd=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.coupon})),b=Object(a.useState)(null),O=Object(f.a)(b,2),x=O[0],v=O[1];Object(a.useEffect)((function(){return e(cl())}),[]);Object(a.useEffect)((function(){var e=[];u.hasOwnProperty("_payload")&&(u._payload.forEach((function(t,n){e.push({num:n+1,code:t.code,customer:t.customer.person.name.replace("_"," "),expiration_code:Ds(t.expiration_code),expirationCode:t.expiration_code,coupon_type:t.coupon_type,discount_type:t.discount_type,valueDiscount:1===t.discount_type?E.format(t.discount_value):F.format(t.discount_percentage)+"%",used:t.used,id:t.id,project:t.project_id,customerid:t.customer_id,creator:t.creator_user_id,coupon_valueDiscount:t.discount_value,coupo_valuePercentage:parseFloat(t.discount_percentage).toFixed(2),created:t.created_at,updated:t.updated_at})})),c(e),e)}),[u]);var y=Object(a.useState)({searchText:"",searchedColumn:""}),g=Object(f.a)(y,2),C=g[0],I=g[1],E=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),F=new Intl.NumberFormat("es-CO",{minimumFractionDigits:0}),A=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,a=t.selectedKeys,r=t.confirm,c=t.clearFilters;return Object(h.jsxs)("div",{style:{padding:8},children:[Object(h.jsx)(_.a,{placeholder:"Buscar",value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return k(a,r,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(h.jsxs)(Lr.b,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){return k(a,r,e)},icon:Object(h.jsx)(wi.a,{}),size:"small",children:"Buscar"}),Object(h.jsx)(S.a,{onClick:function(){return T(c)},size:"small",style:{width:90},children:"Resetear"})]})]})},filterIcon:function(e){return Object(h.jsx)(wi.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},render:function(t){return C.searchedColumn===e?Object(h.jsx)(tc.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[C.searchText],autoEscape:!0,textToHighlight:t?t.toString():"",constructor:"",hasOwnProperty:"",isPrototypeOf:"",propertyIsEnumerable:"",toLocaleString:"",toString:"",valueOf:""}):t}}},k=function(e,t,n){t(),I({searchText:e[0],searchedColumn:n})},T=function(e){e(),I({searchText:""})},N=[Object(j.a)({title:" #",dataIndex:"num",key:"num",width:100,align:"center",fixed:"left"},A("num")),Object(j.a)({title:"C\xf3digo",dataIndex:"code",key:"code",align:"center",width:120},A("codigo")),Object(j.a)({title:"Cliente",dataIndex:"customer",key:"customer",align:"center",width:120},A("cliente")),Object(j.a)({title:"Fecha de vencimiento",dataIndex:"expiration_code",key:"expiration_code",align:"center",width:160},A("fechaVencimiento")),Object(j.a)(Object(j.a)({title:"Tipo",dataIndex:"coupon_type",key:"coupon_type",align:"center",width:90},A("tipo")),{},{render:function(e,t){switch(t.coupon_type){case 1:return Object(h.jsx)("h6",{children:" Descuento "});case 2:return Object(h.jsx)("h6",{children:" Pronto Pago "});default:return Object(h.jsx)("h6",{children:" Canje "})}}}),Object(j.a)(Object(j.a)({title:"Tipo de descuento",dataIndex:"discount_type",key:"discount_type",align:"center",width:100},A("tipoDescuento")),{},{render:function(e,t){return 1===t.discount_type?Object(h.jsx)("h6",{children:" Valor Total "}):Object(h.jsx)("h6",{children:" Porcentaje "})}}),Object(j.a)({title:"Valor de descuento",dataIndex:"valueDiscount",key:"valueDiscount",align:"center",width:80},A("valorDescuento")),{title:"Usado",dataIndex:"used",align:"center",key:"used",width:120,render:function(e,t){return D(t)}},{title:"Acciones",key:"acciones",align:"center",fixed:"right",width:120,render:function(e,t){return L(t)}}],D=function(e){return e.used?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})},L=function(t){var n=function(e){var t=Date.parse(e),n=new Date(t);return n=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()},a=n(t.created),c=n(t.updated),i=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[" Creado: ",a," ",Object(h.jsx)("br",{}),"  Modificado: ",c," "]}),o=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Eliminar "}),s=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Imprimir "}),l=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Editar "}),u=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Enviar "});return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(Sd,{coupon:function(e){if(r!==[])for(var t=0;t<r.length;t++)if(r[t].id===e.id)return r[t]}(t),children:[Fe(R.Ag)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:l,children:Object(h.jsx)(S.a,{disabled:t.used,onClick:function(){return function(e){d(!0),v(e)}(t)},type:"primary",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"},size:"small",icon:Object(h.jsx)(le.a,{})})}):null,"  ",Fe(R.ld)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:s,children:Object(h.jsx)(S.a,{disabled:t.used,size:"small",onClick:function(){var n,a;e((n=t.id,a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,(a=document.createElement("a")).href=n._payload.path,a.target="_blank",a.click();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/coupon/downloadCoupon/").concat(n),postProcessSuccess:a}}))},style:{backgroundColor:"#4C4B99",marginTop:3},icon:Object(h.jsx)(Bi.a,{style:{color:"#fff"}})})}):null,"  ",Fe(R.Ag)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:o,children:Object(h.jsx)(Wt.a,{disabled:t.used,title:"\xbfDesea eliminar el cup\xf3n?",onConfirm:function(){var n,a;e((n=t.id,a=function(t){t.error?Object(P.c)("No se pudo eliminar este cup\xf3n"):(Object(P.f)("Eliminado correctamente"),e(cl()))},{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/coupon/").concat(n),postProcessSuccess:a}}))},onCancel:function(){Object(P.a)("Operaci\xf3n cancelada")},okText:"Si",cancelText:"No",icon:Object(h.jsx)($t.a,{style:{color:"red"}}),children:Object(h.jsx)(S.a,{disabled:t.used,icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})}):null,"  ",Fe(R.Ve)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:u,children:Object(h.jsx)(S.a,{disabled:t.used,size:"small",onClick:function(){var n,a;e((n=t.id,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/coupon/send-coupon/").concat(n),postProcessSuccess:a}}))},style:{backgroundColor:"#5cb85c "},icon:Object(h.jsx)(cs.a,{style:{color:"#fff"}})})}):null,"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:i,children:Object(h.jsx)(S.a,{size:"small",style:{backgroundColor:"#1890FF",marginTop:3},icon:Object(h.jsx)(Ht.a,{style:{color:"#ffffff"}})})})]})})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{children:Object(h.jsx)(Q.a,{columns:N,dataSource:Object(ce.a)(r),scroll:{x:1500,y:300}})}),l&&Object(h.jsx)(Cd,{handleCancel:function(){d(!1),v(null)},onClose:d,data:x})]})},Id=function(){return Ae(R.eb)?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Cupones",extra:[Fe(R.lb)?Object(h.jsx)(gd,{}):null]}),Object(h.jsx)(Pd,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Ed=function(){return Object(h.jsx)(Id,{})},Fd=[{title:"Total pagado",width:50,dataIndex:"TotalPagado",key:"TotalPagado"},{title:"Total comisionado",width:50,dataIndex:"Totalcomisionado",key:"TotalComisionado"},{title:"Comisi\xf3n por pagar",width:50,dataIndex:"ComisionPagar",key:"ComisionPagar"},{title:"Incluir en acta",width:50,dataIndex:"IncluirActa",key:"IncluirActa"}],Ad=["Nombre empresa","Comisiones pagadas","desistimientos"],kd=[{type:"Valor Total",percent:20},{type:"Escritutacion",percent:2}],Td=[[{title:"#",dataIndex:"id"},{title:"Fecha venta",dataIndex:"sale_date"},{title:"cliente",dataIndex:"name"},{title:"Valor del negocio",dataIndex:"business_value"},{title:"Documento legalizados al 100%",dataIndex:"percentage_legalized_document"},{title:"Recaudos abonos",dataIndex:"fertilizer_collections"}],[{title:"Total pagado comisiones",dataIndex:"total_paid_commissions"},{title:"Rec\xe1lculo comisiones pagadas",dataIndex:"recalculation_commission_paid"},{title:"Ajustes aplicados",dataIndex:"applied_settings"},{title:"Saldo por cambio valor venta",dataIndex:"balance_for_change_sale_value"},{title:"Valor a cancelar acta actual",dataIndex:"amount_cancel_current_act"},{title:"Comisi\xf3n total por multa",dataIndex:"total_commission_per_fine"}],[{title:"Total pagado comisiones",dataIndex:"total_paid_commissions_withdrawal"},{title:"Total deuda",dataIndex:"total_debt"},{title:"Total deuda",dataIndex:"total_debt"},{title:"Incluir desistimiento",dataIndex:"include_withdrawal"}]],Nd=[],Dd=[],Rd={required:"${placeholder} es requerido"},Ld=function(){var e,t=Object(s.d)();Object(a.useEffect)((function(){t(_c())}),[]),Object(a.useEffect)((function(){t(hn())}),[]),function(){var e="";Nd=[];for(var t=0;t<Ad.length;t++)e=d(1,t,e),e=Ad[t],Nd.push({title:e,key:"index",children:Td[t]})}(),Dd=[],kd.forEach((function(e){Dd.push({label:e.type,value:e.type})}));var n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),c=Object(a.useState)(!0),i=Object(f.a)(c,2),o=i[0],l=i[1];function d(e,t,n){return e===t&&kd.forEach((function(e){var a=[];n=e.percent+" % de "+e.type,a.push({title:n,dataIndex:"b"}),a.push({title:"Fecha pago",dataIndex:"a"}),Nd.push({title:"Incluir en el acta"+Object(h.jsx)("div",{children:"hola"}),key:t.toString(),filters:[{text:"Si",value:"SI"}],children:a})})),n}return Ae(R.db)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{title:"Verificaci\xf3n comisiones",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(e){e},validateMessages:Rd,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"project",rules:[{required:!0,message:"proyecto requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",defaultValue:"",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(n)&&(null===(e=n._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"afiliated_company",children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",defaultValue:"",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(r)&&r._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})})]}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:"22",xs:24,sm:24,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",onClick:function(){l(!1)},children:"Filtrar"})})})})]})}),Object(h.jsxs)(g.a.Item,{hidden:o,children:[Object(h.jsxs)(w.a,{children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{children:Object(h.jsx)("h5",{children:"Comisi\xf3n administradora:"})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:24,sm:24,md:14,lg:14,xl:14,children:Object(h.jsx)(Q.a,{columns:Fd,dataSource:null,pagination:!1})})})]}),Object(h.jsxs)(w.a,{style:{height:400},children:[Object(h.jsxs)("div",{style:{display:"inline-flex",marginBottom:15},children:[Object(h.jsx)("h5",{style:{marginRight:50},children:"Informe Cumplimiento Comisiones"}),Object(h.jsxs)("div",{style:{display:"inline-flex"},children:[Object(h.jsx)("div",{style:{marginRight:5,backgroundColor:"#D9EDF7",width:23,height:23,borderStyle:"solid",borderWidth:1}}),Object(h.jsx)("p",{style:{marginRight:5},children:"Comisi\xf3n Cumplida"})]}),Object(h.jsxs)("div",{style:{display:"inline-flex"},children:[Object(h.jsx)("div",{style:{marginRight:5,backgroundColor:"#DFF0D8",width:23,height:23,borderStyle:"solid",borderWidth:1}}),Object(h.jsx)("p",{style:{marginRight:5},children:"Comisi\xf3n con acta"})]}),Object(h.jsxs)("div",{style:{display:"inline-flex"},children:[Object(h.jsx)("div",{style:{marginRight:5,backgroundColor:"#FFFFFF",width:23,height:23,borderStyle:"solid",borderWidth:1}}),Object(h.jsx)("p",{style:{marginRight:5},children:"Comisi\xf3n sin cumplir"})]}),Object(h.jsxs)("div",{style:{display:"inline-flex"},children:[Object(h.jsx)("div",{style:{marginRight:5,backgroundColor:"#F2DEDE",width:23,height:23,borderStyle:"solid",borderWidth:1}}),Object(h.jsx)("p",{style:{marginRight:5},children:"Venta Desistida"})]})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("h6",{children:"Incluir en el Acta"}),Object(h.jsx)("br",{}),Object(h.jsx)(je.a.Group,{options:Dd,onChange:function(e){}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(Q.a,{rowKey:"uid",size:"small",columns:Nd,scroll:{x:2800},dataSource:null,bordered:!0}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:"22",xs:24,sm:24,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Generar acta"})})})})]})]})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Vd=function(){return Object(h.jsx)(Ld,{})},qd=n(137),Md=function(e){var t=e.propertyData,n=e.changeStateTableIncluded,r=e.onChangeKit,c=e.changeStateTableCoupon,i=e.recalculatePaymentPlan,o=Object(a.useState)(),s=Object(f.a)(o,2),l=s[0],d=s[1];Object(a.useEffect)((function(){j()}),[t]);var u={borderRadius:"10px",width:"90%",fontSize:"12px",margin:"-5px 0px 0px 9px"},j=function(){var e=[{descripcion:"Valor m2",value:he.format(t.valueM)}];"0"!==t.discountFinishes&&(e=e.concat({descripcion:"Incluye Acabados",value:Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:11,sm:11,md:11,lg:11,xl:11}),Object(h.jsx)(je.a,{checked:t.includesFinishes,onChange:function(e){return r(e)}})]})})),e=e.concat({descripcion:Object(h.jsx)(H.a,{style:u,color:"black",children:Object(h.jsxs)("span",{children:["Haga click aqu\xed para ",Object(h.jsx)("br",{})," ver las Pol\xedticas ",Object(h.jsx)("br",{})," Comerciales"," ",Object(h.jsx)(ml.a,{})]})}),value:Object(h.jsx)(S.a,{onClick:n,type:"primary",children:"P. Comerciales"})},{descripcion:Object(h.jsx)(H.a,{style:u,color:"black",children:Object(h.jsxs)("span",{children:["Haga click aqu\xed para ",Object(h.jsx)("br",{})," aplicar Cup\xf3n ",Object(h.jsx)(ml.a,{})]})}),value:Object(h.jsx)(S.a,{onClick:c,type:"primary",children:"Cupones"})}),t.includesFinishes||(e=e.concat({descripcion:"Valor Inicial",value:he.format(t.initialValue)})),t.includesFinishes||(e=e.concat({descripcion:"Descuento Acabados",value:he.format(t.discountFinishes)})),0!==t.discountCoupons&&(e=e.concat({descripcion:"Descuento Cupones",value:he.format(t.discountCoupons)})),0!==t.discountCouponsPrevious&&(e=e.concat({descripcion:Object(h.jsx)(qd.a,{type:"danger",children:"Descuento Cupones Anterior"}),value:Object(h.jsx)(qd.a,{type:"danger",children:he.format(t.discountCouponsPrevious)})})),0!==t.commercialDiscounts&&(e=e.concat({descripcion:"Descuento Comercial",value:he.format(t.commercialDiscounts)})),0!==t.previousCommercialDiscount&&(e=e.concat({descripcion:Object(h.jsx)(qd.a,{type:"danger",children:"Descuento Comercial Anterior"}),value:Object(h.jsx)(qd.a,{type:"danger",children:he.format(t.previousCommercialDiscount)})})),e=e.concat({descripcion:"Valor de la Unidad",value:he.format(t.unitValue)}),d(e)};return Object(h.jsx)(w.a,{headStyle:{color:"#31708f",backgroundColor:"#d9edf7",borderColor:"#bce8f1"},title:"Valor del Inmueble",children:Object(h.jsx)(Q.a,{style:{width:"100%"},pagination:!1,bordered:!0,columns:[{dataIndex:"descripcion",width:80,height:40,padding:"10px"},{dataIndex:"value",width:100,height:40,padding:"10px"}],dataSource:l,footer:function(){return Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:7,sm:7,md:7,lg:7,xl:7}),Object(h.jsx)(S.a,{onClick:function(){i()},type:"primary",children:"Recalcular Plan de Pago"})]})}})})},Ud=function(){window.addEventListener("keypress",(function(e){13==e.keyCode&&e.preventDefault()}),!1);var e=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.channel}),s.c);return Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{name:"fechaQuote",label:"Fecha cotizaci\xf3n",rules:[{required:!0,message:"Campo requerido"}],style:{width:"50%"},children:Object(h.jsx)(jt.a,{style:{width:"80%"}})})}),Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{name:"comoEntero",label:"\xbfComo se enter\xf3?",rules:[{required:!1,message:"Campo requerido"}],style:{width:"50%"},children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:0,children:"Seleccione..."}),e.hasOwnProperty("_payload")&&e._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name)},e.id)}))]})})}),Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{name:"nivelInteres",label:"Nivel de inter\xe9s",rules:[{required:!1,message:"Campo requerido"}],style:{width:"50%"},children:Object(h.jsxs)(dt.a,{placeholder:"Seleccione un Nivel de Inter\xe9s",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",children:[Object(h.jsx)(dt.a.Option,{value:0,children:"Seleccione"}),Object(h.jsx)(dt.a.Option,{value:1,children:"Bajo"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Medio"}),Object(h.jsx)(dt.a.Option,{value:3,children:"Alto"})]})})})]})},zd=r.a.memo((function(e){var t=e.project,n=Object(a.useState)([]),r=Object(f.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){o()}),[t]);var o=function(){i([{descripcion:"Proyecto",value:null===t||void 0===t?void 0:t.name},{descripcion:"Tipo de Unidad",value:(null===t||void 0===t?void 0:t.area)+" m2"},{descripcion:"Etiqueta",value:null===t||void 0===t?void 0:t.label},{descripcion:"Fecha Estimada de Entrega",value:null===t||void 0===t?void 0:t.estimatedDeliveryDate},{descripcion:"Habitaciones",value:null===t||void 0===t?void 0:t.bedrooms},{descripcion:"Ba\xf1os",value:null===t||void 0===t?void 0:t.toilets},{descripcion:"Parqueadero",value:null===t||void 0===t?void 0:t.parking}])};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{headStyle:{color:"#31708f",backgroundColor:"#d9edf7",borderColor:"#bce8f1"},title:"Datos del Inmueble",style:{marginRight:20},children:Object(h.jsx)(Q.a,{style:{width:"100%"},pagination:!1,columns:[{dataIndex:"descripcion",width:80,height:40},{dataIndex:"value",width:80,height:40}],dataSource:Object(ce.a)(c),bordered:!0})})})})),Gd=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:2}),Bd=r.a.memo((function(e){var t=e.included,n=Object(a.useState)([]),r=Object(f.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){o()}),[t]);var o=function(){i([{descripcion:"Valor Parqueadero",value:Gd.format(null===t||void 0===t?void 0:t.valueParking)},{descripcion:"Valor Kit de Acabados",value:Gd.format(null===t||void 0===t?void 0:t.valueKit)},{descripcion:"Valor Terraza/ Cuarto \xfatil/ otros",value:Gd.format(null===t||void 0===t?void 0:t.valueOthers)},{descripcion:"Prima Vista",value:Gd.format(null===t||void 0===t?void 0:t.heightPremium)},{descripcion:"Prima Altura por m2",value:Gd.format(null===t||void 0===t?void 0:t.sightCousin)}])};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{headStyle:{color:"#31708f",backgroundColor:"#d9edf7",borderColor:"#bce8f1"},title:"Incluidos",style:{marginRight:20},children:Object(h.jsx)(Q.a,{style:{width:"100%"},pagination:!1,columns:[{dataIndex:"descripcion",width:80,height:40,padding:"10px"},{dataIndex:"value",width:80,height:40,padding:"10px"}],dataSource:Object(ce.a)(c),bordered:!0})})})})),Yd=r.a.memo((function(e){var t=e.title,n=e.quote;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(oc.b,{title:t,style:{marginTop:15},size:"small",bordered:!0,column:{xxl:2,xl:1,lg:1,md:1,sm:1,xs:1}}),Object(h.jsxs)(oc.b,{style:{marginTop:15},size:"small",bordered:!0,column:{xxl:2,xl:1,lg:1,md:1,sm:1,xs:1},children:[Object(h.jsx)(oc.b.Item,{label:"C.I. No Financiada (".concat(parseInt(null===n||void 0===n?void 0:n.initialFeeNotFundedPercentage),"%)"),children:he.format(null===n||void 0===n?void 0:n.initialFeeNotFunded)}),Object(h.jsx)(oc.b.Item,{label:"C.I. Financiada (".concat(parseInt(null===n||void 0===n?void 0:n.initialFeeFinancedPercentage),"%)"),children:he.format(null===n||void 0===n?void 0:n.initialFeeFinanced)})]})]})})),Jd=r.a.memo((function(e){var t=e.paymentMethodProposedByTheProject,n=Object(a.useState)(t),r=Object(f.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){i(t)}),[t]),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:24,children:Object(h.jsxs)(oc.b,{style:{marginTop:15},size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[Object(h.jsx)(oc.b.Item,{label:"Valor de la unidad",children:he.format(c.unitValue)}),Object(h.jsx)(oc.b.Item,{label:"Valor presente",children:he.format(c.presentValue)})]})}),Object(h.jsx)(N.a,{span:24,children:Object(h.jsxs)(oc.b,{style:{marginTop:15},size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[0===c.financialDiscountOrIncrease?Object(h.jsxs)(oc.b.Item,{label:"Descuento financiero",children:[" ",Zo.format(0)," "]}):c.financialDiscountOrIncrease<0?Object(h.jsxs)(oc.b.Item,{className:"valor3",label:"Descuento financiero",children:[" ",Zo.format(c.financialDiscountOrIncrease)," "]}):c.financialDiscountOrIncrease>0?Object(h.jsxs)(oc.b.Item,{className:"valor2",label:"Incremento financiero",children:[" ",Zo.format(c.financialDiscountOrIncrease)," "]}):void 0,Object(h.jsx)(oc.b.Item,{label:"Descuento comercial",children:he.format(c.commercialDiscounts)}),Object(h.jsx)(oc.b.Item,{label:"Descuento cupones",children:he.format(c.discountCoupons)}),Object(h.jsx)(oc.b.Item,{label:"Descuento acabados",children:c.finishesIncluded?he.format(0):he.format(c.discountFinishes)})]})})]})})),Hd=function(){var e,t=Object(d.useParams)().id,n=g.a.useForm(),r=Object(f.a)(n,1)[0],c=Object(s.d)(),i=Object(a.useState)({}),o=Object(f.a)(i,2),l=o[0],u=o[1],j=Object(a.useState)(!1),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),_=y[0],C=y[1],I=Li(),E=I.basicInformation,F=I.project,A=I.included,k=I.propertyData,D=I.paymentMethodProposedByTheProject,L=I.paymentMethodProposedByTheClient,V=I.response,q=I.finalValueProposedByTheClient,M=I.projectSet,U=I.includedSet,z=I.propertyDataSet,G=I.basicInformationSet,B=I.changeStateTableIncluded,Y=I.discountsSet,H=I.onChangeKit,Z=I.changeStateTableCoupon,Q=I.paymentMethodProposedByTheProjectSet,K=I.paymentMethodProposedByTheClientSet,W=I.modified_values,X=I.calculatePor,$=I.calculatePresentValueByTheClient,ee=I.recalculatePaymentPlan;Object(a.useEffect)((function(){var e,n,a;c((e=t,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,G(n._payload),M(n._payload),U(n._payload),z(n._payload),Q(n._payload),K(n._payload),u(n._payload.project),C(n._payload.coupons);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/quotation/").concat(e),success:function(e){return ne(e)},postProcessSuccess:n,postProcessError:a}})),c(Fa())}),[]),Object(a.useEffect)((function(){te()}),[E]);var te=function(){r.setFieldsValue({nivelInteres:E.nivelInteres,comoEntero:E.comoEntero,fechaQuote:E.fechaQuote})},ae=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.validateFields();case 2:n=e.sent,a={interest_level:n.nivelInteres,channel_id:n.comoEntero,amounts:V.modified_values,discounts:V.discount,cupones:V.coupons,finishes_included:k.includesFinishes?1:0,value_m2:k.valueM,value_total_unit:D.unitValue,value_discounts:L.commercialDiscounts,value_coupons:L.discountCoupons},c((i=t,o=a,s=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):(Object(P.f)(n.message),x(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/quotation/").concat(i),data:o,postProcessSuccess:s,postProcessError:l}}));case 5:case"end":return e.stop()}var i,o,s,l}),e)})));return function(){return e.apply(this,arguments)}}();return O?Object(h.jsx)(d.Redirect,{exact:!0,to:"/sales/quotes"}):Object(h.jsx)(w.a,{children:Object(h.jsxs)(g.a,{name:"FormQuoteUpdate",layout:"vertical",form:r,onFinish:ae,children:[Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(Ud,{})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(zd,{project:F})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(Bd,{included:A})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(Md,{propertyData:k,changeStateTableIncluded:B,onChangeKit:H,changeStateTableCoupon:Z,recalculatePaymentPlan:ee})})]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:12,children:k.tradePolicies&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:" solid rgb(235, 237, 240);"},title:"Descuentos comerciales"}),Object(h.jsx)(bl,{Project:l,Discoun:Y})]})}),Object(h.jsx)(N.a,{span:12,children:k.Coupon&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:" solid rgb(235, 237, 240);"},title:"Descuentos cupones"}),Object(h.jsx)(dl,{Discoun:Y,Precie:k.unitValue,dataSource:_})]})})]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Yd,{title:"Forma de pago propuesta por el proyecto",quote:D})}),Object(h.jsx)(N.a,{span:1}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Yd,{quote:L,title:"Forma de Pago propuesta por el cliente"})})]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)($s,{amountOfFees:D.formOfPayments})}),Object(h.jsx)(N.a,{span:1}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Hs,{valueMonth:null===D||void 0===D||null===(e=D.formOfPayments[1])||void 0===e?void 0:e.value,calculatePor:X,modified_values:W,dataTable:L.formOfPayments,valueUnit:L.unitValue,calculatePresentValueByTheClient:$,trueUnitValue:q.valueOfTheUnitProposed})})]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Jd,{paymentMethodProposedByTheProject:D})}),Object(h.jsx)(N.a,{span:1}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Jd,{paymentMethodProposedByTheProject:L})})]})}),Object(h.jsx)(J.a,{}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:20}),Object(h.jsx)(N.a,{span:4,children:Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",danger:!0,onClick:function(){x(!0)},children:"Cancelar"})})}),Object(h.jsx)(N.a,{children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{marginLeft:"5%",backgroundColor:"#5cb85c",borderColor:"#5cb85c"},children:"Guardar"})})})]})})]})]})})},Zd=function(){return Object(h.jsx)(Hd,{})},Qd=function(e){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/direct-collection"),headers:R.hg,success:function(e){return nu(e)},postProcessSuccess:e}}},Kd=function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/direct-collection/").concat(e),data:t,success:function(e,t){return Wd(e,t)},postProcessSuccess:n,postProcessError:a}}},Wd=function(e,t){return{type:R.Gg,payload:{directId:e,data:t}}},Xd=function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/direct-collection/verify/").concat(e),data:t,success:function(e,t){return $d(e,t)},postProcessSuccess:n,postProcessError:a}}},$d=function(e,t){return{type:R.xg,payload:{directId:e,data:t}}},eu=function(e,t){return{type:R.We,payload:{directId:e,data:t}}},tu=function(e){return{type:R.r,payload:e}},nu=function(e){return{type:R.xc,payload:e}},au=function(){var e,t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(0),b=Object(f.a)(u,2),O=b[0],x=b[1],v=Object(a.useState)(!1),y=Object(f.a)(v,2),w=y[0],C=y[1],I=Object(a.useState)([]),E=Object(f.a)(I,2),F=E[0],A=E[1],k=g.a.useForm(),D=Object(f.a)(k,1)[0],L=Object(a.useState)(null),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(s.d)(),z=function(e){C(e)},G=function(){c(!1),K()};Object(a.useEffect)((function(){r&&U(_c())}),[r]);var B=JSON.parse(localStorage.getItem("USER_INFO"));Object(a.useEffect)((function(){var e,t;(z(!1),D.setFieldsValue({sale_id:""}),0!==O&&0!==l)&&U((e={customer_id:l,project_id:O},t=function(e){0===e._payload.length?(Object(P.g)("No hay unidades disponibles"),z(!1)):(A(e._payload),z(!0))},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/sales/get-by-customer-and-project"),data:e,postProcessSuccess:t}}))}),[O,l]);var Y=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.validateFields();case 3:t=e.sent,n=Object(j.a)(Object(j.a)({},t),{},{user_id:B.id,consignment_date:t.consignmentDate.format("YYYY-MM-DD"),consignment_amount:parseFloat(t.consignment_amount)}),(a=new FormData).append("consignment_support",q,q.name),a.append("consignment_date",n.consignment_date),a.append("consignment_concept",n.consignment_concept),a.append("consignment_amount",n.consignment_amount),a.append("user_id",n.user_id),a.append("sale_id",n.sale_id),delete n.voucher_Support,delete n.consignmentDate,delete n.customer_id,delete n.project_id,U((r=a,c=function(e){e.error?Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba el recaudo"):(Object(P.f)("Recaudo directo creado"),U(Qd()),W())},i=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/direct-collection"),data:r,success:function(e){return tu(e)},postProcessSuccess:c,postProcessError:i}})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}var r,c,i}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),H={name:"file",beforeUpload:function(){return!1},onChange:function(e){D.setFieldsValue({voucher_Support:void 0!==e.file?e.file.name:" "}),M(e.file)},showUploadList:!1},Z=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),Q=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),K=function(){z(!1),D.resetFields()},W=function(){G(),K()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){c(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),!0===r?Object(h.jsx)(ue.a,{visible:r,footer:!1,onCancel:G,width:900,children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:D,onFinish:Y,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Cliente",name:"customer_id",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:d,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0}],defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."},"0"),Z.hasOwnProperty("_payload")&&(null===(e=Z._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Proyecto",name:"project_id",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:x,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0}],defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),Q.hasOwnProperty("_payload")&&Q._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Unidad",name:"sale_id",labelCol:{span:24},wrapperCol:{span:24},rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",disabled:!w,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0}],defaultValue:"",value:D.getFieldValue("unit_id"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),F.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.sale_id,children:e.unit_label},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignmentDate",label:"Fecha de consignaci\xf3n",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(jt.a,{style:{width:"100%"},format:"YYYY/MM/DD",placeholder:"Ingrese una fecha"})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignment_amount",label:"Valor de consignaci\xf3n",rules:[{type:"number",required:!0,message:"Campo requerido"}],children:Object(h.jsx)(ut.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"},onChange:D.getFieldValue("consignment_Value")})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignment_concept",label:"Concepto de consignaci\xf3n",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{placeholder:"Escoja el concepto",onChange:D.getFieldValue("consignment_Concept"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:1,children:"Abono"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Reformas"}),Object(h.jsx)(dt.a.Option,{value:3,children:"Otros"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:5,lg:5,xl:6,children:Object(h.jsx)(g.a.Item,{name:"voucher_Support",label:"Soporte del comprobante",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:5,lg:5,xl:6,children:Object(h.jsx)(g.a.Item,{name:"SelectFile",label:" ",children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},H),{},{children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir archivo"})}))})})]}),Object(h.jsx)(J.a,{}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:18,xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{style:{margin:"0"},children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})})]})}):Object(h.jsx)(ue.a,{visible:!1,footer:!1,width:900})]})},ru={labelCol:{span:11},wrapperCol:{span:20}},cu=function(e){var t=Object(s.d)(),n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1],b=g.a.useForm(),O=Object(f.a)(b,1)[0],x=function(){var n=Object(p.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u(!0),t((a=e.data.id,r=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocurri\xf3 Un error al momento de enviar el correo"):Object(P.f)("Correo enviado"),u(!1),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/direct-collection/send-mail/").concat(a),success:function(e,t){return eu(e,t)},postProcessSuccess:r,postProcessError:c}}));case 2:case"end":return n.stop()}var a,r,c}),n)})));return function(){return n.apply(this,arguments)}}(),v=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Enviar a Contabilidad "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:v,children:Object(h.jsx)(S.a,{style:{background:"#ff4d4f",color:"#fff"},size:"small",onClick:function(){i(!0),O.setFieldsValue({customer_name:e.data.name,project_name:e.data.project_name,unit_label:e.data.unit_label})},icon:Object(h.jsx)(cs.a,{})})}),Object(h.jsx)(ue.a,{title:"Enviar email",centered:!0,visible:c,footer:!1,onCancel:function(){return i(!1)},width:900,children:Object(h.jsxs)(g.a,Object(j.a)(Object(j.a)({form:O,layout:"vertical"},ru),{},{name:"nest-messages",onFinish:function(e){return Object(j.a)(Object(j.a)({},e),{},{"date-picker":e["date-picker"].format("YYYY-MM-DD")})},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"customer_name",label:"Nombre del cliente",children:Object(h.jsx)(_.a,{placeholder:"Nombre cliente",style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"project_name",label:"Proyecto",children:Object(h.jsx)(_.a,{placeholder:"Nombre proyecto",style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"unit_label",label:"Unidad",children:Object(h.jsx)(_.a,{placeholder:"Unidad",style:{width:"100%"},disabled:!0})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"data",label:" ",children:Object(h.jsx)(_.a.TextArea,{disabled:!0})})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:18,xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{loading:d,type:"primary",htmlType:"submit",onClick:x,children:"Enviar email"})})})})]}))})]})},iu=n(643);function ou(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click()}var su=function(e){var t=e.data,n=e.onSave,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(s.d)(),o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(null),O=Object(f.a)(b,2),x=O[0],v=O[1],y=Object(a.useState)(!1),w=Object(f.a)(y,2),C=w[0],I=w[1],E=function(){c.resetFields()},F=function(){u(!1)},A=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,c.validateFields();case 3:a=e.sent,(r=new FormData).append("voucher_number",a.voucher_number),null!==x&&r.append("voucher_support_document",x,x.name),i(Xd(t.id,r,(function(e){e.error?(Object(P.c)("\xa1UPS! Ocurri\xf3 un error al momento de verificar el recaudo"),I(!1)):(Object(P.f)("\xa1Recaudo verificado correctamente!"),n(),v(null),F(),E(),I(!1))})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k={name:"file",beforeUpload:function(){return!1},onChange:function(e){c.setFieldsValue({voucher_Support:void 0!==e.file?e.file.name:" "}),v(e.file)},showUploadList:!1};var D=[{descripcion:"Cliente",value:function(){var e=t.name.split("_");return e[0]+" "+e[1]}()},{descripcion:"Proyecto",value:t.project_name},{descripcion:"Unidad",value:t.unit_label},{descripcion:"Fecha de consignaci\xf3n",value:se()(t.consignment_date).format("DD/MM/YYYY")},{descripcion:"Valor de consignaci\xf3n",value:he.format(t.consignment_amount)},{descripcion:"Concepto de consignaci\xf3n",value:1===(null===t||void 0===t?void 0:t.consignment_concept)?"recaudo":2===(null===t||void 0===t?void 0:t.consignment_concept)?"Abono":"otros"},{descripcion:"Soporte  de consignaci\xf3n",value:null===t||void 0===t?void 0:t.name_multimedia}],L=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Verificar "});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:L,children:Object(h.jsx)(S.a,{style:{backgroundColor:"#4BAFF3",color:"#ffffff"},size:"small",onClick:function(){c.setFieldsValue({voucher_Support:null===t||void 0===t?void 0:t.reification_document_name,voucher_number:null===t||void 0===t?void 0:t.voucher_number}),u(!0)},icon:Object(h.jsx)(iu.a,{})})}),Object(h.jsx)(ue.a,{title:"Verificaci\xf3n abono",visible:d,footer:!1,onCancel:function(){return u(!1)},width:"70%",children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},form:c,onFinish:A,children:[Object(h.jsx)(Q.a,{showHeader:!1,style:{width:"60%"},pagination:!1,columns:[{dataIndex:"descripcion",width:40,padding:"10px"},{dataIndex:"value",width:80,padding:"10px"}],dataSource:Object(ce.a)(D),bordered:!0}),Object(h.jsx)(J.a,{}),Object(h.jsx)(oc.b,{title:"Verificado por contabilidad"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:6,lg:6,xl:6,children:Object(h.jsx)(g.a.Item,{name:"voucher_number",label:"No. de comprobante",rules:[{required:!0}],children:Object(h.jsx)(ut.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"voucher_Support",label:"Soporte del comprobante",rules:[{required:!0}],children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:9,children:Object(h.jsxs)(g.a.Item,{valuePropName:"fileList",label:" ",name:"voucher_support_document",children:[Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({accept:R.Lh,name:"voucher_support_document"},k),{},{getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:Object(h.jsx)(S.a,{style:{width:"100%"},type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir archivo"})})),Object(h.jsx)(S.a,{onClick:function(){null===x&&ou(null===t||void 0===t?void 0:t.reification_document_path)},style:{background:"#389e0d",color:"#fff"},icon:Object(h.jsx)(Po.a,{}),children:"Descargar"})]})})]}),Object(h.jsx)(J.a,{}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{style:{margin:"0"},children:Object(h.jsx)(S.a,{disabled:C,type:"primary",htmlType:"submit",children:"Guardar"})})})]})]})})]})},lu=function(e){var t=e.data,n=e.onClose,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(null),b=Object(f.a)(u,2),O=b[0],x=b[1],v=Object(s.d)();Object(a.useEffect)((function(){y()}),[]);var y=function(){c.setFieldsValue({consignmentDate:se()(null===t||void 0===t?void 0:t.consignment_date),consignment_amount:null===t||void 0===t?void 0:t.consignment_amount,customer_name:null===t||void 0===t?void 0:t.name,project_name:null===t||void 0===t?void 0:t.project_name,unit:null===t||void 0===t?void 0:t.unit_label,AdjustmentConcept:null===t||void 0===t?void 0:t.adjustment_concept,consignmentConcept:null===t||void 0===t?void 0:t.consignment_concept,voucher_Support:null===t||void 0===t?void 0:t.name_multimedia})},w=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,c.validateFields();case 4:a=e.sent,r=Object(j.a)(Object(j.a)({},a),{},{id:t.id,consignment_date:a.consignmentDate.format("YYYY-MM-DD"),consignment_amount:parseFloat(a.consignment_amount)}),i=new FormData,null!==O&&i.append("consignment_support",O,O.name),i.append("adjustment_concept",r.AdjustmentConcept),i.append("consignment_date",r.consignment_date),i.append("consignment_concept",r.consignmentConcept),i.append("consignment_amount",r.consignment_amount),o=parseInt(t.id),v(Kd(o,i,(function(e){e.error?Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba el recaudo"):(Object(P.f)("Recaudo directo creado"),v(Qd()),c.resetFields(),n(!1)),d(!1)}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),C={name:"file",beforeUpload:function(){return!1},onChange:function(e){c.setFieldsValue({voucher_Support:void 0!==e.file?e.file.name:" "}),x(e.file)},showUploadList:!1};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{layout:"vertical",form:c,size:"middle",validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},onFinish:w,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"customer_name",label:"Cliente",children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"project_name",label:"Proyecto",children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{name:"unit",label:"Unidad",children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignmentDate",label:"Fecha de consignaci\xf3n",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:c.getFieldValue("consignmentDate"),style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignment_amount",label:"Valor de consignaci\xf3n",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(ut.a,{value:c.getFieldValue("consignment_amount"),formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignmentConcept",label:"Concepto de consignaci\xf3n",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsxs)(dt.a,{placeholder:"Escoja el concepto",value:c.getFieldValue("consignmentConcept"),children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:1,children:"Abono"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Reformas"}),Object(h.jsx)(dt.a.Option,{value:3,children:"Otros"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"AdjustmentConcept",label:"Concepto ajuste",rules:[{required:!0}],children:Object(h.jsx)(_.a.TextArea,{value:c.getFieldValue("AdjustmentConcept")})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:16,lg:16,xl:16,children:Object(h.jsx)(g.a.Item,{name:"voucher_Support",label:"Soporte del comprobante",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{name:"SelectFile",label:" ",children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},C),{},{children:Object(h.jsx)(S.a,{type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir archivo"})}))})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{name:"download",label:" ",children:Object(h.jsx)(S.a,{onClick:function(){null===O&&ou(t.path_multimedia)},style:{background:"#389e0d",color:"#fff"},icon:Object(h.jsx)(Po.a,{}),children:"Descargar"})})})]}),Object(h.jsx)(J.a,{}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:18,xs:24,sm:24,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{style:{margin:"0"},children:Object(h.jsx)(S.a,{loading:l,type:"primary",htmlType:"submit",children:"Guardar"})})})})]})})},du=function(e){var t=e.data,n=e.onClose,a=e.onCancel;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ue.a,{centered:!0,visible:!0,width:900,footer:!1,destroyOnClose:!0,onCancel:a,children:Object(h.jsx)(lu,{data:t,onClose:n})})})},uu=n(644),ju=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(f.a)(d,2),b=u[0],x=u[1],v=Object(s.d)(),y=function(){r(!0),v(Qd(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error&&Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba el recaudo"),r(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};Object(a.useEffect)((function(){return y()}),[]);var g=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.directColletion._payload})),_=[{title:"Cliente",width:100,dataIndex:"name",key:"name",align:"center",render:function(e){var t=e.split("_");return t[0]+" "+t[1]}},Object(j.a)(Object(j.a)({title:"Proyecto",width:50,dataIndex:"project_name",key:"project_name",align:"center"},Object(ce.b)("project_name")),ce.c),Object(j.a)(Object(j.a)({title:"Unidad",dataIndex:"unit_label",key:"unit_label",width:20,align:"center"},Object(ce.b)("unit_label")),ce.c),{title:"Fecha consignaci\xf3n",dataIndex:"consignment_date",key:"consignment_date",width:40,align:"center",render:function(e){return se()(e).format("DD/MM/YYYY")}},{title:"Valor consignaci\xf3n",dataIndex:"consignment_amount",key:"consignment_amount",width:40,align:"center",render:function(e,t){return Object(h.jsx)("a",{href:null===t||void 0===t?void 0:t.path_multimedia,style:{borderBottom:"1px solid"},target:"_blank",rel:"noreferrer",children:he.format(t.consignment_amount)})}},{title:"Concepto",dataIndex:"consignment_concept",key:"consignment_concept",align:"center",width:40,render:function(e){return 1===e?"Abono":2===e?"Recaudo":"Otros"}},{title:"Verificado",width:20,align:"center",dataIndex:"verified",render:function(e,t){return w(null===t||void 0===t?void 0:t.verified)}},{title:"Enviado a cliente",width:30,align:"center",dataIndex:"SentToCustomer",render:function(e,t){return w(null===t||void 0===t?void 0:t.sent_to_customer)}},{title:"Acciones",key:"acciones",fixed:"right",align:"center",width:120,render:function(e,t){return C(t)}}],w=function(e){return 1===parseInt(e)?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})},C=function(e){var t=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[" ",1===(null===e||void 0===e?void 0:e.consignment_concept)?"Reformas":2===(null===e||void 0===e?void 0:e.consignment_concept)?"Abono":"Otros",Object(h.jsx)("hr",{}),"Creado: ",e.created_at," ",Object(h.jsx)("br",{}),"  Modificado: ",e.updated_at," "]}),n=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Ajustes "});return Object(h.jsxs)(h.Fragment,{children:[Fe(R.Mh)?Object(h.jsx)(su,{data:e,onSave:y}):null,"  ",Fe(R.Hg)?Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:n,children:Object(h.jsx)(S.a,{onClick:function(){return function(e){l(!0),x(e)}(e)},style:{background:"#52c41a",color:"#fff"},size:"small",icon:Object(h.jsx)(uu.a,{})})}):null,"  ",Fe(R.Ue)?Object(h.jsx)(cu,{data:e}):null,"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{size:"small",type:"primary",icon:Object(h.jsx)(Ht.a,{})})})]})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ht,{title:"Recaudos directos",table:Object(h.jsx)(O.a,{style:{paddingLeft:"46%"},spinning:n,size:"large",children:Object(h.jsx)(Q.a,{columns:_,dataSource:g})})}),o&&Object(h.jsx)(du,{onCancel:function(){l(!1),r(!0),v(Qd(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error&&Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba el recaudo"),r(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onClose:l,data:b,onSave:y})]})},bu=function(){return Ae(R.Zb)?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Recaudos directos",extra:[Fe(R.nb)?Object(h.jsx)(au,{}):null]}),Object(h.jsx)(ju,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},mu=function(){return Object(h.jsx)(bu,{})},pu=n(184),fu=n(645),Ou=function(e){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/trust-funds"),headers:R.hg,success:function(e){return yu(e)},postProcessSuccess:e}}},hu=function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/trust-funds/").concat(e),data:t,success:function(e,t){return vu(e,t)},postProcessSuccess:n,postProcessError:a}}},xu=function(e){return{type:R.G,payload:e}},vu=function(e,t){return{type:R.Eh,payload:{directId:e,data:t}}},yu=function(e){return{type:R.Dc,payload:e}},gu=function(e){return{type:R.Zc,payload:e}},_u=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(f.a)(d,2),b=u[0],O=u[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),w=y[0],C=y[1],I=Object(a.useState)([]),E=Object(f.a)(I,2),F=E[0],A=E[1],k=Object(a.useState)(null),D=Object(f.a)(k,2),L=D[0],V=D[1],q=Object(a.useState)(!1),M=Object(f.a)(q,2),U=M[0],z=M[1],G=g.a.useForm(),B=Object(f.a)(G,1)[0],Y=Object(s.d)(),H=[{title:"Descripci\xf3n",width:400,dataIndex:"description",key:"description",align:"center"}],Z=function(){l(!1),B.resetFields(),C([]),A([])},K={name:"file",beforeUpload:function(e){if("application/vnd.ms-excel"===e.type){var t=[];return t.push({description:"El formato archivo es v\xe1lido. Nombre del archivo: "+e.name}),F.forEach((function(e){t.push(e)})),A(t),z(!0),!1}var n=[];n.push({description:"Tipo de archivo no permitido. Cargue un Excel de tipo XLS"}),w.forEach((function(e){n.push(e)})),C(n),Object(P.c)("Formato inv\xe1lido")},onChange:function(e){B.setFieldsValue({file_name:e.file.name}),O(e.file),V(e.fileList.pop().originFileObj)},showUploadList:!1},W=JSON.parse(localStorage.getItem("USER_INFO")),X=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(!0),U&&Object(pu.ExcelRenderer)(L,(function(e,t){if(e)console.error(e);else{var n=t.rows[1],a=se()(n[2]).isValid();if(n.length>0&&n[0].length>0&&toString(n[1]).length>0&&!0===a&&n[3].length>0&&NaN!==parseFloat(n[4])){var r=[];r.push({description:"El archivo fue procesado con \xe9xito. Nombre del archivo: "+b.name}),F.forEach((function(e){r.push(e)})),A(r),$(L)}else{var c=[];c.push({description:"No se pudo procesar el archivo."}),w.forEach((function(e){c.push(e)})),C(c)}}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.validateFields();case 3:n=e.sent,a=Object(j.a)(Object(j.a)({},n),{},{user_id:W.id}),(c=new FormData).append("fiduciary_collection_document",t,t.name),c.append("user_id",a.user_id),delete a.file_name,Y((i=c,o=function(e){e.error?Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba el recaudo"):(Object(P.f)("Recaudo fiduacial creado"),Y(Ou()),Z())},s=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/trust-funds"),data:i,success:function(e){return xu(e)},postProcessSuccess:o,postProcessError:s}})),r(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),Object(P.c)("\xa1UPS! Ocurri\xf3 un error mientras se registraba el recaudo "+e.t0),r(!1);case 17:case"end":return e.stop()}var i,o,s}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){l(!0)},icon:Object(h.jsx)(De.a,{}),children:"Nuevo"}),Object(h.jsx)(ue.a,{visible:o,footer:!1,onCancel:Z,width:900,title:"Nuevo recaudo fiducia",children:Object(h.jsxs)(g.a,{layout:"vertical",size:"middle",form:B,children:[Object(h.jsxs)(T.a,{gutter:16,align:"middle",justify:"center",children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:16,lg:16,xl:10,children:Object(h.jsx)(g.a.Item,{name:"file_name",label:"Cargar archivo fiducia",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(_.a,{style:{width:"100%"},disabled:!0})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:16,lg:16,xl:5,children:Object(h.jsx)(g.a.Item,{name:"SelectFile",label:" ",children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},K),{},{children:Object(h.jsx)(S.a,{disabled:n,type:"primary",icon:Object(h.jsx)(Dc.a,{}),children:"Elegir archivo"})}))})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:16,lg:16,xl:5,children:Object(h.jsx)(g.a.Item,{name:"butttonProcesed",label:" ",children:Object(h.jsx)(S.a,{disabled:n,type:"primary",style:{background:"#c21313",borderColor:"#c21313"},onClick:X,icon:Object(h.jsx)(fu.a,{}),children:"Procesar"})})}),n?Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(x,{})}):null]}),Object(h.jsx)(J.a,{}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{children:Object(h.jsx)(g.a.Item,{label:"Errores",children:Object(h.jsx)(Q.a,{pagination:!1,bordered:!0,columns:H,dataSource:Object(ce.a)(w)})})}),Object(h.jsx)(N.a,{children:Object(h.jsx)(g.a.Item,{label:"Procesados",children:Object(h.jsx)(Q.a,{pagination:!1,bordered:!0,columns:H,dataSource:Object(ce.a)(F)})})})]})]})})]})},Su=n(232),wu=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),i=Object(f.a)(c,2),o=i[0],l=i[1],d=g.a.useForm(),u=Object(f.a)(d,1)[0],b=Object(s.d)(),O=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.lastPaymentfiduciarytrustColletion._payload})),v=[{title:" #",dataIndex:"num",key:"num",width:10,align:"center",fixed:"left",render:function(e,t){return O.indexOf(t)+1}},Object(j.a)({title:"Proyecto",width:40,dataIndex:"project_name",key:"project_name"},Object(ce.b)("project_name")),Object(j.a)({title:"Fecha de \xdaltimo Abono",width:50,dataIndex:"last_payment_fiduciary",key:"last_payment_fiduciary"},Object(ce.b)("last_payment_fiduciary"))],y=function(){r(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){var e;r(!0),b((e=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent)?!0===n.error?Object(P.c)("No hay Datos en la tabla"):Object(P.f)("Carga Completa"):Object(P.g)("No hay Datos en la tabla"),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/trust-funds/last-payment-fiduciary"),headers:R.hg,success:function(e){return gu(e)},postProcessSuccess:e}}))},icon:Object(h.jsx)(Su.a,{}),children:"\xdaltimos Abonos"}),Object(h.jsx)(ue.a,{visible:n,footer:!1,width:900,onCancel:y,title:"\xdaltimos Abonos",children:Object(h.jsx)(g.a,{layout:"vertical",size:"middle",form:u,children:Object(h.jsxs)(w.a,{style:{marginTop:20},children:[o?Object(h.jsx)(x,{}):Object(h.jsx)(Q.a,{columns:v,dataSource:O,size:"small"}),Object(h.jsx)(J.a,{}),Object(h.jsx)(T.a,{justify:"end",children:Object(h.jsx)(N.a,{children:Object(h.jsx)(S.a,{type:"primary",onClick:y,children:"Finalizar"})})})]})})})]})},Cu=function(e){var t=e.data,n=e.onClose,r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],b=d[1],O=Object(s.d)(),v=g.a.useForm(),y=Object(f.a)(v,1)[0];function w(){b(!1)}Object(a.useEffect)((function(){C()}),[]);var C=function(){y.setFieldsValue({consignmentDate:se()(t.consignment_date),consignment_amount:t.consignment_amount,consignmentConcept:t.concept,AdjustmentConcept:null===t||void 0===t?void 0:t.adjustment_concept})},I=function(){var e=Object(p.a)(m.a.mark((function e(){var a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),o(!0),e.next=4,y.validateFields();case 4:a=e.sent,delete(r=Object(j.a)(Object(j.a)({},a),{},{consignment_date:a.consignmentDate.format(Gt),consignment_amount:parseFloat(a.consignment_amount)})).consignmentDate,(c=new FormData).append("date_consignment",r.consignment_date),c.append("concept",r.consignmentConcept),c.append("value",parseFloat(r.consignment_amount)),c.append("adjustment_concept",r.AdjustmentConcept),O(hu(t.id,r,(function(e){e.error?(Object(P.c)("\xa1UPS! Ocurri\xf3 un Error en verificaci\xf3n de Abono"),b(!1)):(O(Ou()),o(!1),Object(P.f)("\xa1Fiducia actualizada!"),b(!1),E(),n(!1))})));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){y.resetFields()};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{layout:"vertical",form:y,size:"middle",onFinish:I,validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignmentDate",label:"Fecha de consignaci\xf3n",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{onChange:w,value:y.getFieldValue("consignmentDate"),style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignment_amount",label:"Valor de consignaci\xf3n",rules:[{required:!0}],children:Object(h.jsx)(ut.a,{onChange:w,value:y.getFieldValue("consignment_amount"),style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"consignmentConcept",label:"Concepto de consignaci\xf3n",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{onChange:w,placeholder:"Escoja el concepto",value:y.getFieldValue("consignmentConcept"),children:[Object(h.jsx)(dt.a.Option,{value:" ",children:"Seleccione..."}),Object(h.jsx)(dt.a.Option,{value:"Abono",children:"Abono"}),Object(h.jsx)(dt.a.Option,{value:"Reformas",children:"Reformas"}),Object(h.jsx)(dt.a.Option,{value:"Canje",children:"Canje"}),Object(h.jsx)(dt.a.Option,{value:"Otros",children:"Otros"})]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"AdjustmentConcept",label:"Concepto ajuste",rules:[{required:!0}],children:Object(h.jsx)(_.a.TextArea,{onChange:w,value:y.getFieldValue("AdjustmentConcept")})})})]}),Object(h.jsx)(J.a,{}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{offset:20,xs:24,sm:24,md:4,lg:4,xl:2,children:Object(h.jsx)(g.a.Item,{style:{margin:"0"},children:Object(h.jsx)(S.a,{disabled:u,type:"primary",htmlType:"submit",children:"Guardar"})})}),i?Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(x,{})}):null]})]})})},Pu=function(e){var t=e.handleCancel,n=e.onClose,a=e.data;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ue.a,{centered:!0,visible:!0,onCancel:t,width:900,footer:!1,destroyOnClose:!0,title:"Nuevo recaudo fiducia",children:Object(h.jsx)(Cu,{data:a,onClose:n})})})},Iu=function(){var e=Object(s.d)();Object(a.useEffect)((function(){return e(Ou(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent)?!0===n.error&&Object(P.c)("\xa1UPS! ha ocurrido un error"+n.message):Object(P.g)("No hay Datos en la tabla"),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[e]);var t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.trustColletion._payload})),n=Object(a.useState)(!0),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(null),O=Object(f.a)(b,2),v=O[0],y=O[1],g=function(e){var t=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Ajustes "}),n=Object(h.jsxs)("span",{style:{color:"#6A6963"},children:[e.concept,Object(h.jsx)("hr",{}),"Creado: ",e.created_at," ",Object(h.jsx)("br",{}),"  Modificado: ",e.updated_at," "]});return Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{onClick:function(){return function(e){u(!0),y(e)}(e)},style:{background:"#52c41a",color:"#fff"},size:"small",icon:Object(h.jsx)(uu.a,{})})}),"  ",Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:n,children:Object(h.jsx)(S.a,{size:"small",type:"primary",icon:Object(h.jsx)(Ht.a,{})})})]})},_=[{title:"Cliente",width:60,dataIndex:"customer_name",key:"customer_name",align:"center",render:function(e){var t=e.split("_");return t[0]+" "+t[1]}},Object(j.a)(Object(j.a)({title:"Proyecto",width:50,dataIndex:"project_name",key:"project_name",align:"center"},Object(ce.b)("project_name")),ce.c),Object(j.a)(Object(j.a)({title:"Unidad",dataIndex:"unit_label",key:"unit_label",width:10,align:"center"},Object(ce.b)("unit_label")),ce.c),Object(j.a)(Object(j.a)({title:"C\xf3d. Fiduciario",dataIndex:"code_fiduciary",key:"code_fiduciary",width:30,align:"center"},Object(ce.b)("code_fiduciary")),ce.c),{title:"Fecha de consignaci\xf3n",dataIndex:"consignment_date",key:"consignment_date",width:40,align:"center",render:function(e){return se()(e).format("DD/MM/YYYY")}},{title:"Valor consignaci\xf3n",dataIndex:"consignment_amount",key:"consignment_amount",width:40,align:"center",render:function(e){return he.format(e)}},Object(j.a)(Object(j.a)({title:"Concepto",dataIndex:"concept",key:"concept",width:40,align:"center"},Object(ce.b)("concept")),ce.c),{title:"Acciones",key:"acciones",fixed:"right",align:"center",width:15,render:function(e,t){return g(t)}}];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ht,{title:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(T.a,{gutter:16,children:[Fe(R.bc)?Object(h.jsx)(N.a,{children:Object(h.jsx)(S.a,{onClick:function(){ou(R.Re)},style:{background:"#389e0d",color:"#fff"},icon:Object(h.jsx)(Po.a,{}),children:"Descargar formato"})}):null,Fe(R.Tf)?Object(h.jsx)(N.a,{children:Object(h.jsx)(wu,{})}):null]})}),table:[Object(h.jsxs)(h.Fragment,{children:[c?Object(h.jsx)(x,{}):Object(h.jsx)(Q.a,{columns:_,dataSource:t})," "]})]}),d&&Object(h.jsx)(Pu,{handleCancel:function(){u(!1),y(null)},onClose:u,data:v})]})},Eu=function(){return Ae(R.ig)?Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:"1px solid rgb(235, 237, 240);"},title:"Recaudos fiducias",extra:[Fe(R.Bb)?Object(h.jsx)(_u,{}):null]}),Object(h.jsx)(Iu,{})]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Fu=function(){return Object(h.jsx)(Eu,{})},Au=function(e){return{type:R.Uc,payload:e}},ku=function(e){var t,n,r=e.assessor,c=Object(a.useState)(null),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),u=Object(f.a)(d,2),j=u[0],b=u[1],m=Object(a.useState)(null),p=Object(f.a)(m,2),O=p[0],v=p[1],y=Object(a.useState)(null),_=Object(f.a)(y,2),C=_[0],I=_[1],E=Object(a.useState)(null),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.reportSalesReducer})),L=Object(a.useState)(null),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(a.useState)(!1),z=Object(f.a)(U,2),G=z[0],B=z[1],Y=Object(a.useState)(!1),J=Object(f.a)(Y,2),H=J[0],K=J[1],W=Object(a.useState)(!1),X=Object(f.a)(W,2),$=X[0],ee=X[1],te=Object(s.d)();Object(a.useEffect)((function(){te(_c()),te(Ln()),te(hn())}),[]);var ne=Object(s.e)((function(e){return e.project})),ae=Object(s.e)((function(e){return e.assessor})),re=Object(s.e)((function(e){return e.afiliatedCompany})),ie=[];for(var oe in r)if("_payload"===oe)for(var se=r[oe],le=0;le<se.length;le++)ie.push(se[le]);var de={visibility:"hidden"},ue=[{title:"mes*",width:15,dataIndex:"mes",key:"mes",render:function(e,t){return t.name_month}},{title:"Ventas Brutas (Und)",width:20,dataIndex:"sales_quantity",key:"sales_quantity",render:function(e,t){return t.sales_quantity}},{title:"Ventas Brutas (Pesos)",width:20,dataIndex:"value_total_unit",key:"value_total_unit",render:function(e,t){return R.sc.format(t.value_total_unit)}},{title:"Desistimientos (Und)",width:20,dataIndex:"discontinued_sales",key:"discontinued_sales",render:function(e,t){return t.discontinued_sales}},{title:"Desistimientos (Pesos)",width:20,dataIndex:"value_total_unit_by_discontinued_sales",key:"value_total_unit_by_discontinued_sales",render:function(e,t){return R.sc.format(t.value_total_unit_by_discontinued_sales)}},{title:"Ventas Netas (Pesos)",width:20,dataIndex:"nate_sales",key:"nate_sales",render:function(e,t){return R.sc.format(t.nate_sales)}}],je=Object(h.jsx)(Q.a,{columns:ue,dataSource:Object(ce.a)(null===D||void 0===D||null===(t=D.sales)||void 0===t?void 0:t.sales),scroll:{x:1900,y:300},size:"small",bordered:!0});return Object(h.jsxs)(w.a,{title:"Informes de Ventas",children:[Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){var e={business:O&&""!==O?O:0,start_date:C,end_date:A,project:o&&""!==o?o:0,assessor:j&&""!==j?j:0};C>A?Object(P.g)("Fecha incial mayor que la fecha final"):(ee(!0),K(!1),te(function(e,t,n){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/report/sales"),success:function(e){return Au(e)},postProcessSuccess:t,postProcessError:n}}}(e,(function(e){e.error?Object(P.g)("No hay datos"):(K(!0),M(e._payload.sales),Object(P.f)("Datos recuperados")),ee(!1)}),(function(){Object(P.g)("No hay datos")}))))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto:",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:l,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(ne)&&(null===(n=ne._payload)||void 0===n?void 0:n.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"Empresa:",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:v,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(re)&&re._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Asesor:",name:"Asesor:",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:b,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(ae)&&ae._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Inicio:",name:"Fecha Inicio:",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:C,onChange:function(e){return Bt(e,I)},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"Fecha Fin:",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:A,onChange:function(e){return Bt(e,k)},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]})]}),Object(h.jsx)(T.a,{justify:"end","aria-disabled":null!=D.path_excel,children:Object(h.jsx)(N.a,{children:H?Object(h.jsx)(Z.a,{content:Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)("a",{href:D.path_excel,target:"_blank",children:"Excel"})," "]}),trigger:"click",visible:G,onVisibleChange:function(e){B(e)},children:Object(h.jsx)(S.a,{type:"primary",style:{background:"green"},children:"Exportar"})}):null})}),Object(h.jsx)("br",{}),H?je:$?Object(h.jsx)(x,{}):null,H?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h5",{children:"Totales:"}),Object(h.jsx)("b",{children:"Ventas brutas (und)"}),":",Object(h.jsx)("spam",{style:de,children:"........"})," ",null===q||void 0===q?void 0:q.sales_quantity,Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Ventas brutas (pesos)"}),":",Object(h.jsx)("spam",{style:de,children:"...."})," ",R.sc.format(null===q||void 0===q?void 0:q.value_total_unit),Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Desistimientos (und)"}),":",Object(h.jsx)("spam",{style:de,children:"......"})," ",null===q||void 0===q?void 0:q.discontinued_sales,Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Desistimientos (pesos)"}),":",Object(h.jsx)("spam",{style:de,children:".."})," ",R.sc.format(null===q||void 0===q?void 0:q.value_total_unit_by_discontinued_sales),Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"Ventas Netas (Pesos)"}),":",Object(h.jsx)("spam",{style:de,children:"....."})," ",R.sc.format(null===q||void 0===q?void 0:q.nate_sales),Object(h.jsx)("br",{})]}):null]})},Tu=function(){return Object(h.jsx)(ku,{})},Nu=function(e){return[{title:"Unidad",width:20,align:"center",dataIndex:"area",key:"area"},{title:"N\xb0 de No. Piso",width:20,align:"center",dataIndex:"number_floors",key:"number_floors"},{title:"No. de Unidad",width:20,align:"center",dataIndex:"label",key:"label"},{title:"# Encargo Fiduciario",width:40,align:"center",dataIndex:"fiduciary_code",key:""},{title:"\xc1rea Unidad",width:20,align:"center",dataIndex:"area",key:"area"},{title:"Vr. / mt2",width:20,align:"center",render:function(e,t){return"".concat(he.format(t.square_meter_value)," ")}},{title:"Vr.",width:20,align:"center",render:function(e,t){return"".concat(he.format(t.unit_net_value)," ")}},{title:"Cantidad y Parqueadero",width:20,align:"center",render:function(e,t){return"(".concat(t.parking_number,") ").concat(t.parking,"\n ").concat(t.parking_location)}},{title:"Vr. Parqueadero + Valor terraza / Cuarto \xfatil / otros",width:40,align:"center",render:function(e,t){return"".concat(he.format(t.value_parking)," + \n ").concat(he.format(t.value_other_additional))}},{title:"Kit de acabados + Prima Vista",width:30,align:"center",render:function(e,t){return"".concat(he.format(t.finish_kit_value)," + \n ").concat(he.format(t.bonus_view))}},{title:"Vr. Total Unidad",width:40,align:"center",render:function(e,t){return"".concat(he.format(t.unit_value))}},{title:"SEPARACI\xd3N",width:25,align:"center",key:"separation_value",render:function(e,t){return"".concat(he.format(t.separation_value))}},{title:"C.I. no Financiada (".concat(null===e||void 0===e?void 0:e.sale_information.unfunded_percentage_initial_fee,")"),width:30,align:"center",render:function(e,t){return" ".concat(he.format(t.unfunded_percentage_initial_fee))}},{title:"C.I. a Financiar (".concat(null===e||void 0===e?void 0:e.sale_information.funded_percentage_initial_fee,")"),width:30,align:"center",render:function(e,t){return"".concat(he.format(t.funded_percentage_initial_fee))}},{title:"Financiaci\xf3n ".concat(null===e||void 0===e?void 0:e.sale_information.funded_percentage_initial_fee," en ").concat(null===e||void 0===e?void 0:e.sale_information.value_of_dues," cuotas"),width:30,align:"center",render:function(e,t){return"".concat(he.format(t.value_of_dues))}},{title:"Nivel de Ingresos",width:20,align:"center",render:function(e,t){return" ".concat(he.format(t.income_level))}},{title:"Financiaci\xf3n Banco / Recursos propios (".concat(null===e||void 0===e?void 0:e.sale_information.bank_financing_percentage,")"),width:40,align:"center",render:function(e,t){return"".concat(he.format(t.bank_funded_percentage))}},{title:"ESTADO",width:20,align:"center",render:function(e,t){return function(e){switch(e){case"Disponible":return Object(h.jsxs)(H.a,{color:"green",children:[" ",e," "]});case"Separada":return Object(h.jsxs)(H.a,{color:"lime",children:[" ",e," "]});case"Comprada":return Object(h.jsxs)(H.a,{color:"red",children:[" ",e," "]});default:return Object(h.jsxs)(H.a,{color:"white",children:[" ",e," "]})}}(t.unit_state)}}]},Du=function(e){var t=e.data,n=Object(s.d)(),r=JSON.parse(localStorage.getItem("USER_INFO")),c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(a.useState)(""),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(f.a)(j,2),O=b[0],x=b[1],v=function(){x(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){x(!0)},type:"primary",children:"Guardar"}),Object(h.jsx)(ue.a,{title:"Planes de ventas",visible:O,onCancel:v,width:700,footer:!1,children:Object(h.jsxs)(g.a,{layout:"vertical",name:"basic",onFinish:function(e){var a=r.id,c={project_id:null===t||void 0===t?void 0:t.project_id,generate_to:null===t||void 0===t?void 0:t.generate_to,description:e.descriptinInput,users_id:a};n(function(e,t,n){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/sales_plan_report/savePlanInList"),postProcessSuccess:t,postProcessError:n}}}(c,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?"Error number of units exceeded"===n.message?Object(P.c)("\xa1UPS! N\xfamero de unidades excedido."):Object(P.c)("\xa1UPS! Ha ocurrido un error"):(Object(P.f)("Ha sido agregado con \xe9xito"),v(),i.resetFields());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onFinishFailed:function(e){console.error("Failed:",e)},form:i,children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{label:"Descripcion del Plan de Ventas",name:"descriptinInput",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(_.a,{placeholder:"Descripcion del Plan de Ventas",value:d,onChange:function(e){return u(e)},style:{width:"450px"}})})})}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:6}),Object(h.jsx)(N.a,{span:6}),Object(h.jsx)(N.a,{span:6}),Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})]})]})})]})},Ru=function(e){var t=e.planSalesList,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=[{title:"Descripci\xf3n del Documento",width:30,align:"center",dataIndex:"description",key:"description"},{title:"Fecha de Creaci\xf3n",width:10,align:"center",key:"created_at",render:function(e,t){return"".concat(Jt(t.created_at))}},{title:"Acci\xf3n",width:10,align:"center",key:"path",render:function(e,t){return Object(h.jsx)(S.a,{onClick:function(){!function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.click()}(t.path)},type:"primary",children:"Descargar Plan de Venta"})}}];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){i(!0)},style:{backgroundColor:"#64CDA5",borderColor:"#64CDA5"},type:"primary",children:"Lista de Planes"}),Object(h.jsx)(ue.a,{title:"Lista Planes de Ventas",visible:c,onCancel:function(){i(!1)},width:900,footer:!1,children:Object(h.jsx)(Q.a,{columns:o,dataSource:t,size:"small",bordered:!0})})]})},Lu=function(){var e,t=Object(s.d)(),n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),r=Object(a.useState)(null),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(null),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(null),O=Object(f.a)(b,2),v=O[0],y=O[1],_=Object(a.useState)([]),C=Object(f.a)(_,2),I=C[0],E=C[1],F=Object(a.useState)(!1),A=Object(f.a)(F,2),k=A[0],D=A[1],L={project_id:i,generate_to:u};Object(a.useEffect)((function(){t(_c())}),[]);var V=Object(h.jsxs)("div",{children:[Object(h.jsx)("a",{style:{marginRight:21},onClick:function(){t(function(e,t,n){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/sales_plan_report/getPathExcelReport"),postProcessSuccess:t,postProcessError:n}}}(L,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code?ou(n._payload.path):Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Excel"}),Object(h.jsx)("a",{onClick:function(){t(function(e,t,n){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/sales_plan_report/getPathPdfReport"),postProcessSuccess:t,postProcessError:n}}}(L,function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code?((a=document.createElement("a")).href=n._payload.path,a.target="_blank",a.click()):Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"PDF"})]});return Ae(R.Te)?Object(h.jsxs)(w.a,{title:"Plan de Ventas",children:[Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){D(!0),y(null),t(function(e,t,n){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/sales_plan_report/getPlanListReport"),postProcessSuccess:t,postProcessError:n}}}(L,(function(e){e.error||E(e._payload)}))),t(function(e,t,n){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/sales_plan_report"),postProcessSuccess:t,postProcessError:n}}}(L,(function(e){e.error?Object(P.c)(e.message):y(e._payload),D(!1)})))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:o,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(n)&&(null===(e=n._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Generar para:",name:"Generar para",children:Object(h.jsxs)(dt.a,{onChange:j,defaultValue:"Seleccionar",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),[{id:1,name:"Administrador"},{id:2,name:"Asesor"}].map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]})]}),null!==v?Object(h.jsxs)(T.a,{children:[Object(h.jsxs)(g.a.Item,{children:[Object(h.jsx)(Z.a,{content:V,trigger:"click",children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},type:"primary",children:"Exportar"})})," ",Object(h.jsx)(Du,{data:L})," ",Object(h.jsx)(Ru,{planSalesList:I})]}),Object(h.jsx)(Q.a,{columns:Nu(v),dataSource:Object(ce.a)((null===v||void 0===v?void 0:v.cell_information)||[]),scroll:{x:2500,y:300},size:"small",bordered:!0,summary:function(e){return t=null===v||void 0===v?void 0:v.sale_information,Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsx)(Q.a.Summary.Cell,{colSpan:4,children:"Fecha de entrega estimada:"}),Object(h.jsx)(Q.a.Summary.Cell,{align:"right",colSpan:2,children:Jt(null===t||void 0===t?void 0:t.estimated_delivery_date)}),Object(h.jsx)(Q.a.Summary.Cell,{rowSpan:6}),Object(h.jsx)(Q.a.Summary.Cell,{align:"center",rowSpan:3,colSpan:11,children:null===t||void 0===t?void 0:t.income_information})]}),Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsx)(Q.a.Summary.Cell,{colSpan:4,children:"Separaci\xf3n"}),Object(h.jsx)(Q.a.Summary.Cell,{align:"right",colSpan:2,children:he.format(null===t||void 0===t?void 0:t.separation_value)})]}),Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsx)(Q.a.Summary.Cell,{colSpan:4,children:"% Cuota inicial - Firma promesa o encargo fiduciario"}),Object(h.jsx)(Q.a.Summary.Cell,{align:"right",colSpan:2,children:null===t||void 0===t?void 0:t.unfunded_percentage_initial_fee})]}),Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsx)(Q.a.Summary.Cell,{colSpan:4,children:"% Cuota inicial - A financiar durante la construcci\xf3n"}),Object(h.jsx)(Q.a.Summary.Cell,{align:"right",colSpan:2,children:null===t||void 0===t?void 0:t.funded_percentage_initial_fee})]}),Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsx)(Q.a.Summary.Cell,{colSpan:4,children:"% Financiaci\xf3n Banco / Recursos propios"}),Object(h.jsx)(Q.a.Summary.Cell,{align:"right",colSpan:2,children:null===t||void 0===t?void 0:t.bank_financing_percentage})]}),Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsx)(Q.a.Summary.Cell,{colSpan:4,children:"Plazo de financiaci\xf3n durante la construcci\xf3n"}),Object(h.jsx)(Q.a.Summary.Cell,{align:"right",colSpan:2,children:null===t||void 0===t?void 0:t.value_of_dues}),Object(h.jsx)(Q.a.Summary.Cell,{align:"center",rowSpan:3,colSpan:11,children:null===t||void 0===t?void 0:t.income_data})]})]});var t}})]}):k?Object(h.jsx)(x,{}):null]}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Vu=function(){return Object(h.jsx)(Lu,{})},qu=n(646),Mu=new yt,Uu=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":Mu.getToken()},url:"".concat(R.Ne,"/projectStates"),success:function(e){return zu(e)},postProcessSuccess:e}}},zu=function(e){return{type:R.Mf,payload:e}},Gu={required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},Bu=[{title:"#",width:5,dataIndex:"id",key:"name"},{title:"Nombre",width:20,dataIndex:"name",key:""},{title:"Direcci\xf3n",width:40,dataIndex:"address",key:""},{title:"Constructora",width:40,dataIndex:"constructionCompanyName",key:""},{title:"Comercializadora",width:50,dataIndex:"marketer_company",key:""},{title:"Tipo de Proyecto",width:20,dataIndex:"projectTypeName",key:""},{title:"Habitaciones",width:25,dataIndex:"bathrooms_number",key:""},{title:"Ba\xf1os",width:20,dataIndex:"rooms_number",key:""},{title:"Rango de Precios",width:20,dataIndex:"projectPriceRangeName",key:""},{title:"Estado",width:20,dataIndex:"projectStateName",key:""},{title:"Fecha de Lanzamiento",width:20,dataIndex:"release_date",key:""},{title:"Fecha de Construcci\xf3n",width:23,dataIndex:"building_date",key:""},{title:"Fecha de Entrega",width:20,dataIndex:"delivery_date",key:""},{title:"Total Unidades",width:20,dataIndex:"total_units",key:""},{title:"Unidades Vendidas",width:20,dataIndex:"sold_units",key:""},{title:"Velocidad Ventas (mes)",width:20,dataIndex:"saleSpeed",key:""},{title:"% Unidades Vendidas",width:20,dataIndex:"percentageSold",key:""},{title:"Precio m2 Lanzamiento",width:20,dataIndex:"release_meter_price",key:""},{title:"Precio m2 Actual",width:20,dataIndex:"current_meter_price",key:""},{title:"Fuente Nombre/Tel\xe9fono",width:40,dataIndex:"namePhone",key:""},{title:"Especificaciones de Unidades",width:50,dataIndex:"specsUnits",key:""},{title:"Descripci\xf3n de Unidades",width:50,dataIndex:"descriptionsUnits",key:""},{title:"Observaciones",width:50,dataIndex:"observations",key:""},{title:"Fecha Creaci\xf3n",width:20,dataIndex:"dateInit",key:""}],Yu=Object(s.b)(null)((function(){var e,t,n=Object(a.useState)("all"),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)("all"),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)("all"),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)("all"),y=Object(f.a)(v,2),_=y[0],C=y[1],I=Object(a.useState)("all"),E=Object(f.a)(I,2),F=E[0],A=E[1],k=Object(a.useState)("all"),D=Object(f.a)(k,2),L=D[0],V=D[1],q=Object(a.useState)("all"),M=Object(f.a)(q,2),U=M[0],z=M[1],G={startDate:c,endDate:d,idProjectState:O,idCompeting:_,idBuilder:F,idUser:L,idPriceRange:U},B=Object(s.d)();Object(a.useEffect)((function(){var e;B(on()),B({type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/competingProjectSearchs/searchCompeting"),success:function(e){return Pc(e)},postProcessSuccess:e}}),B(ei()),B(function(e,t){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/price-range/activated"),success:function(e){return pr(e)},postProcessSuccess:e,postProcessError:t}}}()),B(Uu())}),[B]);var Y=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.users})),J=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.controlPower})),H=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.builder})),K=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.pricesRange})),W=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.projecState})),X=Object(a.useState)([]),$=Object(f.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(f.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(a.useState)(!1),oe=Object(f.a)(ie,2),se=oe[0],le=oe[1],de=Object(h.jsxs)("div",{children:[Object(h.jsx)("a",{style:{marginRight:21},onClick:function(){var e,t;B((e=G,t=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:ou(e.sent._payload.path);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/competingProjectSearchs/EXCEL"),data:e,postProcessSuccess:t}}))},children:"Excel"}),Object(h.jsx)("a",{onClick:function(){var e,t;B((e=G,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:""!==(n=e.sent)._payload.path&&ou(n._payload.path);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/competingProjectSearchs/PDF"),data:e,postProcessSuccess:t}}))},children:"PDF"})]}),ue=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(null!=t?t.format(Gt):"all");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(null!=t?t.format(Gt):"all");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t._payload);case 2:t.error?(Object(P.c)(t.message),ce(!1),le(!1)):(ce(!0),le(!0));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B((n=G,a=t,r=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/competingProjectSearchs"),data:n,success:function(e){return Zc(e)},postProcessSuccess:a,postProcessError:r}}));case 2:case"end":return e.stop()}var n,a,r}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(w.a,{title:"Informe de Competencias",children:[Object(h.jsxs)(g.a,{layout:"vertical",onFinish:be,validateMessages:Gu,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Nombre:",name:"Nombre",children:Object(h.jsxs)(dt.a,{defaultValue:"Todos",onChange:C,children:[Object(h.jsx)(dt.a.Option,{value:"all",children:"Todos"}),!Array.isArray(J)&&(null===(e=J._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Constructor:",name:"Constructor",children:Object(h.jsxs)(dt.a,{defaultValue:"Todos",onChange:A,children:[Object(h.jsx)(dt.a.Option,{value:"all",children:"Todos"}),!Array.isArray(H)&&H._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Direcci\xf3n:",name:"Direcci\xf3n",children:Object(h.jsxs)(dt.a,{defaultValue:"Todos",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:C,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"all",children:"Todos"}),!Array.isArray(J)&&J._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.address," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Rango de precios:",name:"Rango de precios",children:Object(h.jsxs)(dt.a,{defaultValue:"Todos",onChange:z,children:[Object(h.jsx)(dt.a.Option,{value:"all",children:"Todos"}),!Array.isArray(K)&&(null===(t=K._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha de Inicio:",name:"Fecha de Inicio",children:Object(h.jsx)(jt.a,{value:c,onChange:function(e){return ue(e)},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin",name:"Fecha Fin:",children:Object(h.jsx)(jt.a,{value:d,onChange:function(e){return je(e)},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Estado del Proyecto:",name:"Estado del Proyecto",children:Object(h.jsxs)(dt.a,{defaultValue:"Todos",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:x,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"all",children:"Todos"}),!Array.isArray(W)&&W._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Usuario:",name:"Usuario",children:Object(h.jsxs)(dt.a,{defaultValue:"Todos",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:V,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(Y)&&Y._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:12,sm:12,md:12,lg:12,xl:12}),Object(h.jsx)(N.a,{xs:4,sm:4,md:4,lg:4,xl:4,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(qu.a,{}),type:"primary",htmlType:"submit",children:"Filtrar"})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:20,sm:20,md:20,lg:20,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:re?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Z.a,{content:de,trigger:"click",children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c",color:"white"},children:"Exportar"})})}):Object(h.jsx)("h1",{})})]})]}),Object(h.jsx)("br",{}),se?Object(h.jsx)(Q.a,{columns:Bu,dataSource:ee,scroll:{x:3200,y:300},size:"small",bordered:!0}):Object(h.jsx)("h1",{})]})})),Ju=function(){return Object(h.jsx)(Yu,{})},Hu=function(e){return{type:R.Wc,payload:e}},Zu=function(e){return{type:R.Tc,payload:e}},Qu=function(){var e,t,n,r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(!1),O=Object(f.a)(b,2),v=O[0],y=O[1],C=Object(a.useState)(!1),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.reportRequestReformsReducer})),k=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.stateRequestReformsReducer})),D=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),L=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),V=Object(s.d)(),q=g.a.useForm(),M=Object(f.a)(q,1)[0];Object(a.useEffect)((function(){V({type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/reform_state/states"),success:function(e){return Hu(e)}}}),V($e()),V(_c())}),[]);var U=[{title:"#",width:10,align:"center",dataIndex:"index",key:"index",render:function(e,t){return t.index}},{title:"N\xb0 de Unidad",width:25,align:"center",dataIndex:"unit_label",key:"unit_label",render:function(e,t){return t.unit_label}},{title:"Proyecto",width:30,align:"center",dataIndex:"project_name",key:"project_name",render:function(e,t){return t.project.name}},{title:"Fecha de Solicitud del Cliente",width:20,align:"center",dataIndex:"created_at",key:"created_at",render:function(e,t){return t.created_at}},{title:"Asesor",width:25,align:"center",dataIndex:"assessor_name",key:"assessor_name",render:function(e,t){return t.assessor.name}},{title:"Nombre del Cliente",width:25,align:"center",dataIndex:"customer_name",key:"customer_name",render:function(e,t){return t.customer.name}},{title:"Kit de Acabados",width:20,align:"center",dataIndex:"quotation_finishes_included",key:"quotation_finishes_included",render:function(e,t){return"Si"!==t.quotation.finishes_included?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})}},{title:"Solicitud del Cliente",width:90,dataIndex:"body_description",key:"body_description",render:function(e,t){return t.body_description}},{title:"# de d\xedas antes de Respuesta T\xe9cnica",width:20,dataIndex:"days_before_answer",key:"days_before_answer",render:function(e,t){return t.days_before_answer}},{title:"Respuesta T\xe9cnica",width:25,dataIndex:"approved_technical",key:"approved_technical",render:function(e,t){return t.approved_technical}},{title:"Fecha de Respuesta T\xe9cnica",width:20,dataIndex:"date_answer",key:"date_answer",render:function(e,t){return t.date_answer}},{title:"Presupuesto",width:25,dataIndex:"budget",key:"budget",render:function(e,t){return t.budget}},{title:"Fecha Max. Pago",width:20,dataIndex:"project_estimated_delivery_date",key:"project_estimated_delivery_date",render:function(e,t){return t.project.estimated_delivery_date}},{title:"Aprobaci\xf3n Cliente",width:25,dataIndex:"approved_customer",key:"approved_customer",render:function(e,t){return t.approved_customer}},{title:"Pago Realizado",width:20,dataIndex:"",align:"center",key:"",render:function(e,t){return"Si"===t.date_pay?Object(h.jsx)(Ut.a,{style:{fontSize:"18px",color:"#0D6B04"}}):Object(h.jsx)(zt.a,{style:{fontSize:"18px",color:"#f5222d"}})}},{title:"Estado de Solicitud",width:20,dataIndex:"status",key:"status",render:function(e,t){return t.status}}],z=Object(h.jsx)(Q.a,{columns:U,dataSource:Object(ce.a)(null===A||void 0===A?void 0:A.reforms),scroll:{x:1900,y:300},size:"small",bordered:!0,rowKey:"index"}),G=Object(h.jsxs)("div",{children:[Object(h.jsx)("a",{style:{marginRight:21},onClick:function(){var e,t;V((e=v,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent)?ou(n._payload):Object(P.g)("No hay Datos");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/reformRequest/report/get_path_excel"),postProcessSuccess:t}}))},children:"Excel"}),Object(h.jsx)("a",{onClick:function(){var e,t;V((e=v,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent)?ou(n._payload):Object(P.g)("No hay Datos");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/reformRequest/report/get_path_pdf"),postProcessSuccess:t}}))},children:"PDF"})]});return Object(h.jsxs)(w.a,{title:"Informe de Reformas",children:[Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(e){var t={request_status:e.stateRequest&&" "!==e.stateRequest?e.stateRequest:"Todo",customer:e.searchCustomer&&" "!==e.searchCustomer?e.searchCustomer:0,project:e.searchProject||0};y(t),F(!0),j(!1),V(function(e,t){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/reformRequest/report/reform_request_report"),success:function(e){return Zu(e)},postProcessSuccess:t}}}(t,(function(e){e.error?Object(P.g)("No hay datos"):(j(!0),Object(P.f)("Datos recuperados")),F(!1)})))},form:M,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"searchProject",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(L)&&(null===(e=L._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Estado de Solicitud:",name:"stateRequest",children:Object(h.jsxs)(dt.a,{defaultValue:"Seleccionar",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(k)&&(null===(t=k._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.name_state,children:" ".concat(e.name_state," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(_.a.Group,{children:Object(h.jsx)(g.a.Item,{name:"searchCustomer",label:"Cliente:",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(D)&&(null===(n=D._payload)||void 0===n?void 0:n.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(e.identification)},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]})]}),Object(h.jsx)(T.a,{justify:"end","aria-disabled":null!=A.pdf_path,children:Object(h.jsx)(N.a,{children:u?Object(h.jsx)(Z.a,{content:G,trigger:"click",visible:i,onVisibleChange:function(e){o(e)},children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},children:"Exportar"})}):null})}),Object(h.jsx)("br",{}),u?z:E?Object(h.jsx)(x,{}):null]})},Ku=function(){return Object(h.jsx)(Qu,{})},Wu=function(e){var t=e.dataToMap,n=e.label,a=e.isRequired,r=e.labelFormItem,c=e.nameFormItem,i=e.setSelectedAssessor,o=void 0===i?null:i;return Object(h.jsx)(g.a.Item,{label:r,name:c,rules:[{required:a,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:function(e,t){o(t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),t.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:e.id,children:"".concat(e[n],"(").concat(e.identification,")")},t)}))]})})},Xu={assessor:""},$u=function(e){var t=e.databaseAssessor,n=e.setDataSource,a=e.setFetching,r=e.setSelectedAssessor,c=Object(s.d)(),i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:t=e.sent,a(!1),c((r=t.assessor,i=function(){var e=Object(p.a)(m.a.mark((function e(t){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._payload;case 2:if(!(r=e.sent).error){e.next=7;break}return e.abrupt("return",Object(P.c)("\xa1UPS! Ha ocurrido un problema."));case 7:c=r.map((function(e){return{period:e.tiempo,scheduled:e.programadas,performed:e.realizadas,pending:e.pendientes,expired:e.vencidas,visits:e.visitas}})),a(!0),n(c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/activity/get_activities_by_assessor/").concat(r),postProcessSuccess:i}}));case 5:case"end":return e.stop()}var r,i}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(g.a,{layout:"vertical",onFinish:l,form:o,initialValues:Xu,children:Object(h.jsx)(w.a,{title:"Seguimiento a actividades",actions:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]})],children:Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(Wu,{setSelectedAssessor:r,dataToMap:t._payload,SelectValue:"id",label:"name",isRequired:!0,labelFormItem:"Asesor",nameFormItem:"assessor"})})})})})},ej=function(e){var t=e.dataSource,n=e.selectedAssesor,a=Object(s.d)(),r=function(e){var t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click()},c=Object(h.jsxs)("div",{children:[Object(h.jsx)("a",{style:{marginRight:21},onClick:function(){var e,t;Object(P.g)("Generando Excel..."),a((e=n.value,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!(n=e.sent).error){e.next=7;break}return e.abrupt("return",Object(P.c)("\xa1UPS, Ha ocurrido un error."));case 7:r(n._payload);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/activity/get_excel_report/").concat(e),postProcessSuccess:t}}))},children:"Excel"}),Object(h.jsx)("a",{onClick:function(){var e,t;Object(P.g)("Generando pdf..."),a((e=n.value,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!(n=e.sent).error){e.next=7;break}return e.abrupt("return",Object(P.c)("\xa1UPS, Ha ocurrido un error."));case 7:r(n._payload);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/activity/get_pdf_report/").concat(e),postProcessSuccess:t}}))},children:"PDF"})]});return Object(h.jsxs)(w.a,{children:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(Z.a,{content:c,trigger:"click",children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},type:"primary",children:"Exportar"})})})]}),Object(h.jsx)("h4",{style:{margin:"5px"},children:"Seleccionar"===n.children?null:n.children}),Object(h.jsx)(Q.a,{columns:[{title:"",width:20,dataIndex:"period",align:"center"},{title:"#Actividades Programadas",width:20,dataIndex:"scheduled",align:"center"},{title:"#Actividades Realizadas",width:20,dataIndex:"performed",align:"center"},{title:"#Actividades Pendientes",width:20,dataIndex:"pending",align:"center"},{title:"#Actividades Vencidas",width:20,dataIndex:"expired",align:"center"},{title:"#Visitas Clientes",width:20,dataIndex:"visits",align:"center"}],dataSource:Object(ce.a)(t),scroll:{x:1e3,y:300},size:"small",bordered:!0})]})},tj=function(){var e=Object(s.d)(),t=Object(a.useState)([]),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(!0),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(null),j=Object(f.a)(u,2),b=j[0],O=j[1];Object(a.useEffect)((function(){e(Ln(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!e.sent.error){e.next=5;break}return e.abrupt("return",Object(P.c)("\xa1UPS, Ha ocurrido un error"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var v=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor}));return Object(h.jsxs)(h.Fragment,{children:[Array.isArray(v)?Object(h.jsx)(w.a,{title:"Seguimiento a actividades",children:Object(h.jsx)(x,{})}):Object(h.jsx)($u,{databaseAssessor:v,setDataSource:c,setFetching:d,setSelectedAssessor:O}),l?r.length>0&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ej,{dataSource:Object(ce.a)(r),selectedAssesor:b})}):Object(h.jsx)(w.a,{children:Object(h.jsx)(x,{})})]})},nj=function(){return Object(h.jsx)(tj,{})},aj=function(){var e=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor._payload}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Asesores:",name:"assessor_id",children:Object(h.jsxs)(dt.a,{showSearch:!0,defaultValue:"",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),null===e||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id+e.name+e.id)}))]})})}),Object(h.jsx)(N.a,{offset:10,xs:24,sm:24,md:12,lg:12,xl:1})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]})]})},rj=function(e){var t=e.excelGenerator,n=e.PDFGenerator,a=Object(s.e)((function(e){var t;return null===e||void 0===e||null===(t=e.potentialClientsReport)||void 0===t?void 0:t._payload})),r=[Object(j.a)({title:"Asesor",align:"center",width:80,dataIndex:"adviser",key:"adviser"},Object(ce.b)("adviser")),Object(j.a)({title:"Proyecto",align:"center",dataIndex:"project",key:"project",width:90},Object(ce.b)("project")),Object(j.a)({title:"Cliente",align:"center",dataIndex:"customer",key:"customer",width:80},Object(ce.b)("customer")),Object(j.a)({title:"Fecha Pr\xf3xima Actividad",align:"center",dataIndex:"nextActivityDate",key:"nextActivityDate",width:90},Object(ce.b)("nextActivityDate")),Object(j.a)({title:"Nombre Pr\xf3xima Actividad",align:"center",dataIndex:"nameNextActivity",key:"nameNextActivity",width:100},Object(ce.b)("nameNextActivity")),Object(j.a)({title:"\xdaltimo Contacto",align:"center",dataIndex:"lastContact",key:"lastContact",width:90},Object(ce.b)("lastContact")),Object(j.a)({title:"\xdaltima Actividad Realizada",align:"center",dataIndex:"nameLastContact",key:"nameLastContact",width:100},Object(ce.b)("nameLastContact")),Object(j.a)({title:"Nivel de Inter\xe9s",align:"center",dataIndex:"interestLevel",key:"interestLevel",width:90},Object(ce.b)("interestLevel")),{title:"\xdaltima Cotizaci\xf3n",align:"center",dataIndex:"LastQuote",key:"LastQuote",width:90},Object(j.a)({title:"\xbfQu\xe9 Busca?",align:"center",dataIndex:"WhatAreYouLookingFor",key:"WhatAreYouLookingFor",width:100},Object(ce.b)("WhatAreYouLookingFor"))];return Object(h.jsxs)(g.a.Item,{children:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:17,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(Z.a,{content:Object(h.jsxs)("div",{children:[Object(h.jsx)("a",{style:{marginRight:21},onClick:t,children:"Excel"}),Object(h.jsx)("a",{onClick:n,children:"PDF"})]}),trigger:"click",children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},type:"primary",children:"Exportar"})})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(T.a,{children:Object(h.jsx)(Q.a,{columns:r,dataSource:a,scroll:{x:1500,y:800}})})]})},cj="/report/potential-customers",ij=function(e,t,n){return{type:R.O,payload:{method:"POST",url:R.Ne+cj,data:e,success:function(e){return oj(e)},postProcessSuccess:t,postProcessError:n}}},oj=function(e){return{type:R.Pc,payload:e}},sj={required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},lj=function(){var e=Object(s.d)(),t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(a.useState)(null),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)([]),d=Object(f.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){e(Ln(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent?Object(P.f)("Carga Completa"):Object(P.g)("No hay Datos en la tabla");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var b=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:ou(e.sent._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!1),t.next=3,n.validateFields();case 3:a=t.sent,e(ij(a,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.f)(n.message),o(!0),j(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:j([]),o(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{title:"Informe de Clientes Potenciales",children:[Object(h.jsx)(g.a,{layout:"vertical",form:n,onFinish:v,validateMessages:sj,children:Object(h.jsx)(aj,{})}),i?Object(h.jsx)(rj,{PDFGenerator:function(){e(function(e,t,n){return{type:R.O,payload:{method:"POST",url:R.Ne+cj+"/PDF",data:e,postProcessSuccess:t,postProcessError:n}}}(u,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},excelGenerator:function(){e(function(e,t,n){return{type:R.O,payload:{method:"POST",url:R.Ne+cj+"/EXCEL",data:e,postProcessSuccess:t,postProcessError:n}}}(u,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}):null==i?null:Object(h.jsx)(x,{})]})})},dj=function(){return Object(h.jsx)(lj,{})},uj=function(e){var t=e.infoCustomer,n=e.InfoUnit,a=e.agreedValue;return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},children:Object(h.jsxs)("table",{className:"table-report",children:[Object(h.jsxs)("tr",{className:"th-report",children:[Object(h.jsx)("td",{colSpan:"3",className:"title head_color th-report",children:Object(h.jsx)("b",{children:"RESUMEN CLIENTE"})}),Object(h.jsx)("td",{colSpan:"3",className:"title head_color th-report",children:Object(h.jsx)("b",{children:"RESUMEN UNIDAD"})})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{className:"th-report",children:"NOMBRE DEL CLIENTE"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:t.name}),Object(h.jsx)("td",{className:"th-report",children:"FECHA DE COMPRA"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:n.sale_date})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{className:"th-report",children:"IDENTIFICACION"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:t.identification}),Object(h.jsx)("td",{className:"th-report",children:"N\xb0 DE APTO"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:null===n||void 0===n?void 0:n.label_unit})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{className:"th-report",children:"DIRECCION"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:t.address}),Object(h.jsx)("td",{className:"th-report",children:"N\xb0 DE CUOTAS"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:null===n||void 0===n?void 0:n.number_dues})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{className:"th-report",children:"CORREO"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:t.email}),Object(h.jsx)("td",{className:"th-report",children:"FECHA DE CORTE"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:n.cutoff_date})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{className:"th-report",children:"CELULAR"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:t.phone_number}),Object(h.jsx)("td",{className:"th-report",children:"VR. TOTAL INMUEBLE"}),Object(h.jsx)("td",{className:"th-report",colSpan:"2",children:R.sc.format(a)})]})]})})})},jj=function(e){var t=e.generalAccountStatementInfo;return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},children:Object(h.jsxs)("table",{className:"table-report",children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colSpan:"5",className:"title head_color th-report",children:Object(h.jsx)("b",{children:"2. ESTADO DE CUENTA"})})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colSpan:"5",className:"title head_color th-report",children:Object(h.jsx)("b",{children:"2.1 ESTADO DE CUENTA GENERAL"})})}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{colSpan:"2",className:"title head_color th-report",children:Object(h.jsx)("b",{children:"CONCEPTOS"})}),Object(h.jsx)("td",{className:"title head_color th-report",children:Object(h.jsx)("b",{children:"Valor Pagado"})}),Object(h.jsx)("td",{className:"title head_color th-report",children:Object(h.jsx)("b",{children:"Valor Pactado"})}),Object(h.jsx)("td",{className:"title head_color th-report",children:Object(h.jsx)("b",{children:"Saldo Pendiente"})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{rowSpan:"2",className:"cell_not_center th-report",children:"Cuota Inicial"}),Object(h.jsxs)("td",{className:"cell_not_center th-report",children:["C.I. No Financiada (",t.unfunded_initial_fee.percentage_unfunded_initial_fee,"%)"]}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.unfunded_initial_fee.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.unfunded_initial_fee.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.unfunded_initial_fee.pending_value})]}),Object(h.jsxs)("tr",{children:[Object(h.jsxs)("td",{className:"cell_not_center th-report",children:["C.I. a Financiada (",t.value_to_finance.percentage_value_to_finance,"%)"]}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.value_to_finance.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.value_to_finance.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.value_to_finance.pending_value})]}),Object(h.jsxs)("tr",{className:"row_bank_percentage  th-report",children:[Object(h.jsx)("td",{className:"cell_not_center th-report",children:"Financiaci\xf3n Banco / Recursos propios"}),Object(h.jsxs)("td",{className:"cell_not_center th-report padding-number",children:[t.bank_financing.percentage_bank_financing,"%"]}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.bank_financing.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.bank_financing.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.bank_financing.pending_value})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{colspan:"2",className:"cell_not_center th-report",children:"Total Valor Inmueble sin Reformas"}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.value_total_unit.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.value_total_unit.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.value_total_unit.pending_value})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{colSpan:"2",className:"cell_not_center th-report",children:"Valor Reformas"}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.value_of_reforms.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.value_of_reforms.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.value_of_reforms.pending_value})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{colSpan:"2",className:"cell_not_center th-report",children:"Subtotal Valor Inmueble Incluido Reformas"}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.sub_total_value_unit_with_reforms.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.sub_total_value_unit_with_reforms.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.sub_total_value_unit_with_reforms.pending_value})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{colspan:"2",className:" th-report",children:"* Descuento de interes"}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report",children:"   "}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report",children:"    "}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report",children:"    "})]}),Object(h.jsxs)("tr",{className:"cell_not_center th-report",children:[Object(h.jsx)("td",{colspan:"2",className:" th-report",children:"** Recargo de interes"}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report",children:"   "}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report",children:"    "}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report",children:"    "})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{colspan:"2",className:"cell_not_center th-report",children:"Total Valor Inmueble"}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.sub_total_value_unit_with_reforms.value_paid)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.sub_total_value_unit_with_reforms.agreed_value)}),Object(h.jsx)("td",{className:"cell_not_center_rigth th-report padding-number",children:t.sub_total_value_unit_with_reforms.pending_value})]})]})})})},bj=function(e){var t=e.detailToDate;return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},children:Object(h.jsxs)("table",{className:"table-report",children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colSpan:"7",class:"title head_color th-report",children:Object(h.jsx)("b",{children:"2.2 DETALLE A LA FECHA"})})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colSpan:"7",class:"title head_color th-report",children:Object(h.jsx)("b",{children:"Inmueble General"})})}),Object(h.jsxs)("tr",{class:"title head_color th-report",children:[Object(h.jsx)("td",{className:"th-report",children:"Fecha de Corte"}),Object(h.jsx)("td",{className:"th-report",children:"Pagado a la Fecha"}),Object(h.jsx)("td",{className:"th-report",children:"Valor Pactado a la Fecha"}),Object(h.jsx)("td",{className:"th-report",children:"Saldo a Favor o Pendiente"}),Object(h.jsx)("td",{className:"th-report",children:"D\xedas de Mora"}),Object(h.jsx)("td",{className:"th-report",children:"* Descuento de Intereses"}),Object(h.jsx)("td",{className:"th-report",children:"** Recargo de Intereses"})]}),Object(h.jsxs)("tr",{className:"th-report",children:[Object(h.jsx)("td",{className:"th-report ",children:t.row_0.cutoff_date}),Object(h.jsx)("td",{class:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.row_0.value_paid_to_date)}),Object(h.jsx)("td",{class:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.row_0.agreed_value)}),Object(h.jsx)("td",{class:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.row_0.value_for_or_against)}),Object(h.jsx)("td",{class:"cell_not_center_rigth with_for_info_detailToDate th-report padding-number",children:t.row_0.days_in_arrears}),Object(h.jsx)("td",{class:"cell_not_center_rigth with_for_info_detailToDate th-report padding-number",children:"          "}),Object(h.jsx)("td",{class:"cell_not_center_rigth with_for_info_detailToDate th-report padding-number",children:"          "})]}),Object(h.jsxs)("tr",{class:"title head_color th-report",children:[Object(h.jsx)("td",{class:"title  th-report",children:"Fecha Limite Para Reforma"}),Object(h.jsx)("td",{className:"th-report",children:"Pago de Reforma a la Fecha"}),Object(h.jsx)("td",{className:"th-report",children:"Valor Reforma Aprobada"}),Object(h.jsx)("td",{className:"th-report",children:"Saldo Pendiente"}),Object(h.jsx)("td",{colSpan:"3",children:"Estado de reforma"})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{className:"th-report",children:t.row_1.reform_deadline}),Object(h.jsx)("td",{class:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.row_1.reform_payment)}),Object(h.jsx)("td",{class:"cell_not_center_rigth th-report padding-number",children:R.sc.format(t.row_1.approved_reform_value)}),Object(h.jsx)("td",{class:"cell_not_center_rigth th-report padding-number",children:t.row_1.value_against}),Object(h.jsx)("td",{colSpan:"3",className:"th-report padding-number",children:"                   "})]})]})})})},mj=function(e){var t=e.paymentPlan,n=[];return Object(a.useEffect)((function(){for(var e=0;e<t.length;e++)0!==e&&n.push(t[e])}),[]),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},children:Object(h.jsxs)("table",{className:"table-report",children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colspan:"8",class:"title head_color th-report",children:Object(h.jsx)("b",{children:"3. PLAN DE PAGOS"})})}),Object(h.jsxs)("tr",{class:"title head_color th-report",children:[Object(h.jsx)("td",{colspan:"2",className:"th-report",children:"N\xb0 de MES"}),Object(h.jsx)("td",{colspan:"2",className:"th-report",children:"MES"}),Object(h.jsx)("td",{colspan:"2",className:"th-report",children:"Valor Pagado"}),Object(h.jsx)("td",{colspan:"2",className:"th-report",children:"Valor Pactado"})]}),Object(h.jsxs)("tr",{className:"th-report",children:[Object(h.jsx)("td",{colspan:"2",class:"cell_not_center th-report",children:"C.I. NO FINANCIADA"}),Object(h.jsx)("td",{colspan:"2",className:"th-report",children:"-"}),Object(h.jsx)("td",{colspan:"2",class:"cell_not_center_rigth th-report",children:t[0].paid_value}),Object(h.jsx)("td",{colspan:"2",class:"cell_not_center_rigth th-report",children:t[0].agreed_value})]}),t.map((function(e,t){return 0===t?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{colspan:"2",class:"cell_not_center th-report",children:e.month_number}),Object(h.jsx)("td",{colspan:"2",class:"th-report",children:e.month}),Object(h.jsx)("td",{colspan:"2",class:"cell_not_center_rigth th-report",children:e.paid_value}),Object(h.jsx)("td",{colspan:"2",class:"cell_not_center_rigth th-report",children:e.agreed_value})]})]})}))]})})})},pj=Y.a.TabPane,fj=function(e){var t,n,a=e.data;return J.a,Object(h.jsxs)(Y.a,{defaultActiveKey:"1",children:[Object(h.jsx)(pj,{tab:Object(h.jsx)("span",{children:"Resumen de Usuario"}),children:Object(h.jsx)(uj,{infoCustomer:null===a||void 0===a?void 0:a.info_customer,InfoUnit:null===a||void 0===a?void 0:a.info_unit,agreedValue:null===a||void 0===a||null===(t=a.general_account_statement_info)||void 0===t||null===(n=t.value_total_unit)||void 0===n?void 0:n.agreed_value})},"1"),Object(h.jsx)(pj,{tab:Object(h.jsx)("span",{children:"Estado de Cuenta Generales"}),children:Object(h.jsx)(jj,{generalAccountStatementInfo:null===a||void 0===a?void 0:a.general_account_statement_info})},"2"),Object(h.jsx)(pj,{tab:Object(h.jsx)("span",{children:"Detalle a la Fecha"}),children:Object(h.jsx)(bj,{detailToDate:null===a||void 0===a?void 0:a.detail_to_date})},"3"),Object(h.jsx)(pj,{tab:Object(h.jsx)("span",{children:"Plan de Pagos"}),children:Object(h.jsx)(mj,{paymentPlan:null===a||void 0===a?void 0:a.payment_plan})},"4")]})},Oj=function(e){return{type:R.vc,payload:e}},hj=function(e){var t=e.id_customer,n=e.id_sale,r=e.id_user,c=Object(a.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(s.d)(),u=Object(h.jsxs)("div",{children:[Object(h.jsx)("a",{style:{marginRight:21},onClick:function(){d(function(e,t){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/customer/report/get-excel-account-status"),success:function(e){return Oj(e)},postProcessSuccess:t}}}({id_customer:t,id_sale:n,id_user:r},function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,ou(n._payload);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Excel"}),Object(h.jsx)("a",{onClick:function(){d(function(e,t){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/customer/report/get-pdf-account-status"),success:function(e){return Oj(e)},postProcessSuccess:t}}}({id_customer:t,id_sale:n,id_user:r},function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,ou(n._payload);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"PDF"})]});return Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:20,sm:20,md:20,lg:20,xl:20}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(S.a,{loading:o,style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c",color:"white"},type:"secundary",onClick:function(){d(function(e,t){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/customer/report/get-mail-account-status"),success:function(e){return Oj(e)},postProcessSuccess:t}}}({id_customer:t,id_sale:n,id_user:r},function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,t;case 3:200===e.sent.code?l(!1):Object(P.g)("ups!!, fallo el envio.");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Enviar"})}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(Z.a,{content:u,trigger:"click",children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},type:"primary",children:"Exportar"})})})]})},xj=Object(s.b)(null,(function(e){return{dispatchFetchAllProjectAction:function(){return e(_c())}}}))((function(e){var t;Object(Qr.a)(e);var n=Object(s.d)(),r=Object(a.useState)([]),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(null),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(null),O=Object(f.a)(b,2),v=O[0],y=O[1],_=Object(a.useState)(null),C=Object(f.a)(_,2),I=C[0],E=C[1],F=Object(a.useState)(JSON.parse(localStorage.getItem("USER_INFO"))),A=Object(f.a)(F,2),k=A[0],D=(A[1],Object(a.useState)(null)),L=Object(f.a)(D,2),V=L[0],q=L[1];Object(a.useEffect)((function(){var e;n((e=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error||o(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/customer/all-customer-with-your-units"),success:function(e){return at(e)},postProcessSuccess:e}}))}),[]);if(!Ae(R.a))return Object(h.jsx)(Kt.Redirect,{to:R.Ib});return Object(h.jsxs)(w.a,{title:"Informe de Estado de Cuenta",children:[Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){q(!1),j(null);var e={id_customer:v.customer_id,id_sale:I,id_user:k.id};n(function(e,t){return{type:R.O,payload:{method:"POST",headers:R.hg,url:"".concat(R.Ne,"/customer/get-info-account-status"),data:e,success:function(e){return at(e)},postProcessSuccess:t}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,t;case 3:if((n=e.sent).error){e.next=8;break}if(n._payload!==[]){e.next=7;break}return e.abrupt("return",Object(P.g)("El cliente actual no tiene ninguna informacion con la unidad seleccionada"));case 7:j(n._payload);case 8:q(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Cliente:",name:"Cliente",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:function(e){!function(e){if(""!==e){var t=i.filter((function(t){return t.customer_id===e}));y(t[0])}}(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),i.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.customer_id,children:" ".concat(e.customer_name.replace("_"," ")," - CC: ").concat(e.customer_identification)})}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"searchProject",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:function(e){!function(e){""!==e&&E(e)}(e)},disabled:null==v,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),null!=v&&(null===(t=v.sales)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.sale_id,children:" ".concat(e.project_name," - ").concat(e.label_unit)})})))]})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]})]}),null!=u?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(hj,{id_customer:v.customer_id,id_sale:I,id_user:k.id}),Object(h.jsx)(Te.a,{}),Object(h.jsx)(fj,{data:u})]}):null==V?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)(x,{})]})})),vj=function(){return Object(h.jsx)(xj,{})},yj=Object(s.b)(null,(function(e){return{dispatchFetchAllProjectAction:function(){return e(_c())}}}))((function(e){var t,n=e.dispatchFetchAllProjectAction;Object(a.useEffect)((function(){return n()}),[n]);var r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useState)(null),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(s.d)(),j=Object(a.useState)(!1),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),y=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),null!=l&&u((t=l,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code?((a=document.createElement("a")).href=n._payload,a.target="_blank",a.click()):Object(P.g)(n.message),x(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/report/report_legalization_and_Deed/").concat(t),postProcessSuccess:n}}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}();return Ae(R.ad)?Object(h.jsx)(w.a,{title:"Informe de Legalizaci\xf3n y Escrituraci\xf3n",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:y,validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},form:c,children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"project_id",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:d,value:c.getFieldValue("project_id"),filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(v)&&(null===(t=v._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)})))]})})})}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:O,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),gj=function(){return Object(h.jsx)(yj,{})},_j=function(){var e,t=Object(s.d)(),n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(a.useState)(null),o=Object(f.a)(i,1)[0],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){t(_c())}),[t]);var b=function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,c.validateFields();case 3:n=e.sent,t((a=n,r=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:ou(e.sent._payload),j(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,Object(P.c)(n.message),j(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:R.Ne+"/report2/collection_flow",data:a,postProcessSuccess:r,postProcessError:i}}));case 5:case"end":return e.stop()}var a,r,i}),e)})));return function(){return e.apply(this,arguments)}}();return Ae(R.cb)?Object(h.jsx)(w.a,{title:"Informe de Flujo de Recaudo",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:b,form:c,validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:"12",children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"project",rules:[{required:!0}],children:Object(h.jsx)(dt.a,{showSearch:!0,placeholder:"Seleccionar...",style:{width:"100%"},optionFilterProp:"children",onChange:c.getFieldValue("project_id"),filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:!Array.isArray(n)&&(null===(e=n._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})})))})})}),Object(h.jsx)(N.a,{span:"12",children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"end_date",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:o,onChange:c.getFieldValue("final_date"),style:{width:"100%"},placeholder:"Ingrese una fecha"})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:21,xl:22}),Object(h.jsx)(N.a,{xs:6,sm:4,md:3,lg:3,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:u,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Sj=function(){return Object(h.jsx)(_j,{})},wj=Object(s.b)(null,(function(e){return{dispatchFetchAllCustomerAction:function(){return e($e())},dispatchFetchAllProjectAction:function(){return e(_c())},dispatchFetchAllAssessorAction:function(){return e(Ln())},dispatchFetchAllAfiliatedCompanyAction:function(){return e(hn())}}}))((function(e){var t,n,r=e.dispatchFetchAllCustomerAction,c=e.dispatchFetchAllAfiliatedCompanyAction,i=e.dispatchFetchAllProjectAction,o=e.dispatchFetchAllAssessorAction,l=Object(s.d)(),d=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),u=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor})),j=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),b=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),O=Object(a.useState)(null),x=Object(f.a)(O,2),v=x[0],y=x[1],_=Object(a.useState)(null),C=Object(f.a)(_,2),P=C[0],I=C[1],E=Object(a.useState)(null),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(a.useState)(null),L=Object(f.a)(D,2),V=L[0],q=L[1],M=Object(a.useState)(null),U=Object(f.a)(M,2),z=U[0],G=U[1],B=Object(a.useState)(null),Y=Object(f.a)(B,2),J=Y[0],H=Y[1],Z=Object(a.useState)(!1),Q=Object(f.a)(Z,2),K=Q[0],W=Q[1],X={id_project:v,id_assessor:P,id_company:A,id_customer:V,client_portfolio_status:J,final_date:z};Object(a.useEffect)((function(){return r()}),[r]),Object(a.useEffect)((function(){return i()}),[i]),Object(a.useEffect)((function(){return o()}),[o]),Object(a.useEffect)((function(){return c()}),[c]);return Ae(R.hd)?Object(h.jsx)(w.a,{title:"Informe de Seguimiento de Cartera",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){var e,t,n;W(!0),l((e=X,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code&&((a=document.createElement("a")).href=n._payload,a.target="_blank",a.click()),W(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/report2/get_path_excel_portfolio_monitoring_report"),postProcessSuccess:t,postProcessError:n}}))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:y,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(d)&&(null===(t=d._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Asesor:",name:"Asesor",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:I,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(u)&&u._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"Empresa",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:k,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(j)&&j._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Cliente:",name:"Cliente",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:q,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(b)&&(null===(n=b._payload)||void 0===n?void 0:n.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(e.identification)},e.id)})))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Estado de Cartera:",name:"Estado de Cartera",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:H,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),[{id:"CRITICO",name:"Cr\xedtico"},{id:"REGULAR",name:"Regular"},{id:"NORMAL",name:"Normal"}].map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"Fecha Fin:",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:z,onChange:function(e){return Bt(e,G)},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:17,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:K,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Cj=function(){return Object(h.jsx)(wj,{})},Pj=function(e){return{type:R.Hc,payload:e}},Ij=Object(s.b)(null,(function(e){return{dispatchFetchAllProjectAction:function(){return e(_c())},dispatchFetchAllAfiliatedCompanyAction:function(){return e(hn())}}}))((function(e){var t,n=e.dispatchFetchAllAfiliatedCompanyAction,r=e.dispatchFetchAllProjectAction,c=Object(s.d)();Object(a.useEffect)((function(){c(hn()),c(_c())}),[]);var i=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),o=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),l=Object(a.useState)(null),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(null),O=Object(f.a)(b,2),x=O[0],v=O[1],y=Object(a.useState)(!1),_=Object(f.a)(y,2),C=_[0],I=_[1];Object(a.useEffect)((function(){return r()}),[c]),Object(a.useEffect)((function(){return n()}),[c]);return Ae(R.db)?Object(h.jsx)(w.a,{title:"Informe Cumplimiento de Comisiones",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){I(!0),c(function(e,t){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/report/comission-report"),success:function(e){return Pj(e)},postProcessSuccess:t}}}({project_id:u,company_id:x},function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code?((a=document.createElement("a")).href=n._payload,a.target="_blank",document.body.appendChild(a),a.click()):Object(P.c)(n.message),I(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:function(e){!function(e){""!==e&&j(e)}(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(i)&&(null===(t=i._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"Empresa",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:function(e){!function(e){""!==e&&v(e)}(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(o)&&o._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:C,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Ej=function(){return Object(h.jsx)(Ij,{})},Fj=function(e){return{type:R.Mc,payload:e}},Aj=function(){var e,t=Object(s.d)();Object(a.useEffect)((function(){t(_c())}),[]);var n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),r=Object(a.useState)(null),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1];return Object(h.jsxs)(w.a,{title:"Informe General de Gesti\xf3n Comercial",children:[Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){var e="Debe seleccionar un proyecto",n=i||e;n===e?Object(P.g)(e):(j(!0),t(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/report/commercial_management/").concat(e),success:function(e){return Fj(e)},postProcessSuccess:t,postProcessError:n}}}(n,(function(e){if(e.error)Object(P.g)("No hay datos"),j(!1);else{Object(P.f)("Datos recuperados");var t=document.createElement("a");t.href=e._payload,document.body.appendChild(t),t.click(),j(!1)}}))))},children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:o,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(n)&&(null===(e=n._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)})))]})})})}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Exportar"})})})]})]}),u?Object(h.jsx)(x,{}):null]})},kj=function(){return Object(h.jsx)(Aj,{})},Tj=function(e){return[{descripcion:"Alto",value:0,valueAssesors:null!=e?e.customers_info.high_interest:0,valueDisponibles:0},{descripcion:"Medio",value:0,valueAssesors:null!=e?e.customers_info.medium_interest:0,valueDisponibles:0},{descripcion:"Bajo",value:0,valueAssesors:null!=e?e.customers_info.low_interest:0,valueDisponibles:0},{descripcion:"Sin inter\xe9s",value:0,valueAssesors:null!=e?e.customers_info.null_interest:0,valueDisponibles:0},{descripcion:"Actuales",value:0,valueAssesors:0,valueDisponibles:0},{descripcion:"Total",value:0,valueAssesors:null!=e?e.customers_info.total_interest:0,valueDisponibles:0}]},Nj=function(e){return null!=e&&1==e.has_data?[{nombreAsesor:e.tittle_info.assesor_name,unidadesCotizadas:e.unidades_cotizadas,clientesNuevos:e.clientes_nuevos,clientesVisitados:e.clientes_visitados,unidadesVendidas:e.unidades_vendidas,totalVentas:R.sc.format(e.total_ventas),unidadesSeparadas:e.unidades_separadas,desistimientos:e.desistimientos,actividadesProgramadas:e.actividades_programadas,actividadesRealizadas:e.actividades_realizadas,actividadesVencidas:e.actividades_vencidas}]:[]},Dj=function(e){var t=e.data,n=[{title:"Nivel Inter\xe9s",dataIndex:"descripcion",width:80},{title:"Total",align:"center",dataIndex:"value",width:20},{title:"Disponibles",align:"center",dataIndex:"valueDisponibles",width:20}],a=[{title:"Nivel Inter\xe9s",width:80,dataIndex:"descripcion",key:"Nivel Inter\xe9s"},{title:"Total",dataIndex:"value",key:"Total",width:80},{title:null!=t?t.tittle_info.assesor_name:"",dataIndex:"valueAssesors",key:"Asesor",width:100},{title:"Disponibles",dataIndex:"valueDisponibles",key:"Disponibles",width:80}];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{children:Object(h.jsxs)(g.a,{children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(Q.a,{size:"small",bordered:!0,style:{width:"200px",height:"330px"},summary:function(){return Object(h.jsxs)(Q.a.Summary.Row,{children:[Object(h.jsxs)(Q.a.Summary.Cell,{colSpan:2,children:["Participaci\xf3n (%)",""]}),Object(h.jsxs)(Q.a.Summary.Cell,{children:["0%",""]}),null!=t&&1===t.has_data?Object(h.jsxs)(Q.a.Summary.Cell,{children:["0%",""]}):Object(h.jsx)(h.Fragment,{})]})},columns:null!=t&&1===t.has_data?a:n,dataSource:Tj(t),pagination:!1})}),Object(h.jsx)(J.a,{style:{visibility:"hidden"}}),Object(h.jsx)(T.a,{children:Object(h.jsx)(Q.a,{style:{width:"100%"},columns:[{title:"Asesor",dataIndex:"nombreAsesor",width:120},{title:"Unidades Cotizadas",width:120,dataIndex:"unidadesCotizadas",key:"Unidades Cotizadas"},{title:"Clientes Nuevos",dataIndex:"clientesNuevos",key:"Clientes Nuevos",width:120},{title:"Clientes Visitados",dataIndex:"clientesVisitados",key:"Clientes Visitados",width:120},{title:"Unidades Vendidas",dataIndex:"unidadesVendidas",key:"Unidades Vendidas",width:120},{title:"Valor Total Ventas",dataIndex:"totalVentas",key:"Valor Total Ventas",width:120},{title:"Unidades Separadas",dataIndex:"unidadesSeparadas",key:"Unidades Separadas",width:120},{title:"Desistimientos",dataIndex:"desistimientos",key:"Desistimientos",width:120},{title:"Actividades Programadas",dataIndex:"actividadesProgramadas",key:"Actividades Programadas",width:120},{title:"Actividades Realizadas",dataIndex:"actividadesRealizadas",key:"Actividades Realizadas",width:120},{title:"Actividades Vencidas",dataIndex:"actividadesVencidas",key:"Actividades Vencidas",width:120}],scroll:{x:1500},dataSource:Nj(t)})})]})})})},Rj=function(e){var t=e.data,n=Object(s.d)(),a=Object(h.jsx)("div",{children:Object(h.jsx)("a",{onClick:function(){n(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/report/assesors-report-excel"),data:e,success:function(e){return Mn(e)},postProcessSuccess:t,postProcessError:n}}}(t,function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code?((a=document.createElement("a")).href=n._payload,a.target="_blank",a.click()):Object(P.c)(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:"Excel"})});return Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(Z.a,{content:a,trigger:"click",children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},type:"primary",children:"Exportar"})})})})},Lj=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,1)[0],n=Object(a.useState)(null),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(null),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)(null),b=Object(f.a)(j,2),O=b[0],v=b[1],y=Object(a.useState)(null),_=Object(f.a)(y,2),C=_[0],I=_[1],E=Object(a.useState)(null),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(a.useState)(null),L=Object(f.a)(D,2),V=L[0],q=L[1],M=Object(s.d)();Object(a.useEffect)((function(){M(Ln(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:!0===(n=e.sent).error&&Object(P.c)("Opss! ha ocurrido un error "+n.message),n||Object(P.g)("No hay Datos");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),M(hn())}),[]);var U=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor})),z=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),G={assesor_id:c,start_date:C,final_date:O,company_id:d};return Ae(R.M)?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Informe Gesti\xf3n Asesores",children:Object(h.jsx)(g.a,{layout:"vertical",onFinish:function(){q(!1),M(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/report/assesors-report"),data:e,success:function(e){return Mn(e)},postProcessSuccess:t,postProcessError:n}}}(G,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,t;case 3:!0===(n=e.sent).error?Object(P.c)("Opss! ha ocurrido un error "+n.message):k(n._payload),n||Object(P.g)("No hay Datos");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(null);case 1:case"end":return e.stop()}}),e)})))))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:t?Object(h.jsx)(x,{}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Asesor:",name:"Asesor",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:i,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(U)&&U._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"Empresa",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:u,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(z)&&z._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Inicio:",name:"Fecha Inicio:",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:C,onChange:function(e){return Bt(e,I)},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"Fecha Fin:",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:O,onChange:function(e){return Bt(e,v)},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Buscar"})})})]}),V?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(Rj,{data:G})})})]}),Object(h.jsx)(Dj,{data:A})]}):null==A?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)(x,{})]})})})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Vj=function(){return Object(h.jsx)(Lj,{})},qj=function(){var e,t=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor})),n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),a=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",children:Object(h.jsxs)(dt.a,{defaultValue:"All",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"All",active:!0,children:"Todos"}),!Array.isArray(a)&&(null===(e=a._payload)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"Empresa",children:Object(h.jsxs)(dt.a,{defaultValue:"All",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"All",children:"Todos"}),!Array.isArray(n)&&n._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Asesor:",name:"Asesor",children:Object(h.jsxs)(dt.a,{defaultValue:"All",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"All",children:"Todos"}),!Array.isArray(t)&&t._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Inicio:",name:"FechaInicio",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"FechaFin",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]})]})},Mj=function(){var e=g.a.useForm(),t=Object(f.a)(e,1)[0],n=Object(s.d)(),r=Object(a.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){n(_c()),n(hn()),n(Ln())}),[]);var l=function(){var e=Object(p.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,t.validateFields();case 3:a=e.sent,n((r=a,c=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:ou(e.sent._payload),o(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t,Object(P.c)(n.message),o(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",url:R.Ne+"/report/AdvertisingEffectiveness",data:r,postProcessSuccess:c,postProcessError:i}}));case 5:case"end":return e.stop()}var r,c,i}),e)})));return function(){return e.apply(this,arguments)}}();return Ae(R.J)?Object(h.jsx)(w.a,{title:"Informe Efectividad en Publicidad",children:Object(h.jsxs)(g.a,{layout:"vertical",form:t,onFinish:l,validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsx)(qj,{}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:i,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Uj=function(){return Object(h.jsx)(Mj,{})},zj=Object(s.b)(null,(function(e){return{dispatchFetchAllCustomerAction:function(){return e($e())},dispatchFetchAllAssessorAction:function(){return e(Ln())},dispatchFetchAllAfiliatedCompanyAction:function(){return e(hn())}}}))((function(e){e.customer;var t,n=e.dispatchFetchAllCustomerAction,r=(e.afiliatedCompany,e.dispatchFetchAllAfiliatedCompanyAction),c=(e.assessor,e.dispatchFetchAllAssessorAction);Object(a.useEffect)((function(){return n()}),[n]),Object(a.useEffect)((function(){return c()}),[c]),Object(a.useEffect)((function(){return r()}),[r]);var i=Object(s.d)(),o=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor})),l=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),d=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),u=Object(a.useState)(null),j=Object(f.a)(u,2),b=j[0],O=j[1],x=Object(a.useState)(null),v=Object(f.a)(x,2),y=v[0],_=v[1],C=Object(a.useState)(null),P=Object(f.a)(C,2),I=P[0],E=P[1],F=Object(a.useState)(null),A=Object(f.a)(F,2),k=A[0],D=A[1],L=Object(a.useState)(null),V=Object(f.a)(L,2),q=V[0],M=V[1],U=Object(a.useState)(!1),z=Object(f.a)(U,2),G=z[0],B=z[1],Y={id_assessor:b,id_company:y,id_customer:I,start_date:q,final_date:k};return Ae(R.U)?Object(h.jsx)(w.a,{title:"Base de Datos Compradores",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){var e,t,n;B(!0),i((e=Y,t=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code&&((a=document.createElement("a")).href=n._payload,a.target="_blank",a.click()),B(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/report/get_path_excel_report_buyer_database"),postProcessSuccess:t,postProcessError:n}}))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Asesor:",name:"Asesor",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:O,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(o)&&o._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"Empresa",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:_,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(l)&&l._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Cliente:",name:"Cliente",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:E,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(d)&&(null===(t=d._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(e.identification)},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Inicio:",name:"Fecha Inicio",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:q,onChange:function(e){return Bt(e,M)},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"Fecha Fin",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{Value:k,onChange:function(e){return Bt(e,D)},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:17,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:G,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Gj=function(){return Object(h.jsx)(zj,{})},Bj=function(e){var t,n=e.exportExcel,a=e.consultindExport,r=g.a.useForm(),c=Object(f.a)(r,1)[0],i=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assessor})),o=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),l=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer})),d=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return t=e.sent,e.next=5,n(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getFieldsValue();case 2:for(n in t=e.sent)t[n]=void 0===t[n]||""===t[n]?"all":t[n];return e.abrupt("return",Object(j.a)(Object(j.a)({},t),{},{startDate:t.startDate.format(Gt),endDate:"all"!==t.endDate&&null!=t.endDate?t.endDate.format(Gt):"all"}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(g.a,{layout:"vertical",onFinish:d,validateMessages:Gu,form:c,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Asesor:",name:"adviserId",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(i)&&i._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Empresa:",name:"companyId",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(o)&&o._payload.filter((function(e){return!1!==e.state})).map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Cliente:",name:"customerId",children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Todos..."}),!Array.isArray(l)&&(null===(t=l._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," - CC: ").concat(e.identification)},e.id)})))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Inicio:",name:"startDate",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"endDate",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:17,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:a,children:" Exportar "})})})]})]})},Yj=function(e){return{type:R.Kc,payload:e}},Jj=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],c=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(!0),i((n=t,a=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)("\xa1UPS!, Ha ocurrido un error"):""!==n._payload&&ou(n._payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"POST",data:n,url:"".concat(R.Ne,"/potential_clients_database/getPathExcelReport"),success:function(e){return Yj(e)},postProcessSuccess:a}})),r(!1);case 3:case"end":return e.stop()}var n,a}),e)})));return function(t){return e.apply(this,arguments)}}(),i=Object(s.d)();return Object(a.useEffect)((function(){i(Ln()),i(hn())}),[i]),Ae(R.id)?Object(h.jsx)(w.a,{title:"Base de Datos Clientes Potenciales",children:Object(h.jsx)(Bj,{exportExcel:c,consultindExport:n})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},Hj=function(){return Object(h.jsx)(Jj,{})},Zj=Object(s.b)(null,(function(e){return{dispatchFetchAllProjectAction:function(){return e(_c())}}}))((function(e){var t,n=e.dispatchFetchAllProjectAction,r=Object(s.d)(),c=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),i=Object(a.useState)(null),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(null),j=Object(f.a)(u,2),b=j[0],O=j[1],x=Object(a.useState)(!1),v=Object(f.a)(x,2),y=v[0],_=v[1];Object(a.useEffect)((function(){return n()}),[n]);return Ae(R.rd)?Object(h.jsx)(w.a,{title:"Informe General del Proyecto",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){_(!0),r(function(e,t){return{type:R.O,payload:{method:"POST",data:e,url:"".concat(R.Ne,"/report/general-project-excel"),postProcessSuccess:t}}}({project_id:l,date:b},function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:200===(n=e.sent).code?((a=document.createElement("a")).href=n._payload,a.target="_blank",a.click()):Object(P.g)(n.message),_(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:d,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(c)&&(null===(t=c._payload)||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))})))]})})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Fecha Fin:",name:"Fecha Fin:",rules:[{required:!0}],children:Object(h.jsx)(jt.a,{value:b,onChange:function(e){return Bt(e,O)},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:17,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",loading:y,children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Qj=function(){return Object(h.jsx)(Zj,{})},Kj=Object(s.b)(null,(function(e){return{dispatchFetchAllProjectAction:function(){return e(_c())}}}))((function(e){var t=e.dispatchFetchAllProjectAction,n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project})),r=Object(a.useState)(null),c=Object(f.a)(r,1)[0];Object(a.useEffect)((function(){return t()}),[t]);return Ae(R.T)?Object(h.jsx)(w.a,{title:"Informe Auditor\xeda",children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:function(){},validateMessages:{required:"${label} es requerido",types:{email:"${label} no es un correo v\xe1lido",number:"${label} debe ser un n\xfamero"}},children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:24,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Proyecto:",name:"Proyecto",rules:[{required:!0}],children:Object(h.jsxs)(dt.a,{defaultValue:"",showSearch:!0,style:{width:"100%"},optionFilterProp:"children",onChange:c,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),!Array.isArray(n)&&n._payload.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:" ".concat(e.name," ")},(null===e||void 0===e?void 0:e.id)+(null===e||void 0===e?void 0:e.name)+(null===e||void 0===e?void 0:e.id))}))]})})})}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:18,sm:20,md:21,lg:22,xl:22}),Object(h.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Exportar"})})})]})]})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})})),Wj=function(){return Object(h.jsx)(Kj,{})},Xj=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:null===e||void 0===e?void 0:e.textEditar,children:Object(h.jsx)(S.a,{type:"primary",style:{backgroundColor:e.backgroundColor},size:e.size,onClick:function(){c(!0)},icon:e.icon,children:e.text})}),Object(h.jsx)(ue.a,{title:e.title,centered:!0,visible:r,footer:!1,onCancel:function(){c(!1)},width:e.width,children:e.form})]})},$j=(n(556),[{id:"1",Proyecto:"Vivento",TotalComisiones:"$53.791.605,62","FechaCreaci\xf3n":"20/06/2018"}]),eb=[{title:"#",width:120,dataIndex:"id",key:"id"},{title:"Proyecto",width:120,dataIndex:"Proyecto",key:"Proyecto"},{title:"Total Comisiones",width:120,dataIndex:"TotalComisiones",key:"TotalComisiones"},{title:"Fecha Creaci\xf3n",width:120,dataIndex:"FechaCreaci\xf3n",key:"FechaCreaci\xf3n"},{title:"Acciones",key:"acciones",fixed:"right",width:50,render:function(){return"proceedings"==="proceedings"?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Xj,{title:"Acta Resumen - 20/06/2018",size:"small",icon:Object(h.jsx)(nc.a,{}),width:800,form:Object(h.jsxs)("table",{className:"table borderless",children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:Object(h.jsx)("th",{children:"Actualizaciones"})})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"GPI Constructores"}),Object(h.jsxs)("td",{children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:"10% de Valor Total."})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:"Escrituraci\xf3n."})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:"Multa por Desistimiento"})})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:"$43.919.509,62"})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:"$0,00"})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{children:"$2.000.000,00"})})]})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{colSpan:"2",children:"TOTAL COMISIONES:"}),Object(h.jsx)("td",{children:Object(h.jsx)("p",{style:{marginLeft:11},children:"$45.919.509,62"})})]})]})]})}),"  ",Object(h.jsx)(S.a,{icon:Object(h.jsx)(Ht.a,{}),size:"small",style:{backgroundColor:"#40a9ff",color:"#ffffff"}})]}):Object(h.jsx)("h1",{children:"No project match"})}}],tb=function(){return Ae(R.od)?Object(h.jsx)(w.a,{title:"Actas",children:Object(h.jsx)(Q.a,{columns:eb,dataSource:Object(ce.a)($j),scroll:{x:600,y:800}})}):Object(h.jsx)(Kt.Redirect,{to:R.Ib})},nb=function(){return Object(h.jsx)(tb,{})},ab=n(647),rb=function(e){var t=e.item,n=e.setDataSource,r=e.dataSource,c=e.dataPolicyToComply,i=Object(a.useState)("hidden"),o=Object(f.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(t),u=Object(f.a)(d,2),j=u[0],b=u[1],m=function(e,t){for(var a=Object(Qi.a)(r),c=0;c<a.length;c++)a[c].commission_parameters_policy_comply.map((function(n){return n.keyPolicy===e&&(n=t),n}));n(a)};return Object(a.useEffect)((function(){1==j.policy_to_comply_id?l("visible"):l("hidden")}),[]),null!==t.id&&t.hasOwnProperty("keyPolicy")?Object(h.jsxs)("div",{style:{display:"inline-flex",width:"100%",marginTop:"1%"},children:[Object(h.jsx)("div",{children:Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:function(e){!function(e){j.percentage_total_value=parseFloat(e),b(j),m(j.keyPolicy,j)}(e)},defaultValue:t.percentage_total_value,style:{width:"100%",visibility:s}})}),Object(h.jsx)("div",{style:{width:"100%",maxWidth:"60%",minWidth:"60%"},children:Object(h.jsxs)(dt.a,{defaultValue:String(j.policy_to_comply_id),onChange:function(e){!function(e){j.policy_to_comply_id=parseInt(e),b(j),1==j.policy_to_comply_id?l("visible"):l("hidden"),m(j.keyPolicy,j)}(e)},style:{width:"90%",paddingLeft:"1%"},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione"}),c._payload.map((function(e){return Object(h.jsxs)(dt.a.Option,{value:String(e.id),children:[" ",e.name]},e.id)}))]})})]}):null},cb=function(e){var t=Object(a.useState)(e.dataCommissionParamaterSelector),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),o=Object(f.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)(0),u=Object(f.a)(d,2),j=u[0],b=u[1],m=Object(a.useState)(1e3),p=Object(f.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)(""),y=Object(f.a)(v,2),C=y[0],I=y[1],E=Object(a.useState)([]),F=Object(f.a)(E,2),A=F[0],k=F[1];if(Object(a.useEffect)((function(){k(e.selectAffiliatedCompanies)}),[e.selectAffiliatedCompanies]),Object(a.useEffect)((function(){for(var e=0;e<r.length;e++)I(r[0].affiliated_company_id)}),[r]),Object(a.useEffect)((function(){0===r.length&&M()}),[r]),Object(a.useEffect)((function(){R()}),[r]),void 0===e.dataCommissionParamaterSelector||null===e.dataCommissionParamaterSelector||null===e.selectAffiliatedCompanies)return null;var D=[{title:"#",dataIndex:"key",align:"center"},{title:"Etiqueta",dataIndex:"label",width:"20%",align:"center",render:function(e,t){return Object(h.jsx)(_.a,{name:"label",value:t.label,style:{width:"100%"},onChange:function(e){U(e.target.value,t)}})}},{title:"Comisi\xf3n",dataIndex:"commission",align:"center",width:"10%",render:function(e,t){return Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},name:"commission",value:t.commission,style:{width:"100%"},onChange:function(e){z(e,t)}})}},{title:"Pol\xedtica a Cumplir",dataIndex:"policy",width:"40%",align:"center",render:function(t,n){return Object(h.jsx)(h.Fragment,{children:n.commission_parameters_policy_comply.map((function(t){return Object(h.jsx)(rb,{dataPolicyToComply:e.policyToComply,dataSource:Object(ce.a)(r),setDataSource:c,item:t},t.id)}))})}},{title:"",dataIndex:"operation",width:"20%",align:"center",render:function(e,t){return r.length>=1?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){return L(t.key)},icon:Object(h.jsx)(De.a,{}),type:"primary",size:"small"}),"  ",Object(h.jsx)(S.a,{onClick:function(){return V(t.key)},icon:Object(h.jsx)(ab.a,{}),type:"primary",size:"small",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"}}),"  ",Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){return q(t.key)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})]}):null}}],R=function(){for(var e=0;e<r.length;e++)r[e].key=e+1,l(e+1);for(var t=0;t<r.length;t++)for(var n=0;n<r[t].commission_parameters_policy_comply.length;n++)r[t].commission_parameters_policy_comply[n].keyPolicy=n+1,b(n+1)},L=function(t){for(var n={id:O,percentage_total_value:null,policy_to_comply_id:"",keyPolicy:j+1},a=Object(Qi.a)(r),i=0;i<a.length;i++)a[i].key===t&&a[i].commission_parameters_policy_comply.push(n);x(O+1),c(a),b(j+1),e.setDataManagementCompany(a)},V=function(t){for(var n=Object(Qi.a)(r),a=0;a<n.length;a++)n[a].key===t&&(n[a].commission_parameters_policy_comply.length>1?n[a].commission_parameters_policy_comply.pop():Object(P.d)("Debe existir almenos una condici\xf3n por campo"));c(n),e.setDataManagementCompany(n)},q=function(t){var n=Object(Qi.a)(r);n.length<=1?Object(P.d)("Debe existir por lo menos una policitica por empresa"):(c(n.filter((function(e){return e.key!==t}))),e.setDataManagementCompany(n.filter((function(e){return e.key!==t}))))},M=function(){var t={affiliated_company_id:C,commission:null,commission_parameters_policy_comply:[{id:O,percentage_total_value:null,policy_to_comply_id:"",keyPolicy:j+1}],company_type:1,key:s+1,id:O+1,label:"",projects_id:e.idProject},n=[].concat(Object(Qi.a)(r),[t]);c(n),b(j+1),l(s+1),x(O+1),e.setDataManagementCompany(n)},U=function(t,n){var a=Object(Qi.a)(r);a.map((function(e){return e.key===n.key&&(e.label=t),e})),c(a),e.setDataManagementCompany(a)},z=function(t,n){var a=Object(Qi.a)(r);a.map((function(e){return e.key===n.key&&(e.commission=t),e})),c(a),e.setDataManagementCompany(a)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"ADMINISTRADORA",style:{borderColor:"black"},extra:Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){e.deleteManagementCompany()},children:Object(h.jsxs)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",danger:!0,children:[" ","Borrar Empresa"," "]})}),children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:Object(h.jsx)(N.a,{className:"gutter-row",span:24,children:Object(h.jsxs)(g.a,{layout:"vertical",children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(g.a.Item,{label:"Empresa Asociada",name:"marketer",style:{width:"40%"},rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},defaultValue:String(r[0].affiliated_company_id),onChange:function(t){!function(t){var n=Object(Qi.a)(r);n.map((function(e){return e.affiliated_company_id=t,e})),c(n),e.setDataManagementCompany(n),I(t)}(t)},placeholder:"Seleccione...",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Array.isArray(A)?A.map((function(e){return Object(h.jsx)(dt.a.Option,{value:String(e.id),children:e.name},e.id)})):null]})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(g.a.Item,{style:{width:"90%"},children:Object(h.jsx)(Q.a,{bordered:!0,dataSource:Object(ce.a)(r),columns:D,footer:function(){return Object(h.jsxs)(S.a,{onClick:M,type:"primary",children:[" ","Agregar Politica"]})}})})})]})})})})})},ib=function(e){var t=e.normalCompanies.company,n=Object(a.useState)(t),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(0),s=Object(f.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(0),j=Object(f.a)(u,2),b=j[0],m=j[1],p=Object(a.useState)(1),O=Object(f.a)(p,2),x=O[0],v=O[1],y=Object(a.useState)(""),C=Object(f.a)(y,2),I=C[0],E=C[1];Object(a.useEffect)((function(){for(var e=0;e<c.length;e++)E(c[0].affiliated_company_id)}),[c]),Object(a.useEffect)((function(){0===c.length&&L()}),[c]),Object(a.useEffect)((function(){A()}),[c]);var F=[{title:"#",dataIndex:"key",align:"center"},{title:"Etiqueta",dataIndex:"label",width:"20%",align:"center",render:function(e,t){return Object(h.jsx)(_.a,{name:"label",value:t.label,style:{width:"100%"},onChange:function(e){V(e.target.value,t)}})}},{title:"Comisi\xf3n",dataIndex:"commission",width:"20%",align:"center",render:function(e,t){return Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},name:"commission",value:t.commission,style:{width:"100%"},onChange:function(e){q(e,t)}})}},{title:"Pol\xedtica a Cumplir",dataIndex:"policy",width:"40%",render:function(t,n){return Object(h.jsx)(h.Fragment,{children:n.commission_parameters_policy_comply.map((function(t){return Object(h.jsx)(rb,{dataPolicyToComply:e.policyToComply,dataSource:Object(ce.a)(c),setDataSource:i,item:t},t.id)}))})}},{title:"",dataIndex:"operation",width:"30%",render:function(e,t){return c.length>=1?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){k(t.key)},icon:Object(h.jsx)(De.a,{}),type:"primary",size:"small"}),"  ",Object(h.jsx)(S.a,{onClick:function(){return D(t.key)},icon:Object(h.jsx)(ab.a,{}),type:"primary",size:"small",style:{backgroundColor:"#ffa247",borderColor:"#ffa247"}}),"  ",Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){return R(t.key)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})]}):null}}],A=function(){for(var e=0;e<c.length;e++)c[e].key=e+1,d(e+1);for(var t=0;t<c.length;t++)for(var n=0;n<c[t].commission_parameters_policy_comply.length;n++)c[t].commission_parameters_policy_comply[n].keyPolicy=n+1,m(n+1)},k=function(t){for(var n={id:x,percentage_total_value:null,policy_to_comply_id:"",keyPolicy:b+1},a=Object(Qi.a)(c),r=0;r<a.length;r++)a[r].key===t&&a[r].commission_parameters_policy_comply.push(n);v(x+1),i(a),m(b+1),e.updateNormalCompanies(e.keyCompany,a)},D=function(t){for(var n=Object(Qi.a)(c),a=0;a<n.length;a++)n[a].key===t&&(n[a].commission_parameters_policy_comply.length>1?n[a].commission_parameters_policy_comply.pop():Object(P.d)("Debe existir almenos una condici\xf3n por campo"));i(n),e.updateNormalCompanies(e.keyCompany,n)},R=function(t){var n=Object(Qi.a)(c);n.length<=1?Object(P.d)("Debe existir por lo menos una policitica por empresa"):(i(n.filter((function(e){return e.key!==t}))),e.updateNormalCompanies(e.keyCompany,n.filter((function(e){return e.key!==t}))))},L=function(){var t={affiliated_company_id:I,commission:null,commission_parameters_policy_comply:[{id:x,percentage_total_value:null,policy_to_comply_id:"",keyPolicy:b+1}],company_type:2,key:l+1,id:x+1,label:"",projects_id:parseInt(e.idProject)},n=[].concat(Object(Qi.a)(c),[t]);i(n),m(b+1),d(l+1),v(x+1),e.updateNormalCompanies(e.keyCompany,n)},V=function(t,n){var a=Object(Qi.a)(c);a.map((function(e){return e.key===n.key&&(e.label=t),e})),i(a),e.updateNormalCompanies(e.keyCompany,a)},q=function(t,n){var a=Object(Qi.a)(c);a.map((function(e){return e.key===n.key&&(e.commission=t),e})),i(a),e.updateNormalCompanies(e.keyCompany,a)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{style:{borderColor:"black"},extra:Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){e.onDelete(e.keyCompany)},children:Object(h.jsxs)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",danger:!0,children:[" ","Borrar Empresa"," "]})}),children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:22,lg:22},children:Object(h.jsx)(N.a,{className:"gutter-row",span:22,children:Object(h.jsxs)(g.a,{layout:"vertical",children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(g.a.Item,{label:"Empresa Asociada",name:"marketer",style:{width:"40%"},rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsxs)(dt.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},defaultValue:String(c[0].affiliated_company_id),onChange:function(t){!function(t){var n=Object(Qi.a)(c);n.map((function(e){return e.affiliated_company_id=t,e})),i(n),E(t),e.updateNormalCompanies(e.keyCompany,n)}(t)},placeholder:"Seleccione...",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),Array.isArray(e.selectAffiliatedCompanies)?e.selectAffiliatedCompanies.map((function(e){return Object(h.jsx)(dt.a.Option,{value:String(e.id),children:e.name},e.id)})):null]})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(g.a.Item,{style:{width:"90%",marginRight:"10%"},children:Object(h.jsx)(Q.a,{bordered:!0,dataSource:Object(ce.a)(c),columns:F,footer:function(){return Object(h.jsxs)(S.a,{onClick:function(){L()},type:"primary",children:[" ","Agregar Politica"]})}})})})]})})})})})},ob=new yt,sb=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":ob.getToken()},url:"".concat(R.Ne,"/commissionParameter/").concat(e),success:function(e){return db(e)}}}},lb=function(){return{type:R.pe,payload:[]}},db=function(e){return{type:R.oc,payload:e}},ub=function(e,t){return{type:R.Rg,payload:{id:e,data:t}}},jb=function(e){var t=e.id,n=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.comissionParameter})),r=Object(s.d)();Object(a.useEffect)((function(){var e=n._payload;l(e)}),[]);var c=Object(a.useState)([]),i=Object(f.a)(c,2),o=i[0],l=i[1];Object(a.useEffect)((function(){if(o.length>0){var t=Object(Qi.a)(o),n=0,a=[],r=[];t.forEach((function(e){if(n=0,1===e.company_type)a.push(e);else{var t={key:T,company:[e]};0===r.length?(N(T+1),r.push(t)):(r.forEach((function(t){t.company[0].affiliated_company_id===e.affiliated_company_id&&(n=1,t.company.push(e))})),0===n&&(N(T+1),r.push(t)))}})),x(a),_(r)}b(e.afiliatedCompany._payload)}),[o]);var d=Object(a.useState)([]),u=Object(f.a)(d,2),j=u[0],b=u[1],m=Object(a.useState)([]),p=Object(f.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),g=y[0],_=y[1],C=Object(a.useState)(0),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)(1),k=Object(f.a)(A,2),T=k[0],N=k[1];Object(a.useEffect)((function(){var t,n,a,r,c=Array.isArray(null===(t=e.afiliatedCompany)||void 0===t?void 0:t._payload)?null===(n=e.afiliatedCompany)||void 0===n?void 0:n._payload:JSON.parse(JSON.stringify(null!==(a=null===(r=e.afiliatedCompany)||void 0===r?void 0:r._payload)&&void 0!==a?a:[])),i=V();if(i.length>0){var o,s=Object(Qi.a)(c),l=[];i.forEach((function(e){l.push(""===e.affiliated_company_id?null:e.affiliated_company_id)})),o=s.filter((function(e){return void 0===l.find((function(t){return t===e.id}))})),b(o)}}),[O,g]);var D=function(e,t){var n=Object(Qi.a)(g);n.map((function(n){return n.key===e&&(n.company=t),n})),_(n)},L=function(e){var t=Object(Qi.a)(g).filter((function(t){return t.key!==e}));_(t)},V=function(){var e=[];return Object(Qi.a)(g).forEach((function(t){t.company.forEach((function(t){e.push(t)}))})),e.concat(O)},q=function(){var e=function(e){var t=JSON.parse(JSON.stringify(e));t.map((function(e){return e.hasOwnProperty("created_at")?(delete e.created_at,delete e.updated_at,delete e.deleted_at,delete e.key,e.projects_id=parseInt(e.projects_id),e.affiliated_company_id=parseInt(e.affiliated_company_id),e.commission=parseFloat(e.commission)):(delete e.key,e.id=null,e.projects_id=parseInt(e.projects_id),e.affiliated_company_id=parseInt(e.affiliated_company_id),e.commission=parseFloat(e.commission)),e}));for(var n=0;n<t.length;n++)t[n].commission_parameters_policy_comply.map((function(e){return e.hasOwnProperty("created_at")?(delete e.created_at,delete e.updated_at,delete e.deleted_at,delete e.keyPolicy):(delete e.keyPolicy,e.id=null),1!==e.policy_to_comply_id&&(e.percentage_total_value=null),e}));return t}(V());if(function(e){for(var t=0,n=JSON.parse(JSON.stringify(e)),a=0;a<n.length;a++)null!==n[a].afiliated_companies_id&&null!==n[a].commission&&""!==n[a].label||(t=1);return 1===t}(e))return Object(P.d)("Hay campos vacios!");r(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/commissionParameter/").concat(e),data:t,success:function(e,t){return ub(e,t)},postProcessSuccess:n,postProcessError:a}}}(t,e,(function(e){e.error?Object(P.c)("\xa1UPS! ha ocurrido un error mientras se actualizaba"):Object(P.f)("Actualizado exitosamente"),r(sb(t))})))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{title:"Par\xe1metros y comisiones",style:{borderColor:"black"},children:[Object(h.jsxs)("div",{style:{display:"inline",marginTop:"10%"},children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){var e={key:T,company:[{affiliated_company_id:"",commission:0,commission_parameters_policy_comply:[{id:1e3,percentage_total_value:null,policy_to_comply_id:"",keyPolicy:1e3}],company_type:2,id:E+1,label:"",projects_id:t}]},n=[].concat(Object(Qi.a)(g),[e]);N(T+1),_(n),F(E+1)},children:"Agregar Empresa"}),Object(h.jsx)(S.a,{disabled:0!==O.length,type:"primary",style:{marginLeft:"5%",backgroundColor:"#5cb85c",borderColor:"#5cb85c"},onClick:function(){x([{affiliated_company_id:"",commission:0,commission_parameters_policy_comply:[{id:1e3,percentage_total_value:null,policy_to_comply_id:"",keyPolicy:1e3}],company_type:1,id:1e3,label:"",projects_id:t}])},children:"Agregar Administradora"})]}),Object(h.jsxs)("div",{style:{marginTop:"5%"},children:[Object(h.jsx)("div",{children:O.length>0&&Object(h.jsx)(cb,{idProject:t,policyToComply:e.policyToComply,dataCommissionParamaterSelector:O,setDataManagementCompany:x,selectAffiliatedCompanies:j,deleteManagementCompany:function(){x([])}})}),Object(h.jsx)(J.a,{}),g.length>0&&g.map((function(n){return Object(h.jsx)(ib,{setSelectAffiliatedCompanies:b,idProject:t,normalCompanies:n,updateNormalCompanies:D,selectAffiliatedCompanies:j,policyToComply:e.policyToComply,id:n.id,keyCompany:n.key,onDelete:L},n.id)}))]}),Object(h.jsx)(S.a,{onClick:function(){q()},type:"primary",style:{marginTop:"1%",marginLeft:"85%"},disabled:JSON.parse(localStorage.stateDisable),children:"Guardar"})]})})},bb=new yt,mb=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":bb.getToken()},url:"".concat(R.Ne,"/saleLegalizationDocument/").concat(e),success:function(e){return Ob(e)}}}},pb=function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/saleLegalizationDocument/").concat(e),success:function(){return xb(e)},postProcessSuccess:t,postProcessError:n}}},fb=function(){return{type:R.Ge,payload:[]}},Ob=function(e){return{type:R.Ff,payload:e}},hb=function(e){return{type:R.Vg,payload:{data:e}}},xb=function(e){return{type:R.Yd,payload:e}},vb=n(186),yb=(n(557),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace("_"," ")}),gb=["index"],_b=["title","editable","children","dataIndex","record","handleSave"],Sb=Object(a.createContext)(null),wb=function(e){e.index;var t=Object(vb.a)(e,gb),n=g.a.useForm(),a=Object(f.a)(n,1)[0];return Object(h.jsx)(g.a,{form:a,component:!1,children:Object(h.jsx)(Sb.Provider,{value:a,children:Object(h.jsx)("tr",Object(j.a)({},t))})})},Cb=function(e){var t=e.title,n=e.editable,r=e.children,c=e.dataIndex,i=e.record,o=e.handleSave,s=Object(vb.a)(e,_b),l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],b=d[1],O=Object(a.useRef)(null),x=Object(a.useContext)(Sb);Object(a.useEffect)((function(){u&&O.current.focus()}),[u]);var v=function(){b(!u),x.setFieldsValue(Object(Nc.a)({},c,yb(i[c])))},y=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.validateFields();case 3:t=e.sent,v(),o(Object(j.a)(Object(j.a)({},i),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=r;return n&&(S=u?Object(h.jsx)(g.a.Item,{name:c,rules:[{required:!0,message:"".concat(t," es requerido.")}],children:Object(h.jsx)(_.a,{style:{width:"100%"},ref:O,onPressEnter:y,onBlur:y})}):Object(h.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:v,children:r})),Object(h.jsx)("td",Object(j.a)(Object(j.a)({},s),{},{children:S}))},Pb=function(e){var t=e.saleLegalizationDatabase,n=e.id,r=Object(s.d)();Object(a.useEffect)((function(){setTimeout((function(){l(t._payload)}),1e3)}),[]),Object(a.useEffect)((function(){t._payload.length>0?O(t._payload[t._payload.length-1].id):O(0)}),[]);var c=Object(a.useState)([]),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(1),u=Object(f.a)(d,2),b=u[0],O=u[1],x=Object(a.useState)(0),v=Object(f.a)(x,2),y=v[0],_=v[1],C=[{title:"#",dataIndex:"key",width:10},{title:"Etiqueta",dataIndex:"name",editable:!0,width:"30%",render:function(e){return{children:yb(e)}}},{title:"Nombre del archivo",dataIndex:"label",editable:!0,width:"50%",render:function(e){return{children:yb(e)}}},{title:"",dataIndex:"operation",with:10,render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Wt.a,{title:"\xbfConfirmar acci\xf3n?",onConfirm:function(){return I(t.id)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(ab.a,{}),type:"primary",size:"small",danger:!0})})})}}];Object(a.useEffect)((function(){E()}),[o]);var I=function(e){for(var t=JSON.parse(JSON.stringify(o)),a=0;a<t.length;a++)if(t[a].id===e)if(t[a].hasOwnProperty("created_at"))r(pb(e,function(){var t=Object(p.a)(m.a.mark((function t(a){var c,i,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a;case 2:c=t.sent,i=Object(Qi.a)(o),s=i.filter((function(t){return t.id!==e})),l(s),r(mb(n)),c.error?Object(P.a)(c.message):Object(P.f)("Ha sido eliminado con \xe9xito");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));else{var c=Object(Qi.a)(o).filter((function(t){return t.id!==e}));l(c)}},E=function(){for(var e=0;e<o.length;e++)o[e].key=e+1,_(e+1)},F=function(e){var t=Object(Qi.a)(o),n=t.findIndex((function(t){return e.key===t.key})),a=t[n];t.splice(n,1,Object(j.a)(Object(j.a)({},a),e)),l(t)},A={body:{row:wb,cell:Cb}},k=C.map((function(e){return e.editable?Object(j.a)(Object(j.a)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:F}}}):e})),D=function(e){return""===e||null===e};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Listado de documentos",style:{borderColor:"black"},children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:24},children:Object(h.jsx)(N.a,{className:"gutter-row",span:20,children:Object(h.jsxs)(g.a,{layout:"vertical",style:{marginLeft:"25px",marginRight:"25px"},children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(g.a.Item,{style:{width:"100%"},children:[Object(h.jsxs)(S.a,{onClick:function(){var e={key:y+1,id:b+1,name:"",label:"",project_id:n},t=[].concat(Object(Qi.a)(o),[e]);l(t),O(b+1),_(y+1)},type:"primary",style:{marginBottom:20},children:[Object(h.jsx)(De.a,{}),"Documentos"]}),Object(h.jsx)(Q.a,{components:A,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:Object(ce.a)(o),columns:k})]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{disabled:JSON.parse(localStorage.stateDisable),onClick:function(){var e,t,a,c=function(e){var t=JSON.parse(JSON.stringify(e));return t.map((function(e){return e.hasOwnProperty("created_at")?(delete e.created_at,delete e.updated_at,delete e.deleted_at,delete e.key):(delete e.key,e.id=null),e})),t}(o);(function(e){for(var t=0,n=0;n<e.length;n++)(D(e[n].name)||D(e[n].label))&&(t=1);return 1===t&&(Object(P.d)("Campos vacios"),!0)})(c)||r((e=c,t=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! ha ocurrido un error mientras se actualizaba"):Object(P.f)("Ha sido agregado con \xe9xito"),r(mb(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/saleLegalizationDocument"),data:e,success:function(e){return hb(e)},postProcessSuccess:t,postProcessError:a}}))},style:{marginLeft:"80%"},type:"primary",children:"Guardar"})})]})})})})})},Ib=function(e){var t=e.id,n=Object(s.d)();Object(a.useEffect)((function(){n(mb(t))}),[]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.saleLegalization}));return Array.isArray(r)?Object(h.jsx)(w.a,{title:"Listado de documentos",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(Pb,{saleLegalizationDatabase:r,id:t})},Eb=(n(558),function(){return{type:R.ze,payload:[]}}),Fb=function(e){return{type:R.xf,payload:e}},Ab=function(e){return{type:R.w,payload:{data:e}}},kb=new yt,Tb=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":kb.getToken()},url:"".concat(R.Ne,"/increasePolicy/").concat(e),success:function(e){return Db(e)}}}},Nb=function(){return{type:R.ve,payload:[]}},Db=function(e){return{type:R.tf,payload:e}},Rb=function(e,t){return{type:R.Tg,payload:{id:e,data:t}}},Lb=function(e){return{type:R.Nd,payload:e}},Vb=new yt,qb=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":Vb.getToken()},url:"".concat(R.Ne,"/discountPolicy/").concat(e),success:function(e){return Ub(e)}}}},Mb=function(){return{type:R.se,payload:[]}},Ub=function(e){return{type:R.pf,payload:e}},zb=function(e,t){return{type:R.Sg,payload:{id:e,data:t}}},Gb=function(e){return{type:R.Ld,payload:e}},Bb=(n(559),{width:"100%",margin:0,paddingTop:4}),Yb=function(e){var t=e.item,n=e.handleDeleteIncrementPolicy,r=e.form;Object(a.useEffect)((function(){c()}),[t]);var c=function(){var e;r.setFieldsValue((e={},Object(Nc.a)(e,"lower_limit;".concat(t.id),t.lower_limit),Object(Nc.a)(e,"upper_limit;".concat(t.id),t.upper_limit),Object(Nc.a)(e,"increase_type;".concat(t.id),t.increase_type?String(t.increase_type):""),Object(Nc.a)(e,"amount;".concat(t.id),t.amount),e))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{className:"formStyle",style:{borderColor:"black"},title:"Politica",extra:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S.a,{onClick:function(){n(t.id)},icon:Object(h.jsx)(Xt.a,{}),type:"primary",danger:!0})}),bodyStyle:{padding:5},children:[Object(h.jsx)(g.a.Item,{style:Bb,name:"lower_limit;".concat(t.id),children:Object(h.jsx)(ut.a,{style:{width:"100%"},placeholder:"L\xedmite Inferior",value:r.getFieldValue("lower_limit;".concat(t.id))})}),Object(h.jsx)(g.a.Item,{style:Bb,name:"upper_limit;".concat(t.id),children:Object(h.jsx)(ut.a,{style:{width:"100%"},placeholder:"L\xedmite Superior",value:r.getFieldValue("upper_limit;".concat(t.id))})}),Object(h.jsx)(g.a.Item,{style:Bb,name:"increase_type;".concat(t.id),value:r.getFieldValue("increase_type;".concat(t.id)),showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsxs)(dt.a,{defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),Object(h.jsx)(dt.a.Option,{value:"1",children:"Valor m2"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"Valor Total"})]})}),Object(h.jsx)(g.a.Item,{style:Bb,name:"amount;".concat(t.id),rules:[{required:!0,message:"El campo es requerido."}],children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"},placeholder:"Valor",value:r.getFieldValue("amount;".concat(t.id))}))})]})})},Jb=["L\xedmite Inferior","L\xedmite Superior","Tipo de Incremento","Valor"],Hb=function(e){var t=e.increasePoliciesDatabase,n=Object(d.useParams)().id,r=n,c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(s.d)(),l=Object(a.useState)(1),u=Object(f.a)(l,2),j=u[0],b=u[1],O=Object(a.useState)([]),x=Object(f.a)(O,2),v=x[0],y=x[1];Object(a.useEffect)((function(){y(t)}),[t]);var _=function(e){e&&e>=0&&o(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/increasePolicy/").concat(e),success:function(){return Lb(e)},postProcessSuccess:t,postProcessError:n}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se actualizaba."):Object(P.f)("La pol\xedtica ha sido eliminada con \xe9xito.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t=v,n=Object(Qi.a)(t._payload);t._payload=n.filter((function(t){return t.id!==e}));var a={_payload:t._payload};y(a)},w=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v,a=Object(Qi.a)(t._payload),e.prev=2,e.next=5,i.validateFields();case 5:r=e.sent,a.forEach((function(e){(null===e||void 0===e?void 0:e.id)||Object.keys(r).forEach((function(t){var n=t.split(";")[1];if(-1==a.findIndex((function(e){return e.id==n})))return e.id=n,!0})),e.lower_limit=r["lower_limit;".concat(e.id)],e.upper_limit=r["upper_limit;".concat(e.id)],e.increase_type=parseInt(r["increase_type;".concat(e.id)]),e.amount=r["amount;".concat(e.id)],e.id=e.id<0?null:e.id})),o((c=a,s=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se actualizaba."):Object(P.f)("Pol\xedticas de incremento guardadas correctamente."),o(Tb(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/increasePolicy"),data:c,success:function(e){return Rb(e)},postProcessSuccess:s,postProcessError:l}})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}var c,s,l}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(g.a,{form:i,onFinish:w,name:"increasePolicyForm",children:[Object(h.jsx)(S.a,{type:"primary",style:{margin:"2%",backgroundColor:"#5cb85c",borderColor:"#5cb85c"},disabled:Array.isArray(v)||JSON.parse(localStorage.stateDisable),onClick:function(){var e=v,t=Object(Qi.a)(e._payload),n={id:-1*j,lower_limit:null,upper_limit:null,increase_type:"",amount:null,project_id:parseInt(r)};e._payload=[].concat(Object(Qi.a)(t),[n]),y(e),b(j+1)},children:"Agregar Politica de incremento"}),Object(h.jsx)("div",{style:{marginLeft:"20px"},children:Object(h.jsxs)("div",{className:"wrapperPolicy",children:[Object(h.jsx)("div",{className:"listItemIncrement",children:Object(h.jsx)(qs,{data:Jb})}),!Array.isArray(v)&&v._payload.map((function(e){return Object(h.jsx)(Yb,{handleDeleteIncrementPolicy:_,item:e,form:i},e.id)}))]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",style:{margin:"2%",marginLeft:"60vw"},disabled:Array.isArray(v)||JSON.parse(localStorage.stateDisable),htmlType:"submit",children:"Guardar pol\xedticas de incremento"})})]})})},Zb={width:"100%",margin:0,paddingTop:4},Qb=function(e){var t=e.item,n=e.handleDeleteDiscountPolicy,r=e.form;Object(a.useEffect)((function(){c()}),[t]);var c=function(){var e;r.setFieldsValue((e={},Object(Nc.a)(e,"lower_limit;".concat(t.id),t.lower_limit),Object(Nc.a)(e,"upper_limit;".concat(t.id),t.upper_limit),Object(Nc.a)(e,"discount_type;".concat(t.id),t.discount_type?String(t.discount_type):""),Object(Nc.a)(e,"amount;".concat(t.id),t.amount),Object(Nc.a)(e,"initial_date;".concat(t.id),se()(t.initial_date)),Object(Nc.a)(e,"final_date;".concat(t.id),se()(t.final_date)),e))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{className:"formStyle",style:{borderColor:"black"},title:"Politica",extra:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(S.a,{onClick:function(){n(t.id)},icon:Object(h.jsx)(Xt.a,{}),type:"primary",danger:!0})}),bodyStyle:{padding:5},children:[Object(h.jsx)(g.a.Item,{name:"initial_date;".concat(t.id),rules:[{required:!0,message:"El campo es requerido."}],style:Zb,children:Object(h.jsx)(jt.a,{style:{width:"100%"},value:r.getFieldValue("initial_date;".concat(t.id)),placeholder:"Ingrese la fecha"})}),Object(h.jsx)(g.a.Item,{style:Zb,name:"final_date;".concat(t.id),rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsx)(jt.a,{style:{width:"100%"},value:r.getFieldValue("final_date;".concat(t.id)),placeholder:"Ingrese la fecha"})}),Object(h.jsx)(g.a.Item,{style:Zb,name:"lower_limit;".concat(t.id),children:Object(h.jsx)(ut.a,{style:{width:"100%"},value:r.getFieldValue("lower_limit;".concat(t.id)),placeholder:"L\xedmite Inferior"})}),Object(h.jsx)(g.a.Item,{style:Zb,name:"upper_limit;".concat(t.id),children:Object(h.jsx)(ut.a,{style:{width:"100%"},value:r.getFieldValue("upper_limit;".concat(t.id)),placeholder:"L\xedmite Superior"})}),Object(h.jsx)(g.a.Item,{style:Zb,name:"discount_type;".concat(t.id),value:r.getFieldValue("discount_type;".concat(t.id)),showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsxs)(dt.a,{defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),Object(h.jsx)(dt.a.Option,{value:"1",children:"Valor m2"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"Valor Total"})]})}),Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido"}],style:Zb,name:"amount;".concat(t.id),children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},style:{width:"100%"},value:r.getFieldValue("amount;".concat(t.id)),placeholder:"Valor"}))})]})})},Kb=["Fecha Inicio","Fecha Fin","L\xedmite Inferior","L\xedmite Superior","Tipo de Descuento","Valor"];function Wb(e){return e.error?"Start date is greater than the end date"===e.message?"Fecha final menor o igual a la fecha inicial":"\xa1UPS! Ocuri\xf3 un error mientras se actualizaba.":"Pol\xedticas de descuento guardadas correctamente."}var Xb=function(e){var t=e.discountPoliciesDatabase,n=Object(d.useParams)().id,r=n,c=Object(s.d)(),i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=Object(a.useState)(1),u=Object(f.a)(l,2),j=u[0],b=u[1],O=Object(a.useState)([]),x=Object(f.a)(O,2),v=x[0],y=x[1];Object(a.useEffect)((function(){y(t)}),[t]);var _=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Qi.a)(v._payload),e.prev=1,e.next=4,o.validateFields();case 4:a=e.sent,t.forEach((function(e,n){(null===e||void 0===e?void 0:e.id)||Object.keys(a).forEach((function(n){var a=n.split(";")[1];if(-1==t.findIndex((function(e){return e.id==a})))return e.id=a,!0})),e.lower_limit=a["lower_limit;".concat(e.id)],e.upper_limit=a["upper_limit;".concat(e.id)],e.discount_type=parseInt(a["discount_type;".concat(e.id)]),e.amount=a["amount;".concat(e.id)],e.initial_date=a["initial_date;".concat(e.id)].format("YYYY-MM-DD"),e.final_date=a["final_date;".concat(e.id)].format("YYYY-MM-DD"),e.id=e.id<0?null:e.id})),c((r=t,i=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:a=e.sent,r=Wb(a),a.error?Object(P.c)(r):Object(P.f)(r),c(qb(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=void 0,{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/discountPolicy"),data:r,success:function(e){return zb(e)},postProcessSuccess:i,postProcessError:s}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}var r,i,s}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){e&&e>=0&&c(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/discountPolicy/").concat(e),success:function(){return Gb(e)},postProcessSuccess:t,postProcessError:n}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ocuri\xf3 un error mientras se actualizaba."):Object(P.f)("La pol\xedtica ha sido eliminada con \xe9xito.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t=v,n=Object(Qi.a)(t._payload);t._payload=n.filter((function(t){return t.id!==e}));var a={_payload:t._payload};y(a)};return Object(h.jsxs)(g.a,{form:o,onFinish:_,name:"discountPolicyForm",children:[Object(h.jsx)(S.a,{type:"primary",style:{margin:"2%",backgroundColor:"#5cb85c",borderColor:"#5cb85c"},disabled:Array.isArray(v)||JSON.parse(localStorage.stateDisable),onClick:function(){var e=v,t=Object(Qi.a)(e._payload),n={id:-1*j,lower_limit:null,upper_limit:null,discount_type:"",amount:null,initial_date:se()(),final_date:se()(),project_id:parseInt(r)};e._payload=[].concat(Object(Qi.a)(t),[n]),y(e),b(j+1)},children:"Agregar Politica de descuento"}),Object(h.jsx)("div",{style:{marginLeft:"20px"},children:Object(h.jsxs)("div",{className:"wrapperPolicy",children:[Object(h.jsx)("div",{className:"listItemDiscount",children:Object(h.jsx)(qs,{data:Kb})}),!Array.isArray(v)&&v._payload.map((function(e){return Object(h.jsx)(Qb,{handleDeleteDiscountPolicy:w,item:e,form:o},e.id)}))]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",style:{margin:"2%",marginLeft:"60vw"},disabled:Array.isArray(v)||JSON.parse(localStorage.stateDisable),htmlType:"submit",children:"Guardar pol\xedticas de descuento"})})]})},$b=function(e){var t=e.id,n=Object(s.d)();Object(a.useEffect)((function(){n(Tb(t)),n(qb(t))}),[n]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.increasePolicy})),c=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.discountPolicy}));return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(w.a,{title:"Pol\xedticas de incremento y descuento",style:{borderColor:"black"},children:[Object(h.jsx)(Hb,{increasePoliciesDatabase:r}),Object(h.jsx)(J.a,{}),Object(h.jsx)(Xb,{discountPoliciesDatabase:c})]})})},em=new yt,tm=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":em.getToken()},url:"".concat(R.Ne,"/projectTechnicians/").concat(e),success:function(e){return rm(e)}}}},nm=function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/projectTechnicians/").concat(e),success:function(){return im(e)},postProcessSuccess:t,postProcessError:n}}},am=function(){return{type:R.je,payload:[]}},rm=function(e){return{type:R.ff,payload:e}},cm=function(e){return{type:R.Pg,payload:{data:e}}},im=function(e){return{type:R.Dd,payload:e}},om=function(e){Object(a.useEffect)((function(){u(e.dataAssignedTechnician._payload),C(e.dataSelectUsers)}),[]),Object(a.useEffect)((function(){u(e.dataAssignedTechnician._payload),C(e.dataSelectUsers)}),[]),Object(a.useEffect)((function(){e.dataAssignedTechnician._payload.length>0?x(e.dataAssignedTechnician._payload[e.dataAssignedTechnician._payload.length-1].id):x(0)}),[]);var t=Object(s.d)(),n=Object(a.useState)(0),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)(0),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),_=y[0],C=y[1],P=[{title:"#",dataIndex:"key",width:20},{title:"T\xe9cnico",dataIndex:"technician_id",render:function(e,t){var n;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{style:{width:"100%"},children:Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsxs)(dt.a,{onChange:function(e){E(e,t)},style:{width:"80%"},defaultValue:null!==(n=null===t||void 0===t?void 0:t.technician_id)&&void 0!==n?n:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:" Seleccione "}),_&&_.map((function(e){return Object(h.jsxs)(dt.a.Option,{value:e.id,children:[" ",e.name," "]},e.id)}))]})})})})}},{title:"",dataIndex:"operation",width:20,render:function(e,t){return d.length>=1?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){return I(t.id)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})}):null}}],I=function(n){for(var a=JSON.parse(JSON.stringify(d)),r=0;r<a.length;r++)if(a[r].id===n)if(a[r].hasOwnProperty("created_at"))t(nm(n,Object(p.a)(m.a.mark((function t(){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(Qi.a)(d),r=a.filter((function(e){return e.id!==n})),u(r),e.setListAssignedTechnician(r);case 4:case"end":return t.stop()}}),t)}))))),t(tm(n));else{var c=Object(Qi.a)(d).filter((function(e){return e.id!==n}));u(c),e.setListAssignedTechnician(c)}},E=function(t,n){var a=Object(Qi.a)(d);a.map((function(e){return e.id===n.id&&(e.technician_id=t),e})),u(a),e.setListAssignedTechnician(a)},F=function(){var t={key:c+1,id:O+1,project_id:parseInt(e.projectId),technician_id:""},n=[].concat(Object(Qi.a)(d),[t]);u(n),x(O+1),i(c+1),e.setListAssignedTechnician(n)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"T\xe9cnicos Asignados",style:{borderColor:"black",marginLeft:"25px",marginRight:"25px",marginTop:"25px"},children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:Object(h.jsx)(N.a,{className:"gutter-row",span:24,children:Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)("div",{style:{width:"100%",marginLeft:"25px",marginRight:"25px"},children:Object(h.jsx)(Q.a,{pagination:!1,bordered:!0,dataSource:Object(ce.a)(d),columns:P,footer:function(){return Object(h.jsxs)(S.a,{style:{marginLeft:"75%"},onClick:F,type:"primary",icon:Object(h.jsx)(De.a,{}),children:[" ","T\xe9cnicos"]})}})})})})})})})},sm=new yt,lm=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":sm.getToken()},url:"".concat(R.Ne,"/projectAccountants/").concat(e),success:function(e){return jm(e)}}}},dm=function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/projectAccountants/").concat(e),success:function(){return mm(e)},postProcessSuccess:t,postProcessError:n}}},um=function(){return{type:R.he,payload:[]}},jm=function(e){return{type:R.df,payload:e}},bm=function(e,t){return{type:R.Ng,payload:{id:e,data:t}}},mm=function(e){return{type:R.Bd,payload:e}},pm=function(e){Object(a.useEffect)((function(){for(var t=0;t<e.dataAssignedAccountans._payload.length;t++)e.dataAssignedAccountans._payload[t].key=t+1,i(t+1)}),[]),Object(a.useEffect)((function(){setTimeout((function(){u(e.dataAssignedAccountans._payload),C(e.dataSelectUsers)}),1e3)}),[]),Object(a.useEffect)((function(){e.dataAssignedAccountans._payload.length>0?x(e.dataAssignedAccountans._payload[e.dataAssignedAccountans._payload.length-1].id):x(0)}),[]);var t=Object(s.d)(),n=Object(a.useState)(0),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)(0),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),_=y[0],C=y[1],P=[{title:"#",dataIndex:"key",width:20},{title:"Contador",dataIndex:"accountant_id",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{style:{width:"100%"},children:Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsxs)(dt.a,{onChange:function(e){E(e,t)},style:{width:"80%"},defaultValue:t.accountant_id,children:[Object(h.jsx)(dt.a.Option,{value:"",children:" Seleccione "}),_&&_.map((function(e){return Object(h.jsxs)(dt.a.Option,{value:e.id,children:[" ",e.name," "]},e.id)}))]})})})})}},{title:"",dataIndex:"operation",width:20,render:function(e,t){return d.length>=1?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){return I(t.id)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})}):null}}],I=function(n){for(var a=JSON.parse(JSON.stringify(d)),r=0;r<a.length;r++)if(a[r].id===n)if(a[r].hasOwnProperty("created_at"))t(dm(n,Object(p.a)(m.a.mark((function a(){var r,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=Object(Qi.a)(d),c=r.filter((function(e){return e.id!==n})),u(c),e.setListAssignedCounters(c),t(lm(n));case 5:case"end":return a.stop()}}),a)})))));else{var c=Object(Qi.a)(d).filter((function(e){return e.id!==n}));u(c),e.setListAssignedCounters(c)}},E=function(t,n){var a=Object(Qi.a)(d);a.map((function(e){return e.id===n.id&&(e.accountant_id=t),e})),u(a),e.setListAssignedCounters(a)},F=function(){var t={key:c+1,id:O+1,project_id:parseInt(e.projectId),accountant_id:""},n=[].concat(Object(Qi.a)(d),[t]);u(n),x(O+1),i(c+1),e.setListAssignedCounters(n)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Contadores Asignados",style:{borderColor:"black",marginLeft:"25px",marginRight:"25px"},children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:Object(h.jsx)(N.a,{className:"gutter-row",span:24,children:Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)("div",{style:{width:"100%",marginLeft:"25px",marginRight:"25px"},children:Object(h.jsx)(Q.a,{pagination:!1,bordered:!0,dataSource:Object(ce.a)(d),columns:P,footer:function(){return Object(h.jsxs)(S.a,{style:{marginLeft:"75%"},onClick:F,type:"primary",icon:Object(h.jsx)(De.a,{}),children:[" ","Contadores"]})}})})})})})})})},fm=new yt,Om=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":fm.getToken()},url:"".concat(R.Ne,"/projectConstructionDirectors/").concat(e),success:function(e){return vm(e)}}}},hm=function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/projectConstructionDirectors/").concat(e),success:function(){return gm(e)},postProcessSuccess:t,postProcessError:n}}},xm=function(){return{type:R.ie,payload:[]}},vm=function(e){return{type:R.ef,payload:e}},ym=function(e,t){return{type:R.Og,payload:{id:e,data:t}}},gm=function(e){return{type:R.Cd,payload:e}},_m=function(e){Object(a.useEffect)((function(){for(var t=0;t<e.dataAssignedSiteDirectors._payload.length;t++)e.dataAssignedSiteDirectors._payload[t].key=t+1,i(t+1)}),[]),Object(a.useEffect)((function(){setTimeout((function(){u(e.dataAssignedSiteDirectors._payload),C(e.dataSelectUsers)}),1e3)}),[]),Object(a.useEffect)((function(){e.dataAssignedSiteDirectors._payload.length>0?x(e.dataAssignedSiteDirectors._payload[e.dataAssignedSiteDirectors._payload.length-1].id):x(0)}),[]);var t=Object(s.d)(),n=Object(a.useState)(0),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),l=Object(f.a)(o,2),d=l[0],u=l[1],j=Object(a.useState)(0),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),_=y[0],C=y[1],P=[{title:"#",dataIndex:"key",width:20},{title:"Director de Obra",dataIndex:"construction_director_id",render:function(e,t){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{style:{width:"100%"},children:Object(h.jsx)(g.a.Item,{rules:[{required:!0,message:"El campo es requerido"}],children:Object(h.jsxs)(dt.a,{onChange:function(e){E(e,t)},style:{width:"80%"},defaultValue:t.construction_director_id,children:[Object(h.jsx)(dt.a.Option,{value:"",children:" Seleccione "}),_&&_.map((function(e){return Object(h.jsxs)(dt.a.Option,{value:e.id,children:[" ",e.name," "]},e.id)}))]})})})})}},{title:"",dataIndex:"operation",width:20,render:function(e,t){return d.length>=1?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Wt.a,{title:"Confirmar acci\xf3n?",onConfirm:function(){return I(t.id)},children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Xt.a,{}),type:"primary",size:"small",danger:!0})})}):null}}],I=function(n){for(var a=JSON.parse(JSON.stringify(d)),r=0;r<a.length;r++)if(a[r].id===n)if(a[r].hasOwnProperty("created_at"))t(hm(n,Object(p.a)(m.a.mark((function t(){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(Qi.a)(d),r=a.filter((function(e){return e.id!==n})),u(r),e.setListAssignedSiteDirectors(r);case 4:case"end":return t.stop()}}),t)}))))),t(Om(n));else{var c=Object(Qi.a)(d).filter((function(e){return e.id!==n}));u(c),e.setListAssignedSiteDirectors(c)}},E=function(t,n){var a=Object(Qi.a)(d);a.map((function(e){return e.id===n.id&&(e.construction_director_id=t),e})),u(a),e.setListAssignedSiteDirectors(a)},F=function(){var t={key:c+1,id:O+1,project_id:parseInt(e.projectId),construction_director_id:""},n=[].concat(Object(Qi.a)(d),[t]);u(n),x(O+1),i(c+1),e.setListAssignedSiteDirectors(d)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Directores de Obra Asignados",style:{borderColor:"black",marginLeft:"25px",marginRight:"25px"},children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:Object(h.jsx)(N.a,{className:"gutter-row",span:24,children:Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)("div",{style:{width:"100%",marginLeft:"25px",marginRight:"25px"},children:Object(h.jsx)(Q.a,{pagination:!1,bordered:!0,dataSource:Object(ce.a)(d),columns:P,footer:function(){return Object(h.jsxs)(S.a,{style:{marginLeft:"75%"},onClick:F,type:"primary",icon:Object(h.jsx)(De.a,{}),children:[" ","Directores de Obra"]})}})})})})})})})},Sm=function(e){var t=e.id;Object(a.useEffect)((function(){n(tm(t)),n(lm(t)),n(Om(t))}),[]);var n=Object(s.d)(),r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assignedTechnician})),c=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assignedCounters})),i=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.assignedSiteDirectos}));Object(a.useEffect)((function(){r&&y(r)}),[]),Object(a.useEffect)((function(){c&&I(c)}),[]),Object(a.useEffect)((function(){i&&k(i)}),[]);var o=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.users._payload})),l=Object(a.useState)(!1),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)([]),O=Object(f.a)(b,2),v=O[0],y=O[1],g=Object(a.useState)([]),_=Object(f.a)(g,2),C=_[0],I=_[1],E=Object(a.useState)([]),F=Object(f.a)(E,2),A=F[0],k=F[1],T=function(e){return!(Array.isArray(e)&&e.length>0)},N=function(e){var t=JSON.parse(JSON.stringify(e));return null===t||void 0===t||t.map((function(e){return e.hasOwnProperty("created_at")?(delete e.created_at,delete e.updated_at,delete e.deleted_at,delete e.key):(delete e.key,e.id=null),e})),t};return Array.isArray(r)||Array.isArray(i)||Array.isArray(c)?Object(h.jsx)(w.a,{title:"Asignaci\xf3n de t\xe9cnicos y contadores",style:{borderColor:"blue"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Asignaci\xf3n de t\xe9cnicos y contadores",style:{borderColor:"blue"},children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(om,{setDisabled:j,setListAssignedTechnician:y,dataSelectUsers:o.filter((function(e){return 6===e.profile_id})),dataAssignedTechnician:r,projectId:t}),Object(h.jsx)(J.a,{}),Object(h.jsx)(pm,{dataSelectUsers:o.filter((function(e){return 3===e.profile_id})),setListAssignedCounters:I,dataAssignedAccountans:c,projectId:t}),Object(h.jsx)(J.a,{}),Object(h.jsx)(_m,{dataSelectUsers:o.filter((function(e){return 5===e.profile_id})),setListAssignedSiteDirectors:k,dataAssignedSiteDirectors:i,projectId:t}),Object(h.jsx)(J.a,{}),Object(h.jsx)(S.a,{onClick:function(){if(T(v)&&T(C)&&T(A))return Object(P.b)("No hay nada para guardar!");var e,a,r,c=N(v),i=N(C),o=N(A);return function(e){var t=0,n=Object(Qi.a)(e);return n.forEach((function(e){n.filter((function(t){return t.technician_id===e.technician_id})).length>1&&(t=1)})),1===t}(c)?Object(P.b)("El tecnico ya ha sido asignado!"):function(e){var t=0,n=Object(Qi.a)(e);return n.forEach((function(e){n.filter((function(t){return t.accountant_id===e.accountant_id})).length>1&&(t=1)})),1===t}(i)?Object(P.b)("El contador ya ha sido asginado!"):function(e){var t=0,n=Object(Qi.a)(e);return n.forEach((function(e){n.filter((function(t){return t.construction_director_id===e.construction_director_id})).length>1&&(t=1)})),1===t}(o)?Object(P.b)("El director de obra ya ha sido asginado!"):(n((e=c,a=function(){var e=Object(p.a)(m.a.mark((function e(a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:(r=e.sent).error?Object(P.a)(r.message):Object(P.f)("Tecnicos guardados"),n(tm(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/projectTechnicians/assignProject"),data:e,success:function(e){return cm(e)},postProcessSuccess:a,postProcessError:r}})),n(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/projectAccountants/assignProject"),data:e,success:function(e){return bm(e)},postProcessSuccess:t,postProcessError:n}}}(i,function(){var e=Object(p.a)(m.a.mark((function e(a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:(r=e.sent).error?Object(P.a)(r.message):Object(P.f)("Contadores guardados"),n(lm(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),void n(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/projectConstructionDirectors/assignProject"),data:e,success:function(e){return ym(e)},postProcessSuccess:t,postProcessError:n}}}(o,function(){var e=Object(p.a)(m.a.mark((function e(a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:(r=e.sent).error?Object(P.a)(r.message):Object(P.f)("Directores de Obra guardados"),n(Om(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))},disabled:u||JSON.parse(localStorage.stateDisable),style:{marginLeft:"80%"},type:"primary",children:"Guardar"})]})})})},wm=function(){return{type:R.fe,payload:[]}},Cm=function(e){return{type:R.pc,payload:e}},Pm=function(e,t){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/unit/").concat(e),postProcessSuccess:t,success:function(e){return Em(e)}}}},Im=function(){return{type:R.Ke,payload:[]}},Em=function(e){return{type:R.Xc,payload:e}},Fm=function(e,t){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/salesParameters/").concat(e),postProcessSuccess:t,success:function(e){return km(e)}}}},Am=function(e,t){return{type:R.Ug,payload:{id:e,data:t}}},km=function(e){return{type:R.Vc,payload:e}},Tm=function(){return{type:R.He,payload:[]}},Nm=function(e){var t=e.salesParemeterDatabase,n=e.id,r=Object(s.d)();Object(a.useEffect)((function(){Array.isArray(t)||0===t._payload.length?(u(t.square_meter_value),v(t.simple_parking_value),I(t.double_parking_value),k(t.interest_on_plans_percentage),q(t.interest_in_construction_percentage)):(u(t._payload[0].square_meter_value),v(t._payload[0].simple_parking_value),I(t._payload[0].double_parking_value),k(t._payload[0].interest_on_plans_percentage),q(t._payload[0].interest_in_construction_percentage))}),[t]);var c=g.a.useForm(),i=Object(f.a)(c,1)[0],o=Object(a.useState)(null),l=Object(f.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(null),O=Object(f.a)(b,2),x=O[0],v=O[1],y=Object(a.useState)(null),_=Object(f.a)(y,2),C=_[0],I=_[1],E=Object(a.useState)(null),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(a.useState)(""),L=Object(f.a)(D,2),V=L[0],q=L[1],M={square_meter_value:d,simple_parking_value:x,double_parking_value:C,interest_on_plans_percentage:A,interest_in_construction_percentage:V};return Object(a.useEffect)((function(){i.setFieldsValue({squareMeterValue:d,simpleParkingValue:x,doubleParkingValue:C,interesOnPlansPercentage:A,interestInConstructionPercentage:V})}),[t]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Par\xe1metros de ventas",style:{borderColor:"black"},children:Object(h.jsxs)(g.a,{layout:"vertical",name:"PagosRelacion",onFinish:function(){r(function(e,t,n){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/salesParameters/").concat(e),data:t,postProcessSuccess:n,success:function(e,t){return Am(e,t)}}}}(n,M,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! ha ocurrido un error mientras se actualizaba"):(Object(P.f)("Actualizado exitosamente"),r(Fm(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),r(Fm(n))},form:i,style:{marginLeft:"27px",marginRight:"27px",marginTop:"27px"},children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(g.a.Item,{label:"Valor m2",name:"squareMeterValue",children:[Object(h.jsx)("p",{style:{visibility:"hidden"},children:" ''"}),Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},defaultValue:d,value:d,onChange:function(e){return u(e)},style:{width:"100%"}}))]})})}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Parqueadero"}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(g.a.Item,{label:"Valor Parqueadero Sencillo",name:"simpleParkingValue",children:[Object(h.jsx)("p",{style:{visibility:"hidden"},children:" ''"}),Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},defaultValue:x,value:x,onChange:function(e){return v(e)},style:{width:"100%"}}))]})}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(g.a.Item,{label:"Valor Parqueadero Doble Lineal",name:"doubleParkingValue",children:[Object(h.jsx)("p",{style:{visibility:"hidden"},children:" ''"}),Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},defaultValue:C,value:C,onChange:function(e){return I(e)},style:{width:"100%"}}))]})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Porcentaje Valor Presente"}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(g.a.Item,{label:"Inter\xe9s Sobre Planos (%)",name:"interesOnPlansPercentage",children:[Object(h.jsx)("p",{style:{visibility:"hidden"},children:" ''"}),Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},defaultValue:A,value:A,onChange:function(e){return k(e)},style:{width:"100%"}})]})}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsxs)(g.a.Item,{label:"Inter\xe9s en Construcci\xf3n (%)",name:"interestInConstructionPercentage",children:[Object(h.jsx)("p",{style:{visibility:"hidden"},children:" ''"}),Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},defaultValue:V,value:V,onChange:function(e){return q(e)},style:{width:"100%"}})]})})]}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:2,offset:22,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{disabled:JSON.parse(localStorage.stateDisable),type:"primary",htmlType:"submit",children:"Guardar"})})})})]})})})},Dm=function(e){var t=e.id,n=Object(s.d)();Object(a.useEffect)((function(){n(Fm(t))}),[]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.sales_Parameter}));return Array.isArray(r)?Object(h.jsx)(w.a,{title:"Par\xe1metros de ventas",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(Nm,{salesParemeterDatabase:r,id:t})},Rm=new yt,Lm=function(e){return{type:R.O,payload:{method:"GET",headers:{"access-token":Rm.getToken()},url:"".concat(R.Ne,"/unit-type/").concat(e),success:function(e){return Mm(e)}}}},Vm=function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/unit-type/addAttachment/").concat(e),data:t,success:function(e,t){return Gm(e,t)},postProcessSuccess:n,postProcessError:a}}},qm=function(e,t,n,a){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/unit-type/deleteAttachment/").concat(e,"/").concat(t),postProcessSuccess:n,postProcessError:a}}},Mm=function(e){return{type:R.If,payload:e}},Um=function(){return{type:R.Le,payload:[]}},zm=function(e){return{type:R.H,payload:e}},Gm=function(e){return{type:R.g,payload:e}},Bm=function(e,t){return{type:R.Gh,payload:{id:e,data:t}}},Ym=function(e,t){return{type:R.cc,payload:{id:e,data:t}}},Jm=function(e){return{type:R.ae,payload:{id:e}}},Hm=n(616),Zm=n(649),Qm=n(337),Km=(n(560),n(327)),Wm=function(e){var t=e.bottonstate,n=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],a=t.fileList,r=0;r<a.length;r++)c=a[r].originFileObj,n.push(c);oe(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],a=t.fileList,r=0;r<a.length;r++)c=a[r].originFileObj,n.push(c);je(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=Object(d.useParams)().id,i=Object(s.d)(),o=g.a.useForm(),l=Object(f.a)(o,1)[0],u=Object(a.useState)(null),b=Object(f.a)(u,2),O=b[0],x=b[1],v=Object(a.useState)(null),y=Object(f.a)(v,2),_=y[0],w=y[1],C=Object(a.useState)(null),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)(null),k=Object(f.a)(A,2),D=k[0],L=k[1],V=Object(a.useState)(null),q=Object(f.a)(V,2),M=q[0],U=q[1],z=Object(a.useState)(null),G=Object(f.a)(z,2),B=G[0],Y=G[1],J=Object(a.useState)(null),H=Object(f.a)(J,2),Z=H[0],Q=H[1],K=Object(a.useState)(null),W=Object(f.a)(K,2),X=W[0],$=W[1],ee=Object(a.useState)(null),te=Object(f.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)([]),ce=Object(f.a)(re,2),ie=ce[0],oe=ce[1],se=Object(a.useState)([]),le=Object(f.a)(se,2),de=le[0],je=le[1],be=Object(a.useState)(!1),me=Object(f.a)(be,2),pe=me[0],fe=me[1],Oe=function(){fe(!1)},he=function(){i(Lm(c)),i(Pm(c))},xe=Object(a.useState)([]),ve=Object(f.a)(xe,1)[0];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"default",onClick:he,style:{marginBottom:"20px",marginTop:"10px",right:"6%"},children:"Actualizar"}),Object(h.jsx)(S.a,{type:"primary",style:{marginBottom:"20px",marginTop:"10px",right:"5%"},onClick:function(){fe(!0)},disabled:!t,children:"Agregar Tipo Unidad"}),Object(h.jsx)(ue.a,{title:"Agregar Tipo de Unidad",visible:pe,onCancel:Oe,width:700,footer:!1,children:Object(h.jsxs)(g.a,{layout:"vertical",name:"basic",onFinish:function(){var e={project_id:c,area:O,finish_kit_value:_,area_value:E,units_number:D,number_rooms:M,value_other_additional:B,number_levels:Z,income_level:X,bathroom_number:ne,images:ie,blueprints:de},t=new FormData;t.append("project_id",c),t.append("area",O),t.append("finish_kit_value",_||0),t.append("area_value",E||0),t.append("units_number",D||0),t.append("number_rooms",M||0),t.append("value_other_additional",B||0),t.append("number_levels",Z||0),t.append("income_level",X||0),t.append("bathroom_number",ne||0);for(var n=0;n<ie.length;n++)t.append("images[]",e.images[n],e.images[n].name);for(var a=0;a<de.length;a++)t.append("blueprints[]",de[a],de[a].name);i(function(e,t,n){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/unit-type"),data:e,success:function(e){return zm(e)},postProcessSuccess:t,postProcessError:n}}}(t,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?"Error number of units exceeded"===n.message?Object(P.c)("\xa1UPS! N\xfamero de unidades excedido."):Object(P.c)("\xa1UPS! Ha ocurrido un error"):(Object(P.f)("Ha sido agregado con \xe9xito"),Oe(),l.resetFields()),he();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onFinishFailed:function(e){console.error("Failed:",e)},form:l,children:[Object(h.jsxs)(T.a,{children:[Object(h.jsxs)(N.a,{span:8,children:[Object(h.jsx)(g.a.Item,{label:"M2",name:"area",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(ut.a,{min:0,onChange:function(e){return x(e)},value:O,style:{width:"85%"}})}),Object(h.jsx)(g.a.Item,{label:"No. Ba\xf1os ",name:"bathroom_number",children:Object(h.jsx)(ut.a,{min:0,onChange:function(e){return ae(e)},value:ne,style:{width:"85%"}})}),Object(h.jsx)(g.a.Item,{label:"Valor terraza/ cuarto \xfatil/ otros",name:"value_other_additional",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{onChange:function(e){return Y(e)},value:B,style:{width:"85%"}}))})]}),Object(h.jsxs)(N.a,{span:8,children:[Object(h.jsx)(g.a.Item,{label:"Cantidad",name:"units_number",rules:[{required:!0,message:"Campo requerido"}],children:Object(h.jsx)(ut.a,{min:0,onChange:function(e){return L(e)},value:D,style:{width:"85%"}})}),Object(h.jsx)(g.a.Item,{label:"No. Niveles",name:"income_level",children:Object(h.jsx)(ut.a,{min:0,onChange:function(e){return Q(e)},value:X,style:{width:"85%"}})}),Object(h.jsx)(g.a.Item,{label:"Nivel de Ingresos",name:"number_levels",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{onChange:function(e){return $(e)},value:Z,style:{width:"85%"}}))})]}),Object(h.jsxs)(N.a,{span:8,children:[Object(h.jsx)(g.a.Item,{label:"No. Habitaciones",name:"number_rooms",children:Object(h.jsx)(ut.a,{min:0,onChange:function(e){return U(e)},value:M,style:{width:"85%"}})}),Object(h.jsx)(g.a.Item,{label:"Valor Kit de Acabados",name:"finish_kit_value",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{onChange:function(e){return w(e)},value:_,style:{width:"85%"}}))}),Object(h.jsx)(g.a.Item,{label:"Valor m2 (Prioritario)",name:"area_value",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({min:0},R.rc),{},{onChange:function(e){return F(e)},value:E,style:{width:"85%"}}))})]})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{label:"Planos",name:"blueprints",children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture",defaultFileList:Object(Qi.a)(ve),onChange:r,onPreview:bc,value:de,className:"upload-list-inline",children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Dc.a,{}),children:"Upload"})})})}),Object(h.jsx)(N.a,{span:2}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(g.a.Item,{name:"images",style:{width:"90%"},children:Object(h.jsxs)(rn.a,{action:R.Pe,listType:"picture",defaultFileList:Object(Qi.a)(ve),onChange:n,onPreview:bc,accept:"image/*",value:ie,multiple:!0,children:[Object(h.jsx)(Km.a,{style:{marginLeft:"100%"},children:"Im\xe1genes"}),Object(h.jsx)(S.a,{style:{marginLeft:"78%"},icon:Object(h.jsx)(Dc.a,{}),children:"Upload"})]})})})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:6}),Object(h.jsx)(N.a,{span:6}),Object(h.jsx)(N.a,{span:6}),Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)(g.a.Item,{label:" ",children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Guardar"})})})]})]})})]})},Xm=n(648),$m=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=[{title:"#",dataIndex:"id",key:"id",editable:!0,width:80},{title:"Unidad",dataIndex:"unidad",width:100,editable:!0,disabled:!0},{title:"Piso",dataIndex:"piso",width:100,editable:!0,disabled:!0},{title:"Acciones",width:100,dataIndex:"action",fixed:"right",render:function(e,t){return Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Eliminar"})}}];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{disabled:e.disabled,size:"small",type:"primary",onClick:function(){c(!0)},style:{marginBottom:"20px",marginLeft:"5px"},icon:Object(h.jsx)(Xm.a,{})}),Object(h.jsx)(ue.a,{title:"Redistribuir - Tipo Unidad ".concat(e.recordAea),visible:r,onCancel:function(){c(!1)},width:600,footer:!1,children:Object(h.jsx)(Q.a,{columns:i,dataSource:null,size:"small",bordered:!0})})]})},ep=function(e){var t=Object(s.d)(),n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(f.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(""),O=Object(f.a)(b,2),x=O[0],v=O[1],g=e.record.images,_=Object(a.useState)([]),w=Object(f.a)(_,2),C=w[0],I=w[1];Object(a.useEffect)((function(){if(null!=g){var e=[];g.forEach((function(t,n){e.push({uid:t.id,percent:50,name:"Multimedia "+(n+1),status:"done",url:t.path})})),I(e)}}),[]),Object(a.useEffect)((function(){null!=g&&k(g)}),[g]);var E=Object(a.useState)(),F=Object(f.a)(E,2),A=F[0],k=F[1],N=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t.hasOwnProperty("url")?t.url:t.thumbUrl),c?(u(!0),i(!1)):(i(!0),u(!1));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(t.fileList);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={beforeUpload:function(e){if("image/png"!==e.type&&"image/jpeg"!==e.type)return Object(P.c)("Formato no v\xe1lido"),"image/png"===e.type||rn.a.LIST_IGNORE},customRequest:function(n){var a=n.onSuccess,r=n.onError,c=n.file,i=new FormData;i.append("file",c,c.name),i.append("type",1),t(Vm(e.record.id,i,a,r))},onChange:function(e){console.info(e.fileList)}},V=Object(h.jsxs)("div",{children:[Object(h.jsx)(De.a,{}),Object(h.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){i(!0)},children:Object(h.jsx)(nc.a,{})}),Object(h.jsxs)(ue.a,{title:"Im\xe1genes",visible:c,onOk:function(){i(!1)},onCancel:function(){i(!1)},footer:!1,children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(Lr.b,{children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},L),{},{action:R.Pe,listType:"picture-card",fileList:C,accept:"image/*",onPreview:N,onChange:D,onRemove:function(n){var a=Object(Qi.a)(A);k(a.filter((function(e){return e.id!==n.uid}))),t(qm(n.uid,e.record.id))},children:C.length<100?"+ Upload":V}))})}),Object(h.jsx)("br",{})," ",Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]}),Object(h.jsx)(ue.a,{visible:d,onOk:function(){u(!1),i(!0)},onCancel:function(){u(!1),i(!0)},footer:null,children:Object(h.jsx)(y.a,{width:470,src:x,preview:!1})})]})},tp=function(e){var t=Object(s.d)(),n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=e.record.blueprints;Object(a.useEffect)((function(){null!=o&&b(o)}),[o]);var l=Object(a.useState)([]),d=Object(f.a)(l,2),u=d[0],b=d[1],O=Object(a.useState)(!1),x=Object(f.a)(O,1)[0],v=Object(a.useState)([]),y=Object(f.a)(v,2),g=y[0],_=y[1];Object(a.useEffect)((function(){if(null!=o){var e=[];o.forEach((function(t,n){e.push({uid:t.id,percent:50,name:"Multimedia "+(n+1),status:"done",url:t.path})})),_(e)}}),[]);var w=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bc(t);case 2:c?(x(!0),i(!1)):(i(!0),x(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={beforeUpload:function(e){if("image/png"!==e.type&&"image/jpeg"!==e.type&&"application/pdf"!==e.type)return Object(P.c)("Archivo no v\xe1lido"),"image/png"===e.type||rn.a.LIST_IGNORE},customRequest:function(n){var a=n.onSuccess,r=n.onError,c=n.file,i=new FormData;i.append("file",c,c.name),i.append("type",2),t(Vm(e.record.id,i,a,r))},onChange:function(){}},I=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(t.fileList);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Object(h.jsxs)("div",{children:[Object(h.jsx)(De.a,{}),Object(h.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{type:"primary",onClick:function(){i(!0)},children:Object(h.jsx)(nc.a,{})}),Object(h.jsxs)(ue.a,{title:"Planos",visible:c,onOk:function(){i(!1)},onCancel:function(){i(!1)},footer:!1,children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(Lr.b,{children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({},C),{},{action:R.Pe,listType:"picture-card",fileList:g,accept:"image/*,.pdf",onPreview:w,onChange:I,onRemove:function(n){var a=Object(Qi.a)(u);b(a.filter((function(e){return e.id!==n.uid}))),t(qm(n.uid,e.record.id))},children:g.length<100?"+ Upload":E}))})}),Object(h.jsx)("br",{})," ",Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]})]})},np=["editing","dataIndex","title","inputType","record","index","children"],ap=function(e){var t=e.editing,n=e.dataIndex,a=e.title,r=e.inputType,c=(e.record,e.index,e.children),i=Object(vb.a)(e,np),o="number"===r?Object(h.jsx)(ut.a,{}):Object(h.jsx)(_.a,{});return Object(h.jsx)("td",Object(j.a)(Object(j.a)({},i),{},{children:t?Object(h.jsx)(g.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"requerido ".concat(a,"!")}],children:o}):c}))},rp=function(e){var t=e.unitTypeDatabase,n=e.id,r=Object(s.d)(),c=function(){r(Lm(n))},i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=Object(a.useState)([]),d=Object(f.a)(l,2),u=d[0],b=d[1],O=Object(a.useState)(""),x=Object(f.a)(O,2),v=x[0],y=x[1];Object(a.useEffect)((function(){t._payload&&t._payload.map((function(e){return e.type_unit=e.id,e})),b(t._payload)}),[t]);var _=function(e){return e.id===v},C=function(){y("")},I=function(e,t){r(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/unit-type/").concat(e),data:t,success:function(e,t){return Bm(e,t)},postProcessSuccess:n,postProcessError:a}}}(e,t,(function(){c()})))},E=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.validateFields();case 3:n=e.sent,a=Object(Qi.a)(u),r=a.findIndex((function(e){return t===e.id})),I(t,n),r>-1?(c=a[r],a.splice(r,1,Object(j.a)(Object(j.a)({},c),n)),b(a),y("")):(a.push(n),b(a),y("")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Validate Failed:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){for(var t=0;t<u.length;t++)if(u[t].id===e.id)return u[t]},A=function(e){var t={project_id:n,area:e.area,finish_kit_value:e.finish_kit_value,area_value:e.area_value,units_number:e.number_levels,rooms_number:e.rooms_number,value_other_additional:e.value_other_additional,number_levels:e.number_levels,income_level:e.income_level,bathroom_number:e.bathroom_number,blueprints:e.blueprints,images:e.images};r(function(e,t,n,a){return{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/unit-type/duplicate/").concat(e),data:t,success:function(e,t){return Ym(e,t)},postProcessSuccess:n,postProcessError:a}}}(e.id,t,(function(){c()})))},k=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),D=[{title:"#",dataIndex:"id",key:"id",width:50,fixed:"left",render:function(e,t,n){return Object(h.jsx)("span",{children:n+1})}},{title:"Tipo de unidad Id",dataIndex:"type_unit",Key:"type_unit",align:"center",width:140,defaultSortOrder:"asc",sorter:function(e,t){return e.type_unit-t.type_unit}},{title:"m2",dataIndex:"area",width:100,editable:!0,disabled:!0},{title:"Cantidad",dataIndex:"units_number",width:100,editable:!0,disabled:!0},{title:"No. Habitaciones",dataIndex:"number_rooms",editable:!0,disabled:!0,width:120},{title:"No. Ba\xf1os",dataIndex:"bathroom_number",editable:!0,width:100},{title:"No. Niveles",dataIndex:"number_levels",editable:!0,width:120},{title:"Valor Kit de Acabados",dataIndex:"finish_kit_value",editable:!0,width:160,render:function(e,t){return k.format(t.finish_kit_value)}},{title:"Valor terraza/ Cuarto \xfatil/ otros",dataIndex:"value_other_additional",editable:!0,width:160,render:function(e,t){return k.format(t.value_other_additional)}},{title:"Nivel de Ingresos",dataIndex:"income_level",editable:!0,width:120,render:function(e,t){return k.format(t.income_level)}},{title:"Valor m2 (Prioritario)",dataIndex:"area_value",editable:!0,width:120,render:function(e,t){return k.format(t.area_value)}},{title:"Im\xe1genes",dataIndex:"images",width:100,render:function(e,t){return Object(h.jsx)(ep,{record:F(t)})}},{title:"Planos",dataIndex:"blueprints",width:100,render:function(e,t){return Object(h.jsx)(tp,{record:F(t)})}},{title:"Acciones",width:150,dataIndex:"operation",fixed:"right",render:function(e,t){var n=_(t),a=""!==v,r=t.area;return n?Object(h.jsxs)("span",{children:[Object(h.jsx)("a",{title:"Guardar cambios",href:"javascript:;",onClick:function(){return E(t.id)},style:{marginRight:8},children:Object(h.jsx)(_o.a,{})}),Object(h.jsx)(Wt.a,{title:"Cancelar",onConfirm:C,children:Object(h.jsx)("a",{title:"Cancelar",children:Object(h.jsx)(zt.a,{})})})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Lr.b,{children:[Object(h.jsx)(Hm.a.Link,{title:"Modificar",disabled:""!==v,onClick:function(){return function(e){o.setFieldsValue(Object(j.a)({id:"",area:"",finish_kit_value:"",area_value:"",units_number:"",rooms_number:"",value_other_additional:"",number_levels:"",income_level:"",bathroom_number:"",type_unit:""},e)),y(e.id)}(t)},children:Object(h.jsx)(S.a,{style:{backgroundColor:"#ffa247",color:"#ffffff"},size:"small",disabled:""!==v,icon:Object(h.jsx)(Zm.a,{})})}),Object(h.jsx)(Hm.a.Link,{title:"Eliminar",disabled:""!==v,children:Object(h.jsx)(Wt.a,{title:"\xbfDesea eliminar este registro?",onConfirm:function(){return L(t.id)},children:Object(h.jsx)(S.a,{style:{backgroundColor:"red",color:"#ffffff"},size:"small",disabled:""!==v,icon:Object(h.jsx)(Xt.a,{})})})})]}),Object(h.jsxs)(Lr.b,{children:[Object(h.jsx)(Hm.a.Link,{title:"expandir",children:Object(h.jsx)($m,{disabled:a,recordAea:r})}),Object(h.jsx)(S.a,{title:"Duplicar",disabled:""!==v||!z,size:"small",type:"primary",style:{marginBottom:"20px"},icon:Object(h.jsx)(Qm.a,{}),onClick:function(){return A(t)}})]})]})}}],L=function(e){var t=Object(Qi.a)(u);b(t.filter((function(t){return t.id!==e}))),r(function(e,t,n){return{type:R.O,payload:{method:"DELETE",url:"".concat(R.Ne,"/unit-type/").concat(e),success:function(){return Jm(e)},postProcessSuccess:t,postProcessError:n}}}(e,(function(e){c(),Object(P.f)("tipo de unidad elimina")})))},V=D.map((function(e){return e.editable?Object(j.a)(Object(j.a)({},e),{},{onCell:function(t){return{record:t,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:_(t)}}}):e}));var q=[];null===u||void 0===u||u.forEach((function(e){return q.push(e.units_number)}));var M=null===q||void 0===q?void 0:q.reduce((function(e,t){return e+t}),0),U=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.EditProject._payload[0].total_units})),z=U>M;return t&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Tipo de unidades",style:{borderColor:"black"},children:Object(h.jsxs)(g.a,{form:o,component:!1,children:[Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,offset:19,children:Object(h.jsx)(Wm,{bottonstate:z,myFunction:c})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(Q.a,{components:{body:{cell:ap}},style:{marginLeft:"25px",marginRight:"25px"},bordered:!0,dataSource:u,columns:V,rowClassName:"editable-row",pagination:{onChange:C},scroll:{x:1e3,y:300}})})})]})})})},cp=function(e){var t=e.id,n=Object(s.d)();Object(a.useEffect)((function(){Object(P.g)("Para un mejor funcionamiento, [Configuraciones para Pagos y de Relaci\xf3n, Par\xe1metros de Ventas]  deben estar gestionados"),n(Lm(t))}),[n]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.unitType}));return Array.isArray(r)?Object(h.jsx)(w.a,{title:"Tipo de unidades",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(rp,{unitTypeDatabase:r,id:t})},ip=function(e){var t,n=e.project,r=e.projectId,c=Object(s.d)(),i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=Object(a.useState)([]),d=Object(f.a)(l,1)[0],u=Object(a.useState)([]),j=Object(f.a)(u,1)[0],b=Object(a.useState)([]),O=Object(f.a)(b,1)[0],x=Object(a.useState)(null!==(t=n._payload[0].sale_type_id)&&void 0!==t?t:0),v=Object(f.a)(x,2),y=v[0],C=v[1],I=Object(a.useState)([]),E=Object(f.a)(I,1)[0],F=Object(a.useState)(!1),A=Object(f.a)(F,2),k=(A[0],A[1],Object(a.useState)([])),D=Object(f.a)(k,2),L=D[0],V=D[1],q=Object(a.useState)([]),M=Object(f.a)(q,2),U=M[0],z=M[1],G=Object(a.useState)(2),B=Object(f.a)(G,2),Y=B[0],H=B[1],Z=Object(a.useState)(0),Q=Object(f.a)(Z,2),K=Q[0],W=Q[1],X=Object(a.useState)([{url:function(e){return e?[{uid:"-xxx".concat(e.id),id:e.id,name:e.name,status:"done",url:e.path}]:[{}]}(n._payload[0].promoter_logo)[0].url}]),$=Object(f.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(!0),ae=Object(f.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(a.useState)("3.998749"),oe=Object(f.a)(ie,1)[0],le=Object(a.useState)("-75.2545871"),de=Object(f.a)(le,1)[0],ue=Object(a.useState)(0==n._payload[0].state),be=Object(f.a)(ue,2),me=be[0];be[1];localStorage.stateDisable=me,Object(a.useEffect)((function(){_e()}),[y]);for(var pe=[],fe=["Colombia"],Oe=n._payload[0].location_id,he=null,xe=null,ve=["Colombia"],ye=0;ye<Gc.length;ye++)pe.push(Gc[ye].departamento);Object(a.useEffect)((function(){c(wc((function(e){var t=[];e.error||(e._payload.project_classification.forEach((function(e){E.push({name:e.name,id:e.id})})),e._payload.project_state.forEach((function(e){-1==O.findIndex((function(t){return t.id==e.id}))&&O.push({name:e.name,id:e.id})})),e._payload.project_types.forEach((function(e){-1==j.findIndex((function(t){return t.id==e.id}))&&j.push({name:e.name,id:e.id})})),e._payload.sales_types.forEach((function(e){-1==t.findIndex((function(t){return t.id==e.id}))&&t.push({name:e.name,id:e.id})})),V(t))})))}),[]),Object(a.useEffect)((function(){we()}),[]),Object(a.useEffect)((function(){if(null!=n._payload[0].location_id){var e,t;Pe();var a=(null===(e=xe)||void 0===e?void 0:e.name)+" - "+(null===(t=he)||void 0===t?void 0:t.departamento)+" - "+ve.Colombia;zc(a,null,Lc.Maker_Location,14)}}),[]),Object(a.useEffect)((function(){"2"===Y&&ge("quantity"),1===y&&ge("fiduciaryCode")}),[Y,y]);var ge=function(e){o.setFieldsValue(Object(Nc.a)({},e,0))},_e=function(){switch(y){case 1:return ce(!0),!0;case 2:case 3:return ce(!1),!1;default:return!1}},Se=function(e){switch(e){case 3:return"Finalizado";case 2:return"En construcci\xf3n";case 1:return"En planos";default:return""}},we=function(){var e,t,a,r;o.setFieldsValue({projectName:n._payload[0].name,saleForm:parseInt(n._payload[0].sale_type_id),fiduciaryCode:null!==(e=n._payload[0].fiduciary_code)&&void 0!==e?e:0,state:n._payload[0].state,stateProject:Se(n._payload[0].project_state_id),zone:"null"===n._payload[0].area?null:n._payload[0].area,descriptionProject:"null"===n._payload[0].description?null:n._payload[0].description,descriptionPoint:"null"===n._payload[0].description_point?null:n._payload[0].description_point,projectType:n._payload[0].project_type_id,classification:n._payload[0].classification_id,totalUnits:n._payload[0].total_units,numberFloors:null!==(t=n._payload[0].floors_number)&&void 0!==t?t:0,simpleParkingLots:null!==(a=n._payload[0].simple_parking_number)&&void 0!==a?a:0,doubleLineaParkingLot:null!==(r=n._payload[0].double_parking_number)&&void 0!==r?r:0,parkingLotVisitors:n._payload[0].visitor_parking_number>0?"1":"2",quantity:n._payload[0].visitor_parking_number,startDateSale:se()(n._payload[0].sale_start_date),estimatedDateStartConstruction:se()(n._payload[0].start_build_date),estimatedDeliveryDate:se()(n._payload[0].estimated_delivery_date),dateMaximumReforms:se()(n._payload[0].maximum_reforms_date),uploadImages:Ie(n._payload[0].project_attachment),promoterImages:Ee(n._payload[0].project_attachment),uploadDocuments:Fe(n._payload[0].project_attachment),country:ve,department:Ce(),city:Pe()})},Ce=function(){var e,t;if(null!=n._payload[0].location_id)return he=Gc.find((function(e){return e.ciudades.find((function(e){return e.id===n._payload[0].location_id}))})),z(null===(e=he)||void 0===e?void 0:e.ciudades),null===(t=he)||void 0===t?void 0:t.id},Pe=function(){var e,t;if(null!=n._payload[0].location_id)return xe=null===(e=he)||void 0===e?void 0:e.ciudades.find((function(e){return e.id===n._payload[0].location_id})),null===(t=he)||void 0===t?void 0:t.ciudades.indexOf(xe)},Ie=function(e){var t=[];return e?e.forEach((function(e){if(!e.path.includes("promoters")&&!e.path.includes("documents")){var n={uid:"-xxx".concat(e.id),id:e.id,name:e.name,status:"done",url:e.path};t.push(n)}})):t.push({}),t},Ee=function(e){var t=[];return e?e.forEach((function(e){if(e.path.includes("promoters")){var n={uid:"-xxx".concat(e.id),id:e.id,name:e.name,status:"done",url:e.path};t.push(n)}})):t.push({}),t},Fe=function(e){var t=[];return e?e.forEach((function(e){if(e.path.includes("documents")){var n={uid:"-xxx".concat(e.id),id:e.id,name:e.name,status:"done",url:e.path};t.push(n)}})):t.push({}),t},Ae=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a,i,s,l,u,j,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:for(i=e.sent,(s=new FormData).append("name",i.projectName),s.append("sale_type",i.saleForm),s.append("fiduciary_code",i.fiduciaryCode),s.append("state",i.state),s.append("project_state",1),s.append("location",Oe),s.append("area",i.zone),s.append("description",i.descriptionProject),s.append("description_point",i.descriptionPoint),s.append("project_type",i.projectType),s.append("classification",i.classification),s.append("total_units",i.totalUnits),s.append("floors_number",i.numberFloors),s.append("simple_parking_number",null!==(t=i.simpleParkingLots)&&void 0!==t?t:0),s.append("double_parking_number",null!==(n=i.doubleLineaParkingLot)&&void 0!==n?n:""),s.append("visitor_parking_number",null!==(a=i.quantity)&&void 0!==a?a:0),s.append("sale_start_date",i.startDateSale.format("YYYY-MM-DD")),s.append("start_build_date",i.estimatedDateStartConstruction.format("YYYY-MM-DD")),s.append("estimated_delivery_date",i.estimatedDeliveryDate.format("YYYY-MM-DD")),s.append("maximum_reforms_date",i.dateMaximumReforms.format("YYYY-MM-DD")),l=0;l<i.uploadImages.length;l++)i.uploadImages[l].hasOwnProperty("originFileObj")&&s.append("images[]",i.uploadImages[l].originFileObj,i.uploadImages[l].name);for(u=0;u<i.promoterImages.length;u++)i.promoterImages[u].hasOwnProperty("originFileObj")&&s.append("promoters[]",i.promoterImages[u].originFileObj,i.promoterImages[u].name);for(j=0;j<i.uploadDocuments.length;j++)i.uploadDocuments[j].hasOwnProperty("originFileObj")&&s.append("documents[]",i.uploadDocuments[j].originFileObj,i.uploadDocuments[j].name);for(b=0;b<ee.length;b++)ee[b].hasOwnProperty("originFileObj")&&s.append("logo",ee[b].originFileObj,ee[b].name);d!==[]&&d.forEach((function(e){s.append("attachmenDelete[]",e)})),c((m=s,p=r,f=function(e){e.error?Object(P.c)("\xa1UPS! ha ocurrido un error mientras se actualizaba"):(Object(P.f)("Actualizado exitosamente"),c(Sc(r)))},{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/project/").concat(p),data:m,postProcessSuccess:f,success:function(e){return Fc(e)}}}));case 30:case"end":return e.stop()}var m,p,f}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(e){te([]),void 0!==e.id&&d.push(e.id)},Te=function(e){return Array.isArray(e)?e:e&&e.fileList};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Informaci\xf3n b\xe1sica",style:{borderColor:"black"},children:Object(h.jsx)(g.a,{layout:"vertical",onFinish:Ae,initialValues:{state:!0},name:"formBasicInformationProject",form:o,style:{marginLeft:"27px",marginRight:"27px",marginTop:"27px"},children:Object(h.jsx)(T.a,{gutter:16,style:{marginLeft:"27px"},children:Object(h.jsxs)(N.a,{xs:5,sm:24,md:24,lg:24,xl:24,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Informaci\xf3n General"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:8,lg:8,xl:6,children:Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:24,offset:1,children:Object(h.jsx)(g.a.Item,{style:{paddingTop:"60px",paddingLeft:"50px"},valuePropName:"fileList",getValueFromEvent:Te,children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",accept:"image/*",name:"logo",fileList:ee,onChange:function(e){var t=e.fileList;te(t)},onRemove:ke,children:ee.length<1?"+ Upload":""})})})})}),Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:8,children:[Object(h.jsx)(g.a.Item,{label:"Nombre del proyecto",name:"projectName",rules:[{min:3,message:"El nombre del proyecto debe tener al menos 3 caracteres."},{required:!0,message:"El nombre del proyecto es requerido."}],children:Object(h.jsx)(_.a,{})}),Object(h.jsx)(g.a.Item,{label:"Descripci\xf3n",name:"descriptionProject",children:Object(h.jsx)(_.a.TextArea,{rows:5})})]}),Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:8,children:[Object(h.jsx)(g.a.Item,{label:"Forma de venta",name:"saleForm",rules:[{required:!0,message:"La forma de venta es requerida."}],children:Object(h.jsxs)(dt.a,{onChange:C,defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione..."}),L.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})}),Object(h.jsx)(g.a.Item,{label:"C\xf3digo fiduciario",name:"fiduciaryCode",rules:[{validator:function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<99&&1!=y)){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("C\xf3digo fiduciario debe tener min\xedmo 3 d\xedgitos.")));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],children:Object(h.jsx)(ut.a,{disabled:re,style:{width:"100%"}})}),Object(h.jsx)(g.a.Item,{label:"Estado del proyecto",name:"stateProject",children:Object(h.jsx)(_.a,{disabled:!0})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Pa\xeds",name:"country",children:Object(h.jsxs)(dt.a,{defaultValue:"-",style:{width:"100%"},onChange:function(e){W(e),"-"===e&&(o.setFieldsValue({department:"-"}),o.setFieldsValue({city:"-"})),o.setFieldsValue({country:e}),zc(fe[e],null,Lc.Find_Location,4.5)},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),fe.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:t,children:e},t)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Departamento",name:"department",children:Object(h.jsxs)(dt.a,{defaultValue:"-",onChange:function(e){if("-"!==e){var t=Gc.find((function(t){return t.departamento===pe[e]}));o.setFieldsValue({department:e}),zc(null,t.latLng,Lc.Find_Location_by_latlng,7),z(t.ciudades)}},style:{width:"100%"},disabled:"-"===K,children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),pe.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:t,children:e},t)}))]})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{label:"Ciudad",name:"city",rules:[{required:!0,message:"La ciudad es obligatoria."}],children:Object(h.jsxs)(dt.a,{defaultValue:"-",onChange:function(e){if("-"!==e){var t=U[e],n=t.name+" - "+pe[o.getFieldValue("department")]+" - "+fe[o.getFieldValue("country")];Oe=t.id,o.setFieldsValue({city:e}),zc(n,null,Lc.Maker_Location,14)}},disabled:""===o.getFieldValue("department")||void 0===o.getFieldValue("department")||"-"===o.getFieldValue("department"),style:{width:"100%"},children:[Object(h.jsx)(dt.a.Option,{value:"-",children:"Seleccionar..."}),U.map((function(e,t){return Object(h.jsx)(dt.a.Option,{value:t,children:e.name},t)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(g.a.Item,{name:"zone",label:"Zona",children:Object(h.jsx)(_.a,{})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{xs:5,sm:24,md:24,lg:24,xl:24,children:Object(h.jsx)(g.a.Item,{name:"descriptionPoint",label:"Descripci\xf3n de punto",children:Object(h.jsx)(_.a.TextArea,{rows:3})})})})]}),Object(h.jsx)(N.a,{xs:5,sm:24,md:12,lg:12,xl:12,children:Object(h.jsx)(Rc,{height:"43.5vh",width:"76vh",center:[oe,de],tileLayer:"map",zoom:4.7,apiKey:"muDSpMXsg0x5Pjt4cyhAkuk0O4wjV8hR"})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(T.a,{gutter:20,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:5,lg:5,xl:8,children:Object(h.jsx)(g.a.Item,{name:"projectType",label:"Tipos de proyectos",rules:[{required:!0,message:"El tipo de proyecto es requerido."}],children:Object(h.jsxs)(dt.a,{defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),j.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:10,lg:10,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Clasificaci\xf3n",name:"classification",rules:[{required:!0,message:"La clasificaci\xf3n es requerida."}],children:Object(h.jsxs)(dt.a,{defaultValue:"",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar..."}),E.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:3,lg:3,xl:7,children:Object(h.jsx)(g.a.Item,{label:"Total de unidades",name:"totalUnits",rules:[{required:!0}],children:Object(h.jsx)(ut.a,{min:0,style:{width:"100% "}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:3,lg:3,xl:8,children:Object(h.jsx)(g.a.Item,{label:"N\xfamero de pisos",name:"numberFloors",children:Object(h.jsx)(ut.a,{min:0,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:4,lg:4,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Parqueaderos sencillos",name:"simpleParkingLots",children:Object(h.jsx)(ut.a,{defaultValue:0,min:0,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:5,lg:5,xl:7,children:Object(h.jsx)(g.a.Item,{label:"Parqueaderos doble lineal",name:"doubleLineaParkingLot",children:Object(h.jsx)(ut.a,{defaultValue:0,min:0,style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:6,lg:6,xl:8,children:Object(h.jsx)(g.a.Item,{label:"Parqueadero de visitantes",name:"parkingLotVisitors",children:Object(h.jsxs)(dt.a,{defaultValue:"2",onChange:H,children:[Object(h.jsx)(dt.a.Option,{value:"1",children:"SI"}),Object(h.jsx)(dt.a.Option,{value:"2",children:"NO"})]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:4,lg:4,xl:7,children:Object(h.jsx)(g.a.Item,{label:"Cantidad",name:"quantity",rules:[{type:"number",min:0,max:999,message:"Cantidad m\xe1xima de parqueaderos excedida."}],children:Object(h.jsx)(ut.a,{defaultValue:0,disabled:"2"===Y,style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:2,lg:2,xl:4,children:Object(h.jsx)(g.a.Item,{valuePropName:"checked",name:"state",label:"Estado",children:Object(h.jsx)(je.a,{children:"Activo"})})})]}),Object(h.jsx)(J.a,{orientation:"left",children:"L\xednea de Tiempo del Proyecto"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:5,lg:5,xl:11,children:Object(h.jsx)(g.a.Item,{name:"startDateSale",label:"Fecha de inicio de la venta",rules:[{required:!0,message:"Fecha requerida."}],children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:7,lg:7,xl:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha estimada de inicio de construcci\xf3n",name:"estimatedDateStartConstruction",rules:[{required:!0,message:"Fecha Requerida"}],children:Object(h.jsx)(jt.a,{onChange:function(e){if(null!==e&&0!==O.length){var t=o.getFieldsValue(["estimatedDeliveryDate"]).estimatedDeliveryDate,n=o.getFieldsValue(["estimatedDateStartConstruction"]).estimatedDateStartConstruction;o.setFieldsValue({stateProject:oi(t,n,O)})}},style:{width:"100%"}})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:6,lg:6,xl:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha estimada de entrega",name:"estimatedDeliveryDate",rules:[{required:!0,message:"Fecha Requerida"}],children:Object(h.jsx)(jt.a,{onChange:function(e){if(null!==e&&0!==O.length){var t=o.getFieldsValue(["estimatedDeliveryDate"]).estimatedDeliveryDate,n=o.getFieldsValue(["estimatedDateStartConstruction"]).estimatedDateStartConstruction;o.setFieldsValue({stateProject:oi(t,n,O)})}},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:6,lg:6,xl:11,children:Object(h.jsx)(g.a.Item,{label:"Fecha m\xe1xima para reformas",name:"dateMaximumReforms",rules:[{required:!0,message:"Fecha Requerida"}],children:Object(h.jsx)(jt.a,{style:{width:"100%"}})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:20,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Documentos"}),Object(h.jsx)(g.a.Item,{valuePropName:"fileList",name:"uploadDocuments",getValueFromEvent:Te,children:Object(h.jsx)(rn.a,{action:R.Pe,accept:R.Lh,multiple:!0,name:"uploadDocuments",maxCount:100,onRemove:ke,children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Dc.a,{}),children:"Subir documentos"})})})]})}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:24,sm:24,md:8,lg:8,xl:12,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Im\xe1genes"}),Object(h.jsx)(g.a.Item,{name:"uploadImages",valuePropName:"fileList",getValueFromEvent:Te,children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",accept:"image/*",multiple:!0,name:"uploadImages",maxCount:100,onRemove:ke,children:"+ Subir"})})]}),Object(h.jsxs)(N.a,{children:[Object(h.jsx)(J.a,{orientation:"left",children:"Im\xe1genes de promotores"}),Object(h.jsx)(g.a.Item,{valuePropName:"fileList",name:"promoterImages",getValueFromEvent:Te,children:Object(h.jsx)(rn.a,{action:R.Pe,listType:"picture-card",accept:"image/*",multiple:!0,name:"promoterImages",maxCount:100,onRemove:ke,children:"+ subir"})})]})]}),Object(h.jsx)(J.a,{}),Object(h.jsx)(g.a.Item,{wrapperCol:{span:12,offset:21},children:Object(h.jsx)(S.a,{disabled:me,size:"long",type:"primary",htmlType:"submit",children:"Guardar"})})]})})})})})},op=function(e){var t=e.id,n=Object(s.d)(),r=Object(a.useState)([]),c=Object(f.a)(r,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){n(Sc(t,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),Array.isArray(i)?Object(h.jsx)(w.a,{title:"Informaci\xf3n b\xe1sica",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(ip,{project:i,projectId:t})},sp=n(619),lp=(n(561),function(e){var t=e.paymentRelationshipSetupDatabase,n=e.id,r=Object(s.d)(),c=Array.isArray(t)?t[0]:t._payload[0];Object(a.useEffect)((function(){null!=o?Be():console.warn("No han cargado"),I(parseFloat(c.builder_credit_payments)),k(parseFloat(c.builder_credit_value)-parseFloat(c.builder_credit_payments))}),[]),console.log(c);var i=Object(a.useState)(c),o=Object(f.a)(i,1)[0],l=Object(a.useState)(t._payload[0].email_quote_format||""),d=Object(f.a)(l,2),u=d[0],b=d[1],O=g.a.useForm(),x=Object(f.a)(O,1)[0],v=Object(a.useState)(parseFloat(c.builder_credit_payments)),y=Object(f.a)(v,2),C=y[0],I=y[1],E=Object(a.useState)(parseFloat(c.builder_credit_value)-parseFloat(c.builder_credit_payments)),F=Object(f.a)(E,2),A=F[0],k=F[1],D=Object(a.useState)(c?c.initial_fee_percentage:""),L=Object(f.a)(D,2),V=L[0],q=L[1],M=Object(a.useState)(c?c.bank_financing_percentage:0),U=Object(f.a)(M,2),z=U[0],G=U[1],B=Object(a.useState)(c?c.payment_period_id:1),Y=Object(f.a)(B,2),H=Y[0],Z=Y[1],Q=Object(a.useState)(c?c.separation_value:""),K=Object(f.a)(Q,2),W=K[0],X=K[1],$=Object(a.useState)(c?c.maximum_separation_days:""),ee=Object(f.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(c?c.initial_fee_promise_signature_trust_percentage:""),re=Object(f.a)(ae,2),ce=re[0],ie=re[1],oe=Object(a.useState)(c?c.initial_fee_finance_in_construction_percentage:""),se=Object(f.a)(oe,2),le=se[0],de=se[1],ue=Object(a.useState)(c?c.max_number_days_pay_initial_fee:""),je=Object(f.a)(ue,2),be=je[0],me=je[1],pe=Object(a.useState)(c?c.maximum_number_months_finance_initial_fee:""),fe=Object(f.a)(pe,2),Oe=fe[0],he=fe[1],xe=Object(a.useState)(c?c.valid_days_quote:""),ve=Object(f.a)(xe,2),ye=ve[0],ge=ve[1],_e=Object(a.useState)(c?c.maximum_days_without_advisory_client:""),Se=Object(f.a)(_e,2),we=Se[0],Ce=Se[1],Pe=Object(a.useState)(c?c.builder_credit_value:""),Ie=Object(f.a)(Pe,2),Ee=Ie[0],Fe=Ie[1],Ae=Object(a.useState)(c?c.income_information:""),ke=Object(f.a)(Ae,2),Te=ke[0],Ne=ke[1],De=Object(a.useState)(c?c.income_data:""),Re=Object(f.a)(De,2),Le=Re[0],Ve=Re[1],qe=Object(a.useState)(c?c.account_status_data:""),Me=Object(f.a)(qe,2),Ue=Me[0],ze=Me[1],Ge={initial_fee_percentage:V,bank_financing_percentage:z,payment_period_id:1,separation_value:W,maximum_separation_days:te,initial_fee_promise_signature_trust_percentage:ce,initial_fee_finance_in_construction_percentage:le,valid_days_quote:ye,maximum_days_without_advisory_client:we,builder_credit_value:Ee,max_number_days_pay_initial_fee:be,maximum_number_months_finance_initial_fee:Oe,email_quote_format:u,income_information:Te,income_data:Le,account_status_data:Ue},Be=function(){x.setFieldsValue({initial_fee_percentage:V,bank_financing_percentage:z,payment_period_id:String(H),separation_value:W,maximum_separation_days:te,initial_fee_promise_signature_trust_percentage:ce,initial_fee_finance_in_construction_percentage:le,valid_days_quote:ye,maximum_days_without_advisory_client:we,builder_credit_value:Ee,max_number_days_pay_initial_fee:be,maximum_number_months_finance_initial_fee:Oe,email_quote_format:u,income_information:Te,income_data:Le,account_status_data:Ue})};function Ye(e){!function(e){x.setFieldsValue({bank_financing_percentage:e}),G(e)}(100-e)}return Object(h.jsx)(w.a,{title:"Configuraci\xf3n para pagos y de relaci\xf3n",style:{borderColor:"black"},children:Object(h.jsxs)(g.a,{name:"PagosRelacion",layout:"vertical",onFinish:function(){r(function(e,t,n,a){return{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/paymentRelationshipSetting/").concat(e),data:t,success:function(e){return Ab(e)},postProcessSuccess:n,postProcessError:a}}}(n,Ge,function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.error?Object(P.c)("\xa1UPS! ha ocurrido un error mientras se actualizaba"):Object(P.f)("Actualizado exitosamente");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},form:x,style:{marginLeft:"27px",marginRight:"27px",marginTop:"27px"},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{xs:5,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"% Cuota Inicial",name:"initial_fee_percentage",children:Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},value:V,onChange:function(e){return function(e){q(e),Ye(e),x.setFieldsValue({initial_fee_promise_signature_trust_percentage:e,initial_fee_finance_in_construction_percentage:0}),ie(e),de(0)}(e)},style:{width:"100%"},rules:[{required:!0}]})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{label:"% Financiaci\xf3n Banco",name:"bank_financing_percentage",children:Object(h.jsx)(ut.a,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},onChange:function(e){return function(e){G(e);var t=100-e;x.setFieldsValue({initial_fee_percentage:t}),q(t),x.setFieldsValue({initial_fee_promise_signature_trust_percentage:t,initial_fee_finance_in_construction_percentage:0})}(e)},style:{width:"100%"}})})}),Object(h.jsx)(N.a,{xs:5,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(g.a.Item,{valuePropName:1,label:"Per\xedodo de Pago",name:"payment_period_id",children:Object(h.jsx)(dt.a,{onChange:function(e){return Z(e)},defaultValue:1,value:1,children:Object(h.jsx)(dt.a.Option,{value:1,children:"Mensual"})})})})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Separaci\xf3n"}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(g.a.Item,{label:"Valor de Separaci\xf3n",name:"separation_value",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},value:W,onChange:function(e){return X(e)},style:{width:"100%"}}))})}),Object(h.jsx)(N.a,{span:12,children:Object(h.jsx)(g.a.Item,{label:"N\xfamero de D\xedas M\xe1ximo de Separaci\xf3n",name:"maximum_separation_days",valuePropName:0,children:Object(h.jsx)(ut.a,{value:te,onChange:function(e){return ne(e)},style:{width:"100%"}})})})]}),Object(h.jsx)(J.a,{orientation:"left",children:"Cuota Inicial Forma de Pago"}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:12,children:[Object(h.jsxs)(g.a.Item,{label:"% Cuota inicial - Firma promesa o encargo fiduciario",name:"initial_fee_promise_signature_trust_percentage",children:[function(){},Object(h.jsx)(ut.a,{min:0,max:V,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},value:ce,onChange:function(e){return function(e){var t=V-e;e>V?(de(le),ie(ce),x.setFieldsValue({initial_fee_finance_in_construction_percentage:le,initial_fee_promise_signature_trust_percentage:ce})):(de(t),ie(e),x.setFieldsValue({initial_fee_promise_signature_trust_percentage:e,initial_fee_finance_in_construction_percentage:t}))}(e)},style:{width:"100%"}})]}),Object(h.jsx)(g.a.Item,{label:"% Cuota inicial - A financiar durante la construcci\xf3n",name:"initial_fee_finance_in_construction_percentage",children:Object(h.jsx)(ut.a,{min:0,max:V,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},value:le,onChange:function(e){return function(e){var t=V-e;e>V?(de(le),ie(ce),x.setFieldsValue({initial_fee_finance_in_construction_percentage:le,initial_fee_promise_signature_trust_percentage:ce})):(de(e),ie(t),x.setFieldsValue({initial_fee_promise_signature_trust_percentage:t,initial_fee_finance_in_construction_percentage:e}))}(e)},style:{width:"100%"}})})]}),Object(h.jsxs)(N.a,{xs:5,sm:24,md:8,lg:8,xl:12,children:[Object(h.jsx)(g.a.Item,{label:"N\xfamero de D\xedas M\xe1ximo para Pagar la Cuota de Inicial",name:"max_number_days_pay_initial_fee",children:Object(h.jsx)(ut.a,{value:be,onChange:function(e){return me(e)},style:{width:"100%"}})}),Object(h.jsx)(g.a.Item,{label:"N\xfamero de Meses M\xe1ximo para Financiar la Cuota de Inicial",name:"maximum_number_months_finance_initial_fee",children:Object(h.jsx)(ut.a,{value:Oe,onChange:function(e){return he(e)},style:{width:"100%"}})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsxs)(N.a,{span:12,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Cotizaci\xf3n"}),Object(h.jsx)(g.a.Item,{label:"N\xfamero de D\xedas v\xe1lidos de Cotizaciones",name:"valid_days_quote",children:Object(h.jsx)(ut.a,{value:ye,onChange:function(e){return ge(e)},style:{width:"100%"}})})]}),Object(h.jsxs)(N.a,{span:12,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Relaci\xf3n Cliente-Asesor"}),Object(h.jsx)(g.a.Item,{label:"M\xe1ximo dias sin relaci\xf3n Cliente-Asesor",name:"maximum_days_without_advisory_client",children:Object(h.jsx)(ut.a,{value:we,onChange:function(e){return Ce(e)},style:{width:"100%"}})})]})]}),Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Cr\xe9dito Constructor"}),Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{label:"Valor del Cr\xe9dito",name:"builder_credit_value",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},value:Ee,onChange:function(e){return Fe(e)},style:{width:"100%"}}))})}),Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{label:"Total Abonos",name:"totalAbono",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},defaultValue:C,disabled:!0,style:{width:"100%"}}))})}),Object(h.jsx)(N.a,{span:8,children:Object(h.jsx)(g.a.Item,{label:"Total Deuda",name:"totalDeuda",children:Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},defaultValue:A,disabled:!0,style:{width:"100%"}}))})})]}),Object(h.jsx)(T.a,{children:Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Formato Correo Cotizaci\xf3n"}),Object(h.jsx)(rs.a,Object(j.a)(Object(j.a)({},{theme:"snow",readOnly:!1}),{},{value:u,onChange:b,style:{minHeight:"300px"}})),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(sp.a,{message:"ETIQUETAS",description:Object(h.jsxs)("span",{children:["'Cliente.nombre' = Nombre Completo del Cliente ",Object(h.jsx)("br",{}),"'Cotizacion.codigo'= C\xf3digo de la Cotizaci\xf3n ",Object(h.jsx)("br",{}),"'Asesor.nombre' = Nombre del Asesor Responsable ",Object(h.jsx)("br",{}),"'Asesor.email' = Email del Asesor Responsable"]}),type:"info",showIcon:!0})]})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Infomaci\xf3n Plan de Ventas"}),Object(h.jsx)(g.a.Item,{label:"Informaci\xf3n de recaudo",name:"income_information",children:Object(h.jsx)(_.a.TextArea,{value:Te,onChange:function(e){return Ne(e.target.value)},style:{width:"100%"},Rows:5})})]})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{label:"Datos de recaudo",name:"income_data",children:Object(h.jsx)(_.a.TextArea,{value:Le,onChange:function(e){return Ve(e.target.value)},style:{width:"100%"},Rows:5})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsxs)(N.a,{span:24,children:[Object(h.jsx)(J.a,{orientation:"left",children:"Infomaci\xf3n Estado de Cuenta"}),Object(h.jsx)(g.a.Item,{label:"Datos de Estado de Cuenta",name:"account_status_data",children:Object(h.jsx)(_.a.TextArea,{value:Ue,onChange:function(e){return ze(e.target.value)},style:{width:"100%"},Rows:5})})]})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{span:2,offset:22,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{disabled:JSON.parse(localStorage.stateDisable),type:"primary",htmlType:"submit",children:"Guardar"})})})})]})})}),dp=function(e){var t=e.id,n=Object(s.d)();Object(a.useEffect)((function(){n(function(e){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/paymentRelationshipSetting/").concat(e),success:function(e){return Fb(e)}}}}(t))}),[]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.paymentRelationshipSetting}));return Array.isArray(r)?Object(h.jsx)(w.a,{title:"Configuraci\xf3n para pagos y de relaci\xf3n",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(lp,{paymentRelationshipSetupDatabase:r,id:t})},up=n(324),jp=function(e){var t=e.disabledSimpleParking,n=e.disabledDoubleParking,a=e.record,r=e.updateParking;return Object(h.jsxs)(dt.a,{onChange:function(e){r(e,a)},disabled:null===a||void 0===a?void 0:a.state,value:"null"===(null===a||void 0===a?void 0:a.parking)||""===(null===a||void 0===a?void 0:a.parking)?0:null===a||void 0===a?void 0:a.parking,name:"parking",children:[Object(h.jsx)(dt.a.Option,{value:0,children:"Seleccion"}),Object(h.jsx)(dt.a.Option,{disabled:t,value:1,children:"Sencillo"}),Object(h.jsx)(dt.a.Option,{disabled:n,value:2,children:"Doble Lineal"})]})},bp=function(e){var t=e.unitsFloorDataBase,n=Object(s.d)();Object(a.useEffect)((function(){var e=t._payload;e.map((function(e){return e.state="Comprada"===(null===e||void 0===e?void 0:e.name)||"Separada"===(null===e||void 0===e?void 0:e.name),"Casa"===(null===e||void 0===e?void 0:e.name_project_types)&&""===e.label&&(e.label="C-"+e.id),"Casa campestre"===(null===e||void 0===e?void 0:e.name_project_types)&&""===e.label&&(e.label="CC-"+e.id),"Bodega"===(null===e||void 0===e?void 0:e.name_project_types)&&""===e.label&&(e.label="B-"+e.id),"Lotes"===(null===e||void 0===e?void 0:e.name_project_types)&&""===e.label&&(e.label="L-"+e.id),e})),d(e)}),[t]);Object(s.e)((function(e){return null===e||void 0===e?void 0:e.project}));var r=Object(up.useForm)(),c=Object(f.a)(r,1)[0],i=Object(a.useState)([]),o=Object(f.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(0),b=Object(f.a)(u,2),m=b[0],p=b[1],O=Object(a.useState)([]),x=Object(f.a)(O,2),v=x[0],y=x[1],C=Object(a.useState)(!1),I=Object(f.a)(C,2),E=I[0],F=I[1],A=Object(a.useState)(!1),k=Object(f.a)(A,2),D=k[0],L=k[1],V=Object(a.useState)([]),q=Object(f.a)(V,2),M=q[0],U=q[1],z=Object(a.useState)([]),G=Object(f.a)(z,2),B=G[0],Y=G[1];Object(a.useEffect)((function(){if(M.length>0&&M[0].hasOwnProperty("code")){var e=Object(Qi.a)(l),t=Object(Qi.a)(M);e.map((function(e,n){var a,r;(n<t.length&&(e.fiduciary_code=t[n].code),e.square_meter_value_old)||(e.square_meter_value_old=parseFloat(null!==(a=null===e||void 0===e?void 0:e.square_meter_value)&&void 0!==a?a:0));e.parking_number_old||(e.parking_number_old=parseInt(null!==(r=e.parking_number)&&void 0!==r?r:0));return e.square_meter_value+=parseFloat(e.bonus_height),e.parking="null"===(null===e||void 0===e?void 0:e.parking)||""===(null===e||void 0===e?void 0:e.parking)?0:e.parking,e})),d(e)}}),[M]),Object(a.useEffect)((function(){if(Array.isArray(l)){for(var e=0;e<l.length;e++){var t;p(null===(t=l[e])||void 0===t?void 0:t.floors_number)}var n=Object(Qi.a)(l),a=[];n.forEach((function(e){-1===a.findIndex((function(t){return t.floorLabel===e.label}))&&""!==e.label&&a.push({floorLabel:e.label})})),y(a),l.map((function(e){var t,n,a,r;(e.area=null==(null===e||void 0===e?void 0:e.area)?0:parseFloat(null===e||void 0===e?void 0:e.area),e.square_meter_value_old)||(e.square_meter_value_old=parseFloat(null!==(r=e.square_meter_value)&&void 0!==r?r:0));return e.square_meter_value=parseFloat(null!==(t=null===e||void 0===e?void 0:e.square_meter_value_old)&&void 0!==t?t:0)+parseFloat(null!==(n=null===e||void 0===e?void 0:e.bonus_height)&&void 0!==n?n:0),e.bonus_view=parseFloat(null!==(a=null===e||void 0===e?void 0:e.bonus_view)&&void 0!==a?a:0),e}))}}),[l]);if(0===(null===t||void 0===t?void 0:t.length))return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{children:Object(h.jsx)("h3",{children:"No hay unidades registradas"})})});for(var J={name:"file",action:R.Pe,headers:{authorization:"authorization-text"},onChange:function(e){if(console.log(e),"uploading"!==e.file.status)for(var t=0;t<e.fileList.length;t++){var n=e.fileList[t].originFileObj;Object(pu.ExcelRenderer)(n,(function(e,t){if(!e){var n=[];return t.rows.slice(0).map((function(e,t){return e&&n.push({key:t,code:e[0]}),e})),0!==n.length&&(U(n),!0)}}))}"done"===e.file.status?oe("".concat(e.file.name," se ha subido correctamente")):"error"===e.file.status&&Object(P.a)("".concat(e.file.name," ha fallado."))}},Z={name:"file",action:{RUTA_API_MULTIMEDIA:R.Pe},headers:{authorization:"authorization-text"},onChange:function(e){if("uploading"!==e.file.status)for(var t=0;t<e.fileList.length;t++){var n=e.fileList[t].originFileObj;Object(pu.ExcelRenderer)(n,(function(t,n){if(t);else{var a=[],r=[],c=0,i=0,o=0;if(3===n.cols.length){for(var s=0;s<n.rows.length;s++)for(var d=0;d<n.rows[s].length;d++)c++;for(var u=0;u<n.rows.length;u++)for(var j=0;j<n.rows[u].length;j++)if(Number.isInteger(n.rows[u][j]))i++;else if(1===++o)return e.file.status="error",o=0,Y([]),Object(P.a)("".concat(e.file.name," ha fallado."));if(i===c){if(Y(n),n.rows.slice(0).map((function(e,t){return e&&a.push({key:t,code:e[0]}),e})),0!==(null===l||void 0===l?void 0:l.length)){var b,m=Object(Dr.a)(a);try{for(m.s();!(b=m.n()).done;){var p=b.value;-1==l.findIndex((function(e){return parseInt(e.fiduciary_code)==parseInt(p.code)}))&&r.push(p)}}catch(t){m.e(t)}finally{m.f()}return e.file.status="done",Y(r),oe("".concat(e.file.name," archivo correcto."))}Y(a)}}else e.file.status="error",Object(P.g)("".concat(e.file.name," ha fallado."))}}))}"removed"===e.file.status&&Y([])}},K=[],W=0;W<m;W++){var X={id:W+1,name:W+1};K.push(X)}var $=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),ee=function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=parseInt(t),(a=null!==(n=a)&&void 0!==n?n:Object(Qi.a)(v)).findIndex((function(e){return e.floorLabel===t}))>-1?e(t+=1,a):t},te=function(e,t){var n=Object(Qi.a)(l),a=n.findIndex((function(e){return e.id===t.id})),r=n[a];n[a]=Object(j.a)(Object(j.a)({},r),{},{parking:parseInt(""!=e?e:0)}),t.parking=parseInt(""!=e?e:0),d(n),ce(t.parking_number,t)},ne=function(e){var t,n,a,r,c=parseFloat(null!==(t=null===e||void 0===e?void 0:e.square_meter_value)&&void 0!==t?t:0),i=parseFloat(null!==(n=null===e||void 0===e?void 0:e.area)&&void 0!==n?n:0),o=parseFloat(null!==(a=null===e||void 0===e?void 0:e.value_other_additional)&&void 0!==a?a:0),s=parseFloat(null!==(r=null===e||void 0===e?void 0:e.finish_kit_value)&&void 0!==r?r:0);return e.Valor=c*i+function(e){var t,n,a,r=null!==(t=null===e||void 0===e?void 0:e.simple_parking_value)&&void 0!==t?t:0,c=null!==(n=null===e||void 0===e?void 0:e.double_parking_value)&&void 0!==n?n:0,i=parseInt(null!==(a=null===e||void 0===e?void 0:e.parking_number)&&void 0!==a?a:0);return 1===parseInt(null===e||void 0===e?void 0:e.parking)?parseFloat(r)*i:parseFloat(c)*i}(e)+s+o,e.Valor},ae=function(e){var t=0;return e.forEach((function(e){2===parseInt(e.parking)&&(t+=e.parking_number)})),t},re=function(e){var t=0;return e.forEach((function(e){1===parseInt(e.parking)&&(t+=e.parking_number)})),t},ce=function(e,t){var n=Object(Qi.a)(l),a=n.findIndex((function(e){return e.id===t.id})),r=n[a];2===parseInt(t.parking)?(n[a]=Object(j.a)(Object(j.a)({},r),{},{parking_number:null!==e&&void 0!==e?e:1,valor:ne(r)}),ae(n)>t.double_parking_number&&(n[a]=Object(j.a)(Object(j.a)({},r),{},{parking_number:0,valor:ne(r)}),L(!0),Object(P.d)("L\xedmite de parqueadores dobles alcanzado")),ae(n)<t.double_parking_number&&L(!1)):(n[a]=Object(j.a)(Object(j.a)({},r),{},{parking_number:e||1,valor:ne(r)}),re(n)>t.simple_parking_number&&(n[a]=Object(j.a)(Object(j.a)({},r),{},{parking_number:0,valor:ne(r)}),F(!0),Object(P.d)("L\xedmite de parqueadores simples alcanzado")),re(n)<t.simple_parking_number&&F(!1)),d(n)},ie=[{title:"#",dataIndex:"id",key:"id",width:50,align:"center",fixed:"left",sorter:function(e,t){return e.id-t.id},render:function(e,t){return Object(h.jsx)("span",{children:l.indexOf(t)+1})}},{title:"Tipo unidad",dataIndex:"type_unit",Key:"type_unit",align:"center",width:50,defaultSortOrder:"asc",sorter:function(e,t){return e.type_unit-t.type_unit}},{title:"Tipo",dataIndex:"area",Key:"area",align:"center",width:70,defaultSortOrder:"descend",sorter:function(e,t){return e.area-t.area}},{title:"Piso",align:"center",dataIndex:"number_floors",Key:"number_floors",defaultSortOrder:"asc",sorter:function(e,t){return e.number_floors-t.number_floors},render:function(e,t){return Object(h.jsxs)(dt.a,{name:"number_floors",defaultValue:parseInt(t.number_floors),value:parseInt(t.number_floors),disabled:"Edificio"!==(null===t||void 0===t?void 0:t.name_project_types)||(null===t||void 0===t?void 0:t.state),onChange:function(e){!function(e,t){if(""!==e){var n=Object(Qi.a)(l),a=Object(Qi.a)(v),r=n.findIndex((function(e){return e.id===t.id})),c=n[r],i=a.findIndex((function(e){return e.floorLabel===t.label}));n[r]=Object(j.a)(Object(j.a)({},c),{},{label:ee(100*e+1),number_floors:e}),i>-1&&(a[i]={floorLabel:t.label}),y(a),d(n)}}(e,t)},children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccione"}),0!==K.length&&K.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name},e.id)}))]})},width:70},{title:"Etiqueta",dataIndex:"label",align:"center",Key:"label",render:function(e,t){return Object(h.jsx)(ut.a,{name:"label",value:"none"===(null===t||void 0===t?void 0:t.label)?"Etiqueta":null===t||void 0===t?void 0:t.label,disabled:null===t||void 0===t?void 0:t.state,style:{width:"100%"},min:101,max:100*t.floors_number+1,onChange:function(e){!function(e,t){var n=Object(Qi.a)(l),a=n.findIndex((function(e){return e.id===t.id})),r=n[a];n[a]=Object(j.a)(Object(j.a)({},r),{},{label_old:r.label,label:ee(parseInt(e))}),d(n)}(e,t)}})},width:70},{title:"C\xf3digo Fiducia",align:"center",dataIndex:"fiduciary_code",Key:"fiduciary_code",width:80},{title:"Valor m2",align:"center",dataIndex:"square_meter_value",Key:"square_meter_value",width:100,render:function(e,t){return Object(h.jsxs)("span",{style:{fontSize:13},children:[" ",$.format(null===t||void 0===t?void 0:t.square_meter_value)," "]})}},{title:"Prima de Vista",align:"center",dataIndex:"bonus_view",key:"bonus_view",render:function(e,t){return Object(h.jsx)(ut.a,{disabled:!0,min:0,name:"primaVista",value:null===t||void 0===t?void 0:t.bonus_view,style:{width:"100%"}})},width:100},{title:"Prima de Altura por m2",dataIndex:"bonus_height",Key:"bonus_height",align:"center",render:function(e,t){return Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},name:"primaAlturam2",value:(null===t||void 0===t?void 0:t.bonus_height)?null===t||void 0===t?void 0:t.bonus_height:0,disabled:null===t||void 0===t?void 0:t.state,style:{width:"100%"},onChange:function(e){!function(e,t){var n=Object(Qi.a)(l),a=n.findIndex((function(e){return e.id===t.id})),r=n[a];n[a]=Object(j.a)(Object(j.a)({},r),{},{bonus_height:e,square_meter_value:r.square_meter_value_old+r.bonus_height}),d(n)}(e,t)}}))},width:110},{title:"Parqueadero",dataIndex:"parking",Key:"parking",align:"center",render:function(e,t){return Object(h.jsx)(jp,{disabledSimpleParking:E,disabledDoubleParking:D,updateParking:te,record:t},null===t||void 0===t?void 0:t.id)},width:90},{title:"Cantidad",dataIndex:"parking_number",Key:"parking_number",align:"center",render:function(e,t){var n;return Object(h.jsx)(ut.a,{onChange:function(e){ce(e,t)},min:0,disabled:null===t||void 0===t?void 0:t.state,name:"parking_number",value:null!==(n=null===t||void 0===t?void 0:t.parking_number)&&void 0!==n?n:0,style:{width:"100%"}})},width:75},{title:"Ubicaci\xf3n Parqueadero",dataIndex:"parking_location",Key:"parking_location",align:"center",render:function(e,t){return Object(h.jsxs)(dt.a,{onChange:function(e){!function(e,t){var n=Object(Qi.a)(l),a=n.findIndex((function(e){return e.id===t.id})),r=n[a];n[a]=Object(j.a)(Object(j.a)({},r),{},{parking_location:e}),d(n)}(e,t)},disabled:null===t||void 0===t?void 0:t.state,defaultValue:(null===t||void 0===t?void 0:t.parking_location)?null===t||void 0===t?void 0:t.parking_location:"",name:"parking_location",children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccion"}),Object(h.jsx)(dt.a.Option,{value:1,children:"S\xf3tano"}),Object(h.jsx)(dt.a.Option,{value:2,children:"Lobby"})]})},width:90},{title:"Estado",dataIndex:"name",Key:"name",align:"center",width:90,render:function(e,t){switch(null===t||void 0===t?void 0:t.name){case"Separada":return Object(h.jsxs)(H.a,{color:"yellow",children:[" ",null===t||void 0===t?void 0:t.name," "]});case"Comprada":return Object(h.jsxs)(H.a,{color:"red",children:[" ",null===t||void 0===t?void 0:t.name," "]});default:return Object(h.jsxs)(H.a,{color:"green",children:[" ",null===t||void 0===t?void 0:t.name," "]})}}},{title:"Valor",dataIndex:"valor",Key:"valor",align:"center",fixed:"right",render:function(e,t){return Object(h.jsx)("span",{style:{fontSize:13},children:$.format(ne(t))})},width:150}],oe=function(e){Object(P.e)("success",e)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(w.a,{title:"Especificaci\xf3n de unidades por piso",style:{borderColor:"black"},children:Object(h.jsxs)(g.a,{layout:"vertical",form:c,onFinish:function(){var e,t,a,r=function(e){var t=JSON.parse(JSON.stringify(e));return t.map((function(e){var t;return delete e.area,delete e.area_value,delete e.double_parking_number,delete e.floors_number,delete e.name,delete e.number_days_separated,delete e.project_id,delete e.simple_parking_number,e.label=String(e.label),e.fiduciary_code=String(e.fiduciary_code),e.parking=String(e.parking),e.bonus_height=null!==(t=e.bonus_height)&&void 0!==t?t:0,e.quote_meter_value=e.square_meter_value,e.square_meter_value=e.square_meter_value_old,e})),t}(l);n((e=r,t=function(e){e.error?Object(P.c)("Hay campos vacios"):oe("Ha sido actualizado correctamente")},{type:R.O,payload:{method:"PUT",url:"".concat(R.Ne,"/unit"),data:e,postProcessSuccess:t,postProcessError:a}}))},style:{marginLeft:"25px",marginRight:"25px"},children:[Object(h.jsxs)(T.a,{gutter:16,children:[Object(h.jsx)(N.a,{span:10,children:Object(h.jsx)(_.a.Group,{compact:!0,children:Object(h.jsx)(g.a.Item,{label:"Cargar C\xf3digos Fiduciarios",children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({name:"cargarCodigosFiduciarios",accept:".xls, .xlsx",value:M},J),{},{children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Dc.a,{}),children:"Subir Archivo"})}))})})}),Object(h.jsx)(N.a,{span:10,children:Object(h.jsx)(_.a.Group,{compact:!0,children:Object(h.jsx)(g.a.Item,{label:"Cargar Ventas Fiduciarias",children:Object(h.jsx)(rn.a,Object(j.a)(Object(j.a)({name:"cargarVentasFiduciarias"},Z),{},{children:Object(h.jsx)(S.a,{icon:Object(h.jsx)(Dc.a,{}),children:"Subir Archivo"})}))})})}),Object(h.jsx)(N.a,{span:4,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{style:{backgroundColor:"#5cb85c",borderColor:"#5cb85c"},type:"primary",htmlType:"button",onClick:function(){var e=document.createElement("a");e.href=R.Qe,e.download="Formato_codigos_Fiduciarios.xls",e.dispatchEvent(new MouseEvent("click"))},children:"Descargar Formato"})})})]}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:5,children:(null===B||void 0===B?void 0:B.length)>0&&Object(h.jsx)(Q.a,{columns:[{title:"C\xf3digos no Aceptados",dataIndex:"code",key:"code",width:10,align:"center",fixed:"left"}],dataSource:B,size:"small",pagination:{defaultPageSize:1e3,showSizeChanger:!0}})})}),Object(h.jsx)("br",{}),Object(h.jsx)(g.a.Item,{children:(null===l||void 0===l?void 0:l.length)&&Object(h.jsx)(Q.a,{columns:ie,dataSource:l,size:"small",scroll:{x:1200},pagination:{defaultPageSize:1e3,showSizeChanger:!0}})}),Object(h.jsxs)(N.a,{children:[Object(h.jsxs)(T.a,{style:{marginTop:"0%",marginBottom:10},children:[Object(h.jsx)(N.a,{span:4,children:Object(h.jsx)("h4",{children:"Valor Total:"})}),Object(h.jsx)(N.a,{span:4,children:Object(h.jsx)("h4",{children:$.format(function(){var e=0;return l.forEach((function(t){e+=ne(t)})),e}())})})]}),Object(h.jsxs)(T.a,{style:{marginTop:"0%",marginBottom:10},children:[Object(h.jsx)(N.a,{span:6,children:Object(h.jsx)("h4",{children:"N\xfamero de registros:"})}),Object(h.jsx)(N.a,{span:2,children:Object(h.jsx)("h4",{children:null===l||void 0===l?void 0:l.length})})]})]}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{offset:20,span:4,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{disabled:JSON.parse(localStorage.stateDisable),htmlType:"submit",type:"primary",children:"Guardar"})})})})]})})})},mp=function(e){var t=e.id,n=Object(s.d)();Object(a.useEffect)((function(){Object(P.g)("Para un mejor funcionamiento, [Configuraciones para Pagos y de Relaci\xf3n, Par\xe1metros de Ventas]  deben estar gestionados"),n(Pm(t))}),[]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.unit}));return Array.isArray(r)?Object(h.jsx)(w.a,{title:"Especificaci\xf3n de unidades por piso",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(bp,{unitsFloorDataBase:r,id:t})},pp=Y.a.TabPane,fp=function(e){var t=Object(d.useParams)().id,n=Object(s.d)();Object(a.useEffect)((function(){return n(cn()),n({type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/polityToComply"),success:function(e){return Cm(e)}}}),n(hn()),n(sb(t)),function(){n({type:R.O,payload:{method:null,success:function(){return Tm()}}}),n({type:R.O,payload:{method:null,success:function(){return um()}}}),n({type:R.O,payload:{method:null,success:function(){return xm()}}}),n({type:R.O,payload:{method:null,success:function(){return am()}}}),n({type:R.O,payload:{method:null,success:function(){return lb()}}}),n({type:R.O,payload:{method:null,success:function(){return wm()}}}),n({type:R.O,payload:{method:null,success:function(){return Eb()}}}),n({type:R.O,payload:{method:null,success:function(){return Mb()}}}),n({type:R.O,payload:{method:null,success:function(){return Nb()}}}),n({type:R.O,payload:{method:null,success:function(){return Cc()}}}),n({type:R.O,payload:{method:null,success:function(){return fb()}}}),n({type:R.O,payload:{method:null,success:function(){return Im()}}}),n({type:R.O,payload:{method:null,success:function(){return Um()}}})}}),[]);var r=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.policyToComply})),c=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.afiliatedCompany})),i=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.comissionParameter}));return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"site-page-header-ghost-wrapper",children:[Object(h.jsx)(Te.a,{className:"site-page-header",onBack:function(){e.history.replace("/projects")},title:"Editar Proyecto",style:{marginLeft:"-25px"}}),Object(h.jsxs)(Y.a,{animated:!0,type:"card",tabPosition:"top",children:[Object(h.jsx)(pp,{tab:Object(h.jsx)("p",{children:"Informai\xf3n B\xe1sica"}),children:Object(h.jsx)(w.a,{children:Object(h.jsx)(op,{id:t})})},"1"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{children:"Configuraciones para "})," ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"Pagos y de Relaci\xf3n "})]})}),children:Object(h.jsx)(w.a,{children:Object(h.jsx)(dp,{id:t})})},"2"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:Object(h.jsx)("span",{children:"Par\xe1metros de Ventas"})})}),children:Object(h.jsx)(w.a,{children:Object(h.jsx)(Dm,{id:t})})},"3"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:Object(h.jsx)("span",{children:"Tipo de Unidades"})})}),children:Object(h.jsx)(cp,{id:t})},"4"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{children:"Especificaci\xf3n de Unidades"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"por Piso"})]})}),children:Object(h.jsx)(mp,{id:t})},"5"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{children:"Pol\xedticas de Incremento"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"y Descuento "})]})}),children:Object(h.jsx)(w.a,{children:Object(h.jsx)($b,{id:t})})},"6"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{children:"Documentos Legalizaci\xf3n "})," ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"de Ventas"})]})}),children:Object(h.jsx)(Ib,{id:t})},"7"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{children:"Asignaci\xf3n de T\xe9cnicos "})," ",Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:"y Contadores "})]})}),children:Object(h.jsx)(w.a,{children:Object(h.jsx)(Sm,{id:t})})},"8"),Object(h.jsx)(pp,{tab:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("p",{children:Object(h.jsx)("span",{children:"Par\xe1metros Comisiones"})})}),children:Array.isArray(r)||Array.isArray(i)?Object(h.jsx)(w.a,{title:"Par\xe1metros y comisiones",style:{borderColor:"black"},children:Object(h.jsx)(x,{})}):Object(h.jsx)(jb,{id:t,dataCommissionParamaterSelector:i,policyToComply:r,afiliatedCompany:c})},"9")]})]})})},Op=function(){var e=g.a.useForm(),t=Object(f.a)(e,1)[0],n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),l=Object(f.a)(o,2),u=l[0],j=l[1],b=Object(a.useState)([]),O=Object(f.a)(b,1)[0],x=Object(a.useState)({}),v=Object(f.a)(x,2),y=(v[0],v[1],Object(d.useParams)().id),_="YYYY/MM/DD",C=Object(s.d)();Object(a.useEffect)((function(){C(function(e,t){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/competingProject/").concat(e),postProcessSuccess:t}}}(y,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,j(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),C(ei()),C(br())}),[]),Object(a.useEffect)((function(){C(wc((function(e){e._payload.project_types.forEach((function(e){O.push({name:e.name,id:e.id})}))})))}),[]),Object(a.useEffect)((function(){C(Uu())}),[C]);var I=Object(s.e)((function(e){var t;return null===e||void 0===e||null===(t=e.projecState)||void 0===t?void 0:t._payload}));Object(a.useEffect)((function(){!Array.isArray(u)&&I&&E()}),[u,I]);var E=function(){var e,n,a,r,c=oi(null!==(e=null===u||void 0===u||null===(n=u._payload)||void 0===n?void 0:n.delivery_date)&&void 0!==e?e:new Date,null!==(a=null===u||void 0===u||null===(r=u._payload)||void 0===r?void 0:r.building_date)&&void 0!==a?a:null,I);t.setFieldsValue({name:u._payload.name,marketer:u._payload.marketer_company,projectType:parseInt(u._payload.project_type_id)||"",releaseDate:u._payload.release_date?se()(u._payload.release_date):void 0,deliveryDate:u._payload.delivery_date?se()(u._payload.delivery_date):void 0,totalUnits:u._payload.total_units,launchPriceM2:parseInt(u._payload.release_meter_price),sourceName:u._payload.information_source_name,observations:u._payload.observations,builder:parseInt(u._payload.construction_companies_id),address:u._payload.address,priceRange:parseInt(u._payload.price_range_id)||"",buildingDate:u._payload.building_date?se()(u._payload.building_date):void 0,projectStatus:c,unitsSoldToDate:u._payload.sold_units,currentPriceOfM2:parseInt(u._payload.current_meter_price),sourcePhone:u._payload.information_source_phone,state:u._payload.state,numberTowers:u._payload.towers_number,powerPlant:u._payload.has_power_plant?String(u._payload.has_power_plant):"2",usefulRoom:u._payload.has_useful_room?String(u._payload.has_useful_room):"2",numberFloors:u._payload.floors_number,trashShut:u._payload.has_shut_garbage?String(u._payload.has_shut_garbage):"2",pool:u._payload.has_pool?String(u._payload.has_pool):"2",gymArea:u._payload.has_gym_area?String(u._payload.has_gym_area):"2",playground:u._payload.has_playground?String(u._payload.has_playground):"2",socialRoom:u._payload.has_social_room?String(u._payload.has_social_room):"2",numberBedrooms:u._payload.rooms_number,numberBalconies:u._payload.balconies_number,integralKitchen:u._payload.has_integral_kitchen?String(u._payload.has_integral_kitchen):"2",numberBathrooms:u._payload.bathrooms_number,serviceBedroom:u._payload.has_service_bedroom?String(u._payload.has_service_bedroom):"2",study:u._payload.has_study?String(u._payload.has_study):"2"})},F={width:"100%"},A=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a,r,c,o,s,l,d,u,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=JSON.parse(localStorage.getItem("USER_INFO")),e.next=3,t.validateFields();case 3:u=e.sent,j={creator_user_id:d.id,name:u.name,address:u.address||null,release_date:null!==(n=null===u||void 0===u||null===(a=u.releaseDate)||void 0===a?void 0:a.format(_))&&void 0!==n?n:null,building_date:null!==(r=null===u||void 0===u||null===(c=u.buildingDate)||void 0===c?void 0:c.format(_))&&void 0!==r?r:null,delivery_date:null!==(o=null===(s=u.deliveryDate)||void 0===s?void 0:s.format(_))&&void 0!==o?o:null,total_units:u.totalUnits||null,sold_units:u.unitsSoldToDate||null,current_meter_price:u.currentPriceOfM2||null,release_meter_price:u.launchPriceM2||null,information_source_name:u.sourceName||null,information_source_phone:u.sourcePhone||null,observations:u.observations||null,towers_number:u.numberTowers||null,floors_number:u.numberFloors||null,has_power_plant:u.powerPlant||null,has_shut_garbage:u.trashShut||null,has_useful_room:u.usefulRoom||null,has_pool:u.pool||null,has_gym_area:u.gymArea||null,has_social_room:u.socialRoom||null,has_playground:u.playground||null,rooms_number:u.numberBedrooms||null,bathrooms_number:u.numberBathrooms||null,balconies_number:u.numberBalconies||null,has_service_bedroom:u.serviceBedroom||null,has_integral_kitchen:u.integralKitchen||null,has_study:u.study||null,state:u.state||null,construction_companies_id:u.builder||null,project_state_id:(null===(l=I.find((function(e){var t,n;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().trim())==(null===(n=u.projectStatus)||void 0===n?void 0:n.toLowerCase().trim())})))||void 0===l?void 0:l.id)||null,project_type_id:u.projectType||null,marketer_company:u.marketer||null,price_range_id:u.priceRange||null},C(Jc(y,j,function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:e.sent.error?Object(P.c)("\xa1UPS! Ha ocurrido un error."):(Object(P.f)("Control de competencia actualizado con \xe9xito."),C(Yc()),t.resetFields(),i(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Te.a,{className:"site-page-header",onBack:function(){return window.history.back()},title:"Editar control de competencia",style:{marginLeft:"-25px"},children:Object(h.jsx)(w.a,{style:{borderColor:"black"},children:Object(h.jsx)(T.a,{gutter:{xs:8,sm:16,md:24,lg:24},children:Object(h.jsx)(N.a,{className:"gutter-row",span:24,children:c?Object(h.jsx)(d.Redirect,{to:"/projects/control-powers"}):Object(h.jsx)(g.a,{form:t,layout:"vertical",onFinish:A,style:{marginLeft:"27px",marginRight:"27px"},initialValues:{state:!0},children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(li,{controlCompetencesDatabase:u,itemStyle:F,calculatePercentageUnitsSold:function(){var e=u._payload;return 100*(null===e||void 0===e?void 0:e.sold_units)/(null===e||void 0===e?void 0:e.total_units)},projectStates:I}),Object(h.jsx)(di,{itemStyle:F}),Object(h.jsx)(ui,{itemStyle:F}),Object(h.jsx)(J.a,{}),Object(h.jsx)(g.a.Item,{style:{marginTop:20},children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{position:"absolute",right:1,top:20},children:"Enviar"})})]})})})})})})})},hp=function(){return Object(h.jsx)(Op,{})},xp={0:"Enero",1:"Febrero",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre",10:"Noviembre",11:"Diciembre"},vp=function(){var e={0:"Ene-",1:"Feb-",2:"Mar-",3:"Abr-",4:"May-",5:"Jun-",6:"Jul-",7:"Ago-",8:"Sep-",9:"Oct-",10:"Nov-",11:"Dic-"},t=function(e){var t=new Date(e),n=t.getMonth(),a=t.getDay(),r=t.getFullYear();return a+" de "+xp[n]+" de "+r},n=function(e){switch(e){case"0":return"";case"1":return" Sencillo";default:return" Doble"}},r=function(e,t){return e.filter((function(e){return e!==t}))},c=Object(a.useState)({discount:[],coupons:[],modified_values:[]}),i=Object(f.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)({valueKit:0,unitValue:0,initialFeeNotFundedPercentage:0,initialFeeFinancedPercentage:0,flatTax:0,constructionTax:0,finishesIncluded:!1}),d=Object(f.a)(l,2),u=d[0],b=d[1],m=Object(a.useState)({name:"",area:0,label:"",estimatedDeliveryDate:"",bedrooms:0,toilets:0,parking:""}),p=Object(f.a)(m,2),O=p[0],h=p[1],x=Object(a.useState)({valueParking:0,valueKit:0,valueOthers:0,heightPremium:0,sightCousin:0}),v=Object(f.a)(x,2),y=v[0],g=v[1],_=Object(a.useState)({valueM:0,tradePolicies:!1,Coupon:!1,initialValue:0,discountFinishes:0,discountCoupons:0,discountCouponsPrevious:0,commercialDiscounts:0,previousCommercialDiscount:0,unitValue:0,includesFinishes:!1}),S=Object(f.a)(_,2),w=S[0],C=S[1],P=Object(a.useState)({initialFeeNotFunded:0,initialFeeNotFundedPercentage:0,initialFeeFinanced:0,initialFeeFinancedPercentage:0,formOfPayments:[{key:0,month:"",value:0,porcentaje:0,tipo:""}],unitValue:0,presentValue:0,commercialDiscounts:0,discountCoupons:0,discountFinishes:0,finishesIncluded:!1}),I=Object(f.a)(P,2),E=I[0],F=I[1],A=Object(a.useState)({initialFeeNotFunded:0,initialFeeNotFundedPercentage:0,initialFeeFinanced:0,initialFeeFinancedPercentage:0,formOfPayments:[{key:0,month:"",value:0,porcentaje:0,tipo:""}],unitValue:0,presentValue:0,commercialDiscounts:0,discountCoupons:0,discountFinishes:0,finishesIncluded:!1,financialDiscountOrIncrease:0}),k=Object(f.a)(A,2),T=k[0],N=k[1],D=Object(a.useState)({mes:0,year:0,mesConstruccion:0,mesPlano:0,mesTotal:0}),R=Object(f.a)(D,2),L=R[0],V=R[1],q=Object(a.useState)({flatTax:0,constructionTax:0}),M=Object(f.a)(q,2),U=M[0],z=M[1];Object(a.useEffect)((function(){G()}),[u]);var G=function(){var e=Object(j.a)({},L),t=u.initialFeeNotFundedPercentage/100*u.unitValue,n=u.initialFeeFinancedPercentage/100*u.unitValue,a=Y(t,L.mesTotal,n/L.mesTotal,u.unitValue,n+t,e),r=Ai(a,void 0,u.flatTax,u.constructionTax),c=Fi(E.presentValue,a,void 0,U.flatTax,U.constructionTax),i=Ai(a,c,U.flatTax,U.constructionTax),o=null===a||void 0===a?void 0:a.filter((function(e){return"Entrega"!==e.month})),s=parseFloat(Di(o)+c),l=-1*Ni(E.unitValue,s);F(Object(j.a)(Object(j.a)({},E),{},{unitValue:u.unitValue,initialFeeNotFunded:t,initialFeeFinanced:n,formOfPayments:JSON.parse(JSON.stringify(a)),presentValue:r,finishesIncluded:u.finishesIncluded})),N(Object(j.a)(Object(j.a)({},T),{},{unitValue:u.unitValue,formOfPayments:JSON.parse(JSON.stringify(a)),presentValue:i,initialFeeNotFunded:parseFloat(JSON.parse(JSON.stringify(t))),initialFeeFinanced:parseFloat(JSON.parse(JSON.stringify(n))),initialFeeNotFundedPercentage:u.initialFeeNotFundedPercentage,financialDiscountOrIncrease:l}))},B=0,Y=function(t,n,a,r,c,i){0==B&&(i.mesPlano=i.mesPlano-1,B++);for(var o=Z(a,r),s=[{key:0,month:"C.I. No Financiada",value:parseFloat(t),porcentaje:parseFloat(Z(t,r)),tipo:i.mesPlano>0?"Presente":"Construccion"}],l=1;l<=parseInt(n);l++)i.mes>11&&(i.mes=0,i.year++),s=s.concat({key:l,month:e[i.mes]+i.year,value:parseFloat(parseFloat(a).toFixed(2)),porcentaje:parseFloat(o),tipo:l>=i.mesPlano?"Construccion":"Presente"}),i.mes++;return s=s.concat({key:parseInt(n)+1,month:"Entrega",value:parseFloat(r)-parseFloat(c),porcentaje:parseFloat(Z(parseFloat(r)-parseFloat(c),parseFloat(r))),tipo:s[s.length-1].tipo})},J=function(e,t,n){var a=e.map((function(e){return t.forEach((function(t){e.month===t.month&&(e.value=parseFloat(t.value),e.porcentaje=Z(e.value,n))})),e}));return a[a.length-1].value=H(a,n),a[a.length-1].porcentaje=Z(a[a.length-1].value,n),a},H=function(e,t){Ei(e);var n=0;return e.forEach((function(e){"Entrega"!==(null===e||void 0===e?void 0:e.month)&&(n+=parseFloat(null===e||void 0===e?void 0:e.value))})),t-n},Z=function(e,t){var n=100*parseFloat(e)/parseFloat(t);return 0===t||0===e||0===t?0:n},Q=function(e){var t=0;return e.map((function(e){"C.I. No Financiada"!==e.month&&"Entrega"!==e.month&&(t+=parseFloat(e.value))})),t};return{project:O,included:y,propertyData:w,response:o,paymentMethodProposedByTheProject:E,paymentMethodProposedByTheClient:T,data:e,setPaymentMethodProposedByTheClient:N,initialization:function(e){var a,r,c,i=e.quotation,o=i.unit,s=o.unit_type,l=s.project,d=Ii(i.way_to_pay.created_at,l.start_build_date,l.estimated_delivery_date,l.payment_relationship_setting.maximum_number_months_finance_initial_fee),u=Y(parseFloat(e.total_unfunded_initial_fee_value),e.amount_dues,parseFloat(e.amount_dues_value),parseFloat(e.value_total_unit),parseFloat(e.total_funded_initial_fee_value)+parseFloat(e.total_unfunded_initial_fee_value),d),m=Y(parseFloat(e.total_unfunded_initial_fee_value),i.way_to_pay.amount_dues,parseFloat(i.way_to_pay.value),parseFloat(e.value_total_unit),parseFloat(e.total_funded_initial_fee_value)+parseFloat(e.total_unfunded_initial_fee_value),d);V(d),z({flatTax:parseFloat(l.sale_parameter.interest_on_plans_percentage)/100,constructionTax:parseFloat(l.sale_parameter.interest_in_construction_percentage)/100}),h({name:l.name,area:parseFloat(s.area),label:o.label,estimatedDeliveryDate:t(l.estimated_delivery_date),bedrooms:parseInt(s.number_rooms),toilets:parseInt(s.bathroom_number),parking:n(o.parking_number)}),b({valueKit:parseFloat(s.finish_kit_value),unitValue:parseFloat(e.value_total_unit),initialFeeNotFundedPercentage:parseInt(l.payment_relationship_setting.initial_fee_promise_signature_trust_percentage),initialFeeFinancedPercentage:parseInt(l.payment_relationship_setting.initial_fee_finance_in_construction_percentage),flatTax:parseFloat(l.sale_parameter.interest_on_plans_percentage)/100,constructionTax:parseFloat(l.sale_parameter.interest_in_construction_percentage)/100,finishesIncluded:"1"===e.finishes_included}),g({valueParking:(a=o.parking,r=l.sale_parameter,c=o.parking_number,0!==parseInt(c)?"1"===a?parseFloat(r.simple_parking_value):parseFloat(r.double_parking_value):0),valueKit:parseFloat(s.finish_kit_value),valueOthers:parseFloat(s.value_other_additional),heightPremium:parseFloat(o.bonus_view),sightCousin:parseFloat(o.bonus_height)}),C({valueM:parseFloat(e.value_m2),tradePolicies:!1,Coupon:!1,initialValue:parseFloat(i.value_initial_unit),discountFinishes:parseFloat(s.finish_kit_value),discountCoupons:parseFloat(e.value_coupons),discountCouponsPrevious:0,commercialDiscounts:parseFloat(e.value_discounts),previousCommercialDiscount:0,unitValue:parseFloat(e.value_total_unit),includesFinishes:"0"!==e.finishes_included});var p=Ai(m,void 0,parseFloat(l.sale_parameter.interest_on_plans_percentage)/100,parseFloat(l.sale_parameter.interest_in_construction_percentage)/100);F(Object(j.a)(Object(j.a)({},E),{},{initialFeeNotFunded:parseFloat(e.total_unfunded_initial_fee_value),initialFeeNotFundedPercentage:parseInt(l.payment_relationship_setting.initial_fee_promise_signature_trust_percentage),initialFeeFinanced:parseFloat(e.total_funded_initial_fee_value),initialFeeFinancedPercentage:parseInt(l.payment_relationship_setting.initial_fee_finance_in_construction_percentage),unitValue:parseFloat(e.value_total_unit),presentValue:p,commercialDiscounts:parseFloat(e.value_discounts),discountCoupons:parseFloat(e.value_coupons),discountFinishes:s.finish_kit_value,finishesIncluded:"1"===e.finishes_included,financialDiscountOrIncrease:0,formOfPayments:m}));var f=J(JSON.parse(JSON.stringify(u)),i.way_to_pay.way_to_pay_amounts,parseFloat(e.value_total_unit)),O=Fi(E.presentValue,m,void 0,U.flatTax,U.constructionTax),x=Ai(m,O,U.flatTax,U.constructionTax),v=null===m||void 0===m?void 0:m.filter((function(e){return"Entrega"!==e.month})),y=parseFloat(Di(v)+O),_=-1*Ni(E.unitValue,y),S=Q(f);N(Object(j.a)(Object(j.a)({},T),{},{initialFeeNotFunded:parseFloat(e.total_unfunded_initial_fee_value),initialFeeNotFundedPercentage:parseFloat(l.payment_relationship_setting.initial_fee_promise_signature_trust_percentage),initialFeeFinanced:Math.round(S),initialFeeFinancedPercentage:Z(Math.round(S),parseFloat(e.value_total_unit)),unitValue:parseFloat(e.value_total_unit),presentValue:parseFloat(x),commercialDiscounts:parseFloat(e.value_discounts),discountCoupons:parseFloat(e.value_coupons),discountFinishes:s.finish_kit_value,finishesIncluded:"1"===e.finishes_included,financialDiscountOrIncrease:_,formOfPayments:JSON.parse(JSON.stringify(f))}))},changeStateTableIncluded:function(){C(Object(j.a)(Object(j.a)({},w),{},{tradePolicies:!w.tradePolicies}))},onChangeKit:function(e){var t=Object(j.a)({},w);e.target.checked?t.unitValue=t.unitValue+y.valueKit:t.unitValue=t.unitValue-y.valueKit,t.includesFinishes=e.target.checked,C(t),b(Object(j.a)(Object(j.a)({},u),{},{unitValue:parseFloat(JSON.parse(JSON.stringify(t.unitValue))),finishesIncluded:e.target.checked}))},changeStateTableCoupon:function(){C(Object(j.a)(Object(j.a)({},w),{},{Coupon:!w.Coupon}))},recalculatePaymentPlan:function(){G()},discountsSet:function(e,t,n,a){var c=[],i=[];o.coupons!==[]&&(i=o.coupons),o.discount!==[]&&(c=o.discount);var l=Object(j.a)({},o),d=Object(j.a)({},w),m=parseFloat(e)*parseFloat(O.area);"Valor m2"===a&&(n?(c.push(t),d.valueM=d.valueM-parseFloat(e),d.unitValue=d.unitValue-m,d.commercialDiscounts+=parseFloat(m)):(c=r(l.discount,t),d.valueM=d.valueM+parseFloat(e),d.unitValue=d.unitValue+m,d.commercialDiscounts-=parseFloat(m))),"Valor total"===a&&(n?(c.push(t),d.unitValue=d.unitValue-parseFloat(e),d.commercialDiscounts+=parseFloat(e)):(c=r(l.discount,t),d.unitValue=d.unitValue+parseFloat(e),d.commercialDiscounts-=parseFloat(e))),"Cupon"===a&&(n?(i.push(t),d.discountCoupons+=parseFloat(e),d.unitValue=d.unitValue-parseFloat(e)):(i=r(l.coupons,t),d.discountCoupons-=parseFloat(e),d.unitValue=d.unitValue+parseFloat(e))),l.discount=c,l.coupons=i,s(l),C(d),b(Object(j.a)(Object(j.a)({},u),{},{unitValue:parseFloat(JSON.parse(JSON.stringify(d.unitValue)))}))},selectParking:n,CalculateDelivery:H,modified_values:function(e){var t=Object(j.a)({},o);t.modified_values=e,s(t)},calculatePor:Z,calculatePresentValueByTheClient:function(e,t){var n=Fi(E.presentValue,e,void 0,U.flatTax,U.constructionTax),a=Ai(e,n,U.flatTax,U.constructionTax),r=null===e||void 0===e?void 0:e.filter((function(e){return"Entrega"!==e.month})),c=parseFloat(Di(r)+n),i=-1*Ni(E.unitValue,c),o=Math.round(Q(e)),s=Z(o,parseFloat(E.unitValue));N(Object(j.a)(Object(j.a)({},T),{},{presentValue:a,financialDiscountOrIncrease:i,initialFeeFinanced:o,unitValue:Math.round(c),initialFeeFinancedPercentage:s,formOfPayments:e,finishesIncluded:u.finishesIncluded}))}}},yp=Object(a.createContext)(null),gp=function(){var e=Object(a.useContext)(yp),t=e.paymentMethodProposedByTheProject,n=e.paymentMethodProposedByTheClient;return Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Jd,{paymentMethodProposedByTheProject:t})}),Object(h.jsx)(N.a,{span:1}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Jd,{paymentMethodProposedByTheProject:n})})]})})},_p=function(){var e=Object(a.useContext)(yp),t=e.project,n=e.included,r=e.propertyData,c=e.changeStateTableIncluded,i=e.changeStateTableCoupon,o=e.onChangeKit,s=e.recalculatePaymentPlan;return Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(zd,{project:t})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(Bd,{included:n})}),Object(h.jsx)(N.a,{xs:24,sm:24,md:8,lg:8,xl:8,children:Object(h.jsx)(Md,{propertyData:r,changeStateTableIncluded:c,changeStateTableCoupon:i,onChangeKit:o,recalculatePaymentPlan:s})})]})})},Sp=function(){var e=Object(a.useContext)(yp),t=e.discountsSet,n=e.coupon,r=e.propertyData,c=e.info,i=e.Project;return Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:12,children:r.tradePolicies&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:" solid rgb(235, 237, 240);"},title:"Descuentos comerciales"}),Object(h.jsx)(bl,{Project:i,Discoun:t})]})}),Object(h.jsx)(N.a,{span:12,children:r.Coupon&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Te.a,{style:{border:" solid rgb(235, 237, 240);"},title:"Descuentos cupones"}),Object(h.jsx)(dl,{Discoun:t,Precie:r.unitValue,dataSource:n,ProjectId:c.ProjectId,CustomerId:c.CustomerId})]})})]})})},wp=["Ene-","Feb-","Mar-","Abr-","May-","Jun-","Jul-","Ago-","Sep-","Oct-","Nov-","Dic-"],Cp=function(e){var t=Object(a.useContext)(yp),n=t.paymentMethodProposedByTheClient,r=t.paymentMethodProposedByTheProject,c=t.setPaymentMethodProposedByTheClient,i=t.calculatePor,o=t.numberOfMonthsP,s=t.calculatePresentValueByTheClient,l=t.cutoffDate,d=t.payment_relationship_setting,u=Object(a.useState)([]),b=Object(f.a)(u,2),m=b[0],p=b[1],O=Object(a.useState)(0),x=Object(f.a)(O,2),v=x[0],y=x[1],g=Object(a.useState)(0),_=Object(f.a)(g,2),w=_[0],C=_[1],I=Object(a.useState)(0),E=Object(f.a)(I,2),F=E[0],A=E[1],k=vp(),T=k.CalculateDelivery,N=k.data;Object(a.useEffect)((function(){0!==n.formOfPayments.length&&A(o)}),[n]),Object(a.useEffect)((function(){q()}),[n.formOfPayments]),Object(a.useEffect)((function(){s(n.formOfPayments,v)}),[v]);var D=function(){var e=Object(Qi.a)(n.formOfPayments);C(w-1);var t=e.pop();e.pop(),e[e.length-1].key!==F&&(e[e.length-1].new=1),e.push(t),c(Object(j.a)(Object(j.a)({},n),{},{formOfPayments:e}))},L=function(){var e=Object(Qi.a)(n.formOfPayments),t=parseInt(null===d||void 0===d?void 0:d.maximum_number_months_finance_initial_fee);if(e.length<=t+1){var a=0,r=e.pop(),i=e[e.length-1].key+1,o=function(){var e,t,a=null===(e=n.formOfPayments[n.formOfPayments.length-2])||void 0===e||null===(t=e.month)||void 0===t?void 0:t.split("-");if(Array.isArray(a)){if(3===a.length){var r=a[0],c=0,i=parseInt(a[2]),o=l;return wp.forEach((function(e){e.includes(r)&&(c=wp.indexOf(e)+1)})),{month:c,cutoff_date:o,year:i}}var s=a[0],d=0,u=parseInt(a[1]);return wp.forEach((function(e){e.includes(s)&&(d=wp.indexOf(e)+1)})),{month:d,year:u}}}();12===o.month?(o.month=0,o.year++):o.month>12&&o.month<=23?(a=o.month-12,o.month=a,o.year++):o.month>=24&&(a=o.month-24,o.month=a,o.year=o.year+2),e.forEach((function(e){e.new=0})),o.cutoff_date?e.push({key:i,month:N[o.month]+o.cutoff_date+"-"+o.year,value:0,porcentaje:0,new:1,idMonth:o.month}):e.push({key:i,month:N[o.month]+o.year,value:0,porcentaje:0,new:1,idMonth:o.month}),i++,r.key=i,e.push(r),c(Object(j.a)(Object(j.a)({},n),{},{formOfPayments:e}))}else Object(P.g)("N\xfamero m\xe1ximo de cuotas alcanzado")},V=[{title:"N\xfamero de Cuota",dataIndex:"month",width:80,render:function(e,t){return M(t)}},{title:"Valor",dataIndex:"value",width:80,render:function(e,t){return z(t)}},{title:"Porcentaje",dataIndex:"porcentaje",width:80,render:function(e,t){return G(t)}}],q=function(){var e=T(n.formOfPayments,r.unitValue);return y(e),e},M=function(e){var t=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Agregar "});return Object(h.jsx)(h.Fragment,{children:"C.I. No Financiada"===e.month?e.month:"Entrega"===e.month?Object(h.jsxs)("div",{style:{width:"100%",display:"flex",textAlign:"center"},children:[Object(h.jsx)("div",{style:{width:"30%",borderRight:"1px solid #f0f0f0"},children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{size:"small",type:"primary",disabled:n.formOfPayments.length===(null===d||void 0===d?void 0:d.maximum_number_months_finance_initial_fee),onClick:L,icon:Object(h.jsx)(De.a,{})})})}),Object(h.jsx)("div",{style:{width:"70%"},children:e.month})]}):Object(h.jsxs)("div",{style:{width:"100%",display:"flex",textAlign:"center"},children:[Object(h.jsx)("div",{style:{width:"30%",borderRight:"1px solid #f0f0f0"},children:e.key}),Object(h.jsx)("div",{style:{width:"70%"},children:e.month})]})})},U=function(e,t){var a=Object(Qi.a)(n.formOfPayments);if(0===m.length){var r=[{id:a[e].id,month:a[e].month,value:parseFloat(t)}];p(r)}else{var c=m,i=!1;if(c.forEach((function(n){n.month===a[e].month&&(n.value=parseFloat(parseFloat(t).toFixed(2)),i=!0)})),!i){var o={id:a[e].id,month:a[e].month,value:t};c.push(o)}p(c)}},z=function(e){var t=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Limpiar "});return Object(h.jsx)(h.Fragment,{children:0===n.formOfPayments.length?Object(h.jsx)(h.Fragment,{}):"Entrega"===e.month?Zo.format(v):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ut.a,Object(j.a)(Object(j.a)({},R.rc),{},{onChange:function(t){return function(e,t){var a=Object(Qi.a)(n.formOfPayments);a.forEach((function(n){n.key===t.key&&(n.porcentaje=i(parseFloat(e),r.unitValue),n.value=parseFloat(e),q())})),a.forEach((function(e){"Entrega"===e.month&&(e.porcentaje=i(q(),r.unitValue))})),U(t.key,t.value),c(Object(j.a)(Object(j.a)({},n),{},{formOfPayments:a}))}(t,e)},style:{width:"80%"},name:e.key,value:n.formOfPayments[n.formOfPayments.indexOf(e)].value,size:"small"})),Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{size:"small",onClick:function(){!function(e){var t=Object(Qi.a)(n.formOfPayments);t.forEach((function(t){t.key===e&&(q(t.value),t.porcentaje=i(0,r.unitValue),t.value=0)})),t.forEach((function(e){"Entrega"===e.month&&(e.porcentaje=i(q(),r.unitValue))})),U(e,0),c(Object(j.a)(Object(j.a)({},n),{},{formOfPayments:t}))}(e.key)},type:"danger",icon:Object(h.jsx)(Xt.a,{})})})]})})},G=function(e){var t=Object(h.jsx)("span",{style:{color:"#6A6963"},children:" Remover "});return Object(h.jsx)(h.Fragment,{children:1===e.new?Object(h.jsxs)("div",{style:{width:"100%",display:"flex",textAlign:"center"},children:[Object(h.jsx)("div",{style:{width:"70%"},children:parseFloat(e.porcentaje).toFixed(2)+" %"}),Object(h.jsx)("div",{style:{width:"30%",borderRight:"1px solid #f0f0f0"},children:Object(h.jsx)(de.a,{placement:"left",color:"#ffffff",title:t,children:Object(h.jsx)(S.a,{size:"small",type:"primary",onClick:D,icon:Object(h.jsx)(ab.a,{})})})})]}):Object(h.jsx)("div",{style:{width:"100%",display:"flex",textAlign:"center"},children:Object(h.jsx)("div",{style:{width:"70%"},children:parseFloat(e.porcentaje).toFixed(2)+" %"})})})};return 0===n.formOfPayments.length?null:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q.a,{bordered:!0,title:function(){return""},columns:V,dataSource:Object(ce.a)(n.formOfPayments),pagination:!1,size:"small"})})},Pp=function(){var e=Object(a.useContext)(yp),t=e.paymentMethodProposedByTheProject,n=e.paymentMethodProposedByTheClient;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Yd,{title:"Forma de pago propuesta por el proyecto",quote:t})}),Object(h.jsx)(N.a,{span:1}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Yd,{quote:n,title:"Forma de Pago propuesta por el cliente"})})]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(T.a,{gutter:2,children:[Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)($s,{amountOfFees:t.formOfPayments})}),Object(h.jsx)(N.a,{span:1}),Object(h.jsx)(N.a,{span:11,children:Object(h.jsx)(Cp,{})})]})})]})},Ip=function(){var e=Object(d.useParams)().id,t=g.a.useForm(),n=Object(f.a)(t,1)[0],r=Object(s.d)(),c=Object(a.useState)(!1),i=Object(f.a)(c,2),l=i[0],u=i[1],j=Object(a.useState)({ProjectId:0,CustomerId:0}),b=Object(f.a)(j,2),O=b[0],x=b[1],v=Object(a.useState)([]),y=Object(f.a)(v,2),_=y[0],C=y[1],I=Object(a.useState)([]),E=Object(f.a)(I,2),F=E[0],A=E[1],k=Object(a.useState)(0),D=Object(f.a)(k,2),L=D[0],V=D[1],q=Object(a.useState)(0),M=Object(f.a)(q,2),U=M[0],z=M[1],G=Object(a.useState)([]),B=Object(f.a)(G,2),Y=B[0],H=B[1],Z=vp(),Q=Z.project,K=Z.included,W=Z.propertyData,X=Z.response,$=Z.paymentMethodProposedByTheProject,ee=Z.paymentMethodProposedByTheClient,te=Z.setPaymentMethodProposedByTheClient,ne=Z.initialization,ae=Z.changeStateTableIncluded,re=Z.onChangeKit,ce=Z.changeStateTableCoupon,ie=Z.recalculatePaymentPlan,oe=Z.discountsSet,se=Z.calculatePor,le=Z.calculatePresentValueByTheClient;Object(a.useEffect)((function(){r(function(e,t,n){return{type:R.O,payload:{method:"GET",headers:R.hg,url:"".concat(R.Ne,"/sales2/").concat(e),postProcessSuccess:t,postProcessError:n}}}(e,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._payload;case 2:n=e.sent,ne(n),x({CustomerId:n.customer_id,ProjectId:n.quotation.unit.unit_type.project_id}),A(n.quotation.unit.unit_type.project),C(n.coupons),H(n.quotation.unit.unit_type.project.payment_relationship_setting),V(parseInt(n.amount_dues)),z(parseInt(n.cutoff_date));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var de=function(){var t=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={valueTotalUnit:$.unitValue,valueM2:W.valueM,valueCoupons:$.discountCoupons,coupons:X.coupons,valueDiscounts:$.commercialDiscounts,discounts:X.discounts,amounts:X.modified_values,valuePresented:$.presentValue,amountDues:ee.formOfPayments.length,amountDuesValue:$.formOfPayments[1].value},r(Ro(e,n,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:(n=e.sent).error?Object(P.c)(n.message):(Object(P.f)(n.message),u(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return l?Object(h.jsx)(d.Redirect,{exact:!0,to:"/sales/sales-made"}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Te.a,{title:"Editar Venta",extra:[Object(h.jsxs)(o.b,{to:"/sales/sales-made",style:{backgroundColor:"#1890ff",padding:8,borderRadius:2,color:"#ffffff"},children:["Ventas ",Object(h.jsx)(ml.a,{style:{fontSize:20}})]},"1")],children:Object(h.jsx)(w.a,{style:{marginRight:20},children:Object(h.jsxs)(g.a,{name:"FormQuoteUpdate",layout:"vertical",form:n,onFinish:de,children:[Object(h.jsxs)(yp.Provider,{value:{paymentMethodProposedByTheProject:$,paymentMethodProposedByTheClient:ee,project:Q,included:K,propertyData:W,changeStateTableIncluded:ae,changeStateTableCoupon:ce,onChangeKit:re,recalculatePaymentPlan:ie,discountsSet:oe,info:O,coupon:_,setPaymentMethodProposedByTheClient:te,calculatePor:se,numberOfMonthsP:L,calculatePresentValueByTheClient:le,cutoffDate:U,payment_relationship_setting:Y,Project:F},children:[Object(h.jsx)(_p,{}),Object(h.jsx)(Sp,{}),Object(h.jsx)(J.a,{}),Object(h.jsx)(Pp,{}),Object(h.jsx)(gp,{}),Object(h.jsx)(J.a,{})]}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(N.a,{span:20}),Object(h.jsx)(N.a,{span:4,children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{type:"primary",htmlType:"submit",style:{marginLeft:"5%",backgroundColor:"#5cb85c",borderColor:"#5cb85c"},children:"Guardar"})})})]})]})})})})},Ep=function(){return Object(h.jsx)(Ip,{})},Fp=function(){return Object(h.jsxs)(d.Switch,{children:[Object(h.jsx)(d.Route,{exact:!0,path:"/dashboard",component:Ot}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/profiles",component:nn}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/users",component:Nn}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/advisers",component:Kn}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/general-activities",component:oa}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/affiliates",component:ma}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/places-of-care",component:Pa}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/channels",component:za}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/record-type",component:Za}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/type-activities",component:ir}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/occupation",component:jr}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/price-range",component:wr}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/advertising-images",component:Nr}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/modules",component:$r}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/system-audit",component:ic}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/mistakes",component:uc}),Object(h.jsx)(d.Route,{exact:!0,path:"/settings/general-settings",component:xc}),Object(h.jsx)(d.Route,{exact:!0,path:"/projects",component:Tc,children:null}),Object(h.jsx)(d.Route,{exact:!0,path:"/projects/new-project",component:Bc}),Object(h.jsx)(d.Route,{exact:!0,path:"/projects/edit-project/:id",component:fp}),Object(h.jsx)(d.Route,{exact:!0,path:"/projects/control-powers",component:ri}),Object(h.jsx)(d.Route,{exact:!0,path:"/projects/new-control-competences",component:bi}),Object(h.jsx)(d.Route,{exact:!0,path:"/projects/edit-control-competences/:id",component:hp}),Object(h.jsx)(d.Route,{exact:!0,path:"/customer/client",component:Pi}),Object(h.jsx)(d.Route,{exact:!0,path:"/customer/customer-tracking/:id",component:ns}),Object(h.jsx)(d.Route,{exact:!0,path:"/customer/customer-tracking",component:ns}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/quotes",component:ys}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/new-quotes",component:El}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/sales-made",component:pd}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/update-sales-made/:id",component:Ep}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/reform-requests",component:hd}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/after-sales",component:yd}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/coupons",component:Ed}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/commission-verification",component:Vd}),Object(h.jsx)(d.Route,{exact:!0,path:"/sales/update-quote/:id",component:Zd}),Object(h.jsx)(d.Route,{exact:!0,path:"/collections/direct-collections",component:mu}),Object(h.jsx)(d.Route,{exact:!0,path:"/collections/trust-funds",component:Fu}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/sales-report",component:Tu}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/sales-plan",component:Vu}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/competition-report",component:Ju}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/reform-report",component:Ku}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/activity-tracking",component:nj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/potential-customers",component:dj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/account-status-report",component:vj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/legalization-and-deed-report",component:gj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/collection-flow-report",component:Sj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/portfolio-monitoring-report",component:Cj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/committee-report",component:Ej}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/general-commercial-management-report",component:kj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/advisory-management-report",component:Vj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/advertising-effectiveness-report",component:Uj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/buyers-database",component:Gj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/potential-clients-database",component:Hj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/project-management-report",component:Qj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/audit-report",component:Wj}),Object(h.jsx)(d.Route,{exact:!0,path:"/report/commissions-payment-minutes",component:nb}),Object(h.jsx)(d.Redirect,{to:"/dashboard"})]})},Ap=(n(307),n(99)),kp=n(650),Tp=n(651),Np=n(652),Dp=n(653),Rp=n(654),Lp=k.a.Sider,Vp=Ap.a.SubMenu,qp=function(){var e=Object(s.d)(),t=localStorage.getItem("colorMenu"),n=localStorage.getItem("colorIcon"),r=JSON.parse(localStorage.getItem("USER_INFO")).id,c=Object(a.useState)(!0),i=Object(f.a)(c,2),l=i[0],d=i[1],u=Object(a.useState)([]),j=Object(f.a)(u,2),b=j[0],x=j[1],g=Object(a.useState)(!1),_=Object(f.a)(g,2),S=_[0],w=_[1],C=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.generalSetting._payload})),P=Object(a.useState)(v),I=Object(f.a)(P,2),E=I[0],F=I[1],A=Object(a.useState)(t),T=Object(f.a)(A,2),N=T[0],D=T[1],L=Object(a.useState)(n),V=Object(f.a)(L,2),q=V[0],M=V[1];function U(e){switch(e){case"dashboard":return Object(h.jsx)(kp.a,{style:{color:"".concat(q)}});case"setting":return Object(h.jsx)(uu.a,{style:{color:"".concat(q)}});case"project":return Object(h.jsx)(Tp.a,{style:{color:"".concat(q)}});case"user":return Object(h.jsx)(Np.a,{style:{color:"".concat(q)}});case"creditCard":return Object(h.jsx)(Gl.a,{style:{color:"".concat(q)}});case"dollarCircle":return Object(h.jsx)(Os.a,{style:{color:"".concat(q)}});case"barChart":return Object(h.jsx)(Dp.a,{style:{color:"".concat(q)}});default:return Object(h.jsx)(Rp.a,{style:{color:"".concat(q)}})}}Object(a.useEffect)((function(){e(mc())}),[]),Object(a.useEffect)((function(){(null===C||void 0===C?void 0:C.logo_app)&&F(null===C||void 0===C?void 0:C.logo_app),(null===C||void 0===C?void 0:C.menu_bar_color)&&D(null===C||void 0===C?void 0:C.menu_bar_color),(null===C||void 0===C?void 0:C.icon_color)&&M(null===C||void 0===C?void 0:C.icon_color)}),[C]),Object(a.useEffect)((function(){w(!0),e(function(e,t,n){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/module/get_by_user/").concat(e),success:function(e){return fn(e)},postProcessSuccess:t,postProcessError:n}}}(r,function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,w(!1),n.error||x(n._payload);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e(function(e,t,n){return{type:R.O,payload:{method:"GET",url:"".concat(R.Ne,"/permissions/get_by_user/").concat(e),success:function(e){return On(e)},postProcessSuccess:t,postProcessError:n}}}(r))}),[]);var z=null===b||void 0===b?void 0:b.map((function(e,t){var n;if(0===(null===e||void 0===e||null===(n=e.sub_modules)||void 0===n?void 0:n.length)){var a,r=null!==(a=e.route_front)&&void 0!==a?a:"";return Object(h.jsx)(Ap.a.Item,{icon:U(e.icon),children:Object(h.jsx)(o.b,{to:r,children:e.name})},t)}var c,i=[];return null===(c=e.sub_modules)||void 0===c||c.map((function(e,n){var a,r=null!==(a=null===e||void 0===e?void 0:e.route_front)&&void 0!==a?a:"";i.push(Object(h.jsx)(Ap.a.Item,{children:Object(h.jsx)(o.b,{to:r,children:e.name})},n+"-"+t))})),Object(h.jsx)(Vp,{style:{background:"".concat(N),color:"".concat(q)},icon:U(e.icon),title:e.name,children:i},t)}));return Object(h.jsx)(k.a,{children:Object(h.jsxs)(Lp,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0,paddingTop:2,zIndex:202,background:"".concat(N),fontFamily:"sans-serif"},collapsible:!0,collapsed:l,onCollapse:function(){d(!l)},className:"menu",children:[Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)(y.a,{width:"100%",src:E,preview:!1})}),S?Object(h.jsx)(O.a,{style:{paddingLeft:"30%"},spinning:!0,size:"large"}):Object(h.jsx)(Ap.a,{style:{background:"".concat(N),fontFamily:"Segoe UI"},theme:"dark",mode:"inline",children:z})]})})},Mp=k.a.Footer,Up=function(){var e=new Date(Date.now());return Object(h.jsxs)(Mp,{style:{textAlign:"center",color:"#fff",backgroundColor:"#212529",width:"100%",height:48,position:"fixed",bottom:0,zIndex:99},children:["\xa9 2014-",e.getFullYear().toString()," GPI Constructores. Todos los derechos reservados."]})},zp={required:"${label} es requerido",types:{email:"${label} debe ser un correo v\xe1lido",number:"${label} no puede contener letras."},number:{range:"${label} debe estar entre ${min} y ${max}"}},Gp=function(){var e=Object(s.d)(),t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=g.a.useForm(),o=Object(f.a)(i,1)[0],l=Object(a.useState)(""),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(""),O=Object(f.a)(b,2),x=O[0],v=O[1],y={password:u,newPassword:x,userId:JSON.parse(localStorage.getItem("USER_INFO")).id},w=function(){c(!1)},C=function(){o.resetFields()},I=function(){var t=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((n=y,a=function(e){e.error||(Object(P.f)("Contrase\xf1a cambiada correctamente"),C(),w(),C())},r=void 0,{type:R.O,payload:{method:"POST",url:"".concat(R.Ne,"/user/changePassword"),data:n,success:function(e){return bn(e)},postProcessSuccess:a,postProcessError:r}}));case 1:case"end":return t.stop()}var n,a,r}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S.a,{onClick:function(){c(!0)},type:"dashed",children:"Cambiar Contrase\xf1a"}),Object(h.jsx)(ue.a,{title:"Cambio de contrase\xf1a",centered:!0,visible:r,footer:!1,onCancel:function(){return c(!1)},width:500,form:o,children:Object(h.jsxs)(g.a,{layout:"vertical",onFinish:I,size:"middle",validateMessages:zp,form:o,children:[Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{name:"password-actually",label:"Contrase\xf1a Actual",rules:[{required:!0,message:"Contrase\xf1a actual es requerida"}],value:u,onChange:function(e){return j(e.target.value)},children:Object(h.jsx)(_.a.Password,{style:{width:"100%"}})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{name:"password",label:"Password",rules:[{min:7,max:11,required:!0}],hasFeedback:!0,children:Object(h.jsx)(_.a.Password,{placeholder:"Contrase\xf1a",value:x,onChange:function(e){return v(e.target.value)}})})})}),Object(h.jsx)(T.a,{gutter:16,children:Object(h.jsx)(N.a,{span:24,children:Object(h.jsx)(g.a.Item,{name:"confirmPassword",label:"Confirm password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Por favor confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject(new Error("Las dos contrase\xf1as deben ser iguales")):Promise.resolve()}}}],children:Object(h.jsx)(_.a.Password,{placeholder:"Repita contrase\xf1a"})})})}),Object(h.jsx)(T.a,{children:Object(h.jsx)(N.a,{children:Object(h.jsx)(g.a.Item,{children:Object(h.jsx)(S.a,{style:{marginTop:"10px"},type:"primary",htmlType:"submit",children:"Guardar"})})})})]})})]})},Bp=n(655),Yp=Hm.a.Text,Jp=k.a.Header,Hp=function(e){var t=e.isLoggedIn,n=e.onLogout,r=e.nameUser,c=e.profile,i=Object(s.d)(),l=Object(a.useState)([]),d=Object(f.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(null),m=Object(f.a)(b,2),p=m[0],O=m[1],x=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.customer}));Object(a.useEffect)((function(){i($e())}),[i]),Object(a.useEffect)((function(){Array.isArray(x._payload)&&(null!==x.message?j([]):j(x._payload))}),[x]);var v=Object(h.jsxs)("div",{children:[Object(h.jsx)(Yp,{type:"secondary",children:c}),Object(h.jsx)(J.a,{style:{marginTop:"10px",marginBottom:"10px"}}),Object(h.jsx)(Gp,{})]});return Object(h.jsx)(Jp,{className:"header",theme:"light",style:{position:"fixed",zIndex:102,width:"100%",marginLeft:80},children:Object(h.jsxs)(T.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(h.jsx)(N.a,{xs:4,sm:4,md:4,lg:6,xl:6}),Object(h.jsx)(N.a,{xs:8,sm:8,md:8,lg:8,xl:8,className:"gutter-row",style:{display:"inline-flex",alignItems:"center"},children:Ae(R.Fb)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(g.a.Item,{style:{width:"100%"},name:"headerSearchCustomer",children:Object(h.jsxs)(dt.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},placeholder:"Seleccione...",onChange:O,children:[Object(h.jsx)(dt.a.Option,{value:"",children:"Seleccionar"}),u.length>0&&u.map((function(e){return Object(h.jsx)(dt.a.Option,{value:e.id,children:e.name})}))]})}),Object(h.jsx)(g.a.Item,{children:Object(h.jsxs)(o.b,{to:"/customer/customer-tracking/".concat(p),children:[" ",Object(h.jsx)(S.a,{disabled:!p,style:{marginLeft:10},type:"primary",children:"Buscar"})," "]})})]}):Object(h.jsx)(h.Fragment,{})}),Object(h.jsx)(N.a,{className:"gutter-row",span:8,children:Object(h.jsxs)("div",{alignitems:"center",style:{float:"right"},children:[Object(h.jsx)("h6",{className:"p-3",style:{display:"inline"},children:r}),Object(h.jsx)(Z.a,{placement:"bottom",title:r,content:v,trigger:"click",children:Object(h.jsx)(S.a,{shape:"circle",icon:Object(h.jsx)(Np.a,{style:{fontSize:20}})})}),t&&Object(h.jsx)(S.a,{onClick:n,style:{marginLeft:5,marginRight:10,background:"none",border:"none"},shape:"circle",icon:Object(h.jsx)(Bp.a,{style:{fontSize:20}})})]})})]})})},Zp=k.a.Content,Qp=Object(s.b)((function(e){return{user:e.user}}),(function(e){return{dispatchLogoutAction:function(){return e(Object(C.b)())}}}))((function(e){var t=e.user,n=e.dispatchLogoutAction;return Object(h.jsx)(a.Fragment,{children:Object(h.jsxs)(k.a,{children:[Object(h.jsx)(qp,{}),Object(h.jsxs)(k.a,{children:[Object(h.jsx)(Hp,{isLoggedIn:t.isLoggedIn,onLogout:n,nameUser:t.name,profile:t.profile}),Object(h.jsx)(Zp,{style:{padding:"93px 30px 50px 100px",overflow:"initial"},children:Object(h.jsx)(Fp,{})}),Object(h.jsx)(Up,{})]})]})})})),Kp=function(){return Object(h.jsx)(Qp,{})},Wp=(n(565),Object(s.b)((function(e){return{isLoading:e.loading}}))((function(e){var t=e.isLoading;return Object(h.jsx)(r.a.Fragment,{children:t?Object(h.jsx)("div",{id:"spinner-fade",children:Object(h.jsx)("div",{className:"default-spinner spinner-border",role:"status"})}):null})})));var Xp=function(){var e=Object(s.e)((function(e){return null===e||void 0===e?void 0:e.user}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.b,{position:"top-right",autoClose:2e3,hideProgressBar:!0,transition:u.a}),Object(h.jsx)(Wp,{}),e.token?Object(h.jsx)(d.Switch,{children:Object(h.jsx)(d.Route,{exact:!0,path:"",component:Kp})}):Object(h.jsx)(d.Switch,{children:Object(h.jsxs)(d.Route,{exact:!0,pact:"/login",children:[Object(h.jsx)(A,{}),Object(h.jsx)(d.Redirect,{exact:!0,to:"/login"})]})})]})},$p=n(164),ef={userId:null,email:null,token:null,isLoggedIn:!1},tf=localStorage.getItem("USER_INFO"),nf=tf?JSON.parse(tf):ef;var af={isFetchingAllReformRequest:!1,errorAllReformRequest:!1,isAddingReformRequest:!1,errorAddReformRequest:!1,isUpdatingReformRequest:!1,errorUpdatingReformRequest:!1,isDeletingReformRequest:!1,errorDeletingReformRequest:!1},rf=Object(j.a)({project:{id:void 0,name:void 0,maximum_reforms_date:void 0},reforms_requests:[],customer:{name:void 0,id:void 0},unit:{label:void 0,id:void 0},creator_user:{id:void 0,name:void 0},date_reform_request:null},af);var cf={isFetchingAllPosSale:!1,errorAllPosSale:!1,isFetchingAllPosSaleBySaleId:!1,errorAllPosSaleBySaleId:!1,isAddingPosSale:!1,errorAddPosSale:!1,isUpdatingPosSale:!1,errorUpdatingPosSale:!1,isDeletingPosSale:!1,errorDeletingPosSale:!1},of=Object(j.a)({project:{id:void 0,name:void 0},customer:{name:void 0,id:void 0},unit:{label:void 0,id:void 0},creator_user:{id:void 0,name:void 0},sale:{id:void 0},body_description:null,days_passed:null,date_pos_sale:null,pos_sale_requests:[],all_pos_sale_requests:[]},cf);var sf=Object($p.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nf,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Nf:return Object(j.a)({},t.payload);case R.Me:return ef;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===R.gg?!e:e},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Jf:case R.Ec:return t.payload;case R.I:return e;case R.be:return e._payload.filter((function(e){return e.id!==t.payload}));case R.Hh:return e._payload.map((function(e){return e.id===t.payload.id?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Ch:return e._payload.filter((function(e){return e._id!==t.payload}));case R.Nc:return e;case R.Me:return[];default:return e}},afiliatedCompany:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.bf:return t.payload;case R.e:return e._payload.concat(t.payload);case R.zd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.og:return e._payload.map((function(e){return e._id===t.payload.afilitedCompanyId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.ee:return[];case R.uh:return e._payload.filter((function(e){return e.id!==t.payload}));default:return e}},activityType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Ze:return t.payload;case R.c:return e._payload.concat(t.payload);case R.xd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.jg:return e._payload.map((function(e){return e._id===t.payload.activityTypeId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.ce:return[];case R.rh:return e._payload.filter((function(e){return e._id!==t.payload}));default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.lf:return t.payload;case R.l:return e._payload.concat(t.payload);case"REMOVE_CHANNEL":return e._payload.filter((function(e){return e._id!==t.payload}));case R.vg:return e._payload.map((function(e){return e._id===t.payload.attentionPlaceId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.oe:return[];default:return e}},attentionPlaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.hf:return t.payload;case R.h:return e._payload.concat(t.payload);case R.Fd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.rg:return e._payload.map((function(e){return e._id===t.payload.attentionPlaceId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.vh:return e._payload.filter((function(e){return e._id!==t.payload}));case R.le:return[];default:return e}},occupation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.wf:return t.payload;case R.v:return e._payload.concat(t.payload);case R.Pd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.Lg:return e._payload.map((function(e){return e._id===t.payload.occupationId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.ye:return[];default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Bf:return t.payload;case R.A:return e._payload.concat(t.payload);case R.Td:return e._payload.filter((function(e){return e._id!==t.payload}));case R.ch:return e._payload.map((function(e){return e._id===t.payload.id?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Ah:return e._payload.filter((function(e){return e._id!==t.payload}));case R.oe:return[];default:return e}},registerType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Df:return t.payload;case R.D:return e._payload.concat(t.payload);case R.Wd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.mh:return e._payload.map((function(e){return e._id===t.payload.registerTypeId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Ee:return[];default:return e}},advertisingImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.af:return t.payload;case R.d:return e._payload.concat(t.payload);case R.yd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.mg:return n();case R.de:return[];case R.sh:return e._payload.filter((function(e){return e.id!==t.payload}));default:return e}function n(){var n=e._payload,a=[];return n.forEach((function(e){a.push(e)})),a.map((function(e){return e._id===t.payload.id?Object(j.a)(Object(j.a)({},e),t.payload.data):e}))}},assessor:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case R.cf:return n.payload;case R.f:return null===(e=t._payload)||void 0===e?void 0:e.concat(n.payload);case R.Ad:return t._payload.filter((function(e){return e._id!==n.payload}));case R.qg:return t._payload.map((function(e){return e._id===n.payload.assessorId?Object(j.a)(Object(j.a)({},e),n.payload.data):e}));case R.th:return t._payload.filter((function(e){return e._id!==n.payload}));case R.ge:return[];default:return t}},auditsType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.if:return t.payload;case R.i:return e.concat(t.payload);case R.Gd:return e.filter((function(e){return e._id!==t.payload}));case R.tg:return e.map((function(e){return e._id===t.payload.auditTypeId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.me:return[];default:return e}},caughtErrorAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.kf:return t.payload;case R.k:return e._payload.concat(t.payload);case R.Hd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.ug:return e._payload.map((function(e){return e._id===t.payload.caughtErrorId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.ne:return[];default:return e}},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.nf:return t.payload;case R.o:return e;case R.Kd:var n=e._payload.filter((function(e){return e.id!==t.payload}));return Object(j.a)(Object(j.a)({},e),{},{_payload:n});case R.Bg:return Object(j.a)({},e);case R.xh:return e._payload.filter((function(e){return e._id!==t.payload}));case R.td:return e;case R.re:return[];default:return e}},generalActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.rf:case R.s:case R.Md:case R.Ig:case R.dc:return t.payload._payload;case R.te:return[];default:return e}},generalSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.sf:return t.payload;case R.t:return e._payload;case R.ue:return[];default:return e}},md:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.vf:return t.payload;case R.u:return e._payload.concat(t.payload);case R.Od:return e._payload.filter((function(e){return e._id!==t.payload}));case R.Jg:return e._payload.map((function(e){return e._id===t.payload.moduleId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.yh:return e._payload.filter((function(e){return e._id!==t.payload}));case R.xe:return[];default:return e}},permission:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.yf:return t.payload;case R.x:return e.concat(t.payload);case R.Qd:return e.filter((function(e){return e._id!==t.payload}));case R.Xg:return e.map((function(e){return e._id===t.payload.permissionId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Ae:return[];case R.Kf:case R.Lf:return t.payload;default:return e}},pricesRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.zf:case R.Af:return t.payload;case R.z:return e._payload.concat(t.payload);case R.Sd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.ah:return e._payload.map((function(e){return e._id===t.payload.pricesRangeId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Be:return[];default:return e}},resource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Ef:return t.payload;case R.E:return e.concat(t.payload);case R.Xd:return e.filter((function(e){return e._id!==t.payload}));case R.nh:return e.map((function(e){return e._id===t.payload.resourceId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Fe:return[];default:return e}},systemAudit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Hf:return t.payload;case R.F:return e.concat(t.payload);case R.Zd:return e.filter((function(e){return e._id!==t.payload}));case R.Dh:return e.map((function(e){return e._id===t.payload.systemAuditId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Je:return[];default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Cf:return t.payload;case R.B:return e._payload.concat(t.payload);case R.Ud:return e._payload.filter((function(e){return e._id!==t.payload}));case R.eh:return e._payload.map((function(e){return e._id===t.payload.assessorId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Oc:return e;case R.Ce:return t.payload;default:return e}},projecState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Mf?t.payload:e},controlPower:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.mf:return t.payload;case R.m:return e;case R.Jd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.yg:return e;case R.qe:return[];case R.Ic:return t.payload;default:return e}},paymentRelationshipSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.xf:return t.payload;case R.w:return e;case R.ze:return t.payload;default:return e}},activity:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case R.of:return n.payload;case R.p:return(null===n||void 0===n||null===(e=n.payload)||void 0===e?void 0:e._payload)?[].concat(Object(Qi.a)(t),[n.payload._payload]):t;case R.Cg:return t._payload.map((function(e){return e._id===n.payload.activityId?Object(j.a)(Object(j.a)({},e),n.payload.data):e}));default:return t}},unitType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.If:return t.payload;case R.H:case R.cc:return e._payload.concat(t.payload);case R.g:return Object(j.a)({},e);case R.ae:case R.Ed:return e._payload.filter((function(e){return e._id!==t.payload}));case R.Gh:return e._payload.map((function(e){return e._id===t.payload.assessorId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Le:return t.payload;default:return e}},unit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Xc:return t.payload;case R.Fh:return e._payload.map((function(e){return e._id===t._payload.id?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Ke:return t.payload;default:return e}},sales_Parameter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Ug:return e._payload.map((function(e){return e._id===t.payload.saleParameteId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Vc:case R.He:return t.payload;default:return e}},interestCustomer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Dg?e._payload.map((function(e){return e._id===t.payload.customerId?Object(j.a)(Object(j.a)({},e),t.payload.data):e})):e},builder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.jf:return t.payload;case R.j:default:return e}},increasePolicy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.tf:return t.payload;case R.Tg:case R.Nd:return e;case R.ve:return t.payload;default:return e}},discountPolicy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.pf:return t.payload;case R.Sg:case R.Ld:return e;case R.se:return t.payload;default:return e}},assignedTechnician:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.ff:return t.payload;case R.Pg:return e._payload.map((function(e){return e._id===t.payload.assginedTechnicianId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Dd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.je:return t.payload;default:return e}},assignedSiteDirectos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.ef:return t.payload;case R.Og:return e._payload.map((function(e){return e._id===t.payload.assginedSiteDirectorId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Cd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.ie:return t.payload;default:return e}},assignedCounters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.df:return t.payload;case R.Ng:return e._payload.map((function(e){return e._id===t.payload.assginedCounterId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Bd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.he:return t.payload;default:return e}},saleLegalization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Ff:return t.payload;case R.Vg:return e._payload.map((function(e){return e._id===t.payload.saleLegalizationId?Object(j.a)(Object(j.a)({},e),t.payload.data):e}));case R.Yd:return e._payload.filter((function(e){return e._id!==t.payload}));case R.Ge:return t.payload;default:return e}},comissionParameter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.oc:return t.payload;case R.Rg:return e;case R.Id:return e._payload.filter((function(e){return e._id!==t.payload}));case R.pe:return t.payload;default:return e}},policyToComply:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.pc:case R.fe:return t.payload;default:return e}},coupon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.ac:return t._payload;case R.wc:return t.payload;case R.Gc:return t._payload;default:return e}},quotation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Ac:case R.Rc:return t.payload;case R.ih:return e;case R.Qc:return t.payload._payload;case R.hh:return e;case R.De:return t.payload;default:return e}},salesMade:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Gf:return t.payload;case R.V:case R.qf:case R.P:default:return e}},assignResponsible:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.gf:return t.payload;case R.Qg:return[];case R.ke:return t.payload;default:return e}},directColletion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.xc?t.payload:e},legalizeDocument:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.uf:return t.payload;case R.Jh:return e;case R.we:return t.payload;case R.Wg:default:return e}},deed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.q:return t.payload;case R.Fg:return t.state;case R.Jc:return t.payload;default:return e}},desistSale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.qc:return t.payload._payload.length>0?t.payload._payload[0]:t.payload._payload;case R.qh:case R.Ab:return t.payload._payload;case R.Ie:return t.payload;default:return e}},trustColletion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Dc?t.payload:e},reformRequestBySale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rf,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Zf:return Object(j.a)(Object(j.a)(Object(j.a)({},e),af),{},{isFetchingAllReformRequest:!0});case R.Bc:return Object(j.a)(Object(j.a)(Object(j.a)({},t.payload._payload),af),{},{isFetchingAllReformRequest:!1,errorAllReformRequest:!1});case R.ic:return Object(j.a)(Object(j.a)({},e),{},{isFetchingAllReformRequest:!1,errorAllReformRequest:!0});case R.Wf:return Object(j.a)(Object(j.a)(Object(j.a)({},e),af),{},{isAddingReformRequest:!0});case R.C:return Object(j.a)(Object(j.a)({},e),{},{isAddingReformRequest:!1});case R.fc:return Object(j.a)(Object(j.a)({},e),{},{isAddingReformRequest:!1,errorAddReformRequest:!0});case R.bg:return Object(j.a)(Object(j.a)(Object(j.a)({},e),af),{},{isDeletingReformRequest:!0});case R.Vd:return Object(j.a)(Object(j.a)({},e),{},{isDeletingReformRequest:!1,errorDeletingReformRequest:!1});case R.kc:return Object(j.a)(Object(j.a)({},e),{},{isDeletingReformRequest:!1,errorDeletingReformRequest:!0});case R.dg:return Object(j.a)(Object(j.a)(Object(j.a)({},e),af),{},{isUpdatingReformRequest:!0});case R.kh:return Object(j.a)(Object(j.a)({},e),{},{isUpdatingReformRequest:!1});case R.mc:return Object(j.a)(Object(j.a)({},e),{},{isUpdatingReformRequest:!1,errorUpdatingReformRequest:!0});case R.bb:return Wi.a.cloneDeep(rf);default:return e}},salesWhitReformRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Cc?t.payload._payload:e},lastPaymentfiduciarytrustColletion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Zc?t.payload:e},reportRequestReformsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Tc?Object(j.a)({},t.payload._payload):e},reportExcelRequestReformsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Lc?Object(j.a)({},t.payload._payload):e},stateRequestReformsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Wc?Object(j.a)({},t.payload):e},potentialClientsReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Pc?t.payload:e},reportSalesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Uc?Object(j.a)({},t.payload._payload):e},commercial_managementReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Mc?Object(j.a)({},t.payload._payload):e},posSaleReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:of,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.Xf:return Object(j.a)(Object(j.a)(Object(j.a)({},e),cf),{},{isFetchingAllPosSale:!0});case R.yc:return Object(j.a)(Object(j.a)({},e),{},{all_pos_sale_requests:t.payload._payload,isFetchingAllPosSale:!1});case R.gc:return Object(j.a)(Object(j.a)({},e),{},{isFetchingAllPosSale:!1,errorAllPosSale:!0});case R.Yf:return Object(j.a)(Object(j.a)(Object(j.a)({},e),cf),{},{isFetchingAllPosSaleBySaleId:!0});case R.zc:return Object(j.a)(Object(j.a)({},t.payload._payload),{},{isFetchingAllPosSaleBySaleId:!1,all_pos_sale_requests:e.all_pos_sale_requests},cf);case R.hc:return Object(j.a)(Object(j.a)({},e),{},{isFetchingAllPosSaleBySaleId:!1,errorAllPosSaleBySaleId:!0});case R.Vf:return Object(j.a)(Object(j.a)(Object(j.a)({},e),cf),{},{isAddingPosSale:!0});case R.y:return Object(j.a)(Object(j.a)({},e),{},{isAddingPosSale:!1});case R.ec:return Object(j.a)(Object(j.a)({},e),{},{isAddingPosSale:!1,errorAddPosSale:!0});case R.ag:return Object(j.a)(Object(j.a)(Object(j.a)({},e),cf),{},{isDeletingPosSale:!0});case R.Rd:return Object(j.a)(Object(j.a)({},e),{},{isDeletingPosSale:!1});case R.jc:return Object(j.a)(Object(j.a)({},e),{},{isDeletingPosSale:!1,errorDeletingPosSale:!0});case R.cg:return Object(j.a)(Object(j.a)(Object(j.a)({},e),cf),{},{isUpdatingPosSale:!0});case R.Yg:return Object(j.a)(Object(j.a)({},e),{},{isUpdatingPosSale:!1});case R.lc:return Object(j.a)(Object(j.a)({},e),{},{isUpdatingPosSale:!1,errorUpdatingPosSale:!0});case R.Z:return Wi.a.cloneDeep(of);case R.ab:return Object(j.a)(Object(j.a)(Object(j.a)({},of),cf),{},{all_pos_sale_requests:e.all_pos_sale_requests});default:return e}},sendEmailDirectCollection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.We?t.payload:e},EditProject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===R.Fc?t.payload:e}}),lf=sf,df=n(325);var uf=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$p.c;return Object($p.d)(lf,e,t(Object($p.a)(df.a)))}();i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(s.a,{store:uf,children:Object(h.jsx)(o.a,{children:Object(h.jsx)(Xp,{})})})}),document.getElementById("root"))}},[[584,1,2]]]);
//# sourceMappingURL=main.92c1bdd6.chunk.js.map